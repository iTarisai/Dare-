function windowError(s,u,l){var m=["originalCreateNotification"];for(var n=0;n<m.length;n++){if(s.indexOf(m[n])>-1){return false}}try{var t=localStorage.getItem("accounts").last;var q=JSON.parse(localStorage[JSON.parse(localStorage.accounts).last]).lastOpenProject;var o=JSON.parse(localStorage.accounts).last}catch(p){var t="-"}var r=encodeURIComponent(s+" "+u+" "+l+"| accountId: "+o+", projectId: "+q+", lastPreviewProject: "+project.previewRenderer.lastProjectId);xmlhttp=new XMLHttpRequest();xmlhttp.open("POST","error/",true);xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");xmlhttp.send("data="+r);return false}
/*! jQuery v1.7.2 jquery.com | jquery.org/license */
(function(a,b){function cy(a){return f.isWindow(a)?a:a.nodeType===9?a.defaultView||a.parentWindow:!1}function cu(a){if(!cj[a]){var b=c.body,d=f("<"+a+">").appendTo(b),e=d.css("display");d.remove();if(e==="none"||e===""){ck||(ck=c.createElement("iframe"),ck.frameBorder=ck.width=ck.height=0),b.appendChild(ck);if(!cl||!ck.createElement){cl=(ck.contentWindow||ck.contentDocument).document,cl.write((f.support.boxModel?"<!doctype html>":"")+"<html><body>"),cl.close()}d=cl.createElement(a),cl.body.appendChild(d),e=f.css(d,"display"),b.removeChild(ck)}cj[a]=e}return cj[a]}function ct(a,b){var c={};f.each(cp.concat.apply([],cp.slice(0,b)),function(){c[this]=a});return c}function cs(){cq=b}function cr(){setTimeout(cs,0);return cq=f.now()}function ci(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}function ch(){try{return new a.XMLHttpRequest}catch(b){}}function cb(a,c){a.dataFilter&&(c=a.dataFilter(c,a.dataType));var d=a.dataTypes,e={},g,h,i=d.length,j,k=d[0],l,m,n,o,p;for(g=1;g<i;g++){if(g===1){for(h in a.converters){typeof h=="string"&&(e[h.toLowerCase()]=a.converters[h])}}l=k,k=d[g];if(k==="*"){k=l}else{if(l!=="*"&&l!==k){m=l+" "+k,n=e[m]||e["* "+k];if(!n){p=b;for(o in e){j=o.split(" ");if(j[0]===l||j[0]==="*"){p=e[j[1]+" "+k];if(p){o=e[o],o===!0?n=p:p===!0&&(n=o);break}}}}!n&&!p&&f.error("No conversion from "+m.replace(" "," to ")),n!==!0&&(c=n?n(c):p(o(c)))}}}return c}function ca(a,c,d){var e=a.contents,f=a.dataTypes,g=a.responseFields,h,i,j,k;for(i in g){i in d&&(c[g[i]]=d[i])}while(f[0]==="*"){f.shift(),h===b&&(h=a.mimeType||c.getResponseHeader("content-type"))}if(h){for(i in e){if(e[i]&&e[i].test(h)){f.unshift(i);break}}}if(f[0] in d){j=f[0]}else{for(i in d){if(!f[0]||a.converters[i+" "+f[0]]){j=i;break}k||(k=i)}j=j||k}if(j){j!==f[0]&&f.unshift(j);return d[j]}}function b_(a,b,c,d){if(f.isArray(b)){f.each(b,function(b,e){c||bD.test(a)?d(a,e):b_(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)})}else{if(!c&&f.type(b)==="object"){for(var e in b){b_(a+"["+e+"]",b[e],c,d)}}else{d(a,b)}}}function b$(a,c){var d,e,g=f.ajaxSettings.flatOptions||{};for(d in c){c[d]!==b&&((g[d]?a:e||(e={}))[d]=c[d])}e&&f.extend(!0,a,e)}function bZ(a,c,d,e,f,g){f=f||c.dataTypes[0],g=g||{},g[f]=!0;var h=a[f],i=0,j=h?h.length:0,k=a===bS,l;for(;i<j&&(k||!l);i++){l=h[i](c,d,e),typeof l=="string"&&(!k||g[l]?l=b:(c.dataTypes.unshift(l),l=bZ(a,c,d,e,l,g)))}(k||!l)&&!g["*"]&&(l=bZ(a,c,d,e,"*",g));return l}function bY(a){return function(b,c){typeof b!="string"&&(c=b,b="*");if(f.isFunction(c)){var d=b.toLowerCase().split(bO),e=0,g=d.length,h,i,j;for(;e<g;e++){h=d[e],j=/^\+/.test(h),j&&(h=h.substr(1)||"*"),i=a[h]=a[h]||[],i[j?"unshift":"push"](c)}}}}function bB(a,b,c){var d=b==="width"?a.offsetWidth:a.offsetHeight,e=b==="width"?1:0,g=4;if(d>0){if(c!=="border"){for(;e<g;e+=2){c||(d-=parseFloat(f.css(a,"padding"+bx[e]))||0),c==="margin"?d+=parseFloat(f.css(a,c+bx[e]))||0:d-=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0}}return d+"px"}d=by(a,b);if(d<0||d==null){d=a.style[b]}if(bt.test(d)){return d}d=parseFloat(d)||0;if(c){for(;e<g;e+=2){d+=parseFloat(f.css(a,"padding"+bx[e]))||0,c!=="padding"&&(d+=parseFloat(f.css(a,"border"+bx[e]+"Width"))||0),c==="margin"&&(d+=parseFloat(f.css(a,c+bx[e]))||0)}}return d+"px"}function bo(a){var b=c.createElement("div");bh.appendChild(b),b.innerHTML=a.outerHTML;return b.firstChild}function bn(a){var b=(a.nodeName||"").toLowerCase();b==="input"?bm(a):b!=="script"&&typeof a.getElementsByTagName!="undefined"&&f.grep(a.getElementsByTagName("input"),bm)}function bm(a){if(a.type==="checkbox"||a.type==="radio"){a.defaultChecked=a.checked}}function bl(a){return typeof a.getElementsByTagName!="undefined"?a.getElementsByTagName("*"):typeof a.querySelectorAll!="undefined"?a.querySelectorAll("*"):[]}function bk(a,b){var c;b.nodeType===1&&(b.clearAttributes&&b.clearAttributes(),b.mergeAttributes&&b.mergeAttributes(a),c=b.nodeName.toLowerCase(),c==="object"?b.outerHTML=a.outerHTML:c!=="input"||a.type!=="checkbox"&&a.type!=="radio"?c==="option"?b.selected=a.defaultSelected:c==="input"||c==="textarea"?b.defaultValue=a.defaultValue:c==="script"&&b.text!==a.text&&(b.text=a.text):(a.checked&&(b.defaultChecked=b.checked=a.checked),b.value!==a.value&&(b.value=a.value)),b.removeAttribute(f.expando),b.removeAttribute("_submit_attached"),b.removeAttribute("_change_attached"))}function bj(a,b){if(b.nodeType===1&&!!f.hasData(a)){var c,d,e,g=f._data(a),h=f._data(b,g),i=g.events;if(i){delete h.handle,h.events={};for(c in i){for(d=0,e=i[c].length;d<e;d++){f.event.add(b,c,i[c][d])}}}h.data&&(h.data=f.extend({},h.data))}}function bi(a,b){return f.nodeName(a,"table")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function U(a){var b=V.split("|"),c=a.createDocumentFragment();if(c.createElement){while(b.length){c.createElement(b.pop())}}return c}function T(a,b,c){b=b||0;if(f.isFunction(b)){return f.grep(a,function(a,d){var e=!!b.call(a,d,a);return e===c})}if(b.nodeType){return f.grep(a,function(a,d){return a===b===c})}if(typeof b=="string"){var d=f.grep(a,function(a){return a.nodeType===1});if(O.test(b)){return f.filter(b,d,!c)}b=f.filter(b,d)}return f.grep(a,function(a,d){return f.inArray(a,b)>=0===c})}function S(a){return !a||!a.parentNode||a.parentNode.nodeType===11}function K(){return !0}function J(){return !1}function n(a,b,c){var d=b+"defer",e=b+"queue",g=b+"mark",h=f._data(a,d);h&&(c==="queue"||!f._data(a,e))&&(c==="mark"||!f._data(a,g))&&setTimeout(function(){!f._data(a,e)&&!f._data(a,g)&&(f.removeData(a,d,!0),h.fire())},0)}function m(a){for(var b in a){if(b==="data"&&f.isEmptyObject(a[b])){continue}if(b!=="toJSON"){return !1}}return !0}function l(a,c,d){if(d===b&&a.nodeType===1){var e="data-"+c.replace(k,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:f.isNumeric(d)?+d:j.test(d)?f.parseJSON(d):d}catch(g){}f.data(a,c,d)}else{d=b}}return d}function h(a){var b=g[a]={},c,d;a=a.split(/\s+/);for(c=0,d=a.length;c<d;c++){b[a[c]]=!0}return b}var c=a.document,d=a.navigator,e=a.location,f=function(){function J(){if(!e.isReady){try{c.documentElement.doScroll("left")}catch(a){setTimeout(J,1);return}e.ready()}}var e=function(a,b){return new e.fn.init(a,b,h)},f=a.jQuery,g=a.$,h,i=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,j=/\S/,k=/^\s+/,l=/\s+$/,m=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,n=/^[\],:{}\s]*$/,o=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,p=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,q=/(?:^|:|,)(?:\s*\[)+/g,r=/(webkit)[ \/]([\w.]+)/,s=/(opera)(?:.*version)?[ \/]([\w.]+)/,t=/(msie) ([\w.]+)/,u=/(mozilla)(?:.*? rv:([\w.]+))?/,v=/-([a-z]|[0-9])/ig,w=/^-ms-/,x=function(a,b){return(b+"").toUpperCase()},y=d.userAgent,z,A,B,C=Object.prototype.toString,D=Object.prototype.hasOwnProperty,E=Array.prototype.push,F=Array.prototype.slice,G=String.prototype.trim,H=Array.prototype.indexOf,I={};e.fn=e.prototype={constructor:e,init:function(a,d,f){var g,h,j,k;if(!a){return this}if(a.nodeType){this.context=this[0]=a,this.length=1;return this}if(a==="body"&&!d&&c.body){this.context=c,this[0]=c.body,this.selector=a,this.length=1;return this}if(typeof a=="string"){a.charAt(0)!=="<"||a.charAt(a.length-1)!==">"||a.length<3?g=i.exec(a):g=[null,a,null];if(g&&(g[1]||!d)){if(g[1]){d=d instanceof e?d[0]:d,k=d?d.ownerDocument||d:c,j=m.exec(a),j?e.isPlainObject(d)?(a=[c.createElement(j[1])],e.fn.attr.call(a,d,!0)):a=[k.createElement(j[1])]:(j=e.buildFragment([g[1]],[k]),a=(j.cacheable?e.clone(j.fragment):j.fragment).childNodes);return e.merge(this,a)}h=c.getElementById(g[2]);if(h&&h.parentNode){if(h.id!==g[2]){return f.find(a)}this.length=1,this[0]=h}this.context=c,this.selector=a;return this}return !d||d.jquery?(d||f).find(a):this.constructor(d).find(a)}if(e.isFunction(a)){return f.ready(a)}a.selector!==b&&(this.selector=a.selector,this.context=a.context);return e.makeArray(a,this)},selector:"",jquery:"1.7.2",length:0,size:function(){return this.length},toArray:function(){return F.call(this,0)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a,b,c){var d=this.constructor();e.isArray(a)?E.apply(d,a):e.merge(d,a),d.prevObject=this,d.context=this.context,b==="find"?d.selector=this.selector+(this.selector?" ":"")+c:b&&(d.selector=this.selector+"."+b+"("+c+")");return d},each:function(a,b){return e.each(this,a,b)},ready:function(a){e.bindReady(),A.add(a);return this},eq:function(a){a=+a;return a===-1?this.slice(a):this.slice(a,a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(F.apply(this,arguments),"slice",F.call(arguments).join(","))},map:function(a){return this.pushStack(e.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:E,sort:[].sort,splice:[].splice},e.fn.init.prototype=e.fn,e.extend=e.fn.extend=function(){var a,c,d,f,g,h,i=arguments[0]||{},j=1,k=arguments.length,l=!1;typeof i=="boolean"&&(l=i,i=arguments[1]||{},j=2),typeof i!="object"&&!e.isFunction(i)&&(i={}),k===j&&(i=this,--j);for(;j<k;j++){if((a=arguments[j])!=null){for(c in a){d=i[c],f=a[c];if(i===f){continue}l&&f&&(e.isPlainObject(f)||(g=e.isArray(f)))?(g?(g=!1,h=d&&e.isArray(d)?d:[]):h=d&&e.isPlainObject(d)?d:{},i[c]=e.extend(l,h,f)):f!==b&&(i[c]=f)}}}return i},e.extend({noConflict:function(b){a.$===e&&(a.$=g),b&&a.jQuery===e&&(a.jQuery=f);return e},isReady:!1,readyWait:1,holdReady:function(a){a?e.readyWait++:e.ready(!0)},ready:function(a){if(a===!0&&!--e.readyWait||a!==!0&&!e.isReady){if(!c.body){return setTimeout(e.ready,1)}e.isReady=!0;if(a!==!0&&--e.readyWait>0){return}A.fireWith(c,[e]),e.fn.trigger&&e(c).trigger("ready").off("ready")}},bindReady:function(){if(!A){A=e.Callbacks("once memory");if(c.readyState==="complete"){return setTimeout(e.ready,1)}if(c.addEventListener){c.addEventListener("DOMContentLoaded",B,!1),a.addEventListener("load",e.ready,!1)}else{if(c.attachEvent){c.attachEvent("onreadystatechange",B),a.attachEvent("onload",e.ready);var b=!1;try{b=a.frameElement==null}catch(d){}c.documentElement.doScroll&&b&&J()}}}},isFunction:function(a){return e.type(a)==="function"},isArray:Array.isArray||function(a){return e.type(a)==="array"},isWindow:function(a){return a!=null&&a==a.window},isNumeric:function(a){return !isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):I[C.call(a)]||"object"},isPlainObject:function(a){if(!a||e.type(a)!=="object"||a.nodeType||e.isWindow(a)){return !1}try{if(a.constructor&&!D.call(a,"constructor")&&!D.call(a.constructor.prototype,"isPrototypeOf")){return !1}}catch(c){return !1}var d;for(d in a){}return d===b||D.call(a,d)},isEmptyObject:function(a){for(var b in a){return !1}return !0},error:function(a){throw new Error(a)},parseJSON:function(b){if(typeof b!="string"||!b){return null}b=e.trim(b);if(a.JSON&&a.JSON.parse){return a.JSON.parse(b)}if(n.test(b.replace(o,"@").replace(p,"]").replace(q,""))){return(new Function("return "+b))()}e.error("Invalid JSON: "+b)},parseXML:function(c){if(typeof c!="string"||!c){return null}var d,f;try{a.DOMParser?(f=new DOMParser,d=f.parseFromString(c,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(c))}catch(g){d=b}(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&e.error("Invalid XML: "+c);return d},noop:function(){},globalEval:function(b){b&&j.test(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(w,"ms-").replace(v,x)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toUpperCase()===b.toUpperCase()},each:function(a,c,d){var f,g=0,h=a.length,i=h===b||e.isFunction(a);if(d){if(i){for(f in a){if(c.apply(a[f],d)===!1){break}}}else{for(;g<h;){if(c.apply(a[g++],d)===!1){break}}}}else{if(i){for(f in a){if(c.call(a[f],f,a[f])===!1){break}}}else{for(;g<h;){if(c.call(a[g],g,a[g++])===!1){break}}}}return a},trim:G?function(a){return a==null?"":G.call(a)}:function(a){return a==null?"":(a+"").replace(k,"").replace(l,"")},makeArray:function(a,b){var c=b||[];if(a!=null){var d=e.type(a);a.length==null||d==="string"||d==="function"||d==="regexp"||e.isWindow(a)?E.call(c,a):e.merge(c,a)}return c},inArray:function(a,b,c){var d;if(b){if(H){return H.call(b,a,c)}d=b.length,c=c?c<0?Math.max(0,d+c):c:0;for(;c<d;c++){if(c in b&&b[c]===a){return c}}}return -1},merge:function(a,c){var d=a.length,e=0;if(typeof c.length=="number"){for(var f=c.length;e<f;e++){a[d++]=c[e]}}else{while(c[e]!==b){a[d++]=c[e++]}}a.length=d;return a},grep:function(a,b,c){var d=[],e;c=!!c;for(var f=0,g=a.length;f<g;f++){e=!!b(a[f],f),c!==e&&d.push(a[f])}return d},map:function(a,c,d){var f,g,h=[],i=0,j=a.length,k=a instanceof e||j!==b&&typeof j=="number"&&(j>0&&a[0]&&a[j-1]||j===0||e.isArray(a));if(k){for(;i<j;i++){f=c(a[i],i,d),f!=null&&(h[h.length]=f)}}else{for(g in a){f=c(a[g],g,d),f!=null&&(h[h.length]=f)}}return h.concat.apply([],h)},guid:1,proxy:function(a,c){if(typeof c=="string"){var d=a[c];c=a,a=d}if(!e.isFunction(a)){return b}var f=F.call(arguments,2),g=function(){return a.apply(c,f.concat(F.call(arguments)))};g.guid=a.guid=a.guid||g.guid||e.guid++;return g},access:function(a,c,d,f,g,h,i){var j,k=d==null,l=0,m=a.length;if(d&&typeof d=="object"){for(l in d){e.access(a,c,l,d[l],1,h,f)}g=1}else{if(f!==b){j=i===b&&e.isFunction(f),k&&(j?(j=c,c=function(a,b,c){return j.call(e(a),c)}):(c.call(a,f),c=null));if(c){for(;l<m;l++){c(a[l],d,j?f.call(a[l],l,c(a[l],d)):f,i)}}g=1}}return g?a:k?c.call(a):m?c(a[0],d):h},now:function(){return(new Date).getTime()},uaMatch:function(a){a=a.toLowerCase();var b=r.exec(a)||s.exec(a)||t.exec(a)||a.indexOf("compatible")<0&&u.exec(a)||[];return{browser:b[1]||"",version:b[2]||"0"}},sub:function(){function a(b,c){return new a.fn.init(b,c)}e.extend(!0,a,this),a.superclass=this,a.fn=a.prototype=this(),a.fn.constructor=a,a.sub=this.sub,a.fn.init=function(d,f){f&&f instanceof e&&!(f instanceof a)&&(f=a(f));return e.fn.init.call(this,d,f,b)},a.fn.init.prototype=a.fn;var b=a(c);return a},browser:{}}),e.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(a,b){I["[object "+b+"]"]=b.toLowerCase()}),z=e.uaMatch(y),z.browser&&(e.browser[z.browser]=!0,e.browser.version=z.version),e.browser.webkit&&(e.browser.safari=!0),j.test(" ")&&(k=/^[\s\xA0]+/,l=/[\s\xA0]+$/),h=e(c),c.addEventListener?B=function(){c.removeEventListener("DOMContentLoaded",B,!1),e.ready()}:c.attachEvent&&(B=function(){c.readyState==="complete"&&(c.detachEvent("onreadystatechange",B),e.ready())});return e}(),g={};f.Callbacks=function(a){a=a?g[a]||h(a):{};var c=[],d=[],e,i,j,k,l,m,n=function(b){var d,e,g,h,i;for(d=0,e=b.length;d<e;d++){g=b[d],h=f.type(g),h==="array"?n(g):h==="function"&&(!a.unique||!p.has(g))&&c.push(g)}},o=function(b,f){f=f||[],e=!a.memory||[b,f],i=!0,j=!0,m=k||0,k=0,l=c.length;for(;c&&m<l;m++){if(c[m].apply(b,f)===!1&&a.stopOnFalse){e=!0;break}}j=!1,c&&(a.once?e===!0?p.disable():c=[]:d&&d.length&&(e=d.shift(),p.fireWith(e[0],e[1])))},p={add:function(){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this},remove:function(){if(c){var b=arguments,d=0,e=b.length;for(;d<e;d++){for(var f=0;f<c.length;f++){if(b[d]===c[f]){j&&f<=l&&(l--,f<=m&&m--),c.splice(f--,1);if(a.unique){break}}}}}return this},has:function(a){if(c){var b=0,d=c.length;for(;b<d;b++){if(a===c[b]){return !0}}}return !1},empty:function(){c=[];return this},disable:function(){c=d=e=b;return this},disabled:function(){return !c},lock:function(){d=b,(!e||e===!0)&&p.disable();return this},locked:function(){return !d},fireWith:function(b,c){d&&(j?a.once||d.push([b,c]):(!a.once||!e)&&o(b,c));return this},fire:function(){p.fireWith(this,arguments);return this},fired:function(){return !!i}};return p};var i=[].slice;f.extend({Deferred:function(a){var b=f.Callbacks("once memory"),c=f.Callbacks("once memory"),d=f.Callbacks("memory"),e="pending",g={resolve:b,reject:c,notify:d},h={done:b.add,fail:c.add,progress:d.add,state:function(){return e},isResolved:b.fired,isRejected:c.fired,then:function(a,b,c){i.done(a).fail(b).progress(c);return this},always:function(){i.done.apply(i,arguments).fail.apply(i,arguments);return this},pipe:function(a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()},promise:function(a){if(a==null){a=h}else{for(var b in h){a[b]=h[b]}}return a}},i=h.promise({}),j;for(j in g){i[j]=g[j].fire,i[j+"With"]=g[j].fireWith}i.done(function(){e="resolved"},c.disable,d.lock).fail(function(){e="rejected"},b.disable,d.lock),a&&a.call(i,i);return i},when:function(a){function m(a){return function(b){e[a]=arguments.length>1?i.call(arguments,0):b,j.notifyWith(k,e)}}function l(a){return function(c){b[a]=arguments.length>1?i.call(arguments,0):c,--g||j.resolveWith(j,b)}}var b=i.call(arguments,0),c=0,d=b.length,e=Array(d),g=d,h=d,j=d<=1&&a&&f.isFunction(a.promise)?a:f.Deferred(),k=j.promise();if(d>1){for(;c<d;c++){b[c]&&b[c].promise&&f.isFunction(b[c].promise)?b[c].promise().then(l(c),j.reject,m(c)):--g}g||j.resolveWith(j,b)}else{j!==a&&j.resolveWith(j,d?[a]:[])}return k}}),f.support=function(){var b,d,e,g,h,i,j,k,l,m,n,o,p=c.createElement("div"),q=c.documentElement;p.setAttribute("className","t"),p.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>",d=p.getElementsByTagName("*"),e=p.getElementsByTagName("a")[0];if(!d||!d.length||!e){return{}}g=c.createElement("select"),h=g.appendChild(c.createElement("option")),i=p.getElementsByTagName("input")[0],b={leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(e.getAttribute("style")),hrefNormalized:e.getAttribute("href")==="/a",opacity:/^0.55/.test(e.style.opacity),cssFloat:!!e.style.cssFloat,checkOn:i.value==="on",optSelected:h.selected,getSetAttribute:p.className!=="t",enctype:!!c.createElement("form").enctype,html5Clone:c.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,pixelMargin:!0},f.boxModel=b.boxModel=c.compatMode==="CSS1Compat",i.checked=!0,b.noCloneChecked=i.cloneNode(!0).checked,g.disabled=!0,b.optDisabled=!h.disabled;try{delete p.test}catch(r){b.deleteExpando=!1}!p.addEventListener&&p.attachEvent&&p.fireEvent&&(p.attachEvent("onclick",function(){b.noCloneEvent=!1}),p.cloneNode(!0).fireEvent("onclick")),i=c.createElement("input"),i.value="t",i.setAttribute("type","radio"),b.radioValue=i.value==="t",i.setAttribute("checked","checked"),i.setAttribute("name","t"),p.appendChild(i),j=c.createDocumentFragment(),j.appendChild(p.lastChild),b.checkClone=j.cloneNode(!0).cloneNode(!0).lastChild.checked,b.appendChecked=i.checked,j.removeChild(i),j.appendChild(p);if(p.attachEvent){for(n in {submit:1,change:1,focusin:1}){m="on"+n,o=m in p,o||(p.setAttribute(m,"return;"),o=typeof p[m]=="function"),b[n+"Bubbles"]=o}}j.removeChild(p),j=g=h=p=i=null,f(function(){var d,e,g,h,i,j,l,m,n,q,r,s,t,u=c.getElementsByTagName("body")[0];!u||(m=1,t="padding:0;margin:0;border:",r="position:absolute;top:0;left:0;width:1px;height:1px;",s=t+"0;visibility:hidden;",n="style='"+r+t+"5px solid #000;",q="<div "+n+"display:block;'><div style='"+t+"0;display:block;overflow:hidden;'></div></div><table "+n+"' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>",d=c.createElement("div"),d.style.cssText=s+"width:0;height:0;position:static;top:0;margin-top:"+m+"px",u.insertBefore(d,u.firstChild),p=c.createElement("div"),d.appendChild(p),p.innerHTML="<table><tr><td style='"+t+"0;display:none'></td><td>t</td></tr></table>",k=p.getElementsByTagName("td"),o=k[0].offsetHeight===0,k[0].style.display="",k[1].style.display="none",b.reliableHiddenOffsets=o&&k[0].offsetHeight===0,a.getComputedStyle&&(p.innerHTML="",l=c.createElement("div"),l.style.width="0",l.style.marginRight="0",p.style.width="2px",p.appendChild(l),b.reliableMarginRight=(parseInt((a.getComputedStyle(l,null)||{marginRight:0}).marginRight,10)||0)===0),typeof p.style.zoom!="undefined"&&(p.innerHTML="",p.style.width=p.style.padding="1px",p.style.border=0,p.style.overflow="hidden",p.style.display="inline",p.style.zoom=1,b.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.style.overflow="visible",p.innerHTML="<div style='width:5px;'></div>",b.shrinkWrapBlocks=p.offsetWidth!==3),p.style.cssText=r+s,p.innerHTML=q,e=p.firstChild,g=e.firstChild,i=e.nextSibling.firstChild.firstChild,j={doesNotAddBorder:g.offsetTop!==5,doesAddBorderForTableAndCells:i.offsetTop===5},g.style.position="fixed",g.style.top="20px",j.fixedPosition=g.offsetTop===20||g.offsetTop===15,g.style.position=g.style.top="",e.style.overflow="hidden",e.style.position="relative",j.subtractsBorderForOverflowNotVisible=g.offsetTop===-5,j.doesNotIncludeMarginInBodyOffset=u.offsetTop!==m,a.getComputedStyle&&(p.style.marginTop="1%",b.pixelMargin=(a.getComputedStyle(p,null)||{marginTop:0}).marginTop!=="1%"),typeof d.style.zoom!="undefined"&&(d.style.zoom=1),u.removeChild(d),l=p=d=null,f.extend(b,j))});return b}();var j=/^(?:\{.*\}|\[.*\])$/,k=/([A-Z])/g;f.extend({cache:{},uuid:0,expando:"jQuery"+(f.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(a){a=a.nodeType?f.cache[a[f.expando]]:a[f.expando];return !!a&&!m(a)},data:function(a,c,d,e){if(!!f.acceptData(a)){var g,h,i,j=f.expando,k=typeof c=="string",l=a.nodeType,m=l?f.cache:a,n=l?a[j]:a[j]&&j,o=c==="events";if((!n||!m[n]||!o&&!e&&!m[n].data)&&k&&d===b){return}n||(l?a[j]=n=++f.uuid:n=j),m[n]||(m[n]={},l||(m[n].toJSON=f.noop));if(typeof c=="object"||typeof c=="function"){e?m[n]=f.extend(m[n],c):m[n].data=f.extend(m[n].data,c)}g=h=m[n],e||(h.data||(h.data={}),h=h.data),d!==b&&(h[f.camelCase(c)]=d);if(o&&!h[c]){return g.events}k?(i=h[c],i==null&&(i=h[f.camelCase(c)])):i=h;return i}},removeData:function(a,b,c){if(!!f.acceptData(a)){var d,e,g,h=f.expando,i=a.nodeType,j=i?f.cache:a,k=i?a[h]:h;if(!j[k]){return}if(b){d=c?j[k]:j[k].data;if(d){f.isArray(b)||(b in d?b=[b]:(b=f.camelCase(b),b in d?b=[b]:b=b.split(" ")));for(e=0,g=b.length;e<g;e++){delete d[b[e]]}if(!(c?m:f.isEmptyObject)(d)){return}}}if(!c){delete j[k].data;if(!m(j[k])){return}}f.support.deleteExpando||!j.setInterval?delete j[k]:j[k]=null,i&&(f.support.deleteExpando?delete a[h]:a.removeAttribute?a.removeAttribute(h):a[h]=null)}},_data:function(a,b,c){return f.data(a,b,c,!0)},acceptData:function(a){if(a.nodeName){var b=f.noData[a.nodeName.toLowerCase()];if(b){return b!==!0&&a.getAttribute("classid")===b}}return !0}}),f.fn.extend({data:function(a,c){var d,e,g,h,i,j=this[0],k=0,m=null;if(a===b){if(this.length){m=f.data(j);if(j.nodeType===1&&!f._data(j,"parsedAttrs")){g=j.attributes;for(i=g.length;k<i;k++){h=g[k].name,h.indexOf("data-")===0&&(h=f.camelCase(h.substring(5)),l(j,h,m[h]))}f._data(j,"parsedAttrs",!0)}}return m}if(typeof a=="object"){return this.each(function(){f.data(this,a)})}d=a.split(".",2),d[1]=d[1]?"."+d[1]:"",e=d[1]+"!";return f.access(this,function(c){if(c===b){m=this.triggerHandler("getData"+e,[d[0]]),m===b&&j&&(m=f.data(j,a),m=l(j,a,m));return m===b&&d[1]?this.data(d[0]):m}d[1]=c,this.each(function(){var b=f(this);b.triggerHandler("setData"+e,d),f.data(this,a,c),b.triggerHandler("changeData"+e,d)})},null,c,arguments.length>1,null,!1)},removeData:function(a){return this.each(function(){f.removeData(this,a)})}}),f.extend({_mark:function(a,b){a&&(b=(b||"fx")+"mark",f._data(a,b,(f._data(a,b)||0)+1))},_unmark:function(a,b,c){a!==!0&&(c=b,b=a,a=!1);if(b){c=c||"fx";var d=c+"mark",e=a?0:(f._data(b,d)||1)-1;e?f._data(b,d,e):(f.removeData(b,d,!0),n(b,c,"mark"))}},queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue",d=f._data(a,b),c&&(!d||f.isArray(c)?d=f._data(a,b,f.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=f.queue(a,b),d=c.shift(),e={};d==="inprogress"&&(d=c.shift()),d&&(b==="fx"&&c.unshift("inprogress"),f._data(a,b+".run",e),d.call(a,function(){f.dequeue(a,b)},e)),c.length||(f.removeData(a,b+"queue "+b+".run",!0),n(a,b,"queue"))}}),f.fn.extend({queue:function(a,c){var d=2;typeof a!="string"&&(c=a,a="fx",d--);if(arguments.length<d){return f.queue(this[0],a)}return c===b?this:this.each(function(){var b=f.queue(this,a,c);a==="fx"&&b[0]!=="inprogress"&&f.dequeue(this,a)})},dequeue:function(a){return this.each(function(){f.dequeue(this,a)})},delay:function(a,b){a=f.fx?f.fx.speeds[a]||a:a,b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){function m(){--h||d.resolveWith(e,[e])}typeof a!="string"&&(c=a,a=b),a=a||"fx";var d=f.Deferred(),e=this,g=e.length,h=1,i=a+"defer",j=a+"queue",k=a+"mark",l;while(g--){if(l=f.data(e[g],i,b,!0)||(f.data(e[g],j,b,!0)||f.data(e[g],k,b,!0))&&f.data(e[g],i,f.Callbacks("once memory"),!0)){h++,l.add(m)}}m();return d.promise(c)}});var o=/[\n\t\r]/g,p=/\s+/,q=/\r/g,r=/^(?:button|input)$/i,s=/^(?:button|input|object|select|textarea)$/i,t=/^a(?:rea)?$/i,u=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,v=f.support.getSetAttribute,w,x,y;f.fn.extend({attr:function(a,b){return f.access(this,f.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){f.removeAttr(this,a)})},prop:function(a,b){return f.access(this,f.prop,a,b,arguments.length>1)},removeProp:function(a){a=f.propFix[a]||a;return this.each(function(){try{this[a]=b,delete this[a]}catch(c){}})},addClass:function(a){var b,c,d,e,g,h,i;if(f.isFunction(a)){return this.each(function(b){f(this).addClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"){b=a.split(p);for(c=0,d=this.length;c<d;c++){e=this[c];if(e.nodeType===1){if(!e.className&&b.length===1){e.className=a}else{g=" "+e.className+" ";for(h=0,i=b.length;h<i;h++){~g.indexOf(" "+b[h]+" ")||(g+=b[h]+" ")}e.className=f.trim(g)}}}}return this},removeClass:function(a){var c,d,e,g,h,i,j;if(f.isFunction(a)){return this.each(function(b){f(this).removeClass(a.call(this,b,this.className))})}if(a&&typeof a=="string"||a===b){c=(a||"").split(p);for(d=0,e=this.length;d<e;d++){g=this[d];if(g.nodeType===1&&g.className){if(a){h=(" "+g.className+" ").replace(o," ");for(i=0,j=c.length;i<j;i++){h=h.replace(" "+c[i]+" "," ")}g.className=f.trim(h)}else{g.className=""}}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";if(f.isFunction(a)){return this.each(function(c){f(this).toggleClass(a.call(this,c,this.className,b),b)})}return this.each(function(){if(c==="string"){var e,g=0,h=f(this),i=b,j=a.split(p);while(e=j[g++]){i=d?i:!h.hasClass(e),h[i?"addClass":"removeClass"](e)}}else{if(c==="undefined"||c==="boolean"){this.className&&f._data(this,"__className__",this.className),this.className=this.className||a===!1?"":f._data(this,"__className__")||""}}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++){if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(o," ").indexOf(b)>-1){return !0}}return !1},val:function(a){var c,d,e,g=this[0];if(!!arguments.length){e=f.isFunction(a);return this.each(function(d){var g=f(this),h;if(this.nodeType===1){e?h=a.call(this,d,g.val()):h=a,h==null?h="":typeof h=="number"?h+="":f.isArray(h)&&(h=f.map(h,function(a){return a==null?"":a+""})),c=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!c||!("set" in c)||c.set(this,h,"value")===b){this.value=h}}})}if(g){c=f.valHooks[g.type]||f.valHooks[g.nodeName.toLowerCase()];if(c&&"get" in c&&(d=c.get(g,"value"))!==b){return d}d=g.value;return typeof d=="string"?d.replace(q,""):d==null?"":d}}}),f.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return !b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d,e,g=a.selectedIndex,h=[],i=a.options,j=a.type==="select-one";if(g<0){return null}c=j?g:0,d=j?g+1:i.length;for(;c<d;c++){e=i[c];if(e.selected&&(f.support.optDisabled?!e.disabled:e.getAttribute("disabled")===null)&&(!e.parentNode.disabled||!f.nodeName(e.parentNode,"optgroup"))){b=f(e).val();if(j){return b}h.push(b)}}if(j&&!h.length&&i.length){return f(i[g]).val()}return h},set:function(a,b){var c=f.makeArray(b);f(a).find("option").each(function(){this.selected=f.inArray(f(this).val(),c)>=0}),c.length||(a.selectedIndex=-1);return c}}},attrFn:{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0},attr:function(a,c,d,e){var g,h,i,j=a.nodeType;if(!!a&&j!==3&&j!==8&&j!==2){if(e&&c in f.attrFn){return f(a)[c](d)}if(typeof a.getAttribute=="undefined"){return f.prop(a,c,d)}i=j!==1||!f.isXMLDoc(a),i&&(c=c.toLowerCase(),h=f.attrHooks[c]||(u.test(c)?x:w));if(d!==b){if(d===null){f.removeAttr(a,c);return}if(h&&"set" in h&&i&&(g=h.set(a,d,c))!==b){return g}a.setAttribute(c,""+d);return d}if(h&&"get" in h&&i&&(g=h.get(a,c))!==null){return g}g=a.getAttribute(c);return g===null?b:g}},removeAttr:function(a,b){var c,d,e,g,h,i=0;if(b&&a.nodeType===1){d=b.toLowerCase().split(p),g=d.length;for(;i<g;i++){e=d[i],e&&(c=f.propFix[e]||e,h=u.test(e),h||f.attr(a,e,""),a.removeAttribute(v?e:c),h&&c in a&&(a[c]=!1))}}},attrHooks:{type:{set:function(a,b){if(r.test(a.nodeName)&&a.parentNode){f.error("type property can't be changed")}else{if(!f.support.radioValue&&b==="radio"&&f.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b),c&&(a.value=c);return b}}}},value:{get:function(a,b){if(w&&f.nodeName(a,"button")){return w.get(a,b)}return b in a?a.value:null},set:function(a,b,c){if(w&&f.nodeName(a,"button")){return w.set(a,b,c)}a.value=b}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(a,c,d){var e,g,h,i=a.nodeType;if(!!a&&i!==3&&i!==8&&i!==2){h=i!==1||!f.isXMLDoc(a),h&&(c=f.propFix[c]||c,g=f.propHooks[c]);return d!==b?g&&"set" in g&&(e=g.set(a,d,c))!==b?e:a[c]=d:g&&"get" in g&&(e=g.get(a,c))!==null?e:a[c]}},propHooks:{tabIndex:{get:function(a){var c=a.getAttributeNode("tabindex");return c&&c.specified?parseInt(c.value,10):s.test(a.nodeName)||t.test(a.nodeName)&&a.href?0:b}}}}),f.attrHooks.tabindex=f.propHooks.tabIndex,x={get:function(a,c){var d,e=f.prop(a,c);return e===!0||typeof e!="boolean"&&(d=a.getAttributeNode(c))&&d.nodeValue!==!1?c.toLowerCase():b},set:function(a,b,c){var d;b===!1?f.removeAttr(a,c):(d=f.propFix[c]||c,d in a&&(a[d]=!0),a.setAttribute(c,c.toLowerCase()));return c}},v||(y={name:!0,id:!0,coords:!0},w=f.valHooks.button={get:function(a,c){var d;d=a.getAttributeNode(c);return d&&(y[c]?d.nodeValue!=="":d.specified)?d.nodeValue:b},set:function(a,b,d){var e=a.getAttributeNode(d);e||(e=c.createAttribute(d),a.setAttributeNode(e));return e.nodeValue=b+""}},f.attrHooks.tabindex.set=w.set,f.each(["width","height"],function(a,b){f.attrHooks[b]=f.extend(f.attrHooks[b],{set:function(a,c){if(c===""){a.setAttribute(b,"auto");return c}}})}),f.attrHooks.contenteditable={get:w.get,set:function(a,b,c){b===""&&(b="false"),w.set(a,b,c)}}),f.support.hrefNormalized||f.each(["href","src","width","height"],function(a,c){f.attrHooks[c]=f.extend(f.attrHooks[c],{get:function(a){var d=a.getAttribute(c,2);return d===null?b:d}})}),f.support.style||(f.attrHooks.style={get:function(a){return a.style.cssText.toLowerCase()||b},set:function(a,b){return a.style.cssText=""+b}}),f.support.optSelected||(f.propHooks.selected=f.extend(f.propHooks.selected,{get:function(a){var b=a.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex);return null}})),f.support.enctype||(f.propFix.enctype="encoding"),f.support.checkOn||f.each(["radio","checkbox"],function(){f.valHooks[this]={get:function(a){return a.getAttribute("value")===null?"on":a.value}}}),f.each(["radio","checkbox"],function(){f.valHooks[this]=f.extend(f.valHooks[this],{set:function(a,b){if(f.isArray(b)){return a.checked=f.inArray(f(a).val(),b)>=0}}})});var z=/^(?:textarea|input|select)$/i,A=/^([^\.]*)?(?:\.(.+))?$/,B=/(?:^|\s)hover(\.\S+)?\b/,C=/^key/,D=/^(?:mouse|contextmenu)|click/,E=/^(?:focusinfocus|focusoutblur)$/,F=/^(\w*)(?:#([\w\-]+))?(?:\.([\w\-]+))?$/,G=function(a){var b=F.exec(a);b&&(b[1]=(b[1]||"").toLowerCase(),b[3]=b[3]&&new RegExp("(?:^|\\s)"+b[3]+"(?:\\s|$)"));return b},H=function(a,b){var c=a.attributes||{};return(!b[1]||a.nodeName.toLowerCase()===b[1])&&(!b[2]||(c.id||{}).value===b[2])&&(!b[3]||b[3].test((c["class"]||{}).value))},I=function(a){return f.event.special.hover?a:a.replace(B,"mouseenter$1 mouseleave$1")};f.event={add:function(a,c,d,e,g){var h,i,j,k,l,m,n,o,p,q,r,s;if(!(a.nodeType===3||a.nodeType===8||!c||!d||!(h=f._data(a)))){d.handler&&(p=d,d=p.handler,g=p.selector),d.guid||(d.guid=f.guid++),j=h.events,j||(h.events=j={}),i=h.handle,i||(h.handle=i=function(a){return typeof f!="undefined"&&(!a||f.event.triggered!==a.type)?f.event.dispatch.apply(i.elem,arguments):b},i.elem=a),c=f.trim(I(c)).split(" ");for(k=0;k<c.length;k++){l=A.exec(c[k])||[],m=l[1],n=(l[2]||"").split(".").sort(),s=f.event.special[m]||{},m=(g?s.delegateType:s.bindType)||m,s=f.event.special[m]||{},o=f.extend({type:m,origType:l[1],data:e,handler:d,guid:d.guid,selector:g,quick:g&&G(g),namespace:n.join(".")},p),r=j[m];if(!r){r=j[m]=[],r.delegateCount=0;if(!s.setup||s.setup.call(a,e,n,i)===!1){a.addEventListener?a.addEventListener(m,i,!1):a.attachEvent&&a.attachEvent("on"+m,i)}}s.add&&(s.add.call(a,o),o.handler.guid||(o.handler.guid=d.guid)),g?r.splice(r.delegateCount++,0,o):r.push(o),f.event.global[m]=!0}a=null}},global:{},remove:function(a,b,c,d,e){var g=f.hasData(a)&&f._data(a),h,i,j,k,l,m,n,o,p,q,r,s;if(!!g&&!!(o=g.events)){b=f.trim(I(b||"")).split(" ");for(h=0;h<b.length;h++){i=A.exec(b[h])||[],j=k=i[1],l=i[2];if(!j){for(j in o){f.event.remove(a,j+b[h],c,d,!0)}continue}p=f.event.special[j]||{},j=(d?p.delegateType:p.bindType)||j,r=o[j]||[],m=r.length,l=l?new RegExp("(^|\\.)"+l.split(".").sort().join("\\.(?:.*\\.)?")+"(\\.|$)"):null;for(n=0;n<r.length;n++){s=r[n],(e||k===s.origType)&&(!c||c.guid===s.guid)&&(!l||l.test(s.namespace))&&(!d||d===s.selector||d==="**"&&s.selector)&&(r.splice(n--,1),s.selector&&r.delegateCount--,p.remove&&p.remove.call(a,s))}r.length===0&&m!==r.length&&((!p.teardown||p.teardown.call(a,l)===!1)&&f.removeEvent(a,j,g.handle),delete o[j])}f.isEmptyObject(o)&&(q=g.handle,q&&(q.elem=null),f.removeData(a,["events","handle"],!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(c,d,e,g){if(!e||e.nodeType!==3&&e.nodeType!==8){var h=c.type||c,i=[],j,k,l,m,n,o,p,q,r,s;if(E.test(h+f.event.triggered)){return}h.indexOf("!")>=0&&(h=h.slice(0,-1),k=!0),h.indexOf(".")>=0&&(i=h.split("."),h=i.shift(),i.sort());if((!e||f.event.customEvent[h])&&!f.event.global[h]){return}c=typeof c=="object"?c[f.expando]?c:new f.Event(h,c):new f.Event(h),c.type=h,c.isTrigger=!0,c.exclusive=k,c.namespace=i.join("."),c.namespace_re=c.namespace?new RegExp("(^|\\.)"+i.join("\\.(?:.*\\.)?")+"(\\.|$)"):null,o=h.indexOf(":")<0?"on"+h:"";if(!e){j=f.cache;for(l in j){j[l].events&&j[l].events[h]&&f.event.trigger(c,d,j[l].handle.elem,!0)}return}c.result=b,c.target||(c.target=e),d=d!=null?f.makeArray(d):[],d.unshift(c),p=f.event.special[h]||{};if(p.trigger&&p.trigger.apply(e,d)===!1){return}r=[[e,p.bindType||h]];if(!g&&!p.noBubble&&!f.isWindow(e)){s=p.delegateType||h,m=E.test(s+h)?e:e.parentNode,n=null;for(;m;m=m.parentNode){r.push([m,s]),n=m}n&&n===e.ownerDocument&&r.push([n.defaultView||n.parentWindow||a,s])}for(l=0;l<r.length&&!c.isPropagationStopped();l++){m=r[l][0],c.type=r[l][1],q=(f._data(m,"events")||{})[c.type]&&f._data(m,"handle"),q&&q.apply(m,d),q=o&&m[o],q&&f.acceptData(m)&&q.apply(m,d)===!1&&c.preventDefault()}c.type=h,!g&&!c.isDefaultPrevented()&&(!p._default||p._default.apply(e.ownerDocument,d)===!1)&&(h!=="click"||!f.nodeName(e,"a"))&&f.acceptData(e)&&o&&e[h]&&(h!=="focus"&&h!=="blur"||c.target.offsetWidth!==0)&&!f.isWindow(e)&&(n=e[o],n&&(e[o]=null),f.event.triggered=h,e[h](),f.event.triggered=b,n&&(e[o]=n));return c.result}},dispatch:function(c){c=f.event.fix(c||a.event);var d=(f._data(this,"events")||{})[c.type]||[],e=d.delegateCount,g=[].slice.call(arguments,0),h=!c.exclusive&&!c.namespace,i=f.event.special[c.type]||{},j=[],k,l,m,n,o,p,q,r,s,t,u;g[0]=c,c.delegateTarget=this;if(!i.preDispatch||i.preDispatch.call(this,c)!==!1){if(e&&(!c.button||c.type!=="click")){n=f(this),n.context=this.ownerDocument||this;for(m=c.target;m!=this;m=m.parentNode||this){if(m.disabled!==!0){p={},r=[],n[0]=m;for(k=0;k<e;k++){s=d[k],t=s.selector,p[t]===b&&(p[t]=s.quick?H(m,s.quick):n.is(t)),p[t]&&r.push(s)}r.length&&j.push({elem:m,matches:r})}}}d.length>e&&j.push({elem:this,matches:d.slice(e)});for(k=0;k<j.length&&!c.isPropagationStopped();k++){q=j[k],c.currentTarget=q.elem;for(l=0;l<q.matches.length&&!c.isImmediatePropagationStopped();l++){s=q.matches[l];if(h||!c.namespace&&!s.namespace||c.namespace_re&&c.namespace_re.test(s.namespace)){c.data=s.data,c.handleObj=s,o=((f.event.special[s.origType]||{}).handle||s.handler).apply(q.elem,g),o!==b&&(c.result=o,o===!1&&(c.preventDefault(),c.stopPropagation()))}}}i.postDispatch&&i.postDispatch.call(this,c);return c.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,d){var e,f,g,h=d.button,i=d.fromElement;a.pageX==null&&d.clientX!=null&&(e=a.target.ownerDocument||c,f=e.documentElement,g=e.body,a.pageX=d.clientX+(f&&f.scrollLeft||g&&g.scrollLeft||0)-(f&&f.clientLeft||g&&g.clientLeft||0),a.pageY=d.clientY+(f&&f.scrollTop||g&&g.scrollTop||0)-(f&&f.clientTop||g&&g.clientTop||0)),!a.relatedTarget&&i&&(a.relatedTarget=i===a.target?d.toElement:i),!a.which&&h!==b&&(a.which=h&1?1:h&2?3:h&4?2:0);return a}},fix:function(a){if(a[f.expando]){return a}var d,e,g=a,h=f.event.fixHooks[a.type]||{},i=h.props?this.props.concat(h.props):this.props;a=f.Event(g);for(d=i.length;d;){e=i[--d],a[e]=g[e]}a.target||(a.target=g.srcElement||c),a.target.nodeType===3&&(a.target=a.target.parentNode),a.metaKey===b&&(a.metaKey=a.ctrlKey);return h.filter?h.filter(a,g):a},special:{ready:{setup:f.bindReady},load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(a,b,c){f.isWindow(this)&&(this.onbeforeunload=c)},teardown:function(a,b){this.onbeforeunload===b&&(this.onbeforeunload=null)}}},simulate:function(a,b,c,d){var e=f.extend(new f.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?f.event.trigger(e,null,b):f.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},f.event.handle=f.event.dispatch,f.removeEvent=c.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent&&a.detachEvent("on"+b,c)},f.Event=function(a,b){if(!(this instanceof f.Event)){return new f.Event(a,b)}a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||a.returnValue===!1||a.getPreventDefault&&a.getPreventDefault()?K:J):this.type=a,b&&f.extend(this,b),this.timeStamp=a&&a.timeStamp||f.now(),this[f.expando]=!0},f.Event.prototype={preventDefault:function(){this.isDefaultPrevented=K;var a=this.originalEvent;!a||(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=K;var a=this.originalEvent;!a||(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=K,this.stopPropagation()},isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J},f.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){f.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c=this,d=a.relatedTarget,e=a.handleObj,g=e.selector,h;if(!d||d!==c&&!f.contains(c,d)){a.type=e.origType,h=e.handler.apply(this,arguments),a.type=b}return h}}}),f.support.submitBubbles||(f.event.special.submit={setup:function(){if(f.nodeName(this,"form")){return !1}f.event.add(this,"click._submit keypress._submit",function(a){var c=a.target,d=f.nodeName(c,"input")||f.nodeName(c,"button")?c.form:b;d&&!d._submit_attached&&(f.event.add(d,"submit._submit",function(a){a._submit_bubble=!0}),d._submit_attached=!0)})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&f.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){if(f.nodeName(this,"form")){return !1}f.event.remove(this,"._submit")}}),f.support.changeBubbles||(f.event.special.change={setup:function(){if(z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio"){f.event.add(this,"propertychange._change",function(a){a.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),f.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1,f.event.simulate("change",this,a,!0))})}return !1}f.event.add(this,"beforeactivate._change",function(a){var b=a.target;z.test(b.nodeName)&&!b._change_attached&&(f.event.add(b,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&f.event.simulate("change",this.parentNode,a,!0)}),b._change_attached=!0)})},handle:function(a){var b=a.target;if(this!==b||a.isSimulated||a.isTrigger||b.type!=="radio"&&b.type!=="checkbox"){return a.handleObj.handler.apply(this,arguments)}},teardown:function(){f.event.remove(this,"._change");return z.test(this.nodeName)}}),f.support.focusinBubbles||f.each({focus:"focusin",blur:"focusout"},function(a,b){var d=0,e=function(a){f.event.simulate(b,a.target,f.event.fix(a),!0)};f.event.special[b]={setup:function(){d++===0&&c.addEventListener(a,e,!0)},teardown:function(){--d===0&&c.removeEventListener(a,e,!0)}}}),f.fn.extend({on:function(a,c,d,e,g){var h,i;if(typeof a=="object"){typeof c!="string"&&(d=d||c,c=b);for(i in a){this.on(i,c,d,a[i],g)}return this}d==null&&e==null?(e=c,d=c=b):e==null&&(typeof c=="string"?(e=d,d=b):(e=d,d=c,c=b));if(e===!1){e=J}else{if(!e){return this}}g===1&&(h=e,e=function(a){f().off(a);return h.apply(this,arguments)},e.guid=h.guid||(h.guid=f.guid++));return this.each(function(){f.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){if(a&&a.preventDefault&&a.handleObj){var e=a.handleObj;f(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(var g in a){this.off(g,c,a[g])}return this}if(c===!1||typeof c=="function"){d=c,c=b}d===!1&&(d=J);return this.each(function(){f.event.remove(this,a,d,c)})},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},live:function(a,b,c){f(this.context).on(a,this.selector,b,c);return this},die:function(a,b){f(this.context).off(a,this.selector||"**",b);return this},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length==1?this.off(a,"**"):this.off(b,a,c)},trigger:function(a,b){return this.each(function(){f.event.trigger(a,b,this)})},triggerHandler:function(a,b){if(this[0]){return f.event.trigger(a,b,this[0],!0)}},toggle:function(a){var b=arguments,c=a.guid||f.guid++,d=0,e=function(c){var e=(f._data(this,"lastToggle"+a.guid)||0)%d;f._data(this,"lastToggle"+a.guid,e+1),c.preventDefault();return b[e].apply(this,arguments)||!1};e.guid=c;while(d<b.length){b[d++].guid=c}return this.click(e)},hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)}}),f.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){f.fn[b]=function(a,c){c==null&&(c=a,a=null);return arguments.length>0?this.on(b,null,a,c):this.trigger(b)},f.attrFn&&(f.attrFn[b]=!0),C.test(b)&&(f.event.fixHooks[b]=f.event.keyHooks),D.test(b)&&(f.event.fixHooks[b]=f.event.mouseHooks)}),function(){function x(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}if(j.nodeType===1){g||(j[d]=c,j.sizset=h);if(typeof b!="string"){if(j===b){k=!0;break}}else{if(m.filter(b,[j]).length>0){k=j;break}}}j=j[a]}e[h]=k}}}function w(a,b,c,e,f,g){for(var h=0,i=e.length;h<i;h++){var j=e[h];if(j){var k=!1;j=j[a];while(j){if(j[d]===c){k=e[j.sizset];break}j.nodeType===1&&!g&&(j[d]=c,j.sizset=h);if(j.nodeName.toLowerCase()===b){k=j;break}j=j[a]}e[h]=k}}}var a=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,d="sizcache"+(Math.random()+"").replace(".",""),e=0,g=Object.prototype.toString,h=!1,i=!0,j=/\\/g,k=/\r\n/g,l=/\W/;[0,0].sort(function(){i=!1;return 0});var m=function(b,d,e,f){e=e||[],d=d||c;var h=d;if(d.nodeType!==1&&d.nodeType!==9){return[]}if(!b||typeof b!="string"){return e}var i,j,k,l,n,q,r,t,u=!0,v=m.isXML(d),w=[],x=b;do{a.exec(""),i=a.exec(x);if(i){x=i[3],w.push(i[1]);if(i[2]){l=i[3];break}}}while(i);if(w.length>1&&p.exec(b)){if(w.length===2&&o.relative[w[0]]){j=y(w[0]+w[1],d,f)}else{j=o.relative[w[0]]?[d]:m(w.shift(),d);while(w.length){b=w.shift(),o.relative[b]&&(b+=w.shift()),j=y(b,j,f)}}}else{!f&&w.length>1&&d.nodeType===9&&!v&&o.match.ID.test(w[0])&&!o.match.ID.test(w[w.length-1])&&(n=m.find(w.shift(),d,v),d=n.expr?m.filter(n.expr,n.set)[0]:n.set[0]);if(d){n=f?{expr:w.pop(),set:s(f)}:m.find(w.pop(),w.length===1&&(w[0]==="~"||w[0]==="+")&&d.parentNode?d.parentNode:d,v),j=n.expr?m.filter(n.expr,n.set):n.set,w.length>0?k=s(j):u=!1;while(w.length){q=w.pop(),r=q,o.relative[q]?r=w.pop():q="",r==null&&(r=d),o.relative[q](k,r,v)}}else{k=w=[]}}k||(k=j),k||m.error(q||b);if(g.call(k)==="[object Array]"){if(!u){e.push.apply(e,k)}else{if(d&&d.nodeType===1){for(t=0;k[t]!=null;t++){k[t]&&(k[t]===!0||k[t].nodeType===1&&m.contains(d,k[t]))&&e.push(j[t])}}else{for(t=0;k[t]!=null;t++){k[t]&&k[t].nodeType===1&&e.push(j[t])}}}}else{s(k,e)}l&&(m(l,h,e,f),m.uniqueSort(e));return e};m.uniqueSort=function(a){if(u){h=i,a.sort(u);if(h){for(var b=1;b<a.length;b++){a[b]===a[b-1]&&a.splice(b--,1)}}}return a},m.matches=function(a,b){return m(a,null,null,b)},m.matchesSelector=function(a,b){return m(b,null,null,[a]).length>0},m.find=function(a,b,c){var d,e,f,g,h,i;if(!a){return[]}for(e=0,f=o.order.length;e<f;e++){h=o.order[e];if(g=o.leftMatch[h].exec(a)){i=g[1],g.splice(1,1);if(i.substr(i.length-1)!=="\\"){g[1]=(g[1]||"").replace(j,""),d=o.find[h](g,b,c);if(d!=null){a=a.replace(o.match[h],"");break}}}}d||(d=typeof b.getElementsByTagName!="undefined"?b.getElementsByTagName("*"):[]);return{set:d,expr:a}},m.filter=function(a,c,d,e){var f,g,h,i,j,k,l,n,p,q=a,r=[],s=c,t=c&&c[0]&&m.isXML(c[0]);while(a&&c.length){for(h in o.filter){if((f=o.leftMatch[h].exec(a))!=null&&f[2]){k=o.filter[h],l=f[1],g=!1,f.splice(1,1);if(l.substr(l.length-1)==="\\"){continue}s===r&&(r=[]);if(o.preFilter[h]){f=o.preFilter[h](f,s,d,r,e,t);if(!f){g=i=!0}else{if(f===!0){continue}}}if(f){for(n=0;(j=s[n])!=null;n++){j&&(i=k(j,f,n,s),p=e^i,d&&i!=null?p?g=!0:s[n]=!1:p&&(r.push(j),g=!0))}}if(i!==b){d||(s=r),a=a.replace(o.match[h],"");if(!g){return[]}break}}}if(a===q){if(g==null){m.error(a)}else{break}}q=a}return s},m.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};var n=m.getText=function(a){var b,c,d=a.nodeType,e="";if(d){if(d===1||d===9||d===11){if(typeof a.textContent=="string"){return a.textContent}if(typeof a.innerText=="string"){return a.innerText.replace(k,"")}for(a=a.firstChild;a;a=a.nextSibling){e+=n(a)}}else{if(d===3||d===4){return a.nodeValue}}}else{for(b=0;c=a[b];b++){c.nodeType!==8&&(e+=n(c))}}return e},o=m.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(a){return a.getAttribute("href")},type:function(a){return a.getAttribute("type")}},relative:{"+":function(a,b){var c=typeof b=="string",d=c&&!l.test(b),e=c&&!d;d&&(b=b.toLowerCase());for(var f=0,g=a.length,h;f<g;f++){if(h=a[f]){while((h=h.previousSibling)&&h.nodeType!==1){}a[f]=e||h&&h.nodeName.toLowerCase()===b?h||!1:h===b}}e&&m.filter(b,a,!0)},">":function(a,b){var c,d=typeof b=="string",e=0,f=a.length;if(d&&!l.test(b)){b=b.toLowerCase();for(;e<f;e++){c=a[e];if(c){var g=c.parentNode;a[e]=g.nodeName.toLowerCase()===b?g:!1}}}else{for(;e<f;e++){c=a[e],c&&(a[e]=d?c.parentNode:c.parentNode===b)}d&&m.filter(b,a,!0)}},"":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("parentNode",b,f,a,d,c)},"~":function(a,b,c){var d,f=e++,g=x;typeof b=="string"&&!l.test(b)&&(b=b.toLowerCase(),d=b,g=w),g("previousSibling",b,f,a,d,c)}},find:{ID:function(a,b,c){if(typeof b.getElementById!="undefined"&&!c){var d=b.getElementById(a[1]);return d&&d.parentNode?[d]:[]}},NAME:function(a,b){if(typeof b.getElementsByName!="undefined"){var c=[],d=b.getElementsByName(a[1]);for(var e=0,f=d.length;e<f;e++){d[e].getAttribute("name")===a[1]&&c.push(d[e])}return c.length===0?null:c}},TAG:function(a,b){if(typeof b.getElementsByTagName!="undefined"){return b.getElementsByTagName(a[1])}}},preFilter:{CLASS:function(a,b,c,d,e,f){a=" "+a[1].replace(j,"")+" ";if(f){return a}for(var g=0,h;(h=b[g])!=null;g++){h&&(e^(h.className&&(" "+h.className+" ").replace(/[\t\n\r]/g," ").indexOf(a)>=0)?c||d.push(h):c&&(b[g]=!1))}return !1},ID:function(a){return a[1].replace(j,"")},TAG:function(a,b){return a[1].replace(j,"").toLowerCase()},CHILD:function(a){if(a[1]==="nth"){a[2]||m.error(a[0]),a[2]=a[2].replace(/^\+|\s*/g,"");var b=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(a[2]==="even"&&"2n"||a[2]==="odd"&&"2n+1"||!/\D/.test(a[2])&&"0n+"+a[2]||a[2]);a[2]=b[1]+(b[2]||1)-0,a[3]=b[3]-0}else{a[2]&&m.error(a[0])}a[0]=e++;return a},ATTR:function(a,b,c,d,e,f){var g=a[1]=a[1].replace(j,"");!f&&o.attrMap[g]&&(a[1]=o.attrMap[g]),a[4]=(a[4]||a[5]||"").replace(j,""),a[2]==="~="&&(a[4]=" "+a[4]+" ");return a},PSEUDO:function(b,c,d,e,f){if(b[1]==="not"){if((a.exec(b[3])||"").length>1||/^\w/.test(b[3])){b[3]=m(b[3],null,null,c)}else{var g=m.filter(b[3],c,d,!0^f);d||e.push.apply(e,g);return !1}}else{if(o.match.POS.test(b[0])||o.match.CHILD.test(b[0])){return !0}}return b},POS:function(a){a.unshift(!0);return a}},filters:{enabled:function(a){return a.disabled===!1&&a.type!=="hidden"},disabled:function(a){return a.disabled===!0},checked:function(a){return a.checked===!0},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},parent:function(a){return !!a.firstChild},empty:function(a){return !a.firstChild},has:function(a,b,c){return !!m(c[3],a).length},header:function(a){return/h\d/i.test(a.nodeName)},text:function(a){var b=a.getAttribute("type"),c=a.type;return a.nodeName.toLowerCase()==="input"&&"text"===c&&(b===c||b===null)},radio:function(a){return a.nodeName.toLowerCase()==="input"&&"radio"===a.type},checkbox:function(a){return a.nodeName.toLowerCase()==="input"&&"checkbox"===a.type},file:function(a){return a.nodeName.toLowerCase()==="input"&&"file"===a.type},password:function(a){return a.nodeName.toLowerCase()==="input"&&"password"===a.type},submit:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"submit"===a.type},image:function(a){return a.nodeName.toLowerCase()==="input"&&"image"===a.type},reset:function(a){var b=a.nodeName.toLowerCase();return(b==="input"||b==="button")&&"reset"===a.type},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&"button"===a.type||b==="button"},input:function(a){return/input|select|textarea|button/i.test(a.nodeName)},focus:function(a){return a===a.ownerDocument.activeElement}},setFilters:{first:function(a,b){return b===0},last:function(a,b,c,d){return b===d.length-1},even:function(a,b){return b%2===0},odd:function(a,b){return b%2===1},lt:function(a,b,c){return b<c[3]-0},gt:function(a,b,c){return b>c[3]-0},nth:function(a,b,c){return c[3]-0===b},eq:function(a,b,c){return c[3]-0===b}},filter:{PSEUDO:function(a,b,c,d){var e=b[1],f=o.filters[e];if(f){return f(a,c,b,d)}if(e==="contains"){return(a.textContent||a.innerText||n([a])||"").indexOf(b[3])>=0}if(e==="not"){var g=b[3];for(var h=0,i=g.length;h<i;h++){if(g[h]===a){return !1}}return !0}m.error(e)},CHILD:function(a,b){var c,e,f,g,h,i,j,k=b[1],l=a;switch(k){case"only":case"first":while(l=l.previousSibling){if(l.nodeType===1){return !1}}if(k==="first"){return !0}l=a;case"last":while(l=l.nextSibling){if(l.nodeType===1){return !1}}return !0;case"nth":c=b[2],e=b[3];if(c===1&&e===0){return !0}f=b[0],g=a.parentNode;if(g&&(g[d]!==f||!a.nodeIndex)){i=0;for(l=g.firstChild;l;l=l.nextSibling){l.nodeType===1&&(l.nodeIndex=++i)}g[d]=f}j=a.nodeIndex-e;return c===0?j===0:j%c===0&&j/c>=0}},ID:function(a,b){return a.nodeType===1&&a.getAttribute("id")===b},TAG:function(a,b){return b==="*"&&a.nodeType===1||!!a.nodeName&&a.nodeName.toLowerCase()===b},CLASS:function(a,b){return(" "+(a.className||a.getAttribute("class"))+" ").indexOf(b)>-1},ATTR:function(a,b){var c=b[1],d=m.attr?m.attr(a,c):o.attrHandle[c]?o.attrHandle[c](a):a[c]!=null?a[c]:a.getAttribute(c),e=d+"",f=b[2],g=b[4];return d==null?f==="!=":!f&&m.attr?d!=null:f==="="?e===g:f==="*="?e.indexOf(g)>=0:f==="~="?(" "+e+" ").indexOf(g)>=0:g?f==="!="?e!==g:f==="^="?e.indexOf(g)===0:f==="$="?e.substr(e.length-g.length)===g:f==="|="?e===g||e.substr(0,g.length+1)===g+"-":!1:e&&d!==!1},POS:function(a,b,c,d){var e=b[2],f=o.setFilters[e];if(f){return f(a,c,b,d)}}}},p=o.match.POS,q=function(a,b){return"\\"+(b-0+1)};for(var r in o.match){o.match[r]=new RegExp(o.match[r].source+/(?![^\[]*\])(?![^\(]*\))/.source),o.leftMatch[r]=new RegExp(/(^(?:.|\r|\n)*?)/.source+o.match[r].source.replace(/\\(\d+)/g,q))}o.match.globalPOS=p;var s=function(a,b){a=Array.prototype.slice.call(a,0);if(b){b.push.apply(b,a);return b}return a};try{Array.prototype.slice.call(c.documentElement.childNodes,0)[0].nodeType}catch(t){s=function(a,b){var c=0,d=b||[];if(g.call(a)==="[object Array]"){Array.prototype.push.apply(d,a)}else{if(typeof a.length=="number"){for(var e=a.length;c<e;c++){d.push(a[c])}}else{for(;a[c];c++){d.push(a[c])}}}return d}}var u,v;c.documentElement.compareDocumentPosition?u=function(a,b){if(a===b){h=!0;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}:(u=function(a,b){if(a===b){h=!0;return 0}if(a.sourceIndex&&b.sourceIndex){return a.sourceIndex-b.sourceIndex}var c,d,e=[],f=[],g=a.parentNode,i=b.parentNode,j=g;if(g===i){return v(a,b)}if(!g){return -1}if(!i){return 1}while(j){e.unshift(j),j=j.parentNode}j=i;while(j){f.unshift(j),j=j.parentNode}c=e.length,d=f.length;for(var k=0;k<c&&k<d;k++){if(e[k]!==f[k]){return v(e[k],f[k])}}return k===c?v(a,f[k],-1):v(e[k],b,1)},v=function(a,b,c){if(a===b){return c}var d=a.nextSibling;while(d){if(d===b){return -1}d=d.nextSibling}return 1}),function(){var a=c.createElement("div"),d="script"+(new Date).getTime(),e=c.documentElement;a.innerHTML="<a name='"+d+"'/>",e.insertBefore(a,e.firstChild),c.getElementById(d)&&(o.find.ID=function(a,c,d){if(typeof c.getElementById!="undefined"&&!d){var e=c.getElementById(a[1]);return e?e.id===a[1]||typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id").nodeValue===a[1]?[e]:b:[]}},o.filter.ID=function(a,b){var c=typeof a.getAttributeNode!="undefined"&&a.getAttributeNode("id");return a.nodeType===1&&c&&c.nodeValue===b}),e.removeChild(a),e=a=null}(),function(){var a=c.createElement("div");a.appendChild(c.createComment("")),a.getElementsByTagName("*").length>0&&(o.find.TAG=function(a,b){var c=b.getElementsByTagName(a[1]);if(a[1]==="*"){var d=[];for(var e=0;c[e];e++){c[e].nodeType===1&&d.push(c[e])}c=d}return c}),a.innerHTML="<a href='#'></a>",a.firstChild&&typeof a.firstChild.getAttribute!="undefined"&&a.firstChild.getAttribute("href")!=="#"&&(o.attrHandle.href=function(a){return a.getAttribute("href",2)}),a=null}(),c.querySelectorAll&&function(){var a=m,b=c.createElement("div"),d="__sizzle__";b.innerHTML="<p class='TEST'></p>";if(!b.querySelectorAll||b.querySelectorAll(".TEST").length!==0){m=function(b,e,f,g){e=e||c;if(!g&&!m.isXML(e)){var h=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b);if(h&&(e.nodeType===1||e.nodeType===9)){if(h[1]){return s(e.getElementsByTagName(b),f)}if(h[2]&&o.find.CLASS&&e.getElementsByClassName){return s(e.getElementsByClassName(h[2]),f)}}if(e.nodeType===9){if(b==="body"&&e.body){return s([e.body],f)}if(h&&h[3]){var i=e.getElementById(h[3]);if(!i||!i.parentNode){return s([],f)}if(i.id===h[3]){return s([i],f)}}try{return s(e.querySelectorAll(b),f)}catch(j){}}else{if(e.nodeType===1&&e.nodeName.toLowerCase()!=="object"){var k=e,l=e.getAttribute("id"),n=l||d,p=e.parentNode,q=/^\s*[+~]/.test(b);l?n=n.replace(/'/g,"\\$&"):e.setAttribute("id",n),q&&p&&(e=e.parentNode);try{if(!q||p){return s(e.querySelectorAll("[id='"+n+"'] "+b),f)}}catch(r){}finally{l||k.removeAttribute("id")}}}}return a(b,e,f,g)};for(var e in a){m[e]=a[e]}b=null}}(),function(){var a=c.documentElement,b=a.matchesSelector||a.mozMatchesSelector||a.webkitMatchesSelector||a.msMatchesSelector;if(b){var d=!b.call(c.createElement("div"),"div"),e=!1;try{b.call(c.documentElement,"[test!='']:sizzle")}catch(f){e=!0}m.matchesSelector=function(a,c){c=c.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!m.isXML(a)){try{if(e||!o.match.PSEUDO.test(c)&&!/!=/.test(c)){var f=b.call(a,c);if(f||!d||a.document&&a.document.nodeType!==11){return f}}}catch(g){}}return m(c,null,null,[a]).length>0}}}(),function(){var a=c.createElement("div");a.innerHTML="<div class='test e'></div><div class='test'></div>";if(!!a.getElementsByClassName&&a.getElementsByClassName("e").length!==0){a.lastChild.className="e";if(a.getElementsByClassName("e").length===1){return}o.order.splice(1,0,"CLASS"),o.find.CLASS=function(a,b,c){if(typeof b.getElementsByClassName!="undefined"&&!c){return b.getElementsByClassName(a[1])}},a=null}}(),c.documentElement.contains?m.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):!0)}:c.documentElement.compareDocumentPosition?m.contains=function(a,b){return !!(a.compareDocumentPosition(b)&16)}:m.contains=function(){return !1},m.isXML=function(a){var b=(a?a.ownerDocument||a:0).documentElement;return b?b.nodeName!=="HTML":!1};var y=function(a,b,c){var d,e=[],f="",g=b.nodeType?[b]:b;while(d=o.match.PSEUDO.exec(a)){f+=d[0],a=a.replace(o.match.PSEUDO,"")}a=o.relative[a]?a+"*":a;for(var h=0,i=g.length;h<i;h++){m(a,g[h],e,c)}return m.filter(f,e)};m.attr=f.attr,m.selectors.attrMap={},f.find=m,f.expr=m.selectors,f.expr[":"]=f.expr.filters,f.unique=m.uniqueSort,f.text=m.getText,f.isXMLDoc=m.isXML,f.contains=m.contains}();var L=/Until$/,M=/^(?:parents|prevUntil|prevAll)/,N=/,/,O=/^.[^:#\[\.,]*$/,P=Array.prototype.slice,Q=f.expr.match.globalPOS,R={children:!0,contents:!0,next:!0,prev:!0};f.fn.extend({find:function(a){var b=this,c,d;if(typeof a!="string"){return f(a).filter(function(){for(c=0,d=b.length;c<d;c++){if(f.contains(b[c],this)){return !0}}})}var e=this.pushStack("","find",a),g,h,i;for(c=0,d=this.length;c<d;c++){g=e.length,f.find(a,this[c],e);if(c>0){for(h=g;h<e.length;h++){for(i=0;i<g;i++){if(e[i]===e[h]){e.splice(h--,1);break}}}}}return e},has:function(a){var b=f(a);return this.filter(function(){for(var a=0,c=b.length;a<c;a++){if(f.contains(this,b[a])){return !0}}})},not:function(a){return this.pushStack(T(this,a,!1),"not",a)},filter:function(a){return this.pushStack(T(this,a,!0),"filter",a)},is:function(a){return !!a&&(typeof a=="string"?Q.test(a)?f(a,this.context).index(this[0])>=0:f.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c=[],d,e,g=this[0];if(f.isArray(a)){var h=1;while(g&&g.ownerDocument&&g!==b){for(d=0;d<a.length;d++){f(g).is(a[d])&&c.push({selector:a[d],elem:g,level:h})}g=g.parentNode,h++}return c}var i=Q.test(a)||typeof a!="string"?f(a,b||this.context):0;for(d=0,e=this.length;d<e;d++){g=this[d];while(g){if(i?i.index(g)>-1:f.find.matchesSelector(g,a)){c.push(g);break}g=g.parentNode;if(!g||!g.ownerDocument||g===b||g.nodeType===11){break}}}c=c.length>1?f.unique(c):c;return this.pushStack(c,"closest",a)},index:function(a){if(!a){return this[0]&&this[0].parentNode?this.prevAll().length:-1}if(typeof a=="string"){return f.inArray(this[0],f(a))}return f.inArray(a.jquery?a[0]:a,this)},add:function(a,b){var c=typeof a=="string"?f(a,b):f.makeArray(a&&a.nodeType?[a]:a),d=f.merge(this.get(),c);return this.pushStack(S(c[0])||S(d[0])?d:f.unique(d))},andSelf:function(){return this.add(this.prevObject)}}),f.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return f.dir(a,"parentNode")},parentsUntil:function(a,b,c){return f.dir(a,"parentNode",c)},next:function(a){return f.nth(a,2,"nextSibling")},prev:function(a){return f.nth(a,2,"previousSibling")},nextAll:function(a){return f.dir(a,"nextSibling")},prevAll:function(a){return f.dir(a,"previousSibling")},nextUntil:function(a,b,c){return f.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return f.dir(a,"previousSibling",c)},siblings:function(a){return f.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return f.sibling(a.firstChild)},contents:function(a){return f.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:f.makeArray(a.childNodes)}},function(a,b){f.fn[a]=function(c,d){var e=f.map(this,b,c);L.test(a)||(d=c),d&&typeof d=="string"&&(e=f.filter(d,e)),e=this.length>1&&!R[a]?f.unique(e):e,(this.length>1||N.test(d))&&M.test(a)&&(e=e.reverse());return this.pushStack(e,a,P.call(arguments).join(","))}}),f.extend({filter:function(a,b,c){c&&(a=":not("+a+")");return b.length===1?f.find.matchesSelector(b[0],a)?[b[0]]:[]:f.find.matches(a,b)},dir:function(a,c,d){var e=[],g=a[c];while(g&&g.nodeType!==9&&(d===b||g.nodeType!==1||!f(g).is(d))){g.nodeType===1&&e.push(g),g=g[c]}return e},nth:function(a,b,c,d){b=b||1;var e=0;for(;a;a=a[c]){if(a.nodeType===1&&++e===b){break}}return a},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){a.nodeType===1&&a!==b&&c.push(a)}return c}});var V="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",W=/ jQuery\d+="(?:\d+|null)"/g,X=/^\s+/,Y=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,Z=/<([\w:]+)/,$=/<tbody/i,_=/<|&#?\w+;/,ba=/<(?:script|style)/i,bb=/<(?:script|object|embed|option|style)/i,bc=new RegExp("<(?:"+V+")[\\s/>]","i"),bd=/checked\s*(?:[^=]|=\s*.checked.)/i,be=/\/(java|ecma)script/i,bf=/^\s*<!(?:\[CDATA\[|\-\-)/,bg={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},bh=U(c);bg.optgroup=bg.option,bg.tbody=bg.tfoot=bg.colgroup=bg.caption=bg.thead,bg.th=bg.td,f.support.htmlSerialize||(bg._default=[1,"div<div>","</div>"]),f.fn.extend({text:function(a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)},wrapAll:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapAll(a.call(this,b))})}if(this[0]){var b=f(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&a.firstChild.nodeType===1){a=a.firstChild}return a}).append(this)}return this},wrapInner:function(a){if(f.isFunction(a)){return this.each(function(b){f(this).wrapInner(a.call(this,b))})}return this.each(function(){var b=f(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=f.isFunction(a);return this.each(function(c){f(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){f.nodeName(this,"body")||f(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.appendChild(a)})},prepend:function(){return this.domManip(arguments,!0,function(a){this.nodeType===1&&this.insertBefore(a,this.firstChild)})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this)})}if(arguments.length){var a=f.clean(arguments);a.push.apply(a,this.toArray());return this.pushStack(a,"before",arguments)}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,!1,function(a){this.parentNode.insertBefore(a,this.nextSibling)})}if(arguments.length){var a=this.pushStack(this,"after",arguments);a.push.apply(a,f.clean(arguments));return a}},remove:function(a,b){for(var c=0,d;(d=this[c])!=null;c++){if(!a||f.filter(a,[d]).length){!b&&d.nodeType===1&&(f.cleanData(d.getElementsByTagName("*")),f.cleanData([d])),d.parentNode&&d.parentNode.removeChild(d)}}return this},empty:function(){for(var a=0,b;(b=this[a])!=null;a++){b.nodeType===1&&f.cleanData(b.getElementsByTagName("*"));while(b.firstChild){b.removeChild(b.firstChild)}}return this},clone:function(a,b){a=a==null?!1:a,b=b==null?a:b;return this.map(function(){return f.clone(this,a,b)})},html:function(a){return f.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b){return c.nodeType===1?c.innerHTML.replace(W,""):null}if(typeof a=="string"&&!ba.test(a)&&(f.support.leadingWhitespace||!X.test(a))&&!bg[(Z.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Y,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{},c.nodeType===1&&(f.cleanData(c.getElementsByTagName("*")),c.innerHTML=a)}c=0}catch(g){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(a){if(this[0]&&this[0].parentNode){if(f.isFunction(a)){return this.each(function(b){var c=f(this),d=c.html();c.replaceWith(a.call(this,b,d))})}typeof a!="string"&&(a=f(a).detach());return this.each(function(){var b=this.nextSibling,c=this.parentNode;f(this).remove(),b?f(b).before(a):f(c).append(a)})}return this.length?this.pushStack(f(f.isFunction(a)?a():a),"replaceWith",a):this},detach:function(a){return this.remove(a,!0)},domManip:function(a,c,d){var e,g,h,i,j=a[0],k=[];if(!f.support.checkClone&&arguments.length===3&&typeof j=="string"&&bd.test(j)){return this.each(function(){f(this).domManip(a,c,d,!0)})}if(f.isFunction(j)){return this.each(function(e){var g=f(this);a[0]=j.call(this,e,c?g.html():b),g.domManip(a,c,d)})}if(this[0]){i=j&&j.parentNode,f.support.parentNode&&i&&i.nodeType===11&&i.childNodes.length===this.length?e={fragment:i}:e=f.buildFragment(a,this,k),h=e.fragment,h.childNodes.length===1?g=h=h.firstChild:g=h.firstChild;if(g){c=c&&f.nodeName(g,"tr");for(var l=0,m=this.length,n=m-1;l<m;l++){d.call(c?bi(this[l],g):this[l],e.cacheable||m>1&&l<n?f.clone(h,!0,!0):h)}}k.length&&f.each(k,function(a,b){b.src?f.ajax({type:"GET",global:!1,url:b.src,async:!1,dataType:"script"}):f.globalEval((b.text||b.textContent||b.innerHTML||"").replace(bf,"/*$0*/")),b.parentNode&&b.parentNode.removeChild(b)})}return this}}),f.buildFragment=function(a,b,d){var e,g,h,i,j=a[0];b&&b[0]&&(i=b[0].ownerDocument||b[0]),i.createDocumentFragment||(i=c),a.length===1&&typeof j=="string"&&j.length<512&&i===c&&j.charAt(0)==="<"&&!bb.test(j)&&(f.support.checkClone||!bd.test(j))&&(f.support.html5Clone||!bc.test(j))&&(g=!0,h=f.fragments[j],h&&h!==1&&(e=h)),e||(e=i.createDocumentFragment(),f.clean(a,i,e,d)),g&&(f.fragments[j]=h?e:1);return{fragment:e,cacheable:g}},f.fragments={},f.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){f.fn[a]=function(c){var d=[],e=f(c),g=this.length===1&&this[0].parentNode;if(g&&g.nodeType===11&&g.childNodes.length===1&&e.length===1){e[b](this[0]);return this}for(var h=0,i=e.length;h<i;h++){var j=(h>0?this.clone(!0):this).get();f(e[h])[b](j),d=d.concat(j)}return this.pushStack(d,a,e.selector)}}),f.extend({clone:function(a,b,c){var d,e,g,h=f.support.html5Clone||f.isXMLDoc(a)||!bc.test("<"+a.nodeName+">")?a.cloneNode(!0):bo(a);if((!f.support.noCloneEvent||!f.support.noCloneChecked)&&(a.nodeType===1||a.nodeType===11)&&!f.isXMLDoc(a)){bk(a,h),d=bl(a),e=bl(h);for(g=0;d[g];++g){e[g]&&bk(d[g],e[g])}}if(b){bj(a,h);if(c){d=bl(a),e=bl(h);for(g=0;d[g];++g){bj(d[g],e[g])}}}d=e=null;return h},clean:function(a,b,d,e){var g,h,i,j=[];b=b||c,typeof b.createElement=="undefined"&&(b=b.ownerDocument||b[0]&&b[0].ownerDocument||c);for(var k=0,l;(l=a[k])!=null;k++){typeof l=="number"&&(l+="");if(!l){continue}if(typeof l=="string"){if(!_.test(l)){l=b.createTextNode(l)}else{l=l.replace(Y,"<$1></$2>");var m=(Z.exec(l)||["",""])[1].toLowerCase(),n=bg[m]||bg._default,o=n[0],p=b.createElement("div"),q=bh.childNodes,r;b===c?bh.appendChild(p):U(b).appendChild(p),p.innerHTML=n[1]+l+n[2];while(o--){p=p.lastChild}if(!f.support.tbody){var s=$.test(l),t=m==="table"&&!s?p.firstChild&&p.firstChild.childNodes:n[1]==="<table>"&&!s?p.childNodes:[];for(i=t.length-1;i>=0;--i){f.nodeName(t[i],"tbody")&&!t[i].childNodes.length&&t[i].parentNode.removeChild(t[i])}}!f.support.leadingWhitespace&&X.test(l)&&p.insertBefore(b.createTextNode(X.exec(l)[0]),p.firstChild),l=p.childNodes,p&&(p.parentNode.removeChild(p),q.length>0&&(r=q[q.length-1],r&&r.parentNode&&r.parentNode.removeChild(r)))}}var u;if(!f.support.appendChecked){if(l[0]&&typeof(u=l.length)=="number"){for(i=0;i<u;i++){bn(l[i])}}else{bn(l)}}l.nodeType?j.push(l):j=f.merge(j,l)}if(d){g=function(a){return !a.type||be.test(a.type)};for(k=0;j[k];k++){h=j[k];if(e&&f.nodeName(h,"script")&&(!h.type||be.test(h.type))){e.push(h.parentNode?h.parentNode.removeChild(h):h)}else{if(h.nodeType===1){var v=f.grep(h.getElementsByTagName("script"),g);j.splice.apply(j,[k+1,0].concat(v))}d.appendChild(h)}}}return j},cleanData:function(a){var b,c,d=f.cache,e=f.event.special,g=f.support.deleteExpando;for(var h=0,i;(i=a[h])!=null;h++){if(i.nodeName&&f.noData[i.nodeName.toLowerCase()]){continue}c=i[f.expando];if(c){b=d[c];if(b&&b.events){for(var j in b.events){e[j]?f.event.remove(i,j):f.removeEvent(i,j,b.handle)}b.handle&&(b.handle.elem=null)}g?delete i[f.expando]:i.removeAttribute&&i.removeAttribute(f.expando),delete d[c]}}}});var bp=/alpha\([^)]*\)/i,bq=/opacity=([^)]*)/,br=/([A-Z]|^ms)/g,bs=/^[\-+]?(?:\d*\.)?\d+$/i,bt=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,bu=/^([\-+])=([\-+.\de]+)/,bv=/^margin/,bw={position:"absolute",visibility:"hidden",display:"block"},bx=["Top","Right","Bottom","Left"],by,bz,bA;f.fn.css=function(a,c){return f.access(this,function(a,c,d){return d!==b?f.style(a,c,d):f.css(a,c)},a,c,arguments.length>1)},f.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=by(a,"opacity");return c===""?"1":c}return a.style.opacity}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":f.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,c,d,e){if(!!a&&a.nodeType!==3&&a.nodeType!==8&&!!a.style){var g,h,i=f.camelCase(c),j=a.style,k=f.cssHooks[i];c=f.cssProps[i]||i;if(d===b){if(k&&"get" in k&&(g=k.get(a,!1,e))!==b){return g}return j[c]}h=typeof d,h==="string"&&(g=bu.exec(d))&&(d=+(g[1]+1)*+g[2]+parseFloat(f.css(a,c)),h="number");if(d==null||h==="number"&&isNaN(d)){return}h==="number"&&!f.cssNumber[i]&&(d+="px");if(!k||!("set" in k)||(d=k.set(a,d))!==b){try{j[c]=d}catch(l){}}}},css:function(a,c,d){var e,g;c=f.camelCase(c),g=f.cssHooks[c],c=f.cssProps[c]||c,c==="cssFloat"&&(c="float");if(g&&"get" in g&&(e=g.get(a,!0,d))!==b){return e}if(by){return by(a,c)}},swap:function(a,b,c){var d={},e,f;for(f in b){d[f]=a.style[f],a.style[f]=b[f]}e=c.call(a);for(f in b){a.style[f]=d[f]}return e}}),f.curCSS=f.css,c.defaultView&&c.defaultView.getComputedStyle&&(bz=function(a,b){var c,d,e,g,h=a.style;b=b.replace(br,"-$1").toLowerCase(),(d=a.ownerDocument.defaultView)&&(e=d.getComputedStyle(a,null))&&(c=e.getPropertyValue(b),c===""&&!f.contains(a.ownerDocument.documentElement,a)&&(c=f.style(a,b))),!f.support.pixelMargin&&e&&bv.test(b)&&bt.test(c)&&(g=h.width,h.width=c,c=e.width,h.width=g);return c}),c.documentElement.currentStyle&&(bA=function(a,b){var c,d,e,f=a.currentStyle&&a.currentStyle[b],g=a.style;f==null&&g&&(e=g[b])&&(f=e),bt.test(f)&&(c=g.left,d=a.runtimeStyle&&a.runtimeStyle.left,d&&(a.runtimeStyle.left=a.currentStyle.left),g.left=b==="fontSize"?"1em":f,f=g.pixelLeft+"px",g.left=c,d&&(a.runtimeStyle.left=d));return f===""?"auto":f}),by=bz||bA,f.each(["height","width"],function(a,b){f.cssHooks[b]={get:function(a,c,d){if(c){return a.offsetWidth!==0?bB(a,b,d):f.swap(a,bw,function(){return bB(a,b,d)})}},set:function(a,b){return bs.test(b)?b+"px":b}}}),f.support.opacity||(f.cssHooks.opacity={get:function(a,b){return bq.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=f.isNumeric(b)?"alpha(opacity="+b*100+")":"",g=d&&d.filter||c.filter||"";c.zoom=1;if(b>=1&&f.trim(g.replace(bp,""))===""){c.removeAttribute("filter");if(d&&!d.filter){return}}c.filter=bp.test(g)?g.replace(bp,e):g+" "+e}}),f(function(){f.support.reliableMarginRight||(f.cssHooks.marginRight={get:function(a,b){return f.swap(a,{display:"inline-block"},function(){return b?by(a,"margin-right"):a.style.marginRight})}})}),f.expr&&f.expr.filters&&(f.expr.filters.hidden=function(a){var b=a.offsetWidth,c=a.offsetHeight;return b===0&&c===0||!f.support.reliableHiddenOffsets&&(a.style&&a.style.display||f.css(a,"display"))==="none"},f.expr.filters.visible=function(a){return !f.expr.filters.hidden(a)}),f.each({margin:"",padding:"",border:"Width"},function(a,b){f.cssHooks[a+b]={expand:function(c){var d,e=typeof c=="string"?c.split(" "):[c],f={};for(d=0;d<4;d++){f[a+bx[d]+b]=e[d]||e[d-2]||e[0]}return f}}});var bC=/%20/g,bD=/\[\]$/,bE=/\r?\n/g,bF=/#.*$/,bG=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,bH=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,bI=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,bJ=/^(?:GET|HEAD)$/,bK=/^\/\//,bL=/\?/,bM=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,bN=/^(?:select|textarea)/i,bO=/\s+/,bP=/([?&])_=[^&]*/,bQ=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,bR=f.fn.load,bS={},bT={},bU,bV,bW=["*/"]+["*"];try{bU=e.href}catch(bX){bU=c.createElement("a"),bU.href="",bU=bU.href}bV=bQ.exec(bU.toLowerCase())||[],f.fn.extend({load:function(a,c,d){if(typeof a!="string"&&bR){return bR.apply(this,arguments)}if(!this.length){return this}var e=a.indexOf(" ");if(e>=0){var g=a.slice(e,a.length);a=a.slice(0,e)}var h="GET";c&&(f.isFunction(c)?(d=c,c=b):typeof c=="object"&&(c=f.param(c,f.ajaxSettings.traditional),h="POST"));var i=this;f.ajax({url:a,type:h,dataType:"html",data:c,complete:function(a,b,c){c=a.responseText,a.isResolved()&&(a.done(function(a){c=a}),i.html(g?f("<div>").append(c.replace(bM,"")).find(g):c)),d&&i.each(d,[c,b,a])}});return this},serialize:function(){return f.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?f.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||bN.test(this.nodeName)||bH.test(this.type))}).map(function(a,b){var c=f(this).val();return c==null?null:f.isArray(c)?f.map(c,function(a,c){return{name:b.name,value:a.replace(bE,"\r\n")}}):{name:b.name,value:c.replace(bE,"\r\n")}}).get()}}),f.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){f.fn[b]=function(a){return this.on(b,a)}}),f.each(["get","post"],function(a,c){f[c]=function(a,d,e,g){f.isFunction(d)&&(g=g||e,e=d,d=b);return f.ajax({type:c,url:a,data:d,success:e,dataType:g})}}),f.extend({getScript:function(a,c){return f.get(a,b,c,"script")},getJSON:function(a,b,c){return f.get(a,b,c,"json")},ajaxSetup:function(a,b){b?b$(a,f.ajaxSettings):(b=a,a=f.ajaxSettings),b$(a,b);return a},ajaxSettings:{url:bU,isLocal:bI.test(bV[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":bW},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":a.String,"text html":!0,"text json":f.parseJSON,"text xml":f.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:bY(bS),ajaxTransport:bY(bT),ajax:function(a,c){function w(a,c,l,m){if(s!==2){s=2,q&&clearTimeout(q),p=b,n=m||"",v.readyState=a>0?4:0;var o,r,u,w=c,x=l?ca(d,v,l):b,y,z;if(a>=200&&a<300||a===304){if(d.ifModified){if(y=v.getResponseHeader("Last-Modified")){f.lastModified[k]=y}if(z=v.getResponseHeader("Etag")){f.etag[k]=z}}if(a===304){w="notmodified",o=!0}else{try{r=cb(d,x),w="success",o=!0}catch(A){w="parsererror",u=A}}}else{u=w;if(!w||a){w="error",a<0&&(a=0)}}v.status=a,v.statusText=""+(c||w),o?h.resolveWith(e,[r,w,v]):h.rejectWith(e,[v,w,u]),v.statusCode(j),j=b,t&&g.trigger("ajax"+(o?"Success":"Error"),[v,d,o?r:u]),i.fireWith(e,[v,w]),t&&(g.trigger("ajaxComplete",[v,d]),--f.active||f.event.trigger("ajaxStop"))}}typeof a=="object"&&(c=a,a=b),c=c||{};var d=f.ajaxSetup({},c),e=d.context||d,g=e!==d&&(e.nodeType||e instanceof f)?f(e):f.event,h=f.Deferred(),i=f.Callbacks("once memory"),j=d.statusCode||{},k,l={},m={},n,o,p,q,r,s=0,t,u,v={readyState:0,setRequestHeader:function(a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this},getAllResponseHeaders:function(){return s===2?n:null},getResponseHeader:function(a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n)){o[c[1].toLowerCase()]=c[2]}}c=o[a.toLowerCase()]}return c===b?null:c},overrideMimeType:function(a){s||(d.mimeType=a);return this},abort:function(a){a=a||"abort",p&&p.abort(a),w(0,a);return this}};h.promise(v),v.success=v.done,v.error=v.fail,v.complete=i.add,v.statusCode=function(a){if(a){var b;if(s<2){for(b in a){j[b]=[j[b],a[b]]}}else{b=a[v.status],v.then(b,b)}}return this},d.url=((a||d.url)+"").replace(bF,"").replace(bK,bV[1]+"//"),d.dataTypes=f.trim(d.dataType||"*").toLowerCase().split(bO),d.crossDomain==null&&(r=bQ.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]==bV[1]&&r[2]==bV[2]&&(r[3]||(r[1]==="http:"?80:443))==(bV[3]||(bV[1]==="http:"?80:443)))),d.data&&d.processData&&typeof d.data!="string"&&(d.data=f.param(d.data,d.traditional)),bZ(bS,d,c,v);if(s===2){return !1}t=d.global,d.type=d.type.toUpperCase(),d.hasContent=!bJ.test(d.type),t&&f.active++===0&&f.event.trigger("ajaxStart");if(!d.hasContent){d.data&&(d.url+=(bL.test(d.url)?"&":"?")+d.data,delete d.data),k=d.url;if(d.cache===!1){var x=f.now(),y=d.url.replace(bP,"$1_="+x);d.url=y+(y===d.url?(bL.test(d.url)?"&":"?")+"_="+x:"")}}(d.data&&d.hasContent&&d.contentType!==!1||c.contentType)&&v.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(k=k||d.url,f.lastModified[k]&&v.setRequestHeader("If-Modified-Since",f.lastModified[k]),f.etag[k]&&v.setRequestHeader("If-None-Match",f.etag[k])),v.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+(d.dataTypes[0]!=="*"?", "+bW+"; q=0.01":""):d.accepts["*"]);for(u in d.headers){v.setRequestHeader(u,d.headers[u])}if(d.beforeSend&&(d.beforeSend.call(e,v,d)===!1||s===2)){v.abort();return !1}for(u in {success:1,error:1,complete:1}){v[u](d[u])}p=bZ(bT,d,c,v);if(!p){w(-1,"No Transport")}else{v.readyState=1,t&&g.trigger("ajaxSend",[v,d]),d.async&&d.timeout>0&&(q=setTimeout(function(){v.abort("timeout")},d.timeout));try{s=1,p.send(l,w)}catch(z){if(s<2){w(-1,z)}else{throw z}}}return v},param:function(a,c){var d=[],e=function(a,b){b=f.isFunction(b)?b():b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=f.ajaxSettings.traditional);if(f.isArray(a)||a.jquery&&!f.isPlainObject(a)){f.each(a,function(){e(this.name,this.value)})}else{for(var g in a){b_(g,a[g],c,e)}}return d.join("&").replace(bC,"+")}}),f.extend({active:0,lastModified:{},etag:{}});var cc=f.now(),cd=/(\=)\?(&|$)|\?\?/i;f.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return f.expando+"_"+cc++}}),f.ajaxPrefilter("json jsonp",function(b,c,d){var e=typeof b.data=="string"&&/^application\/x\-www\-form\-urlencoded/.test(b.contentType);if(b.dataTypes[0]==="jsonp"||b.jsonp!==!1&&(cd.test(b.url)||e&&cd.test(b.data))){var g,h=b.jsonpCallback=f.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,i=a[h],j=b.url,k=b.data,l="$1"+h+"$2";b.jsonp!==!1&&(j=j.replace(cd,l),b.url===j&&(e&&(k=k.replace(cd,l)),b.data===k&&(j+=(/\?/.test(j)?"&":"?")+b.jsonp+"="+h))),b.url=j,b.data=k,a[h]=function(a){g=[a]},d.always(function(){a[h]=i,g&&f.isFunction(i)&&a[h](g[0])}),b.converters["script json"]=function(){g||f.error(h+" was not called");return g[0]},b.dataTypes[0]="json";return"script"}}),f.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(a){f.globalEval(a);return a}}}),f.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),f.ajaxTransport("script",function(a){if(a.crossDomain){var d,e=c.head||c.getElementsByTagName("head")[0]||c.documentElement;return{send:function(f,g){d=c.createElement("script"),d.async="async",a.scriptCharset&&(d.charset=a.scriptCharset),d.src=a.url,d.onload=d.onreadystatechange=function(a,c){if(c||!d.readyState||/loaded|complete/.test(d.readyState)){d.onload=d.onreadystatechange=null,e&&d.parentNode&&e.removeChild(d),d=b,c||g(200,"success")}},e.insertBefore(d,e.firstChild)},abort:function(){d&&d.onload(0,1)}}}});var ce=a.ActiveXObject?function(){for(var a in cg){cg[a](0,1)}}:!1,cf=0,cg;f.ajaxSettings.xhr=a.ActiveXObject?function(){return !this.isLocal&&ch()||ci()}:ch,function(a){f.extend(f.support,{ajax:!!a,cors:!!a&&"withCredentials" in a})}(f.ajaxSettings.xhr()),f.support.ajax&&f.ajaxTransport(function(c){if(!c.crossDomain||f.support.cors){var d;return{send:function(e,g){var h=c.xhr(),i,j;c.username?h.open(c.type,c.url,c.async,c.username,c.password):h.open(c.type,c.url,c.async);if(c.xhrFields){for(j in c.xhrFields){h[j]=c.xhrFields[j]}}c.mimeType&&h.overrideMimeType&&h.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(j in e){h.setRequestHeader(j,e[j])}}catch(k){}h.send(c.hasContent&&c.data||null),d=function(a,e){var j,k,l,m,n;try{if(d&&(e||h.readyState===4)){d=b,i&&(h.onreadystatechange=f.noop,ce&&delete cg[i]);if(e){h.readyState!==4&&h.abort()}else{j=h.status,l=h.getAllResponseHeaders(),m={},n=h.responseXML,n&&n.documentElement&&(m.xml=n);try{m.text=h.responseText}catch(a){}try{k=h.statusText}catch(o){k=""}!j&&c.isLocal&&!c.crossDomain?j=m.text?200:404:j===1223&&(j=204)}}}catch(p){e||g(-1,p)}m&&g(j,k,m,l)},!c.async||h.readyState===4?d():(i=++cf,ce&&(cg||(cg={},f(a).unload(ce)),cg[i]=d),h.onreadystatechange=d)},abort:function(){d&&d(0,1)}}}});var cj={},ck,cl,cm=/^(?:toggle|show|hide)$/,cn=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,co,cp=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],cq;f.fn.extend({show:function(a,b,c){var d,e;if(a||a===0){return this.animate(ct("show",3),a,b,c)}for(var g=0,h=this.length;g<h;g++){d=this[g],d.style&&(e=d.style.display,!f._data(d,"olddisplay")&&e==="none"&&(e=d.style.display=""),(e===""&&f.css(d,"display")==="none"||!f.contains(d.ownerDocument.documentElement,d))&&f._data(d,"olddisplay",cu(d.nodeName)))}for(g=0;g<h;g++){d=this[g];if(d.style){e=d.style.display;if(e===""||e==="none"){d.style.display=f._data(d,"olddisplay")||""}}}return this},hide:function(a,b,c){if(a||a===0){return this.animate(ct("hide",3),a,b,c)}var d,e,g=0,h=this.length;for(;g<h;g++){d=this[g],d.style&&(e=f.css(d,"display"),e!=="none"&&!f._data(d,"olddisplay")&&f._data(d,"olddisplay",e))}for(g=0;g<h;g++){this[g].style&&(this[g].style.display="none")}return this},_toggle:f.fn.toggle,toggle:function(a,b,c){var d=typeof a=="boolean";f.isFunction(a)&&f.isFunction(b)?this._toggle.apply(this,arguments):a==null||d?this.each(function(){var b=d?a:f(this).is(":hidden");f(this)[b?"show":"hide"]()}):this.animate(ct("toggle",3),a,b,c);return this},fadeTo:function(a,b,c,d){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){function g(){e.queue===!1&&f._mark(this);var b=f.extend({},e),c=this.nodeType===1,d=c&&f(this).is(":hidden"),g,h,i,j,k,l,m,n,o,p,q;b.animatedProperties={};for(i in a){g=f.camelCase(i),i!==g&&(a[g]=a[i],delete a[i]);if((k=f.cssHooks[g])&&"expand" in k){l=k.expand(a[g]),delete a[g];for(i in l){i in a||(a[i]=l[i])}}}for(g in a){h=a[g],f.isArray(h)?(b.animatedProperties[g]=h[1],h=a[g]=h[0]):b.animatedProperties[g]=b.specialEasing&&b.specialEasing[g]||b.easing||"swing";if(h==="hide"&&d||h==="show"&&!d){return b.complete.call(this)}c&&(g==="height"||g==="width")&&(b.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY],f.css(this,"display")==="inline"&&f.css(this,"float")==="none"&&(!f.support.inlineBlockNeedsLayout||cu(this.nodeName)==="inline"?this.style.display="inline-block":this.style.zoom=1))}b.overflow!=null&&(this.style.overflow="hidden");for(i in a){j=new f.fx(this,b,i),h=a[i],cm.test(h)?(q=f._data(this,"toggle"+i)||(h==="toggle"?d?"show":"hide":0),q?(f._data(this,"toggle"+i,q==="show"?"hide":"show"),j[q]()):j[h]()):(m=cn.exec(h),n=j.cur(),m?(o=parseFloat(m[2]),p=m[3]||(f.cssNumber[i]?"":"px"),p!=="px"&&(f.style(this,i,(o||1)+p),n=(o||1)/j.cur()*n,f.style(this,i,n+p)),m[1]&&(o=(m[1]==="-="?-1:1)*o+n),j.custom(n,o,p)):j.custom(n,h,""))}return !0}var e=f.speed(b,c,d);if(f.isEmptyObject(a)){return this.each(e.complete,[!1])}a=f.extend({},a);return e.queue===!1?this.each(g):this.queue(e.queue,g)},stop:function(a,c,d){typeof a!="string"&&(d=c,c=a,a=b),c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){function h(a,b,c){var e=b[c];f.removeData(a,c,!0),e.stop(d)}var b,c=!1,e=f.timers,g=f._data(this);d||f._unmark(!0,this);if(a==null){for(b in g){g[b]&&g[b].stop&&b.indexOf(".run")===b.length-4&&h(this,g,b)}}else{g[b=a+".run"]&&g[b].stop&&h(this,g,b)}for(b=e.length;b--;){e[b].elem===this&&(a==null||e[b].queue===a)&&(d?e[b](!0):e[b].saveState(),c=!0,e.splice(b,1))}(!d||!c)&&f.dequeue(this,a)})}}),f.each({slideDown:ct("show",1),slideUp:ct("hide",1),slideToggle:ct("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){f.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),f.extend({speed:function(a,b,c){var d=a&&typeof a=="object"?f.extend({},a):{complete:c||!c&&b||f.isFunction(a)&&a,duration:a,easing:c&&b||b&&!f.isFunction(b)&&b};d.duration=f.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in f.fx.speeds?f.fx.speeds[d.duration]:f.fx.speeds._default;if(d.queue==null||d.queue===!0){d.queue="fx"}d.old=d.complete,d.complete=function(a){f.isFunction(d.old)&&d.old.call(this),d.queue?f.dequeue(this,d.queue):a!==!1&&f._unmark(this)};return d},easing:{linear:function(a){return a},swing:function(a){return -Math.cos(a*Math.PI)/2+0.5}},timers:[],fx:function(a,b,c){this.options=b,this.elem=a,this.prop=c,b.orig=b.orig||{}}}),f.fx.prototype={update:function(){this.options.step&&this.options.step.call(this.elem,this.now,this),(f.fx.step[this.prop]||f.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var a,b=f.css(this.elem,this.prop);return isNaN(a=parseFloat(b))?!b||b==="auto"?0:b:a},custom:function(a,c,d){function h(a){return e.step(a)}var e=this,g=f.fx;this.startTime=cq||cr(),this.end=c,this.now=this.start=a,this.pos=this.state=0,this.unit=d||this.unit||(f.cssNumber[this.prop]?"":"px"),h.queue=this.options.queue,h.elem=this.elem,h.saveState=function(){f._data(e.elem,"fxshow"+e.prop)===b&&(e.options.hide?f._data(e.elem,"fxshow"+e.prop,e.start):e.options.show&&f._data(e.elem,"fxshow"+e.prop,e.end))},h()&&f.timers.push(h)&&!co&&(co=setInterval(g.tick,g.interval))},show:function(){var a=f._data(this.elem,"fxshow"+this.prop);this.options.orig[this.prop]=a||f.style(this.elem,this.prop),this.options.show=!0,a!==b?this.custom(this.cur(),a):this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur()),f(this.elem).show()},hide:function(){this.options.orig[this.prop]=f._data(this.elem,"fxshow"+this.prop)||f.style(this.elem,this.prop),this.options.hide=!0,this.custom(this.cur(),0)},step:function(a){var b,c,d,e=cq||cr(),g=!0,h=this.elem,i=this.options;if(a||e>=i.duration+this.startTime){this.now=this.end,this.pos=this.state=1,this.update(),i.animatedProperties[this.prop]=!0;for(b in i.animatedProperties){i.animatedProperties[b]!==!0&&(g=!1)}if(g){i.overflow!=null&&!f.support.shrinkWrapBlocks&&f.each(["","X","Y"],function(a,b){h.style["overflow"+b]=i.overflow[a]}),i.hide&&f(h).hide();if(i.hide||i.show){for(b in i.animatedProperties){f.style(h,b,i.orig[b]),f.removeData(h,"fxshow"+b,!0),f.removeData(h,"toggle"+b,!0)}}d=i.complete,d&&(i.complete=!1,d.call(h))}return !1}i.duration==Infinity?this.now=e:(c=e-this.startTime,this.state=c/i.duration,this.pos=f.easing[i.animatedProperties[this.prop]](this.state,c,0,1,i.duration),this.now=this.start+(this.end-this.start)*this.pos),this.update();return !0}},f.extend(f.fx,{tick:function(){var a,b=f.timers,c=0;for(;c<b.length;c++){a=b[c],!a()&&b[c]===a&&b.splice(c--,1)}b.length||f.fx.stop()},interval:13,stop:function(){clearInterval(co),co=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(a){f.style(a.elem,"opacity",a.now)},_default:function(a){a.elem.style&&a.elem.style[a.prop]!=null?a.elem.style[a.prop]=a.now+a.unit:a.elem[a.prop]=a.now}}}),f.each(cp.concat.apply([],cp),function(a,b){b.indexOf("margin")&&(f.fx.step[b]=function(a){f.style(a.elem,b,Math.max(0,a.now)+a.unit)})}),f.expr&&f.expr.filters&&(f.expr.filters.animated=function(a){return f.grep(f.timers,function(b){return a===b.elem}).length});var cv,cw=/^t(?:able|d|h)$/i,cx=/^(?:body|html)$/i;"getBoundingClientRect" in c.documentElement?cv=function(a,b,c,d){try{d=a.getBoundingClientRect()}catch(e){}if(!d||!f.contains(c,a)){return d?{top:d.top,left:d.left}:{top:0,left:0}}var g=b.body,h=cy(b),i=c.clientTop||g.clientTop||0,j=c.clientLeft||g.clientLeft||0,k=h.pageYOffset||f.support.boxModel&&c.scrollTop||g.scrollTop,l=h.pageXOffset||f.support.boxModel&&c.scrollLeft||g.scrollLeft,m=d.top+k-i,n=d.left+l-j;return{top:m,left:n}}:cv=function(a,b,c){var d,e=a.offsetParent,g=a,h=b.body,i=b.defaultView,j=i?i.getComputedStyle(a,null):a.currentStyle,k=a.offsetTop,l=a.offsetLeft;while((a=a.parentNode)&&a!==h&&a!==c){if(f.support.fixedPosition&&j.position==="fixed"){break}d=i?i.getComputedStyle(a,null):a.currentStyle,k-=a.scrollTop,l-=a.scrollLeft,a===e&&(k+=a.offsetTop,l+=a.offsetLeft,f.support.doesNotAddBorder&&(!f.support.doesAddBorderForTableAndCells||!cw.test(a.nodeName))&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),g=e,e=a.offsetParent),f.support.subtractsBorderForOverflowNotVisible&&d.overflow!=="visible"&&(k+=parseFloat(d.borderTopWidth)||0,l+=parseFloat(d.borderLeftWidth)||0),j=d}if(j.position==="relative"||j.position==="static"){k+=h.offsetTop,l+=h.offsetLeft}f.support.fixedPosition&&j.position==="fixed"&&(k+=Math.max(c.scrollTop,h.scrollTop),l+=Math.max(c.scrollLeft,h.scrollLeft));return{top:k,left:l}},f.fn.offset=function(a){if(arguments.length){return a===b?this:this.each(function(b){f.offset.setOffset(this,a,b)})}var c=this[0],d=c&&c.ownerDocument;if(!d){return null}if(c===d.body){return f.offset.bodyOffset(c)}return cv(c,d,d.documentElement)},f.offset={bodyOffset:function(a){var b=a.offsetTop,c=a.offsetLeft;f.support.doesNotIncludeMarginInBodyOffset&&(b+=parseFloat(f.css(a,"marginTop"))||0,c+=parseFloat(f.css(a,"marginLeft"))||0);return{top:b,left:c}},setOffset:function(a,b,c){var d=f.css(a,"position");d==="static"&&(a.style.position="relative");var e=f(a),g=e.offset(),h=f.css(a,"top"),i=f.css(a,"left"),j=(d==="absolute"||d==="fixed")&&f.inArray("auto",[h,i])>-1,k={},l={},m,n;j?(l=e.position(),m=l.top,n=l.left):(m=parseFloat(h)||0,n=parseFloat(i)||0),f.isFunction(b)&&(b=b.call(a,c,g)),b.top!=null&&(k.top=b.top-g.top+m),b.left!=null&&(k.left=b.left-g.left+n),"using" in b?b.using.call(a,k):e.css(k)}},f.fn.extend({position:function(){if(!this[0]){return null}var a=this[0],b=this.offsetParent(),c=this.offset(),d=cx.test(b[0].nodeName)?{top:0,left:0}:b.offset();c.top-=parseFloat(f.css(a,"marginTop"))||0,c.left-=parseFloat(f.css(a,"marginLeft"))||0,d.top+=parseFloat(f.css(b[0],"borderTopWidth"))||0,d.left+=parseFloat(f.css(b[0],"borderLeftWidth"))||0;return{top:c.top-d.top,left:c.left-d.left}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||c.body;while(a&&!cx.test(a.nodeName)&&f.css(a,"position")==="static"){a=a.offsetParent}return a})}}),f.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,c){var d=/Y/.test(c);f.fn[a]=function(e){return f.access(this,function(a,e,g){var h=cy(a);if(g===b){return h?c in h?h[c]:f.support.boxModel&&h.document.documentElement[e]||h.document.body[e]:a[e]}h?h.scrollTo(d?f(h).scrollLeft():g,d?g:f(h).scrollTop()):a[e]=g},a,e,arguments.length,null)}}),f.each({Height:"height",Width:"width"},function(a,c){var d="client"+a,e="scroll"+a,g="offset"+a;f.fn["inner"+a]=function(){var a=this[0];return a?a.style?parseFloat(f.css(a,c,"padding")):this[c]():null},f.fn["outer"+a]=function(a){var b=this[0];return b?b.style?parseFloat(f.css(b,c,a?"margin":"border")):this[c]():null},f.fn[c]=function(a){return f.access(this,function(a,c,h){var i,j,k,l;if(f.isWindow(a)){i=a.document,j=i.documentElement[d];return f.support.boxModel&&j||i.body&&i.body[d]||j}if(a.nodeType===9){i=a.documentElement;if(i[d]>=i[e]){return i[d]}return Math.max(a.body[e],i[e],a.body[g],i[g])}if(h===b){k=f.css(a,c),l=parseFloat(k);return f.isNumeric(l)?l:k}f(a).css(c,h)},c,a,arguments.length,null)}}),a.jQuery=a.$=f,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return f})})(window);jQuery.fn.removeWhitespace=function(){var b=this.contents().filter(function(){return this.nodeType==3&&!/\S/.test(this.nodeValue)}).remove();return this};
/*!
 * jQuery Templates Plugin 1.0.0pre
 * http://github.com/jquery/jquery-tmpl
 * Requires jQuery 1.4.2
 *
 * Copyright 2011, Software Freedom Conservancy, Inc.
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 */
(function(R,U){var G=R.fn.domManip,S="_tmplitem",F=/^[^<]*(<[\w\W]+>)[^>]*$|\{\{\! /,K={},V={},B,C={key:0,data:{}},D=0,J=0,T=[];function P(f,a,c,b){var d={data:b||(b===0||b===false)?b:(a?a.data:{}),_wrap:a?a._wrap:null,tmpl:null,parent:a||null,nodes:[],calls:X,nest:Y,wrap:M,html:I,update:A};if(f){R.extend(d,f,{nodes:[],parent:a})}if(c){d.tmpl=c;d._ctnt=d._ctnt||d.tmpl(R,d);d.key=++D;(T.length?V:K)[D]=d}return d}R.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){R.fn[a]=function(l){var i=[],d=R(l),j,h,k,c,f=this.length===1&&this[0].parentNode;B=K||{};if(f&&f.nodeType===11&&f.childNodes.length===1&&d.length===1){d[b](this[0]);i=this}else{for(h=0,k=d.length;h<k;h++){J=h;j=(h>0?this.clone(true):this).get();R(d[h])[b](j);i=i.concat(j)}J=0;i=this.pushStack(i,a,d.selector)}c=B;B=null;R.tmpl.complete(c);return i}});R.fn.extend({tmpl:function(b,c,a){return R.tmpl(this[0],b,c,a)},tmplItem:function(){return R.tmplItem(this[0])},template:function(a){return R.template(a,this[0])},domManip:function(k,h,i,f){if(k[0]&&R.isArray(k[0])){var c=R.makeArray(arguments),d=k[0],j=d.length,b=0,a;while(b<j&&!(a=R.data(d[b++],"tmplItem"))){}if(a&&J){c[2]=function(l){R.tmpl.afterManip(this,l,i)}}G.apply(this,c)}else{G.apply(this,arguments)}J=0;if(!B){R.tmpl.complete(K)}return this}});R.extend({tmpl:function(f,b,c,h){var d,a=!h;if(a){h=C;f=R.template[f]||R.template(null,f);V={}}else{if(!f){f=h.tmpl;K[h.key]=h;h.nodes=[];if(h.wrapped){H(h,h.wrapped)}return R(N(h,null,h.tmpl(R,h)))}}if(!f){return[]}if(typeof b==="function"){b=b.call(h||{})}if(c&&c.wrapped){H(c,c.wrapped)}d=R.isArray(b)?R.map(b,function(i){return i?P(c,h,f,i):null}):[P(c,h,f,b)];return a?R(N(h,null,d)):d},tmplItem:function(b){var a;if(b instanceof R){b=b[0]}while(b&&b.nodeType===1&&!(a=R.data(b,"tmplItem"))&&(b=b.parentNode)){}return a||C},template:function(b,a){if(a){if(typeof a==="string"){a=O(a)}else{if(a instanceof R){a=a[0]||{}}}if(a.nodeType){a=R.data(a,"tmpl")||R.data(a,"tmpl",O(a.innerHTML))}return typeof b==="string"?(R.template[b]=a):a}return b?(typeof b!=="string"?R.template(null,b):(R.template[b]||R.template(null,F.test(b)?b:R(b)))):null},encode:function(a){if(typeof a==="object"){return""}else{return(""+a).split("<").join("&lt;").split(">").join("&gt;").split('"').join("&#34;").split("'").join("&#39;")}}});R.extend(R.tmpl,{tag:{tmpl:{_default:{$2:"null"},open:"if($notnull_1){__=__.concat($item.nest($1,$2));}"},wrap:{_default:{$2:"null"},open:"$item.calls(__,$1,$2);__=[];",close:"call=$item.calls();__=call._.concat($item.wrap(call,__));"},each:{_default:{$2:"$index, $value"},open:"if($notnull_1){$.each($1a,function($2){with(this){",close:"}});}"},"if":{open:"if(($notnull_1) && $1a){",close:"}"},"else":{_default:{$1:"true"},open:"}else if(($notnull_1) && $1a){"},html:{open:"if($notnull_1){__.push($1a);}"},"=":{_default:{$1:"$data"},open:"if($notnull_1){__.push($.encode($1a));}"},"!":{open:""}},complete:function(a){K={}},afterManip:function E(c,a,b){var d=a.nodeType===11?R.makeArray(a.childNodes):a.nodeType===1?[a]:[];b.call(c,a);L(d);J++}});function N(a,b,d){var c,f=d?R.map(d,function(h){return(typeof h==="string")?(a.key?h.replace(/(<\w+)(?=[\s>])(?![^>]*_tmplitem)([^>]*)/g,"$1 "+S+'="'+a.key+'" $2'):h):N(h,a,h._ctnt)}):a;if(b){return f}f=f.join("");f.replace(/^\s*([^<\s][^<]*)?(<[\w\W]+>)([^>]*[^>\s])?\s*$/,function(j,i,k,h){c=R(k).get();L(c);if(i){c=Z(i).concat(c)}if(h){c=c.concat(Z(h))}});return c?c:Z(f)}function Z(b){var a=document.createElement("div");a.innerHTML=b;return R.makeArray(a.childNodes)}function O(a){return new Function("jQuery","$item","var $=jQuery,call,__=[],$data=$item.data;with($data){__.push('"+R.trim(a).replace(/([\\'])/g,"\\$1").replace(/[\r\t\n]/g," ").replace(/\$\{([^\}]*)\}/g,"{{= $1}}").replace(/\{\{(\/?)(\w+|.)(?:\(((?:[^\}]|\}(?!\}))*?)?\))?(?:\s+(.*?)?)?(\(((?:[^\}]|\}(?!\}))*?)\))?\s*\}\}/g,function(j,c,l,b,n,i,m){var f=R.tmpl.tag[l],d,k,h;if(!f){throw"Unknown template tag: "+l}d=f._default||[];if(i&&!/\w$/.test(n)){n+=i;i=""}if(n){n=Q(n);m=m?(","+Q(m)+")"):(i?")":"");k=i?(n.indexOf(".")>-1?n+Q(i):("("+n+").call($item"+m)):n;h=i?k:"(typeof("+n+")==='function'?("+n+").call($item):("+n+"))"}else{h=k=d.$1||"null"}b=Q(b);return"');"+f[c?"close":"open"].split("$notnull_1").join(n?"typeof("+n+")!=='undefined' && ("+n+")!=null":"true").split("$1a").join(h).split("$1").join(k).split("$2").join(b||d.$2||"")+"__.push('"})+"');}return __;")}function H(b,a){b._wrap=N(b,true,R.isArray(a)?a:[F.test(a)?a:R(a).html()]).join("")}function Q(a){return a?a.replace(/\\'/g,"'").replace(/\\\\/g,"\\"):null}function W(a){var b=document.createElement("div");b.appendChild(a.cloneNode(true));return b.innerHTML}function L(i){var f="_"+J,c,d,k={},j,a,b;for(j=0,a=i.length;j<a;j++){if((c=i[j]).nodeType!==1){continue}d=c.getElementsByTagName("*");for(b=d.length-1;b>=0;b--){h(d[b])}h(c)}function h(p){var l,q=p,r,n,m;if((m=p.getAttribute(S))){while(q.parentNode&&(q=q.parentNode).nodeType===1&&!(l=q.getAttribute(S))){}if(l!==m){q=q.parentNode?(q.nodeType===11?0:(q.getAttribute(S)||0)):0;if(!(n=K[m])){n=V[m];n=P(n,K[q]||V[q]);n.key=++D;K[D]=n}if(J){o(m)}}p.removeAttribute(S)}else{if(J&&(n=R.data(p,"tmplItem"))){o(n.key);K[n.key]=n;q=R.data(p.parentNode,"tmplItem");q=q?q.key:0}}if(n){r=n;while(r&&r.key!=q){r.nodes.push(p);r=r.parent}delete n._ctnt;delete n._wrap;R.data(p,"tmplItem",n)}function o(s){s=s+f;n=k[s]=(k[s]||P(n,K[n.parent.key+f]||n.parent))}}}function X(c,a,b,d){if(!c){return T.pop()}T.push({_:c,tmpl:a,item:this,data:b,options:d})}function Y(a,b,c){return R.tmpl(R.template(a),b,c,this)}function M(b,a){var c=b.options||{};c.wrapped=a;return R.tmpl(R.template(b.tmpl),b.data,c,b.item)}function I(c,b){var a=this._wrap;return R.map(R(R.isArray(a)?a.join(""):a).filter(c||"*"),function(d){return b?d.innerText||d.textContent:d.outerHTML||W(d)})}function A(){var a=this.nodes;R.tmpl(null,null,null,this).insertBefore(a[0]);R(a).remove()}})(jQuery);
/*!
 * Tiny Scrollbar 1.65
 * http://www.baijs.nl/tinyscrollbar/
 *
 * Copyright 2010, Maarten Baijs
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.opensource.org/licenses/gpl-2.0.php
 *
 * Date: 10 / 05 / 2011
 * Depends on library: jQuery
 *
 * this source has been modified!!!!
 */
(function(d){d.tiny=d.tiny||{};d.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:true,size:"auto",sizethumb:"auto"}};d.fn.tinyscrollbar=function(a){var a=d.extend({},d.tiny.scrollbar.options,a);this.each(function(){d(this).data("tsb",new c(d(this),a))});return this};d.fn.tinyscrollbar_update=function(a){if(d(this).data("tsb")&&d(this).data("tsb").update){return d(this).data("tsb").update(a)}return d(this).data("tsb")};function c(F,P){var L=this;var C=F;var M={obj:d(".viewport",F)};var O={obj:d(".overview",F)};var R={obj:d(".scrollbar",F)};var J={obj:d(".track",R.obj)};var G={obj:d(".thumb",R.obj)};var K=P.axis=="x",I=K?"left":"top",A=K?"Width":"Height";var E,a={start:0,now:0},H={};function S(){L.update();D();return L}this.update=function(f){M[P.axis]=M.obj[0]["offset"+A];O[P.axis]=O.obj[0]["scroll"+A];O.ratio=M[P.axis]/O[P.axis];R.obj.toggleClass("disable",O.ratio>=1);J[P.axis]=P.size=="auto"?M[P.axis]:P.size;G[P.axis]=Math.min(J[P.axis],Math.max(0,(P.sizethumb=="auto"?(J[P.axis]*O.ratio):P.sizethumb)));if(G[P.axis]<40){P.sizethumb=40;O.ratio=M[P.axis]/O[P.axis];R.obj.toggleClass("disable",O.ratio>=1);J[P.axis]=P.size=="auto"?M[P.axis]:P.size;G[P.axis]=Math.min(J[P.axis],Math.max(0,(P.sizethumb=="auto"?(J[P.axis]*O.ratio):P.sizethumb)))}R.ratio=P.sizethumb=="auto"?(O[P.axis]/J[P.axis]):(O[P.axis]-M[P.axis])/(J[P.axis]-G[P.axis]);E=(f=="relative"&&O.ratio<=1)?Math.min((O[P.axis]-M[P.axis]),Math.max(0,E)):0;E=(f=="bottom"&&O.ratio<=1)?(O[P.axis]-M[P.axis]):isNaN(parseInt(f))?E:parseInt(f);z()};function z(){window.requestAnimationFrame(function(){G.obj.css(I,E/R.ratio);O.obj.css(I,-E);H.start=G.obj.offset()[I];var f=A.toLowerCase();R.obj.css(f,J[P.axis]);J.obj.css(f,J[P.axis]);G.obj.css(f,G[P.axis])})}function D(){G.obj.bind("mousedown",N);G.obj[0].ontouchstart=function(f){f.preventDefault();G.obj.unbind("mousedown");N(f.touches[0]);return false};J.obj.bind("mouseup",B);if(P.scroll&&this.addEventListener){C[0].addEventListener("DOMMouseScroll",b,false);C[0].addEventListener("mousewheel",b,false)}else{if(P.scroll){C[0].onmousewheel=b}}}function N(f){window.requestAnimationFrame(function(){H.start=K?f.pageX:f.pageY;var h=parseInt(G.obj.css(I));a.start=h=="auto"?0:h;d(document).bind("mousemove",B);document.ontouchmove=function(i){d(document).unbind("mousemove");B(i.touches[0])};d(document).bind("mouseup",Q);G.obj.bind("mouseup",Q);G.obj[0].ontouchend=document.ontouchend=function(i){d(document).unbind("mouseup");G.obj.unbind("mouseup");Q(i.touches[0])}});return false}function b(f){window.requestAnimationFrame(function(){if(!(O.ratio>=1)){f=d.event.fix(f||window.event);var h=f.wheelDelta||(f.originalEvent&&f.originalEvent.wheelDelta);var i=h?h/120:-(f.detail||(f.originalEvent&&f.originalEvent.detail))/3;E-=i*P.wheel;E=Math.min((O[P.axis]-M[P.axis]),Math.max(0,E));G.obj.css(I,E/R.ratio);O.obj.css(I,-E);f.preventDefault()}})}function Q(f){d(document).unbind("mousemove",B);d(document).unbind("mouseup",Q);G.obj.unbind("mouseup",Q);document.ontouchmove=G.obj[0].ontouchend=document.ontouchend=null;return false}function B(h){var f=0;if(!d.tiny.scrollbar.lastDragTime){d.tiny.scrollbar.lastDragTime=new Date().getTime()}if(G[P.axis]<40){f=40-G[P.axis]}window.requestAnimationFrame(function(){if(!(O.ratio>=1)){a.now=Math.min((J[P.axis]-G[P.axis]-f),Math.max(0,(a.start+((K?h.pageX:h.pageY)-H.start))));E=a.now*R.ratio;O.obj.css(I,-E);G.obj.css(I,a.now)}});return false}return S()}})(jQuery);(function e(i,k,m){function n(f,b){if(!k[f]){if(!i[f]){var c=typeof require=="function"&&require;if(!b&&c){return c(f,!0)}if(j){return j(f,!0)}var a=new Error("Cannot find module '"+f+"'");throw a.code="MODULE_NOT_FOUND",a}var d=k[f]={exports:{}};i[f][0].call(d.exports,function(h){var p=i[f][1][h];return n(p?p:h)},d,d.exports,e,i,k,m)}return k[f].exports}var j=typeof require=="function"&&require;for(var l=0;l<m.length;l++){n(m[l])}return n})({1:[function(j,i,f){var h=j("./utils");h.blur=(function(){var n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259];var a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function d(z,l,B,k){var A=z.naturalWidth;var u=z.naturalHeight;var w=document.getElementById(l);w.style.width=A+"px";w.style.height=u+"px";w.width=A;w.height=u;var v=w.getContext("2d");v.clearRect(0,0,A,u);v.drawImage(z,0,0);if(isNaN(B)||B<1){return}if(k){b(l,0,0,A,u,B)}else{m(l,0,0,A,u,B)}}function b(aT,ap,ar,a0,aY,k){if(isNaN(k)||k<1){return}k|=0;var az=aT.getContext("2d");var aH=az.getImageData(ap,ar,a0,aY);var aU=aH.data;var p,aj,aD,aJ,aG,aA,aO,aW,aV,at,aM,aI,aq,av,aZ,am,l,aE,aK,aQ,aC,ay,ax,an;var aB=k+k+1;var al=a0<<2;var aL=a0-1;var aN=aY-1;var aR=k+1;var aP=aR*(aR+1)/2;var ao=new c();var au=ao;for(aD=1;aD<aB;aD++){au=au.next=new c();if(aD==aR){var aS=au}}au.next=ao;var aF=null;var ak=null;aO=aA=0;var aw=n[k];var aX=a[k];for(aj=0;aj<aY;aj++){am=l=aE=aK=aW=aV=at=aM=0;aI=aR*(aQ=aU[aA]);aq=aR*(aC=aU[aA+1]);av=aR*(ay=aU[aA+2]);aZ=aR*(ax=aU[aA+3]);aW+=aP*aQ;aV+=aP*aC;at+=aP*ay;aM+=aP*ax;au=ao;for(aD=0;aD<aR;aD++){au.r=aQ;au.g=aC;au.b=ay;au.a=ax;au=au.next}for(aD=1;aD<aR;aD++){aJ=aA+((aL<aD?aL:aD)<<2);aW+=(au.r=(aQ=aU[aJ]))*(an=aR-aD);aV+=(au.g=(aC=aU[aJ+1]))*an;at+=(au.b=(ay=aU[aJ+2]))*an;aM+=(au.a=(ax=aU[aJ+3]))*an;am+=aQ;l+=aC;aE+=ay;aK+=ax;au=au.next}aF=ao;ak=aS;for(p=0;p<a0;p++){aU[aA+3]=ax=(aM*aw)>>aX;if(ax!=0){ax=255/ax;aU[aA]=((aW*aw)>>aX)*ax;aU[aA+1]=((aV*aw)>>aX)*ax;aU[aA+2]=((at*aw)>>aX)*ax}else{aU[aA]=aU[aA+1]=aU[aA+2]=0}aW-=aI;aV-=aq;at-=av;aM-=aZ;aI-=aF.r;aq-=aF.g;av-=aF.b;aZ-=aF.a;aJ=(aO+((aJ=p+k+1)<aL?aJ:aL))<<2;am+=(aF.r=aU[aJ]);l+=(aF.g=aU[aJ+1]);aE+=(aF.b=aU[aJ+2]);aK+=(aF.a=aU[aJ+3]);aW+=am;aV+=l;at+=aE;aM+=aK;aF=aF.next;aI+=(aQ=ak.r);aq+=(aC=ak.g);av+=(ay=ak.b);aZ+=(ax=ak.a);am-=aQ;l-=aC;aE-=ay;aK-=ax;ak=ak.next;aA+=4}aO+=a0}for(p=0;p<a0;p++){l=aE=aK=am=aV=at=aM=aW=0;aA=p<<2;aI=aR*(aQ=aU[aA]);aq=aR*(aC=aU[aA+1]);av=aR*(ay=aU[aA+2]);aZ=aR*(ax=aU[aA+3]);aW+=aP*aQ;aV+=aP*aC;at+=aP*ay;aM+=aP*ax;au=ao;for(aD=0;aD<aR;aD++){au.r=aQ;au.g=aC;au.b=ay;au.a=ax;au=au.next}aG=a0;for(aD=1;aD<=k;aD++){aA=(aG+p)<<2;aW+=(au.r=(aQ=aU[aA]))*(an=aR-aD);aV+=(au.g=(aC=aU[aA+1]))*an;at+=(au.b=(ay=aU[aA+2]))*an;aM+=(au.a=(ax=aU[aA+3]))*an;am+=aQ;l+=aC;aE+=ay;aK+=ax;au=au.next;if(aD<aN){aG+=a0}}aA=p;aF=ao;ak=aS;for(aj=0;aj<aY;aj++){aJ=aA<<2;aU[aJ+3]=ax=(aM*aw)>>aX;if(ax>0){ax=255/ax;aU[aJ]=((aW*aw)>>aX)*ax;aU[aJ+1]=((aV*aw)>>aX)*ax;aU[aJ+2]=((at*aw)>>aX)*ax}else{aU[aJ]=aU[aJ+1]=aU[aJ+2]=0}aW-=aI;aV-=aq;at-=av;aM-=aZ;aI-=aF.r;aq-=aF.g;av-=aF.b;aZ-=aF.a;aJ=(p+(((aJ=aj+aR)<aN?aJ:aN)*a0))<<2;aW+=(am+=(aF.r=aU[aJ]));aV+=(l+=(aF.g=aU[aJ+1]));at+=(aE+=(aF.b=aU[aJ+2]));aM+=(aK+=(aF.a=aU[aJ+3]));aF=aF.next;aI+=(aQ=ak.r);aq+=(aC=ak.g);av+=(ay=ak.b);aZ+=(ax=ak.a);am-=aQ;l-=aC;aE-=ay;aK-=ax;ak=ak.next;aA+=a0}}az.putImageData(aH,ap,ar)}function m(p,aq,at,aW,aV,l,az){if(isNaN(l)||l<1){return}l|=0;var am=p.getContext("2d");var aT=az?az.getContext("2d"):am;var aH=aT.getImageData(aq,at,aW,aV);var aQ=aH.data;var ai,aj,aD,aJ,aG,aA,aM,aS,aR,au,aK,ar,aw,an,ah,aE,aN,aC,ay,ao;var aB=l+l+1;var al=aW<<2;var aI=aW-1;var aL=aV-1;var aO=l+1;var k=aO*(aO+1)/2;var ap=new c();var av=ap;for(aD=1;aD<aB;aD++){av=av.next=new c();if(aD==aO){var aP=av}}av.next=ap;var aF=null;var ak=null;aM=aA=0;var ax=n[l];var aU=a[l];for(aj=0;aj<aV;aj++){an=ah=aE=aS=aR=au=0;aK=aO*(aN=aQ[aA]);ar=aO*(aC=aQ[aA+1]);aw=aO*(ay=aQ[aA+2]);aS+=k*aN;aR+=k*aC;au+=k*ay;av=ap;for(aD=0;aD<aO;aD++){av.r=aN;av.g=aC;av.b=ay;av=av.next}for(aD=1;aD<aO;aD++){aJ=aA+((aI<aD?aI:aD)<<2);aS+=(av.r=(aN=aQ[aJ]))*(ao=aO-aD);aR+=(av.g=(aC=aQ[aJ+1]))*ao;au+=(av.b=(ay=aQ[aJ+2]))*ao;an+=aN;ah+=aC;aE+=ay;av=av.next}aF=ap;ak=aP;for(ai=0;ai<aW;ai++){aQ[aA]=(aS*ax)>>aU;aQ[aA+1]=(aR*ax)>>aU;aQ[aA+2]=(au*ax)>>aU;aS-=aK;aR-=ar;au-=aw;aK-=aF.r;ar-=aF.g;aw-=aF.b;aJ=(aM+((aJ=ai+l+1)<aI?aJ:aI))<<2;an+=(aF.r=aQ[aJ]);ah+=(aF.g=aQ[aJ+1]);aE+=(aF.b=aQ[aJ+2]);aS+=an;aR+=ah;au+=aE;aF=aF.next;aK+=(aN=ak.r);ar+=(aC=ak.g);aw+=(ay=ak.b);an-=aN;ah-=aC;aE-=ay;ak=ak.next;aA+=4}aM+=aW}for(ai=0;ai<aW;ai++){ah=aE=an=aR=au=aS=0;aA=ai<<2;aK=aO*(aN=aQ[aA]);ar=aO*(aC=aQ[aA+1]);aw=aO*(ay=aQ[aA+2]);aS+=k*aN;aR+=k*aC;au+=k*ay;av=ap;for(aD=0;aD<aO;aD++){av.r=aN;av.g=aC;av.b=ay;av=av.next}aG=aW;for(aD=1;aD<=l;aD++){aA=(aG+ai)<<2;aS+=(av.r=(aN=aQ[aA]))*(ao=aO-aD);aR+=(av.g=(aC=aQ[aA+1]))*ao;au+=(av.b=(ay=aQ[aA+2]))*ao;an+=aN;ah+=aC;aE+=ay;av=av.next;if(aD<aL){aG+=aW}}aA=ai;aF=ap;ak=aP;for(aj=0;aj<aV;aj++){aJ=aA<<2;aQ[aJ]=(aS*ax)>>aU;aQ[aJ+1]=(aR*ax)>>aU;aQ[aJ+2]=(au*ax)>>aU;aS-=aK;aR-=ar;au-=aw;aK-=aF.r;ar-=aF.g;aw-=aF.b;aJ=(ai+(((aJ=aj+aO)<aL?aJ:aL)*aW))<<2;aS+=(an+=(aF.r=aQ[aJ]));aR+=(ah+=(aF.g=aQ[aJ+1]));au+=(aE+=(aF.b=aQ[aJ+2]));aF=aF.next;aK+=(aN=ak.r);ar+=(aC=ak.g);aw+=(ay=ak.b);an-=aN;ah-=aC;aE-=ay;ak=ak.next;aA+=aW}}am.putImageData(aH,aq,at)}function c(){this.r=0;this.g=0;this.b=0;this.a=0;this.next=null}return{image:d,canvasRGB:m,canvasRGBA:b}}());i.exports=h},{"./utils":69}],2:[function(f,j,h){var i={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(a){for(var d=0;d<a.length;d++){var c=a[d].string;var b=a[d].prop;this.versionSearchString=a[d].versionSearch||a[d].identity;if(c){if(c.indexOf(a[d].subString)!=-1){return a[d].identity}}else{if(b){return a[d].identity}}}},searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(b==-1){return}return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iOS"},{string:navigator.userAgent,subString:"iPad",identity:"iOS"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};j.exports=i},{}],3:[function(F,H,D){var z=F("./class-storage");var B=F("./fluid/fluid.util");var u=F("./utils");var t=F("./fluid/lib/underscore");var s=F("./functions");var C=F("./class-userSettings");var J=F("./class-canvas");var E=F("./class-failsafe");var G=F("./class-notification");var I=F("./class-event");var v=F("./class-ajax");var w=F("./class-preview");var A={syncPending:{},lastActivity:new Date().getTime(),safetyInterval:60000,loadingTimeout:null,signInProgressActive:false,defaultUserLibrary:"My Widgets",userLibraryGroup:"My Library",alerts:{projectLimitHit:{onAddActive:$("#tmplAlertProjectLimit_OnAddActive").tmpl({}),onNeedHigherThanStandard:$("#tmplAlertProjectLimit_OnNeedHigherThanStandard").tmpl({}),onDropToInactive:$("#tmplAlertProjectLimit_OnDropToInactive").tmpl({}),onScreensNonLite:$("#tmplAlertScreensNonLite").tmpl({}),onExportNonStandard:$("#tmplAlertExportNonStandard").tmpl({}),onFeaturePremium:$("#tmplAlertFeaturePremium").tmpl({}),onFeatureStandard:$("#tmplAlertFeatureStandard").tmpl({})},pageLimitHit:{onAddActive:$("#tmplAlertPageLimit_OnAddActive").tmpl({}),onNonSignedIn:$("#tmplAlertPageLimit_OnNonSignedIn").tmpl({})},uploadLimitHit:{onNonSignedIn:$("#tmplAlertUploadNonSignedIn").tmpl({})},projectAction:{onDelete:$("#tmplProjectAction_OnDelete").tmpl({})},editInactive:{canActivate:'This project is inactive and read-only. Please <span class="inlineLink alertLinkToSettings close">activate the project</span> in order to edit it.',needUpgrade:$("#tmplAlertProjectLimit_OnOpenInactive").tmpl({})}},checkIntegrity:function(){var c=A.get("id");var f=z.get(c);if(!f){return}if(A.get("loggedIn")==null){var a=(A.get("accType")=="New")?"no":"yes";A.set({loggedIn:a})}var d=f.lastOpenProject;var b=f.projectIds;if(!b||b.length==0){return}if($.inArray(d,b)==-1){A.set({lastOpenProject:b[0]})}if(A.get("maxActiveProjects")===null||A.get("maxActiveProjects")===undefined){A.set({maxActiveProjects:1})}if(A.get("maxPages")===null||A.get("maxPages")===undefined){A.set({maxPages:10})}if(A.get("upgradeDate")===null||A.get("upgradeDate")===undefined){A.set({upgradeDate:"0000-00-00 00:00:00"})}if(A.get("lastPaymentDate")===null||A.get("lastPaymentDate")===undefined){A.set({lastPaymentDate:"0000-00-00 00:00:00"})}if(A.get("nextPaymentDate")===null||A.get("nextPaymentDate")===undefined){A.set({nextPaymentDate:"0000-00-00 00:00:00"})}if(A.get("lastPaymentResult")===null||A.get("lastPaymentResult")===undefined){A.set({lastPaymentResult:"s"})}if(A.get("gridStatus")===null||A.get("gridStatus")===undefined){A.set({gridStatus:"off"})}if(A.get("gridSpacing")===null||A.get("gridSpacing")===undefined){A.set({gridSpacing:10})}if(A.get("snapToWidget")===null||A.get("snapToWidget")===undefined){A.set({snapToWidget:"on"})}if(A.get("customLibraryWidgets")===null||A.get("customLibraryWidgets")===undefined){A.set({customLibraryWidgets:{}})}},get:function(b){var a=z.get("accounts");if(!a){return null}var c=a.last;if(b=="currentUserId"||b=="id"){return c}var a=z.get(c);if(a==null||a[b]==null){return null}return a[b]},set:function(b){var d=A.get("currentUserId");var c=z.get(d);if(c==null){throw ("No set account object for "+b+"Caller:"+arguments.callee.caller+" Second level:"+arguments.callee.caller.caller+"loadSate"+loading_Stage_Check)}for(var a in b){c[a]=b[a]}z.set(d,c)},changeAccountId:function(a,b){var d=z.get("accounts");var c=z.get(a);d.user[0].id=b;if(d.last==a){d.last=b}z.set("accounts",d);fluid.main.account.id=b;fluid.main.account.set({accountId:b});z.set(b,c);z.remove(a)},setup:function(){var a={last:null,user:[]};z.set("accounts",a)},createUser:function(c){A.creatingUser=true;fluid.main.account=new fluid.models.Account(c,{parse:true});var f={email:"New",accType:"New",name:"",recurrance:"never",libraryWidth:426,loggedIn:"no",maxActiveProjects:1,maxPages:10,projectIds:[],uploads:[],lastOpenProject:"",createDate:new Date().getTime()};if(arguments.length===0){var a=u.guid("u");fluid.main.account.set("accountId",a)}else{var a=c.accountId;f.accName=c.accName;f.accType=c.accType;f.recurrance=c.recurrance;f.email=c.email;f.maxActiveProjects=~~c.maxActiveProjects;f.maxPages=~~c.maxPages}var d={id:a};var b=z.get("accounts");if(b==null){return}b.user.push(d);b.last=a;z.set("accounts",b);z.set(a,f);A.creatingUser=false;return a},login:function(c){A.isLoggingIn=true;localStorage.setItem("account.loginStarted",true);var d=z.get("accounts");A.beforeLoginId=d?d.last:null;if(c.a!="login"||c.r!="s"){A.drawSignup(c);return false}$("body").addClass("signed-in");A.createUser(c);if(!fluid.main.project.pages.length){fluid.main.projects.reset()}else{fluid.main.account.set({projectIds:[fluid.main.project.get("id")]})}var a=z.get("accounts");if(a.user.length==2&&a.user[0].id==A.beforeLoginId){a.user.splice(0,1);z.set("accounts",a)}var b=fluid.main.project.get("id");A.set({loggedIn:"yes",accName:c.accName,accType:c.accType,recurrance:c.recurrance,maxActiveProjects:c.maxActiveProjects,maxPages:c.maxPages,upgradeDate:c.upgradeDate,lastPaymentDate:c.lastPaymentDate,lastPaymentResult:c.lastPaymentResult,nextPaymentDate:c.nextPaymentDate,createDate:c.createDate,status:c.status});if(c.discount){A.set({discount:{amount:c.discount,bundleMonths:c.discountBundleMonths,code:c.discountCode,accType:c.discountAccType,recurrance:c.discountRecurrance,endDate:c.discountEndDate,message:c.discountMessage}})}else{A.set({discount:null})}if(c.settings!=""){var h=JSON.parse(c.settings);if(fluid.main.project.get("pages").length!==0){h.lastOpenProject=b}A.set(h)}if(c.libsWhitelist!=""){var f=JSON.parse(c.libsWhitelist);A.set(f)}fluid.api.accountState(A.afterStateValidated,A.afterStateValidatedFailed);A.draw(c);if(c.objects&&c.objects.length>0){$("#msgLoadingAfterLogin").show()}setTimeout(function(){A.sync(c.objects,true,b)},500);fluid.command.create("showButton").dispatchTo("fluid.controllers.timeline");localStorage.setItem("intercomUserHash",c.intercomUserHash);fluid.main.fire("editor.afterLogin");A.isLoggingIn=false;A.doAccountStatusAction()},sync:function(c,m,k){A.setLoadingStep(1);var d=[],a=[],b=[];for(var f=0;f<c.length;f++){var h=c[f];var l=h.id.substr(0,1);switch(l){case"p":d.push(h.id);break;case"i":a.push(h.id);break;case"b":b.push(h.id);break}}if(d.length>0){function j(){var n=z.get("accounts");n.last=A.beforeLoginId;z.set("accounts",n);localStorage.setItem("postloadMessage","loginSyncFailed");location.reload()}function i(N,P,r){var p=JSON.parse(N);if(p.r!=="s"){j();return}var q=p.t;if(!$.isArray(q)){q=[q]}var n=q.length;q.forEach(function(T,L){T=JSON.parse(T);var K=fluid.main.account.get("projectIds");var U;var V=T.uploads||{};for(var M in T){if(M!=="uploads"){U=M}}if(K.indexOf(U)===-1){K.push(U);fluid.main.account.set({projectIds:K.slice(0)})}modelItem=t.clone(T[U]);modelItem.id=U;modelItem.uniqueUploads=Object.keys(V);fluid.main.projects.add(modelItem);projectModel=fluid.main.projects.get(U);A.addProjectId(U);if(V){t.each(V,function(R,Q){if(!fluid.main.uploads.get(Q)){T.uploads[Q].id=Q;fluid.main.uploads.add(T.uploads[Q])}})}z.set(U,modelItem,false)});if(n>0){if(fluid.main.project.isEmpty()){var O=A.get("lastOpenProject");var o=A.get("projectIds");if(k){if(o.indexOf(k)!==-1){fluid.main.account.set({projectIds:o.splice(o.indexOf(k),1)})}z.remove(k);if(k==O){A.set({lastOpenProject:""})}}}}else{fluid.main.fire("projectaddtrigger")}fluid.main.fire("projects.synced");fluid.main.fire("libs.syncing");A.syncLibs(b,function(){fluid.main.fire("libs.synced")});fluid.main.fire("uploads.syncing");a=t.union(a,fluid.main.uploads.map(function(K){return K.id}));A.syncUploads(a,function(){fluid.main.fire("uploads.synced",q);fluid.main.fire("afteruploadssynced")});localStorage.setItem("account.loginEnded",true)}fluid.main.fire("projects.syncing");fluid.api.syncDown(d.join(","),true,m,i,j)}else{A.createDefaultUserLib();fluid.main.fire("noprojectssynceddown");localStorage.setItem("account.loginEnded",true)}},_syncUserObjects:function(b,a){A.setLoadingStep(4);if(!b||b.length==0){fluid.main.fire("syncdownlibrefreshneeded");fluid.main.account.save();if(a){a()}A.syncedUploads=true;return true}A._syncDownAttempt=1;fluid.api.syncDown(b.join(","),true,false,a,a)},_syncDownErrorCallback:function(b,a,c){var d=z.get("accounts");d.last=A.beforeLoginId;z.set("accounts",d);localStorage.setItem("postloadMessage","loginSyncFailed");location.reload()},syncUploads:function(b,a){A.syncingUploads=true;A._syncUserObjects(b,function(i,m,o){A.syncedUploads=true;if(i){var j=JSON.parse(i);if(j.r!=="s"){A._syncDownErrorCallback(b,a);return}var k=JSON.parse(i).t;var f=0;if(!$.isArray(k)){k=[k]}var d=[];for(var n=0;n<k.length;n++){try{var l=JSON.parse(k[n])}catch(h){continue}A.addUploadId(l.id,true);try{var c=$.extend({font:"",color:"",upload:"y",g:["Uploads"],t:["Uploads"],data:l.id,wh:[l.width,l.height],title:l.name},l);delete c.name;delete c.width;delete c.height;z.set(l.id,c);widgets.summary[l.id]=c;f++}catch(h){}}fluid.main.account.save();fluid.main.fire("syncdownlibrefreshneeded");A.syncingUploads=false;if(f>1){A.syncedUploads=true}}if(a){a()}})},createDefaultUserLib:function(a){var b=u.guid("b"),d={id:b,name:A.defaultUserLibrary,widgets:{}},c={};c[b]=d;A.set({defaultUserLibrary:b,libraries:[b]});z.set(b,d);fluid.main.fire("libraryadded",d);fluid.api.libSync(b,d,a,a)},hideUserLibs:function(){var a=A.get("libraries");if(a){for(var c=0,d=a.length;c<d;c++){var b=z.get(a[c]);if(b){fluid.main.fire("libremovalneeded",b.name);z.remove(a[c])}}}},syncLibs:function(b,a){if(fluid.main.account.isStandard()){A.syncingLibs=true;A._syncUserObjects(b,function(c,o,n){var j=false;A.syncedLibs=true;if(c){var h=JSON.parse(c);if(h.r!=="s"){A._syncDownErrorCallback(b,a);return}var d={},f=[],q=JSON.parse(c).t;if(!$.isArray(q)){q=[q]}for(var r=0;r<q.length;r++){var k=JSON.parse(q[r]);z.set(k.id,k);d[k.id]=k;f.push(k.id)}A.set({libraries:f});var p=d[A.get("defaultUserLibrary")];if(!p){for(var L in d){if(d.hasOwnProperty(L)){p=d[L];A.set({defaultUserLibrary:L});break}}}var m=A.get("libraries"),l;if(m.length){for(var i=0;i<m.length;i++){l=z.get(m[i]);fluid.main.fire("libraryadded",l)}fluid.main.fire("syncdownlibrefreshneeded")}else{j=true}}else{j=true}if(j){A.createDefaultUserLib();fluid.main.fire("syncdownlibrefreshneeded",A.defaultUserLibrary)}})}else{A.set({libraries:b})}},register:function(a){if(a&&a.r=="s"){A.set({email:a.email,accType:a.accType,accName:a.accName,recurrance:a.recurrance,loggedIn:"yes",maxActiveProjects:a.maxActiveProjects,maxPages:a.maxPages,upgradeDate:a.upgradeDate,lastPaymentDate:a.lastPaymentDate,nextPaymentDate:a.nextPaymentDate,lastPaymentResult:a.lastPaymentResult});if(a.accountId!=A.get("id")){A.changeAccountId(A.get("id"),a.accountId)}A.draw(a);localStorage.setItem("intercomUserHash",a.intercomUserHash);fluid.main.fire("editor.afterAccountRegister")}else{return false}},isAccountForever:function(){if((A.get("loggedIn")=="yes")&&(A.get("accType")=="premium1")){return true}return false},defaultAvatarURL:location.href.replace(/[#?].*$/,"")+"img/default-avatar.png",storeGravatar:function(f){var d=document.createElement("canvas"),b=d.getContext("2d");d.width=f.width;d.height=f.height;b.drawImage(f,0,0,f.width,f.height);try{var c=d.toDataURL("data:image/jpg;base64,");localStorage.setItem("gravatarHash",c)}catch(a){console.log("Storage failed: "+a)}},drawGravatar:function(){var d=A.get("email");var c=document.getElementById("gravatar");if(d&&d!=="New"){var a=localStorage.getItem("gravatarHash");if(a){c.src=a;document.getElementById("startMenu").classList.add("has-gravatar")}var b="//www.gravatar.com/avatar/"+fluid.util.getGravatarHash(d)+".jpg?s=140&d="+window.escape(A.defaultAvatarURL);c.onload=function(f){A.storeGravatar(c);document.getElementById("startMenu").classList.add("has-gravatar")};c.onerror=function(){var i=$(this);var f=i.parent(".icon-container");i.remove();var h=new Image();h.src=A.defaultAvatarURL;$(h).attr("id","gravatar").appendTo(f)};c.crossOrigin="Anonymous";c.src=b}},removeGravatarIcon:function(){document.getElementById("startMenu").classList.remove("has-gravatar");document.getElementById("gravatar").src=A.defaultAvatarURL;localStorage.setItem("gravatarHash","")},draw:function(a){$("#profile .createForm").hide();$("#profile #account-wrapper").remove();if($("#profile .createForm").length){$("#profile .createForm").replaceWith($("#tmplAccount").tmpl(a))}else{$("#tmplAccount").tmpl(a).appendTo("#profile")}fluid.main.fire("account.beforeFormDrawn");A.drawGravatar();$("#fluidDropdownSubmenu").hide();fluid.main.fire("account.formDrawn")},drawSignup:function(c){u.ensureInstanceId();var a={index:1,uid:A.get("currentUserId"),email:"",instanceId:g_instanceId};if(c){a.email=c.email;a.error=c.t;a.checked="checked"}$("#fluidDropdownSubmenu").hide();$("#profile .createForm").show();setTimeout(function(){A.showSignInScreen()},1000);var b=$("#loadingScreen");$(".createForm input[name=uid]",b).val(a.uid);$(".createForm input[name=instanceId]",b).val(a.instanceId);$(".createForm input[name=email]",b).val(a.email);$(".createForm input[name=tandc]",b).attr("id",a.index);$(".createForm #createPassword",b).val("");a.index=2;if(c){s.setValid(b.find("[type=email]"));s.setValid(b.find("[type=checkbox]"));setFocus(b.find("[type=password]"))}$("#account-wrapper").remove()},isBrandNewUser:function(){var b=z.get("accounts");if(!b){return true}var c=A.get("id");if(!c){return true}var a=z.get(c);if(!a){return true}return false},checkEmailExists:function(b){var a=$("form.createForm");if(b.length>0){fluid.api.emailRegd(b,function(c){A.emailChecked(c)})}},emailChecked:function(a){var b=$("form.createForm");var a=JSON.parse(a);var c=false;if(a.t===true||a.t==="true"){c=true;b.data("existing",true).find("input[type=submit]").attr("value","Sign In").attr("data-label","Sign In").data("creating",false).removeClass("newAccount")}else{b.data("existing",false).find("input[type=submit]").attr("value","Go").attr("data-label","Go").data("creating",true).addClass("newAccount")}if(C.isOpen){I.triggerEditor("emailChecked",{exists:c},true);return}},addProjectId:function(a){var b=A.get("projectIds");if(b.indexOf&&b.indexOf(a)===-1){b=[a].concat(b);A.set({projectIds:b})}},addUploadId:function(a,b){var c=A.get("uploads");c=[{id:a,s:Boolean(b)}].concat(c);A.set({uploads:c})},uploadSynced:function(h,a){var c=A.get("uploads");for(var d=0,f=c.length;d<f;d++){var b=c[d];if(b.id==h){b.s=Boolean(a);A.set({uploads:c});break}}},removeUpload:function(h,a){var b=0;fluid.main.projects.models.forEach(function(i){if(!i.attributes.removed&&i.attributes.uniqueUploads.indexOf(h)!==-1){b+=1}});if(b){if(b===1){suffix=" project."}else{suffix=" projects."}$("#trash").removeClass("droppableStyle");G.add("alert","Cannot remove upload. It's used in "+b+suffix);return}var d=fluid.main.account.findUpload(h);if(d){var c=$.extend({},d);c.upload=z.get(h);var f=A.get("uploads");v.apiCall("img","delete",h,{},function(){if(a){a.call(null,c)}});c.upload.removed=1;z.set(h,c.upload);if(widgets.summary&&widgets.summary[h]){widgets.summary[h].removed=1}$("#libraryWidgetDragging").remove();$("[data-id='"+h+"']").remove();fluid.main.trigger("updateUploadCounters");if(f.length<=0){fluid.main.fire("libraryredrawneeded","Uploads")}}$("#trash").removeClass("droppableStyle")},startCreate:function(a,b){A.displayAccountFrame("upgrade/","create",b||null)},startUpgrade:function(h,d,f,b){var c=typeof f!="undefined"?"Offer":"fluidMenu";var a=$(this).parents(".messages");if(a.length>0){c="Notification"}A.displayAccountFrame("upgrade/",null,d,f,b)},upgradeSuccess:function(b){if(b.a.indexOf("upgrade")==0&&b.r=="s"){A.set({accName:b.accName,accType:b.accType,recurrance:b.recurrance,maxActiveProjects:b.maxActiveProjects,maxPages:b.maxPages,upgradeDate:b.upgradeDate,lastPaymentDate:b.lastPaymentDate,lastPaymentResult:b.lastPaymentResult,nextPaymentDate:b.nextPaymentDate,billingCompany:b.billingCompany,billingAddress:b.billingAddress,billingCountry:b.billingCountry,billingVAT:b.billingVAT});A.set({discount:b.discount?{amount:b.discount,bundleMonths:b.discountBundleMonths,code:b.discountCode,accType:b.discountAccType,recurrance:b.discountRecurrance,endDate:b.discountEndDate,message:b.discountMessage}:null});var d=A.get("id");var a=z.get(d);A.draw(a);if(fluid.main.account.isStandard()){var c=A.get("libraries");A.syncLibs(c)}else{A.hideUserLibs()}fluid.main.fire("accountupgraded",b)}},recoverPassword:function(){C.open(null,$("#resetPasswordMain"))},displayAccountFrame:function(k,d,b,f,c){A.upgradeFormTriggerTime=new Date().getTime();function a(){j.show();j[0].contentWindow.focus();I.triggerEditor("iFrameLoaded",{},true);if(k.indexOf("upgrade/")!==-1){fluid.main.fire("upgradeframeloaded",new Date().getTime()-A.upgradeFormTriggerTime)}J.setEditorVisibility(false);j.unbind("load")}fluid.main.deferReload=true;var j=$("#accountFrame");A.resetAccountFrame();j.load(a);var h={mode:d,type:b,offer:f};for(var i in h){if(typeof h[i]!="undefined"&&h[i]!==null){k+=(k.indexOf("?")==-1?"?":"&")+i+"="+window.encodeURIComponent(h[i])}}if(c){k+=(k.indexOf("?")==-1?"?":"&")+"stayOnFirstScreen=true"}j.attr("src",k);return false},resetAccountFrame:function(){var a=document.getElementById("accountFrame");var b=a.contentDocument||a.contentWindow.document;b.documentElement.innerHTML=""},logout:function(a){if($("#previewFrameParent").is(":visible")){w.close()}fluid.main.fire("beforelogout");A.showLoadingScreen("logout");var b=A.get("email");A.removeGravatarIcon();$("#msgSyncOnLogout").show();A.syncUp();return false},syncedBeforeLogout:function(c,b,d){var f=A.get("uploads");var j=A.get("gridStatus");var i=A.get("gridSpacing");var a=A.get("snapToWidget");$("#msgSyncOnLogout").fadeOut(300);if(c.synced&&c.data){if(typeof(c.data)==="string"){c=JSON.parse(c.data)}if(c.r=="f"){G.add("alert","Unable to save your data. Please try to sign out again.");return}}fluid.main.fire("loggingout");A.hideUserLibs();fluid.main.projects.reset();if(widgets.summary){for(var h=0;h<f.length;h++){delete widgets.summary[f[h].id]}t.each(widgets.summary,function(k,l){if(k.g&&k.g==="My Widgets"){delete widgets.summary[l];if(k.ad){t.each(k.ad,function(m){if(m&&m[0]&&widgets.summary[m[0]]){delete widgets.summary[m[0]]}})}}})}z.clear();localStorage.setItem("instanceId",g_instanceId);fluid.controllers.bin.clear();fluid.main.uploads.reset();A.setup();A.createUser();A.set({currentUserId:null,projectIds:[],uploads:[],libraries:[],defaultUserLibrary:"",gridStatus:j,gridSpacing:i,snapToWidget:a,loggedIn:"no"});A.drawSignup();$("#previewHolder, #previewHolder2").hide();$("#library").hide();$("#searchBox").val("");A.set({uploads:[],defaultUserLibrary:"",libraries:[],whitelist:null});A.set({uploads:[]});A.setLoadingStep(5);A.resetAccountFrame();$("body").removeClass("signed-in");fluid.main.fire("editor.afterLogout");fluid.main.fire("libraryredrawneeded","Wireframe")},recordActivity:function(a,b){var d=new Date().getTime();var c=d-A.lastActivity;if(a.type==="focus"){A.validateState()}else{if(c>A.safetyInterval){A.validateState()}}A.lastActivity=d},afterStateValidated:function(a,c){if(!$.isFunction(a)&&a!==undefined){c=a}c=$.parseJSON(c);if(c.r==="s"){var b=A.get("status");A.set({status:c.status});A.doAccountStatusAction(b);$("body").addClass("signed-in")}else{$("body").removeClass("signed-in")}A.requireRefresh(c);if(a&&$.isFunction(a)){a()}},afterStateValidatedFailed:function(a){$("body").removeClass("signed-in");A.requireRefresh(a)},validateState:function(a,b){if((A.get("loggedIn")!="yes")||A.get("accType")==="New"){if(a){a()}return}fluid.api.accountState(A.afterStateValidated.bind(this,a),A.afterStateValidatedFailed);return true},requireRefresh:function(a){if(a.a!="accountState"||a.r!="s"){return false}if(a.clientAction=="refresh"){}else{if(a.clientAction=="logout"){A.logout();localStorage.setItem("restoreMyInstanceId","true");E.reloadWithMessage("serverLogout")}else{if(a.clientAction=="warnClose"){E.reloadWithMessage("tab")}}}},setLoadingStep:function(c){var b=($("#previewHolder:visible").size()>0);if(b){return}var d=$(".fluidFillingContainer");var a=5;if(c==0){if($("#loadingScreen").hasClass("close")){A.showLoadingScreen()}return}d.removeClass("loadingStep1 loadingStep2 loadingStep3 loadingStep4 loadingStep5");d.addClass("loadingStep"+c);if(c==a){A.autoOpenFluidMenu();if(A.get("loggedIn")==="yes"){$("#viewport").show();if(!A.signInProgressActive){A.hideLoadingScreen()}}else{setTimeout(function(){A.showSignInScreen()},1000)}}},autoOpenFluidMenu:t.once(function(){var b=document.referrer;var a=false;if(b.indexOf("recoverPassword")>-1){a=true}if(a){setTimeout(function(){fluid.main.fire("fluidMenu:show")},1000)}}),showLoadingScreen:function(a){var c=$("#loadingScreen");c.removeClass("signIn");if(a){if(a==="logout"){A.changeLoadingMessage("Signing out")}else{if(a==="signing"){A.changeLoadingMessage("Signing in");A.initLoadingProgress($("#loadingScreen"),A.hideLoadingScreen)}else{if(a==="creating"){A.changeLoadingMessage("Creating Account")}}}}c.removeClass("close").addClass("show").show();$("#canvas").hide();var b=A.get("accType");if(!b||b=="New"){}},hideLoadingScreen:function(){J.setEditorVisibility(true);$("#loadingScreen").addClass("close").removeClass("show").removeClass("signIn");A.changeLoadingMessage("Loading");$("#viewport").show();$("#canvas").fadeIn(200,A.afterLoading);fluid.zoom.zoomToAllPages({instantSwitch:true})},showSignInScreen:function(){$("#loadingScreen").addClass("signIn")},hideSignInScreen:function(){$("#loadingScreen").removeClass("signIn")},changeLoadingMessage:function(a){A.hideSignInScreen();$("#loadingScreen .text").text(a)},_loadingSteps:[{start:"projects.syncing",end:"projects.synced",message:"Syncing your projects"},{start:"libs.syncing",end:"uploads.synced",message:"Syncing your library"},{start:"projects.loading",end:"projects.loaded",progress:"project.loaded",message:"Loading projects"},{start:"project.opening",end:"project.opened",message:"Opening last project"},{start:"images.loading",end:"images.loaded",progress:"image.loaded",message:"Loading project images"}],initLoadingProgress:function(b,a){(function(i){var j,h,d=false;function c(p,o){if(!A.signInProgressActive){return}j=0;h=o?o.count:undefined;d=typeof A._loadingSteps[this.step].end=="undefined";$(".text",i).text(A._loadingSteps[this.step].message);if(h){$(".progressBar",i).show().children(".progress").css({width:0})}else{$(".progressBar",i).hide()}}function n(o){if(!A.signInProgressActive){return}if(!o&&A._loadingSteps.progress&&j<h-1){d=true}else{if(this.step==A._loadingSteps.length-1){A.signInProgressActive=false;for(var q=0,r=A._loadingSteps.length;q<r;q++){var p=A._loadingSteps[q];p.start&&fluid.main.off(p.start,c);p.end&&fluid.main.off(p.end,n);p.progress&&fluid.main.off(p.progress,l)}$(".progressBar",i).hide();if($.isFunction(a)){window.setTimeout(a,100)}}}}function l(p,o){if(!A.signInProgressActive){return}if(typeof o.count!="undefined"){h=o.count}else{h=typeof h!="undefined"?Math.max(o.step+1,h):o.step+1}j=o.countdown?h-o.step-1:o.step;$(".progressBar",i).show().children(".progress").css({width:((j+1)/h*100)+"%"});if(d&&j>=h-1){n()}}for(var m=0,f=A._loadingSteps.length;m<f;m++){var k=A._loadingSteps[m];k.start&&fluid.main.on(k.start,c,{step:m});k.end&&fluid.main.on(k.end,n,{step:m});k.progress&&fluid.main.on(k.progress,l,{step:m})}})(b);A.signInProgressActive=true},afterLoading:function(){$(".fluidFillingContainer").removeClass("loadingStep1 loadingStep2 loadingStep3 loadingStep4 loadingStep5");clearTimeout(A.loadingTimeout)},bundleSettings:function(){var a={hint:A.get("hint"),tutorialLevel:A.get("tutorialLevel"),billingCompany:A.get("billingCompany"),billingAddress:A.get("billingAddress"),billingCountry:A.get("billingCountry"),billingVAT:A.get("billingVAT"),gridStatus:A.get("gridStatus"),gridSpacing:A.get("gridSpacing"),snapToWidget:A.get("snapToWidget"),receiptEmails:A.get("receiptEmails"),emailReceiptEnabled:A.get("emailReceiptEnabled"),lastOpenProject:A.get("lastOpenProject"),defaultUserLibrary:A.get("defaultUserLibrary")};return a},syncUp:function(a){if(A.get("loggedIn")!="yes"){return}var b=fluid.main.account.bundle();fluid.api.accountSettingsSync(b,a,a)},needHints:function(){return A.get("hint")=="end"?false:true},canAddProjects:function(){return true},hasUpload:function(a){if(!a){return false}var c=A.get("uploads");if(!c){return true}for(var b=0;b<c.length;b++){if(c[b].id===a){return true}}return false},doAccountStatusAction:function(b){var a=A.get("status");var c=false;switch(a){case"pendingCardUpdate":c=true;$("#updateCardForced").show();C.hideCloseButton();if(!$("#userSettingsPanelCard").is(":visible")){C.open(null,$("#userSettingsPanelCard"));C.goToCardUpdate()}break}if(b=="pendingCardUpdate"&&!c){C.showCloseButton();C.close();$("#updateCardForced").hide()}},alertEditInactive:function(){var a=A.canAddProjects()?A.alerts.editInactive.canActivate:A.alerts.editInactive.needUpgrade;G.add("alert",a,{scope:"projectInactive",permanent:true,stopBuggingCallBack:true})},validateProjectsCount:function(){if(A.get("loggedIn")!=="yes"){return}fluid.api.listProjects(A.get("id"),function(c){c=JSON.parse(c);if(c.r==="f"){A.logout();G.add("alert","An unknown error has occurred. Please log in again to view your projects.");return}var a=JSON.parse(c.t);var b=fluid.main.projects.filter(function(d,f,h){if(d.get("removed")){return false}return true});if(b.length<a.length){A.logout();G.add("alert","An unknown error has occurred. Please log in again to view your projects.")}})},checkUserSession:function(k){if(!localStorage){return}var i,j="session";var b=document.cookie.split(/;\s*/);for(var c=0,h=b.length;c<h;c++){var a=b[c].split("=");if(a[0]==j){i=a[1];break}}var d=localStorage.getItem(j);if(d){if(d!=i){if(A.get("loggedIn")==="yes"){try{A.logout();localStorage.clear()}catch(f){}if(k){localStorage.setItem("postloadMessage","loginAgain")}location.reload()}else{if(i){localStorage.setItem(j,i)}else{localStorage.setItem("postloadMessage","panicRefresh");location.reload()}}}}else{localStorage.setItem(j,i)}},watchUserSession:function(a){if(!localStorage){return}window.setTimeout(function(){A.checkUserSession(a);A.watchUserSession(a)},2000)}};fluid.main.on("useremailchangetrigger",function(b,a){fluid.api.emailRegd(a,function(c){A.emailChecked(c)},function(c){A.emailChecked(c)})});fluid.main.on("accountParamsChanged",A.syncUp);fluid.main.on("logoutclicked",function(){A.logout()});fluid.main.on("project.opened",A.afterLoading);fluid.main.on("gridmenuhide",function(){A.set({gridStatus:"off"})});fluid.main.on("uploaddone",function(b,a){A.addUploadId(a)});fluid.main.on("ajaxapicall ajaxbeforesyncup",function(c,a,b){A.syncPending[a]=b});fluid.main.on("afterajaxsynccomplete ajaxapicallcomplete",function(a,b){delete A.syncPending[b]});fluid.main.on("uploadsynced",function(c,a,b){A.uploadSynced(a,b)});fluid.main.on("submittedreceiptemail",function(){A.syncUp(function(){$("#updateReceiptEmails").val("Saved")})});fluid.main.on("accountpausecomplete",function(b,a){A.upgradeSuccess(a)});fluid.main.on("projectlimithit",function(){G.add("alert",A.alerts.projectLimitHit.onAddActive,{scope:"projectLimit",stopBuggingCallBack:function(){}})});fluid.main.on("showAlertEditInactive",function(){A.alertEditInactive()});fluid.main.on("account:alert",function(c,b,a){G.add("alert",A.alerts[b][a],{scope:b,stopBuggingCallBack:function(){}})});H.exports=A},{"./class-ajax":4,"./class-canvas":6,"./class-event":9,"./class-failsafe":10,"./class-notification":17,"./class-preview":21,"./class-storage":33,"./class-userSettings":35,"./fluid/fluid.util":52,"./fluid/lib/underscore":54,"./functions":64,"./utils":69}],4:[function(f,j,h){var i={maxSyncRetryCount:2,submit:function(r){var c=$(this);var a=c.attr("id");var t=c.hasClass("createForm");var w=c.hasClass("shareSendMail");var z=c.hasClass("shareSendToUser");if(a!="feedbackForm"&&!t&&!(w&&$(".shareSend").attr("disabled")===undefined)&&!(z&&$(".shareToUser").attr("disabled")===undefined)&&a!=="upgradeForm"&&a!=="errorContact"){return false}if(c.find(":submit").hasClass("inactive")){return false}var v=c.find("input").not(":hidden, :submit").length;var s=c.find(".formCorrect").length;if(w){fluid.main.fire("beforeShareMail")}if(v==s){if(w||z){c.find(":submit").val("Sending...").removeClass("accept")}else{c.find(":submit").val("Sending...").removeClass("accept").addClass("inactive")}}else{if(w||z){c.find(":submit").removeClass("accept")}else{c.find(":submit").removeClass("accept").addClass("inactive")}}try{}catch(b){}if(z){var d=c.find(".shareSendMailReceipients").val();if(d===fluid.main.account.get("email")){projectSettings.actionTransferCallback(null,"Use clone in project settings. Unable to send to own account.")}else{fluid.api.projectTransfer(fluid.main.project.get("id"),d,projectSettings.actionTransferCallback,projectSettings.actionTransferCallback)}}else{var u=c.serialize();$.ajax({url:"./index.php",type:"POST",data:u,complete:i.complete,error:i.error})}return false},syncUp:function(d,n,p,a,o){if(p){fluid.main.fire("ajaxbeforesyncup",p,n)}var b=JSON.stringify(d);var c={t:n,data:b,objectId:p};$.ajax({url:"./index.php",type:"POST",data:c,success:function(r,k,l){var m=JSON.parse(r);if(m.r=="f"&&m.t=="retry"){if(o===undefined){o=i.maxSyncRetryCount}if(o>0){i.syncUp(d,n,p,a,--o);return}}else{if(m.r=="f"&&m.t=="forceSyncDown"&&n==="projectSync"){fluid.main.project.set({unloaded:true});if(fluid.main.project.get("id")===p){project.open(p);return}else{project.loadIfUnloaded(p,function(){if($.isFunction(a)){a(r)}});return}}}i.syncSuccess(r,k,l,n,p);if($.isFunction(a)){a(r)}},error:function(m,k,l){i.syncError(m,k,l,n,p)},complete:function(l,k){i.syncComplete(l,k,n,p)}})},syncDown:function(m,c,a,d){if($.isFunction(c)){d=arguments[2];a=arguments[1];c=false}var n=$.isArray(m);var b={t:"syncDown",objectId:n?m.join(","):m,multiple:n};if(c){b.unloaded=true}$.ajax({url:"./index.php",type:"POST",data:b,success:a,error:d||i.syncError})},snapshot:function(d,c,a){var b={t:"snapshot",objectId:d,type:c};$.ajax({url:"./index.php",type:"POST",data:b,success:a,error:i.snapshotError})},remove:function(c,a){var b={t:"remove",objectId:c};$.ajax({url:"./index.php",type:"POST",data:b,success:a,error:i.syncError})},restore:function(c,a){var b={t:"restore",objectId:c};$.ajax({url:"./index.php",type:"POST",data:b,success:a,error:i.syncError})},syncSuccess:function(a,r,b,c,p){switch(c){case"imageSync":var d=fluid.main.account.findUpload(p);if(d){d.upload.s=true}break;case"emailRegd":account.emailChecked(a);break;case"accountState":var q=$.parseJSON(b.responseText);if(q.r==="s"){var o=fluid.main.account.get("status");account.set({status:q.status});account.doAccountStatusAction(o);$("body").addClass("signed-in")}else{$("body").removeClass("signed-in")}account.requireRefresh(q);break}},syncError:function(c,a,b,d,l){},syncComplete:function(b,a,c,d){if(d){fluid.main.fire("afterajaxsynccomplete",d)}},complete:function(c,a){var d;try{d=$.parseJSON(c.responseText)}catch(b){return false}switch(d.a){case"contact":upgrade.errorSubmitted(d);break;case"feedback":fluidMenu.feedbackAjaxResponse(d);break;case"login":account.login(d);break;case"previewMail":share.actionMailSent(d);break}return false},apiCall:function(r,c,t,p,q,d){var b={},a=p;if(p instanceof Blob){var s=new FormData();s.append("file",p);p=s;c="post";b={processData:false,contentType:false};fluid.main.fire("ajaxapicall",t,r)}$.ajax($.extend(b,{url:this.apiObjectUrl(r,t),type:c?c.toUpperCase():"POST",data:p,success:function(l,k,m){if(c=="post"){var n=fluid.main.account.findUpload(t);if(n){n.upload.s=true;fluid.main.fire("uploadsynced",t)}}if($.isFunction(q)){q(l,t,a)}},error:function(m,k,l){i.syncError(m,k,l,r,t);if($.isFunction(d)){d(p,t,a)}},complete:function(l,k){fluid.main.fire("ajaxapicallcomplete",t)}}))},apiObjectUrl:function(b,a){var c="data/"+b+(a?"/"+a:"");return c},generalRequest:function(c,d,a,b){var l=b?$.extend({t:d},c):{t:d,data:JSON.stringify(c)};$.ajax({url:"index.php",type:"POST",data:l,success:function(k,p,o){if($.isFunction(a)){a(k)}},error:function(o,p,k){if($.isFunction(a)){a(null,k)}}})},userSettingsRequest:function(c,d,a,b){return i.generalRequest(c,d,a,b)}};j.exports=i},{}],5:[function(o,n,j){var l=o("./class-storage");var k=o("./utils");var m=o("./class-ajax");var p=(function(){var C={},i={iPadRetina:{width:1024,height:768,pixelRatio:2,icon:152,splashP:"1536x2008",splashL:"2048x1496"},iPad:{width:768,height:1024,pixelRatio:1,icon:152,splashP:"768x1004",splashL:"1024x748"},iPhone5:{width:320,height:568,pixelRatio:2,icon:120,splash:"640x1096"},iPhone4:{width:320,height:480,pixelRatio:2,icon:120,splash:"640x920"},iPhone:{width:320,height:480,pixelRatio:1,icon:120,splash:"320x460"},iPhone6:{width:375,height:667,pixelRatio:1,icon:120,splash:"750x1334"},"iPhone6+":{width:414,height:736,pixelRatio:3,icon:180,splash:"1242x2208"}},A={splashPiPad:[{x:768,y:1004},{x:1536,y:2008}],splashLiPad:[{x:1024,y:748},{x:2048,y:1496}],splashiPhone5:[{x:640,y:1096}],splashiPhone6:[{x:1242,y:2208}],"splashiPhone6+":[{x:640,y:1096}],splashiPhone:[{x:320,y:460},{x:640,y:920}]},D={};function h(){var r,q;for(r in i){if(i.hasOwnProperty(r)&&screen.width===i[r].width&&screen.height===i[r].height&&window.devicePixelRatio===i[r].pixelRatio){q=r;break}}return q?{device:q,screen:i[q]}:{device:"",screen:{splashP:"",splashL:""}}}function c(O,R,T,s){s=s||l.get(p.lastSelectedId)||fluid.main.project.toJSON();var P=s.id||p.lastSelectedId||fluid.main.project.id;if(O){if(C[O]!==null&&C[O]!==undefined){var v=O+"Branding",N=(s.id!==fluid.main.project.id),q=N?s:{};if(C[O]){var S=A[O]&&A[O].length,r=0;if(S){q[v]=s[v]||{};for(;r<S;r++){var u=A[O][r],t=k.guid("j"),U=fluid.util.dataUrlToBlob(fluid.util.resizeImage(C[O].dataUrl,u.x,u.y),{type:"image/png"}),Q=[u.x+"x"+u.y],V=N?q[v]:fluid.main.project.get(v);D[t]={remove:(V instanceof Object)?V[Q]:V,key:O,onSuccess:R,onError:T,proj:s};m.apiCall("img","post",t,U,a,B);q[v][Q]=t}}else{var t=k.guid("i");D[t]={remove:N?q[v]:fluid.main.project.get(v),key:O,onSuccess:R,onError:T,proj:s};m.apiCall("img","post",t,C[O].file,a,B);q[v]=t}C[O]=null}else{q[v]="";C[O]=null}fluid.main.fire("branding.uploadComplete",{projectId:P,uploadId:t,needSync:N,projectObj:q})}return}for(O in C){if(C.hasOwnProperty(O)){c(O,R,T,s)}}}function a(q,t){var r=D[t],s=r&&r.proj||l.get(p.lastSelectedId);if(r&&r.remove){m.apiCall("img","delete",r.remove)}D[t]=null;typeof r.onSuccess==="function"&&r.onSuccess.apply(this,arguments)}function B(v,s){var r=D[s],q=r&&r.proj||l.get(p.lastSelectedId),u=(q.id!==fluid.main.project.id),t=u?q:{};notification.add("alert",d(r.key)+" branding image could not be uploaded. Please try again.");if(r&&r.remove){if(r.details){t[r.key+"Branding"]=t[key+"Branding"]||{};t[r.key+"Branding"][details]=r.remove}else{t[r.key+"Branding"]=r.remove}typeof r.onError==="function"&&r.onError.apply(this,arguments)}fluid.main.fire("branding.uploadError",{projectId:q.id,uploadId:s,needSync:u,projectObj:t});D[s]=null}function b(s,r,t){var q=(t?t:l.get(p.lastSelectedId))[s+"Branding"];if(q instanceof Object){if(r===undefined||r===null||r===""){r=A[s]&&A[s][0].x+"x"+A[s][0].y}q=q[r]}return q?m.apiObjectUrl("img",q):""}function f(s,r,t){var q=(t?t:l.get(p.lastSelectedId))[s+"Branding"];if(q instanceof Object){if(r===undefined||r===null||r===""){r=A[s]&&A[s][0];return q[r]||q}return q[r]}return q}function d(q){if(/icon/.test(q)){return"App Icon"}if(/iPhone/.test(q)){return"Loading image"}if(/splashP/.test(q)){return"Portrait Splash image"}if(/splashL/.test(q)){return"Landscape Splash image"}return}function z(t,u,s,q){if(u){if(!/^image\/(png|jpeg)$/i.test(u.type)){notification.add("alert","You may only upload JPEG and PNG images");return}var r=new FileReader();r.onloadend=function(v){if(v.target.readyState===FileReader.DONE){C[t]={file:u,dataUrl:v.target.result};if(typeof s==="function"){s(v.target.result)}}else{if(typeof q==="function"){q(v)}}};r.onerror=q;r.readAsDataURL(u)}else{C[t]=""}}function w(q){if(q){C[q]=null}else{for(q in C){if(C.hasOwnProperty(q)){C[q]=null}}}}return{changeImage:z,resetChange:w,update:c,getUrl:b,get:f,screens:i,sizes:A,getTitle:d,deviceScreen:h}}());fluid.main.on("projectSettings.lastSelectedChange",function(b,a){p.lastSelectedId=a});n.exports=p},{"./class-ajax":4,"./class-storage":33,"./utils":69}],6:[function(r,o,k){var l=r("./utils");var m=r("./class-fluidMenu");var p=r("./class-grid");var q=r("./class-contextMenu");var n={setContainment:function(){var b=l.getTLWH("#viewport");var c=l.getTLWH("#canvas");var a=10;var d=[b.left+b.width-c.width-a,b.top+b.height-c.height-a,b.left+a,b.top+a];return d},setScreenContainment:function(){var a=$("#canvasPages .screen");if(a.length==0){return}var b=l.getTLWH("#canvas");var c=fluid.zoom.getCurrentScale();a.each(function(){n.setPageContainment(this,b,c)})},setPageContainment:function(f,b,c){if(!$(f).data("initDraggable")){return}b=b||l.getTLWH("#canvas");c=fluid.zoom.getCurrentScale();var a=l.getTLWH(f);var d=[b.left,b.top,b.left+Math.floor((b.width))-(a.width*c),b.top+Math.floor((b.height))-(a.height*c)];$(f).draggable("option","containment",d)},dragStart:function(a){if($("#canvas").data("zooming")){return false}q.place("hide");if(fluid.zoom.isEditMode()){$("#canvasLinks").hide()}var b=document.getElementById("canvas");b.style.cursor="-webkit-grabbing";b.style.cursor="-moz-grabbing";b.style.cursor="grabbing"},drag:function(a){},dragStop:function(a){if(!fluid.zoom.isEditMode()){fluid.main.project.set({canvasPosY:-parseInt($("#viewport").get(0).scrollTop),canvasPosX:-parseInt($("#viewport").get(0).scrollLeft)})}n.setScreenContainment();$("#canvasLinks").fadeIn(200);q.place();document.getElementById("canvas").style.cursor="";fluid.main.fire("canvasdragstop")},isEditorVisible:function(){return $("#canvas").hasClass("editing")},setEditorVisibility:function(a){if(a){$("#canvas").addClass("editing");m.setCanvasFirstPage();p.selectBackground()}else{$("#canvas").removeClass("editing");fluid.controllers.bin.hide()}}};fluid.main.on("afterzoomaction",function(){$("#canvas").draggable("option","containment",n.setContainment()).css({"-webkit-transition":"none","-moz-transition":"none"}).data("zooming",false)});fluid.main.on("needscreencontainmentset",function(){n.setScreenContainment()});fluid.main.on("beforeusersetingopen",function(){n.setEditorVisibility(false)});fluid.main.on("canvas2.setPageContainment",n.setPageContainment);o.exports=n},{"./class-contextMenu":7,"./class-fluidMenu":11,"./class-grid":12,"./utils":69}],7:[function(z,A,v){var B=z("./class-propertyInspector");var s=z("./class-page");var t=z("./class-storage");var p=z("./class-group");var o=z("./functions");var u=z("./class-widget");var q=z("./class-staticWidgets");var r=z("./utils");var w={buttonCollapsedSize:32,buttonExpandedSize:68,dragStart:function(){$("#contextMenuItems").toggleClass("locked").data("preventClick",true)},dragStop:function(){setTimeout(function(){$("#contextMenuItems").data("preventClick",false)},1)},linkClickDragStart:function(a){var b=$("#cmLink").data("lastClicked")||0;if((new Date()).getTime()>b+600){$("#cmLink2").simulate("mousedown").simulate("mousemove",{clientX:a.clientX,clientY:a.clientY})}$("#cmLink").data("lastClicked",(new Date()).getTime());return false},toggleReplace:function(){},place:function(a){var f=fluid.selection.getSelectionModel();if(a=="hide"||f.length==0){w.hide();return true}if($("#contextMenuItems").data("open")!==false){w.open()}if($("#contextMenuItems").hasClass("locked")||a=="dontMovePosition"){var d=parseFloat($("#contextMenu2").css("left"));var h=parseFloat($("#contextMenu2").css("top"));var k=parseFloat($("#contextMenuItems").css("left"))+d;var j=parseFloat($("#contextMenuItems").css("top"))+h;var c=r.getTLWH("#viewport");if(k<c.width-100&&j<c.height-100){$("#contextMenu2").show();return true}}var b=w.getCmCoords(f);$("#contextMenu2").show().find("#contextMenuItems").addClass("trans150").css({top:b.top,left:b.left});function i(){$("#contextMenuItems").removeClass("trans150");B.position();q.positionMenu();s.displayMenu(false)}setTimeout(i,160)},getCmCoords:function(f){var d=f.getRoots().getElements();var a=r.getBoundingArea(d);var b,c,h=$("#library");b=a.left+170;c=a.top-47;if(a.top<90){c=60;if(a.bottom<$("#viewport").height()/2){c=a.bottom+70}}if(a.left<400){b=550}if(parseInt(h.css("left"))===0){b=h.width()+550}return{left:b,top:c}},hide:function(){w.setButtonStyle($("#cmLink"),false,false);$("#contextMenu2").hide();B.hideInspectors();s.displayMenu()},open:function(){function h(C){var D=0;C.each(function(){var E=$(this).attr("id");var J=t.get(E);if(J.seg||J.segment){D+=1}});return D}s.displayMenu(false);var H=fluid.selection.getSelectionModel().getRoots().getElements();var l=H.length;var b=3;var i={up:-41,left:-44,down:0,right:47};$(".subExpander").not(".open").css({top:""}).hide();var d=fluid.selection.getSelectionModel().getElements();var F=h(H);var j;var k=p.enableGroupBtns(H);$("#contextMenuItems .cm").hide().each(function(){var L=$(this);if(l<2&&L.hasClass("multiSelectOnly")){return true}if(l>1&&L.hasClass("singleWidgetOnly")){return true}if(L.hasClass("multiSelectOnly")&&k=="ungroup"){return true}if(L.hasClass("widgGroupOnly")){if(k){if(k==false||k=="ungroup"){return true}}else{return true}}if(L.hasClass("widgUngroupOnly")&&k!="ungroup"){return true}if(L.hasClass("multiSegmentOnly")&&F>1){return true}if(L.hasClass("multiSegmentOnly")){if(k&&k=="ungroup"){return true}}if(L.hasClass("multiSegmentOnly")&&(!u._isMultiSegment(d.attr("id")))){return true}if(L.hasClass("zAlignOnly")&&(!d.hasClass("rootWidget")||d.hasClass("backgroundWidget"))){return true}if(L.hasClass("replaceGroupOnly")){return true}if(L.hasClass("duplicatableOnly")&&d.hasClass("backgroundWidget")){return true}var M=t.get(d.attr("id"));if(M.tc&&L.hasClass("backgroundBorderOnly")){return true}if(!M.bgc&&!M.b&&!M.seg&&!M.upload&&L.hasClass("backgroundBorderOnly")){return true}if(L.hasClass("uploadOnly")&&M.upload!=="y"){return true}if(M.st=="b"&&L.hasClass("staticWidgetsOnly")){return true}if((!fluid.main.project.widgets.containsText(d))&&(L.hasClass("textOnly"))){return true}if(L.hasClass("standardAccountOnly")&&!fluid.main.account.isStandard()){return true}if(L.hasClass("proAccountOnly")&&!fluid.main.account.isPro()){return true}if(L.hasClass("saveToLibOnly")&&!fluid.controllers.widget.canSaveSelectionToLib()){return true}L.show();var N=L.find(".icon2");var D;if(N.find(".buttonText").text()==""){D=N.width()}else{D=N.width()}var E=b+D+9;var C=D-w.buttonCollapsedSize;if(L.hasClass("up")){L.css({top:i.up});i.up-=E}if(L.hasClass("left")){L.css({left:i.left-C});i.left-=E}if(L.hasClass("down")){L.css({top:i.down});i.down+=E}if(L.hasClass("right")){L.css({left:i.right});i.right+=E}});$("#contextMenuItems").data("open",true);B.update();q.updateMenu();var a=document.getElementById("cmAutofitButtons");if(H[0]){var G=t.get(H[0].id);if(G.upload==="y"){var m=t.get(document.querySelector(".canvasObject.active").id),n=widgets.summary[G.data]?widgets.summary[G.data].wh:t.get(G.data).wh,c=document.getElementById("cmFitToPage"),f;if(n[0]<m.width&&n[1]<m.height){c.classList.add("expand");f="Expand to Fit"}else{c.classList.remove("expand");f="Shrink to Fit"}c.setAttribute("title",f);c.setAttribute("alt",f)}}},close:function(){q.hideMenu();B.resetPropInspector();B.hideInspectors();$("#contextMenuItems div, #contextMenuItems a").not(".up, #hint").css({left:0,top:0});$("#contextMenuItems").data("open",false);$(".subExpander").removeClass("open");w.closeSubmenu($(".subExpander"));w.resetButtonsToOriginal(true);s.displayMenu()},markAsLastClicked:function(){if($(this).hasClass("subExpander")){$(this).siblings().not(".subExpander, .lastClicked").removeClass("lastClicked")}else{$(this).siblings().not(this).not(".subExpander").removeClass("lastClicked")}$(this).addClass("lastClicked")},toggleSubmenu:function(){w.eraseSubmenu(this);if($(this).hasClass("open")){w.closeSubmenu(this)}else{w.openSubmenu(this)}return false},openSubmenu:function(a){$(a).addClass("open");var b=0;$(a).parent().children().removeClass("hidden").each(function(){$(this).css("top",b);b+=40});$(a).parent().css("height",b-29);$(a).siblings().show()},closeSubmenu:function(b){var a=$(b).siblings();$(b).removeClass("open").css("top","");a.css("top",0);$(b).parent().css("height","");setTimeout(function(){a.not(".lastClicked").addClass("hidden")},250)},eraseSubmenu:function(c){var b=$(".cm").filter(".left");var a=$([]);b.each(function(){var h=$(this);var d=parseInt(h.css("height"));var f=44;if(d>f){var i=h.children().not(c);a=a.add(i);h.css({height:f})}});a.each(function(){var d=$(this);if(d.hasClass("subExpander")){var f=d.siblings();d.removeClass("open").css("top","");f.css("top",0);d.parent().not(".lastClicked").css("height","");setTimeout(function(){f.not(".lastClicked").addClass("hidden")},250)}})},toggle:function(a){if($("#contextMenuItems").data("preventClick")==true){return false}if($("#contextMenuItems").data("open")){w.close()}else{w.open()}},cmZAlign:function(a,b){fluid.command.create("setZOrder",{id:fluid.selection.getSelectionModel().getRoots().map(function(c){return c.id}),dir:b}).dispatchTo("fluid.controllers.widget")},cmZAlign2:function(a,d,b){b=b||$(a.target).parent().attr("id");d=d||fluid.selection.getSelectionModel().getRoots().getElements();var c=null;d.each(function(){obj=$(this);var k=$('[data-lockto="'+obj.attr("id")+'"]');c=obj.parent();if(b=="cmFront"){k.detach().appendTo(c)}else{if(b=="cmBack"){if(c.find(".backgroundWidget").length>0){k.detach().insertAfter(c.find(".backgroundWidget"))}else{var f=fluid.main.account.get("gridStatus");if(f=="on"){k.detach().insertAfter("#gridSquares")}else{if(f=="off"){k.detach().prependTo(c)}}}}else{if(b=="cmFrontOne"){var j=obj.nextAll(".rootWidget").not(".ui-selected").first();if(j.length==0){return false}var h=$('[data-lockto="'+j.attr("id")+'"]').last();k.detach().insertAfter(h)}else{if(b=="cmBackOne"){var i=obj.prevAll(".rootWidget").not(".ui-selected").not("#canvasPages .backgroundWidget").first();if(i.length==0){return false}var h=$('[data-lockto="'+i.attr("id")+'"]').first();k.detach().insertBefore(h)}}}}});if(c!=null){s.orderWidgets(c)}return false},cmAlign:function(a,b){fluid.command.create("align",{id:fluid.selection.getSelectionModel().getRoots().filter(function(c){if(c.get("st")==="b"){return false}return true}).map(function(c){return c.id}),dir:b}).dispatchTo("fluid.controllers.widget")},cmAlign2:function(a,d,b){var b=b||$(a.target).parent().attr("id");var d=d||fluid.selection.getSelectionModel().getRoots().filter(function(f){if(f.get("st")==="b"){return false}return true}).getElements();var c=r.getBoundingAreaRelative(d);d.each(function(){var i=null,l=null;var h=$(this);var m=h.attr("id");var j=p.calculateAlign(m,h);switch(b){case"cmAlignLeft":i=parseFloat(h.css("left"))-c.left-j.left;break;case"cmAlignCenter":i=parseFloat(h.css("left"))+(parseFloat(h.outerWidth()))/2-(c.left+c.right)/2;if(j.width>0){i=j.groupLeft+(j.width/2)-(c.right+c.left)/2}break;case"cmAlignRight":i=parseFloat(h.css("left"))+h.outerWidth()-c.right+j.right;break;case"cmAlignTop":l=parseFloat(h.css("top"))-c.top-j.top;break;case"cmAlignMiddle":l=parseFloat(h.css("top"))+(parseFloat(h.outerHeight()))/2-(c.bottom+c.top)/2;if(j.height>0){l=j.groupTop+(j.height/2)-(c.top+c.bottom)/2}break;case"cmAlignBottom":l=parseFloat(h.css("top"))+h.outerHeight()-c.bottom+j.top;break;default:return false}if(i===0&&l===0){return true}var k=$('[data-lockto="'+$(this).attr("id")+'"]');var f=u.get($(this).attr("id"));k.each(function(){var G=$(this).attr("id");var H=u.get(G);var n=$.extend([],H.tlwh);if(i!=null){var I=parseFloat($(this).css("left"))-i;$(this).addClass("trans150").css("left",I);if(n[1].toString().indexOf("%")==-1&&$(this).attr("id")==$(this).attr("data-lockto")){n[1]=I;u.set({tlwh:n},$(this).attr("id"))}}if(l!=null){var J=parseFloat($(this).css("top"))-l;$(this).addClass("trans150").css("top",J);if(n[0].toString().indexOf("%")==-1&&$(this).attr("id")==$(this).attr("data-lockto")){n[0]=J;u.set({tlwh:n},$(this).attr("id"))}}})});setTimeout(function(f){$(".trans150").removeClass("trans150");w.changeSelSize(d)},160);return false},changeSelSize:function(c){var b=fluid.selection.getSelectionModel().getIds();var c=c||fluid.main.project.widgets.getRoots(b,{returnEls:true}).not(".backgroundWidget");var a=r.getBoundingAreaRelative(c);o.updateTLWH(a);u.addResizeSettings()},setButtonStyle:function(j,a,k){var d=a?0:1;var b=k==undefined?true:k;var c=$(j).hasClass("cm")?$(j):$(j).parent();var i=$(j).hasClass("icon2")?$(j):$(j).children("a");var f=$(".buttonText",i);if(d==0){if(i.hasClass("cmButtonExpanded")){w.resetButtonsToOriginal(false,c);w.adjustButtonsPosition(c,false,false)}}else{if(!i.hasClass("cmButtonExpanded")){w.adjustButtonsPosition(c,true,b);i.addClass("cmButtonExpanded");var h=i.attr("data-text-alt");if(b){function l(){f.text(h);i.animate({width:w.buttonExpandedSize+"px"},500,"swing")}i.css({width:w.buttonCollapsedSize+"px"});setTimeout(l,500)}else{i.css({width:w.buttonExpandedSize+"px"});f.text(h)}}}},resetButtonsToOriginal:function(c,b){var a=b==undefined?$(".cm"):b;if(c){a.css({left:"0px"})}$.each(a,function(f,h){var d=$(h).children("a");$(".buttonText",d).text("");d.css({width:w.buttonCollapsedSize+"px"}).removeClass("cmButtonExpanded")})},adjustButtonsPosition:function(d,a,c){if(d==null){w.open();return}var h=w.buttonExpandedSize-w.buttonCollapsedSize;var j=$(d);var f=j.hasClass("left")?"left":"right";var k=$(".cm."+f);var i=a?h:h;var b=parseInt($(j).css("left"));b=f=="left"?b:b+1;$.each(k,function(l,F){var E=parseInt($(F).css("left"));if((E!=0)&&(Math.abs(E)>=Math.abs(b))){var n=f=="left"?-1:1;var m=E+(i*n);if(c){$(F).animate({left:m+"px"},1000,"swing")}else{$(F).css({left:m+"px"})}}})},removeOtherCmMenus:function(a){for(var b=0;b<a.length;b++){if(a[b]){switch(a[b]){case"staticWidgets":q.hideMenu();break;case"propertyInspector":B.hideInspectors();B.resetPropInspector();break}}}}};fluid.main.on("widgetdragstart",function(a){w.place("hide")});fluid.main.on("afterwidgetdragstop dragselection",function(b,a){if((a.dragStartSelection&&a.dragStartSelection.length)||(a.selected&&a.selected.length)){w.place()}});fluid.main.on("staticwdgmenushown",function(){w.removeOtherCmMenus(["propertyInspector"])});fluid.main.on("propinspectortoggle",function(){w.removeOtherCmMenus(["staticWidgets"])});fluid.main.on("zalignmentchange",function(d,c){var b,a;c.roots.each(function(){b=$(this);a=b.attr("id");w.cmZAlign2(null,b,c.direction)})});fluid.main.on("linkdragstart",function(){w.hide()});fluid.main.on("contextMenu:hide",w.hide);fluid.main.on("contextMenu:place",w.place);A.exports=w},{"./class-group":13,"./class-page":18,"./class-propertyInspector":25,"./class-staticWidgets":32,"./class-storage":33,"./class-widget":37,"./functions":64,"./utils":69}],8:[function(j,i,f){var h={dbAvailable:null,db:null,readyListeners:[],versionNumber:45,onReady:function(a){if(h.db||h.dbAvailable===false){a()}else{h.readyListeners.push(a)}},init:function(){if(location.origin==="file://"||location.origin==="null"){h.dbAvailable=false;return}var a;if(window.indexedDB){a=window.indexedDB.open("fluidDB",h.versionNumber)}else{a=window.shimIndexedDB.open("fluidDB",h.versionNumber)}a.onupgradeneeded=function(b){h.dbAvailable=true;if(!this.result.objectStoreNames.contains("rastPages")){var c=this.result.createObjectStore("rastPages",{keyPath:"id"});c.createIndex("by_id","id",{unique:true});c.createIndex("by_data","data");c.createIndex("by_project","project")}if(!this.result.objectStoreNames.contains("uploads")){c=this.result.createObjectStore("uploads",{keyPath:"id"});c.createIndex("by_id","id",{unique:true});c.createIndex("by_data","data")}if(!this.result.objectStoreNames.contains("projects")){c=this.result.createObjectStore("projects",{keyPath:"id"});c.createIndex("by_id","id",{unique:true});c.createIndex("by_data","data")}if(!this.result.objectStoreNames.contains("uiIcons")){c=this.result.createObjectStore("uiIcons",{keyPath:"id"});c.createIndex("by_id","id",{unique:true});c.createIndex("by_data","data")}if(!this.result.objectStoreNames.contains("uploadThumbs")){c=this.result.createObjectStore("uploadThumbs",{keyPath:"id"});c.createIndex("by_id","id",{unique:true});c.createIndex("by_data","data")}if(!this.result.objectStoreNames.contains("uploadHeaders")){c=this.result.createObjectStore("uploadHeaders",{keyPath:"id"});c.createIndex("by_id","id",{unique:true});c.createIndex("by_data","data")}if(!this.result.objectStoreNames.contains("wdgDefinitions")){c=this.result.createObjectStore("wdgDefinitions",{keyPath:"id"});c.createIndex("by_id","id",{unique:true});c.createIndex("by_data","data")}if(!this.result.objectStoreNames.contains("accounts")){c=this.result.createObjectStore("accounts",{keyPath:"id"});c.createIndex("by_id","id",{unique:true});c.createIndex("by_data","data")}if(b.oldVersion!==0){h.clearStores=true}};a.onsuccess=function(d){h.dbAvailable=true;h.db=this.result;if(localStorage.getItem("account.loginStarted")==="true"&&localStorage.getItem("account.loginEnded")===null){h.clearStores=true}if(h.clearStores){var c;for(var b=0;b<h.db.objectStoreNames.length;b++){c=h.getObjectStore(h.db.objectStoreNames[b],"readwrite");c.clear()}h.db.close();localStorage.clear();localStorage.setItem("indexedDBreloaded",true);setTimeout(function(){window.location.reload()},3000);return}for(var b=0;b<h.readyListeners.length;b++){h.readyListeners[b]()}localStorage.setItem("indexedDBreloaded",false)};a.onerror=function(b){h.dbAvailable=false;if(!localStorage.getItem("clearedIndexedDb")){setTimeout(function(){window.indexedDB.deleteDatabase("fluidDB");localStorage.clear();localStorage.setItem("clearedIndexedDb",true);window.location.reload()},2000)}else{localStorage.removeItem("clearedIndexedDb")}if(b.target.error.name&&localStorage.getItem("indexedDBreloaded")==="false"){setTimeout(function(){h.clear();localStorage.clear();localStorage.setItem("indexedDBreloaded",true);window.location.reload()},5000)}};a.onblocked=function(b){h.dbAvailable=false};setTimeout(function(){if(!h.db){fluid.main.fire("dbStorage.failed")}},20000)},getObjectStore:function(c,a){var b=h.db.transaction(c,a);return b.objectStore(c)},clear:function(){window.indexedDB.deleteDatabase("fluidDB")},set:function(d,b,a){if(b.length===undefined){b=[b]}if(b.length===0||h.dbAvailable===false){console.log("not saved: ",b.length,h.dbAvailable);if(a){a()}return}var n=h.getObjectStore(d,"readwrite");for(var c=0;c<b.length;c++){var o=n.put(b[c]);o.onsuccess=function(){if(c===b.length&&a){a({success:true})}};o.onerror=function(){if(c===b.length&&a){a({success:false})}}}},remove:function(d,b,a){if(b.length===undefined){b=[b]}if(b.length===0||h.dbAvailable===false){if(a){a()}return}var m=h.getObjectStore(d,"readwrite");for(var c=0;c<b.length;c++){m["delete"](b[c]).onsuccess=function(l,o,k){if(l===o.length-1&&k){k()}}.bind(this,c,b,a)}},list:function(l,a){var c=h.db.transaction(l);var b=c.objectStore(l);var d=[];b.openCursor().onsuccess=function(n){var k=n.target.result;if(k){d.push(k.key);k["continue"]()}else{if(a){a(d)}}}},get:function(q,b,r){var c={failed:[],fetched:[],resultsArr:[],resultsObj:{}};if(b.length===undefined||typeof(b)==="string"){b=[b]}if(b.length===0||h.dbAvailable===false){if(r){r(c)}return}var d=h.db.transaction(q);var s=d.objectStore(q);var a;for(var p=0;p<b.length;p++){a=s.get(b[p]);a.onsuccess=function(k,l){if(this.result){c.fetched.push(k);c.resultsObj[k]=this.result}else{c.failed.push(k);c.resultsObj[k]=null}c.resultsArr.push(c.resultsObj[k]);if(r&&c.resultsArr.length===b.length){r(c)}}.bind(a,b[p])}}};i.exports=h},{}],9:[function(j,i,f){var h={lastEvent:"",lastTrigger:new Date().getTime(),triggerEditor:function(c,a,b){h._trigger($("#canvas"),c,a,b)},bindEditor:function(b,a){h._bind($("#canvas"),b,a)},triggerPreview:function(c,a,b){h._trigger($("#home"),c,a,b)},_trigger:function(d,p,b,c){var n=false;var o=new Date().getTime();var a=c||false;if((h.lastEvent!=p)||(o-h.lastTrigger>500)||a){n=true}if(n){d.trigger(p,b);h.lastEvent=p;h.lastTrigger=o}},_bind:function(b,c,a){b.live(c,a)}};i.exports=h},{}],10:[function(h,l,i){var j=h("./class-storage");var k={reloadWithMessage:function(a){function b(){j._setItem("postloadMessage",a);location.reload()}if(fluid.main.deferReload){fluid.main.on("deferReloadRelease",b)}else{b()}}};l.exports=k},{"./class-storage":33}],11:[function(q,n,r){var o=q("./class-contextMenu");var l=q("./utils");var p=q("./functions");var k=["orange","red","lightBlue","green","darkBlue","yellow"];var m={openDuration:300,closeDuration:300,click:function(a){var b=$(a.target);if(a.target.id=="tsandcsLabel"||a.target.id=="tsandcs1"||b.hasClass("createAccount")||b.parent().hasClass("GSWidget")||b.parent().hasClass("helpButton")||b.hasClass("projectSettingsButton")||b.parent().hasClass("projectSettingsButton")){return true}if(a.target.tagName=="INPUT"&&b.hasClass("title")){b.focus();b.select()}if((a.target.id=="upgradeLink")||(a.target.id.indexOf("userSettingsLink")>-1)){return true}if(((b.parent().attr("id")=="logout")||(b.attr("id")=="logout"))){fluid.main.fire("logoutclicked")}if(a.target.tagName=="A"&&!b.hasClass("submenuLink")){return true}},toggle:function(){if($("#fluidDropdown").is(":visible")){o.place();m.hide()}else{o.place("hide");m.show(this)}fluid.main.fire("fluidmenutoggled")},feedbackAjaxResponse:function(a){$("#feedbackForm").empty()},setupFeedback:function(a){$("#feedbackForm").empty();var b=fluid.main.account.get("email");if(b==null||b=="New"){b=""}var c=fluid.main.account.get("name");if(c==null){c=""}$("#tmplFeedback").tmpl({name:c,email:b}).appendTo("#feedbackForm");$("#feedbackForm input").not("[type=hidden]").each(function(){p.validateInput(a,this)})},hide:function(){if($("#startMenu").hasClass("open")){$("#hud").data("openMenu",false);$("#startMenu").removeClass("open");var a=$("#fluidDropdown");l.animateRaf(function(b){a.css({"-webkit-transform":"scale("+(1-b)+")","-moz-transform":"scale("+(1-b)+")"})},m.closeDuration,"easeInOutQuad",function(){a.removeAttr("style").hide()});$(".messageError").hide();m.resetSelectedMenu()}},show:function(a){var c=arguments[0];fluid.main.fire("closeallpopups",null,$("#fluidDropdown"));$("#fluidDropdown .overview article").hide();if($("#fluidDropdown .fluidSubmenuActive").length>0){var a=$("#fluidDropdown .fluidSubmenuActive").attr("data-for")}$(".loginMessage").hide();$("#"+a).show();$("#startMenu").addClass("open");var b=$("#fluidDropdown").css({"-webkit-transform":"scale(0.05)","-moz-transform":"scale(0.05)"}).show();l.animateRaf(function(d){b.css({"-webkit-transform":"scale("+d+")","-moz-transform":"scale("+d+")"})},m.openDuration,"easeOutBack",function(){b.removeAttr("style").show();if(c){fluid.main.fire("fluidmenuopenedbyuser")}});if(document.getElementById("createEmail")){document.getElementById("createEmail").focus()}},openDropdown:function(a){$(".loginMessage").hide();var b=$(this);var d=b.attr("data-for");var c=$("#"+d);$("#fluidDropdownSubmenu a").removeClass("fluidSubmenuActive").filter("[data-for="+d+"]").addClass("fluidSubmenuActive");$("#fluidDropdown article").not("#"+b.attr("data-for")).hide();c.fadeIn(200)},resetSelectedMenu:function(c){var a=$(".fluidSubmenuActive").attr("data-for");var b=c||false;if(!b){if((fluid.main.account.get("loggedIn")=="no")&&(a!="profile")){b=true}else{if(a=="help"){b=true}}}if(b){$(".submenuLink").removeClass("fluidSubmenuActive");$(".submenuLink[data-for='profile']").addClass("fluidSubmenuActive")}},setButtonStyle:function(i,a,f){var h=a?0:1;var c=f==undefined?true:f;var d=h==0?"data-style-ori":"data-style-alt";var b=h==0?"data-text-ori":"data-text-alt";$.each(i,function(G,D){if($(D).hasClass("hud-button")){var J=$(D);if(a){J.addClass("expanded")}else{J.removeClass("expanded")}return}var j=$(".icon",$(D));var H=$(D).parent();var F=j.attr(d);var I=j.attr(b);if((F)&&(F!="")){var E=$(".iconAvatarContainer",j);E.attr("class","iconAvatarContainer "+F)}var C=$(".buttonText",j);if((I)&&(I!="")&&H.hasClass("hudButtonPlaceHolderCollapsed")){H.removeClass("hudButtonPlaceHolderCollapsed");j.removeClass("iconCollapsed");$(D).removeClass("buttonCollapsed");H.addClass(c?"hudButtonPlaceHolderExpanding":"hudButtonPlaceHolderExpanded");j.addClass(c?"iconExpanding":"iconExpanded");$(D).addClass(c?"buttonExpanding":"buttonExpanded");C.text(I);C.addClass("textVisible")}else{if((!(H.hasClass("hudButtonPlaceHolderCollapsed")))&&(h==0)){H.addClass(c?"hudButtonPlaceHolderCollapsing":"hudButtonPlaceHolderCollapsed");j.addClass(c?"iconCollapsing":"iconCollapsed");$(D).addClass(c?"buttonCollapsing":"buttonCollapsed");C.text("");C.removeClass("textVisible")}}})},removeButtonAnimation:function(a){$(this).parent().hasClass("hudButtonPlaceHolderExpanding")?$(this).parent().removeClass("hudButtonPlaceHolderExpanding").addClass("hudButtonPlaceHolderExpanded"):null;$(this).parent().hasClass("hudButtonPlaceHolderCollapsing")?$(this).parent().removeClass("hudButtonPlaceHolderCollapsing").addClass("hudButtonPlaceHolderCollapsed"):null;$(this).hasClass("buttonExpanding")?$(this).removeClass("buttonExpanding").addClass("buttonExpanded"):null;$(this).hasClass("buttonCollapsing")?$(this).removeClass("buttonCollapsing").addClass("buttonCollapsed"):null;$(this).hasClass("iconExpanding")?$(this).removeClass("iconExpanding").addClass("iconExpanded"):null;$(this).hasClass("iconCollapsing")?$(this).removeClass("iconCollapsing").addClass("iconCollapsed"):null;if($(this).hasClass("shiningLight")){$(this).remove()}$(".buttonText").removeClass("textVisible")},highlightButton:function(a){$.each(a,function(c,b){$(".shiningLight",$(b)).remove();$("<div class='shiningLight'></div>").appendTo($(b));$(".shiningLight").addClass("start")})},setCanvasNoPages:function(a){var b=$("#createNewPage, #previewView, #createNewPageButton, #preview, #pagePreview, #shareMenu");fluid.controllers.bin.hideEmpty();b.addClass("hud-hidden")},setCanvasFirstPage:function(){if(fluid.main.project.get("active")!==false&&fluid.main.project.get("pages")&&fluid.main.project.get("pages").length){$("#createNewPage, #createNewPageButton").removeClass("hud-hidden");if(fluid.zoom.getCtx()!=="project"){$("#zoomOut").removeClass("hud-hidden")}fluid.controllers.bin.show()}else{$("#createNewPage, #createNewPageButton").addClass("hud-hidden");fluid.controllers.bin.hideEmpty()}if(fluid.main.project.widgets.length){$("#previewView, #preview, #pagePreview, #shareMenu").removeClass("hud-hidden");$("#pagePreview").parent().show()}else{$("#previewView, #preview, #pagePreview, #shareMenu").addClass("hud-hidden").removeClass("expanded");$("#pagePreview").parent().hide()}},setUpgradeLinkStatus:function(){var b=fluid.main.account.get("accName");var a=fluid.main.account.get("accType");var c=a=="Free"||b==""||b==undefined?"Upgrade":b;$(".currentAccType").text(b);$("#upgradeLink").val(c);if(fluid.main.account.isForever()){$("#upgradeLink, #userSettingsChangeAccount").hide()}else{$("#upgradeLink, #userSettingsChangeAccount").show()}}};fluid.main.on("closeallpopups",function(c,a,b){if(!b||!b.length){b=$([]);if($(a.target).closest("#fluidDropdown").length>0||a.target.tagName=="A"||$(a.target).is(".open-fluid-menu, .open-fluid-menu *")||$(a.target).is("#startMenu, #startMenu *")){b=b.add("#fluidDropdown")}}if(!$("#fluidDropdown").is(b)){m.hide()}});fluid.main.on("beforeusersetingopen account.formDrawn",function(){m.setUpgradeLinkStatus()});fluid.main.on("pageadded",function(){if(fluid.main.project.get("pages").length===1){m.setCanvasFirstPage()}});fluid.main.on("pagedeleted",function(b,a){if(fluid.main.project.pages.length===0){m.setCanvasNoPages(true)}});fluid.main.on("editor.afterLogout",function(){m.hide()});fluid.main.on("usersettingshidden",function(b,a){if(a){m.show()}else{m.hide()}});fluid.main.on("fluidMenu:show",function(){m.show()});n.exports=m},{"./class-contextMenu":7,"./functions":64,"./utils":69}],12:[function(n,l,i){var j=n("./utils");var k=n("./class-page");var m={toggle:function(){var a=fluid.main.account.get("gridStatus");(a=="on")?m.hideGridSettingsMenu():m.showGridSettingsMenu();return false},hideGridSettingsMenu:function(){$("#gridSwitchOn, #gridControls, #gridControlHeading, #gridSpaceSlider, #gridSpacingInput").hide();$("#gridSwitchOff").show();m.hideGrid();fluid.main.fire("gridmenuhide")},showGridSettingsMenu:function(){$("#gridSwitchOff, #gridControls").hide();$("#gridSwitchOn").show();$("#gridControls, #gridControlHeading, #gridSpaceSlider, #gridSpacingInput").show();fluid.main.account.set({gridStatus:"on"});m.getGridSpacing();m.showGrid();fluid.main.fire("gridmenushow")},changeGridSpacing:function(a,b){fluid.main.account.set({gridSpacing:b.value});m.drawGrid();$("#gridSpaceSlider").find(".ui-slider-handle").text(b.value+"px");fluid.main.fire("gridspacingchanged")},getGridSpacing:function(){var a=fluid.main.account.get("gridSpacing");fluid.main.fire("snapandgridalgin");m.updateSliderPos(a)},updateSliderPos:function(a){$("#gridSpaceSlider").slider("value",a).find(".ui-slider-handle").text(a+"px")},pageDims:false,currentPageID:false,currentPageGridHolder:false,getPageProps:function(){var a=j.getActivePageId();var d=$("#"+a).find(".page").find(".widgetHolder");m.currentPageID=a;m.currentPageGridHolder=d;var c=fluid.main.project.pages.get(a).get("width");var f=fluid.main.project.pages.get(a).get("height");var b={width:c,height:f};m.pageDims=b;return d},showGrid:function(c,d){if(fluid.main.project.isReadOnly()){return false}$("#gridSquares").remove();var a=m.getPageProps();var b=a.find(".backgroundWidget").attr("id");if(b){$("#tmplGrid").tmpl(m.pageDims).appendTo("#"+b)}else{$("#tmplGrid").tmpl(m.pageDims).prependTo(a)}m.drawGrid()},drawGrid:function(){function d(){f.beginPath();f.strokeStyle="rgb(127,185,240)";f.lineWidth=h;for(var o=(a*5);o<m.pageDims.height;o+=(a*5)){f.moveTo(0,o);f.lineTo(m.pageDims.width,o)}for(var o=(a*5);o<m.pageDims.width;o+=(a*5)){f.moveTo(o,0);f.lineTo(o,m.pageDims.height)}f.stroke()}if(fluid.main.account.get("gridStatus")!="on"){return}var a=fluid.main.account.get("gridSpacing");var c=$("#gridSquares");if(c.size()==0){return}var f=(c[0]).getContext("2d");f.clearRect(0,0,m.pageDims.width,m.pageDims.height);if(a<4){f.clearRect(0,0,m.pageDims.width,m.pageDims.height);return}var h=1;f.beginPath();f.strokeStyle="rgb(176,217,255)";f.lineWidth=h;for(var b=a;b<m.pageDims.height;b+=a){f.moveTo(0,b);f.lineTo(m.pageDims.width,b)}for(var b=a;b<m.pageDims.width;b+=a){f.moveTo(b,0);f.lineTo(b,m.pageDims.height)}f.stroke();d(a)},hideGrid:function(){$("#gridSquares").remove()},selectBackground:function(){if(fluid.zoom.isEditMode()){var a=fluid.main.account.get("gridStatus");if(a=="on"){m.showGrid()}else{return}}},zoomIn:function(){if(!fluid.main.project.get("active")){return}var a=fluid.main.account.get("gridStatus");if(a=="on"){m.showGridSettingsMenu()}else{if(a=="off"){m.hideGridSettingsMenu()}}}};fluid.main.on("pageactivated",m.zoomIn);fluid.main.on("afteroptionsmenuupdated wdgselection",m.selectBackground);l.exports=m},{"./class-page":18,"./utils":69}],13:[function(r,p,k){var m=r("./class-storage");var q=r("./functions");var o=r("./class-widget");var l=r("./utils");var n={drawExisting:function(a){function h(j,H){for(var C in H){var G=H[C];var B=C;var E=_.last(G);if(j==E){var D=n.getCommonArray(B,H);var F=_.last(D);if(B==F){n.draw(B,H)}}}}n.erase();if(fluid.zoom.isEditMode()){var a=(a)?a:$("#canvasPages").find(".screen.active").attr("id");if(!a){return}var c=$.extend({},m.get(a));var d=c.widgets;if(!d){return}for(var b=0;b<d.length;b++){var f=d[b];var i=fluid.main.project.get("widgetGroups");h(f,i)}}},enableGroupBtns:function(v){var v=v.not(".backgroundWidget");var a=v.length;var d=fluid.main.project.get("widgetGroups");var c=(a>1)?true:false;if(d){var f=n.createSelArray(v,d);var u=[];for(var j=0;j<f.length;j++){var i=f[j];if(i.charAt(0)=="g"){var h=n.getCommonArray(i,d);var b=_.last(h);u.push(b)}else{if(i.charAt(0)=="w"){u.push(i)}}}var u=fluid.util._.uniq(u);if(u.length>=1){if(u.length==1){var c=(u[0].charAt(0)=="w")?false:"ungroup"}else{var c=true}}}return c},calculateAlign:function(a,f){var R=fluid.main.project.get("widgetGroups");var T={left:0,right:0,top:0,bottom:0};for(var O in R){var P=R[O];var J=P.indexOf(a);if(J>-1){var b=$("#"+O);var M=_.last(P);var h=parseFloat($("#"+M).css("top"));var j=parseFloat($("#"+M).css("left"));var i=parseFloat(b.css("width"));var c=parseFloat(b.css("height"));var K=j+parseFloat(b.css("left"));var Q=h+parseFloat(b.css("top"));var I=c+h;var L=i+K;var N=parseFloat(f.css("left"));var t=parseFloat(f.css("top"));var S=parseFloat(f.css("width"))+N;var d=parseFloat(f.css("height"))+t;T.left=N-K;T.top=t-Q;T.right=L-S;T.bottom=I-d;T.height=c;T.width=i;T.groupLeft=K;T.groupTop=Q}}return T},copyGroups:false,copy:function(d){n.copyGroups=false;var a=fluid.main.project.get("widgetGroups");var b=$.extend([],d);if(a){var f=n.createSelFromArray(b);var c=fluid.main.project.widgets.getRoots(f);c.each(function(v){var w=$(this).attr("id");for(var j in a){var z=a[j];var h=z.indexOf(w);if(h>-1){var i=b.indexOf(w);if(i>-1){b[i]=j}}}})}n.copyGroups=b},allGroups:false,paste:function(b,a){function h(E,u,F){var s=[];for(var t=0;t<(F.length+1);t++){if(F[t]==u){s.push(w[t])}}n.allGroups[E]=s;var D=new fluid.models.WidgetGroup({id:E,widgets:[].concat(s)});fluid.main.project.wdgGroups.add(D)}var z=fluid.main.project.get("widgetGroups");n.allGroups=false;n.allGroups=$.extend({},z);var w=$.extend([],b);var v=$.extend([],a);var i=_.uniq(v);for(var d=0;d<i.length;d++){var f=i[d];if(f.charAt(0)=="g"||f.charAt(0)=="G"){var c=n.createGroupIndex(n.allGroups);h(c,f,v,w)}}var j=n.allGroups;fluid.main.project.set({widgetGroups:j});n.drawExisting()},select:function(){n.deselect();var h=fluid.main.project.get("widgetGroups");if(h){var b=$("#"+fluid.selection.getSelectionModel().getRoots().getIds().join(", #"));var f=n.createSelArray(b,h);for(var j=0;j<f.length;j++){var d=f[j];if(d.charAt(0)=="g"){var a=n.getCommonArray(d,h);var c=_.last(a);if(d==c){var i=$("#"+d);if(i){i.addClass("selectedGroup")}}}}}return fluid.selection.getSelectedEls()},createSelFromArray:function(a){var b=$([]);for(var c=0;c<a.length;c++){b=b.add($("#"+a[c]))}return b},store:function(){return JSON.stringify(fluid.main.project.get("widgetGroups"))},removeOnDelete:function(i){var a=fluid.main.project.get("widgetGroups");if(a){var j=n.createSelFromArray(i);var h=$.extend({},a);var c=fluid.main.project.widgets.getRoots(j);var f=n.createSelArray(c,a);for(var b=0;b<f.length;b++){var d=f[b];if(d.charAt(0)=="g"){delete h[d]}}}fluid.main.project.set({widgetGroups:h})},restore:function(b){var a=fluid.main.project.get("widgetGroups");var c=JSON.parse(b.widgetGroups);if(c){var d=b.id;fluid.main.project.set({widgetGroups:c});n.drawExisting(b.pageId)}},selArray:[],deleteIds:[],createSelArray:function(c,b){var c=c.not(".backgroundWidget");n.selArray=[];n.deleteIds=[];c.each(function(){var i=$(this);var f=i.attr("id");n.selArray.push(f);for(var j in b){var t=b[j];var h=t.indexOf(f);if(h>-1){n.selArray.push(j);n.deleteIds.push(f)}}});var d=_.uniq(n.selArray);var a=_.uniq(n.deleteIds);d=_.difference(d,a);return d},getCommonArray:function(b,h){f=[];var h=(!h)?fluid.main.project.get("widgetGroups"):h;var a=h[b];for(var c in h){var d=_.intersection(a,h[c]);if(d.length>0){f.push(c)}}var f=_.uniq(f);return f},draw:function(f,I){function i(v){var s=$([]);for(var t=0;t<v.length;t++){var u=$("#"+v[t]);s=s.add(u)}return s}var j=f;var G=I[j];var D=i(G);var L=D.last();var a=o.getLockTos(L);var E=(a.length>0)?a:L;var F=l.getBoundingAreaRelative(D);var h=F.right-F.left;var J=F.bottom-F.top;var K=parseInt(E.css("top"));var H=parseInt(E.css("left"));var c=(K-F.top)*-1;var b=(H-F.left)*-1;var d={top:c,left:b,width:h,height:J,groupId:j};$("#tmplWidgGroup").tmpl(d).appendTo("#"+E.attr("id"))},addWidgets:function(c){function a(){var f=$(this);var d=f.attr("id");b.push(d)}var b=new Array;var c=c.not(".backgroundWidget");c.each(a);return b},createGroupIndex:function(d){(d)?d:fluid.main.project.get("widgetGroups");for(var a in d){var b=a}var f=b.replace("g","");var c=parseInt(f);c="g"+(c+1);return c},create:function(f){function j(){$("#multiSelBox").remove();n.drawExisting();$("#"+c).addClass("selectedGroup");fluid.main.fire("contextMenu:hide");fluid.main.fire("contextMenu:place");q.updateTLWH();o.drawMultiSelBox(u)}var u=fluid.main.project.widgets.getRoots(f||$("#canvasPages .ui-selected")).not(".backgroundWidget");var d=fluid.main.project.get("widgetGroups");var h=n.addWidgets(u);var a=n.enableGrouping(u,d,h);if(a==true){if(!d||jQuery.isEmptyObject(d)==true){var c="g1";var b={g1:h}}else{var c=n.createGroupIndex(d);var i=$.extend({},d);i[c]=h;var b=i}var v=new fluid.models.WidgetGroup({id:c,widgets:[].concat(h)});fluid.main.project.wdgGroups.add(v);fluid.main.project.set({widgetGroups:b});setTimeout(j,100)}return c},enableGrouping:function(w,h,j){var a=true;if(j.length<2){var a=false;return a}if(h){var b=n.createSelArray(w,h);var z=false;var f=false;for(var c=0;c<b.length;c++){var d=b[c];if(d.charAt(0)=="g"){var v=h[d];var i=_.difference(v,j);if(i.length<1&&(j.length==v.length)){var z=true}}}if(z==true){var a=false}}return a},erase:function(){$("#canvasPages .groupWidgetHolder").remove()},deselect:function(){$("#canvasPages .groupWidgetHolder").removeClass("selectedGroup")},getIdFromGroup:function(f,d){var h=false;for(var a in f){var c=f[a];var b=_.difference(c,d);if(b.length<1){h=a}}return h},ungroup:function(h){function f(){n.drawExisting();$("#multiSelBox").remove();fluid.main.fire("contextMenu:hide");fluid.main.fire("contextMenu:place");q.updateTLWH();o.drawMultiSelBox(h);n.select(h)}var i=fluid.main.project.get("widgetGroups");if(i){var h=(h)?h:$("#canvasPages .ui-selected");var c=fluid.main.project.widgets.getRoots(h);var c=c.not(".backgroundWidget");var d=n.addWidgets(c);var b=n.enableGrouping(c,i,d);if(b==false){var j=n.getIdFromGroup(i,d);if(j){var a=$.extend([],i);delete a[j];fluid.main.project.set({widgetGroups:a});fluid.main.project.wdgGroups.remove(j);setTimeout(f,100)}}else{return}}}};fluid.main.on("closeallpopups",n.deselect);p.exports=n},{"./class-storage":33,"./class-widget":37,"./functions":64,"./utils":69}],14:[function(l,j,i){var k=l("./fluid/fluid.module");var h=l("./fluid/lib/underscore");k.define("fluid.hoverListMenu",function(a){a.getMenuFromChild=function(b){return $(b).closest(".hover-list-menu")[0]};a.expand=function(u,c,f){c=c||u._newActiveList;if(!c||c===u._activeList){return}var d;if(!f&&u._activeList&&u._activeList!==c){var b=$(u._activeList);b=b.add(b.parents(".expandable.expanded"));for(d=b.length-1;d>=0;d--){v=b[d];if(v===c){break}a.shrink(u,v)}}var t=$(c),w=t.add(t.parents(".expandable"));for(d=w.length-1;d>=0;d--){var v=w[d];var s=v.querySelector(".hover-menu-group").clientHeight;v.style.height=40+s+"px";v.classList.add("expanded")}u._activeList=c;u._newActiveList=null;u._staleList=null};a.shrink=function(b,c){c=c||b._activeList;if(!c){return}c.style.height="";$(c).removeClass("expanded").find(".expanded").removeClass("expanded");var d=$(c).parents(".expandable.expanded");if(d.length){a.expand(b,d[0],true)}if(c===b._activeList){b._activeList=null}fluid.main.fire("libMenuShrinking")};a.select=function(b,c){c=c||b._activeList;if(!c||$(c).hasClass("locked")){return}a.expand(b,$(c).closest(".expandable")[0]);$(b).find(".selected").removeClass("selected");$(c).addClass("selected").parents(".expandable").addClass("selected")};a.shrinkStaleList=function(b,c){c=c||b._staleList;if(!c){return}if(tip.hovering){return}a.shrink(b,c);b._staleList=b._activeList=null};a.clearState=function(b){b._activeList=b._newActiveList=b._staleList=b._prevMouseMove=b._prevMouseDown=null};a.debounceExpand=h.debounce(a.expand,100);a.debounceshrinkStaleList=h.debounce(a.shrinkStaleList,400);a.init=function(){$(document).on("click",".expandable",function(d){var b=d.currentTarget,c=a.getMenuFromChild(b);if(d===c._prevMouseMove){return}c._newActiveList=b;c._prevMouseMove=d;if($(b).hasClass("expanded")){a.shrink(c,b)}else{a.expand(c,b)}}).on("click",".selectable",function(d){var b=d.currentTarget,c=a.getMenuFromChild(b);a.select(c,b)})}})},{"./fluid/fluid.module":50,"./fluid/lib/underscore":54}],15:[function(E,F,C){var s=E("./class-dbStorage");var A=E("./class-storage");var z=E("./class-account");var B=E("./class-widget");var H=E("./fluid/fluid.templating");var r=E("./class-search");var D=E("./class-hoverListMenu");var t=E("./class-tracker");var u=E("./utils");var G=E("./class-widgetLibOrder");var w=E("./class-page");var v={cached:{},fadeInSpeed:300,thumbPos:{},currentDisplay:"",drawTimeout:null,defaultGroup:0,allDefinitions:["common","android","wireframe","android5","android4","ios","ios7","ios8","windows8","desktop","googleGlass","galaxyGear","androidWear","pebble","appleWatch"],loadedDefinitions:[],defaultDefinition:"wireframe",groupList:[],loadDefinition:function(c){var b=new XMLHttpRequest();b.open("GET","js/fluid/data/widgets/"+c+".json?ver="+s.versionNumber,false);try{b.send(null);var f=JSON.parse(b.responseText);s.set("wdgDefinitions",{id:c,data:f});return f}catch(d){b.responseType="json";try{b.send(null)}catch(a){}s.set("wdgDefinitions",{id:c,data:b.response});return b.response}},loadWdgDefinitions:function(a){if(!a){s.onReady(function(){var b=["groups","categories","common"].concat(v.allDefinitions);s.get("wdgDefinitions",b,function(c){var k,f,d,i=c.resultsObj,j;if(!(i.groups&&i.groups.data&&i.categories&&i.categories.data&&i[v.defaultDefinition])){window.widgets={g:v.loadDefinition("groups"),t:v.loadDefinition("categories"),summary:{}};k=v.loadDefinition(v.defaultDefinition);for(d in k){if(k.hasOwnProperty(d)){window.widgets.summary[d]=k[d]}}f=v.loadDefinition("common");for(d in f){if(f.hasOwnProperty(d)){window.widgets.summary[d]=f[d]}}v.loadedDefinitions.push(v.defaultDefinition)}else{window.widgets={g:i.groups.data,t:i.categories.data,summary:{}};for(j=0;j<c.fetched.length;j++){if(c.fetched[j]!=="groups"&&c.fetched[j]!=="categories"){for(d in i[c.fetched[j]].data){if(i[c.fetched[j]].data.hasOwnProperty(d)){window.widgets.summary[d]=i[c.fetched[j]].data[d]}}v.loadedDefinitions.push(c.fetched[j])}}}for(var h in widgets.g){widgets.g[h].groups.forEach(function(l){v.groupList.push(l.id)})}v.preloadBgImages();v.init();v.ready=true;fluid.main.trigger("libready")})})}},addLibrary:function(c){var b=c.widgets;for(var a in b){window.widgets.summary[a]=b[a]}delete v.cached[c.name];var d=$('#lib-menu li[data-for="'+z.userLibraryGroup+'"] li.lib-link'),f=false;d.each(function(h,i){if($(i).data("for")==c.name){f=true;return false}});if(!f){$("#tmplLibMenuItem").tmpl({id:c.name,icon:"your-library",title:z.defaultUserLibrary}).insertAfter(d.last())}},removeLibrary:function(c){var a=window.widgets.summary,b=[];for(var i in a){if(a[i].g&&a[i].g[0]==c){b.push(i)}}for(var d=0,f=b.length;d<f;d++){delete window.widgets.summary[b[d]]}delete v.cached[c];var h=$('#lib-menu li[data-for="'+z.userLibraryGroup+'"] li.lib-link');h.each(function(j,k){if($(k).data("for")==c){if(v.currentDisplay==c){v.setActiveCategory("Wireframe")}$(k).remove();return false}})},addWidget:function(a,b){window.widgets.summary[a]=b;if(_.isArray(b.g)){b.g=b.g[0]}if(b.g&&v.cached[b.g]){if(v.currentDisplay==b.g){$("ol[data-groupName='"+b.g+"']").append(v.getWidgetHtml(a,b));w.renderer.afterPageRendered=v.afterUserWdgRender;w.renderer.renderWdg(a,b)}else{delete v.cached[b.g]}}},removeWidget:function(a,b){var c=window.widgets.summary[a];delete window.widgets.summary[a];if(c.g&&v.cached[c.g]){$("#"+a).remove()}},afterUserWdgRender:function(a,b){var c=new Image();c.width=50;c.height=50;c.src=b;setTimeout(function(){$("#"+a).prepend(c)},100)},preloadBgImages:function(a){if(a>v.groupList.length-2){return}var c=v.groupList[(a!==undefined?a:this.defaultGroup)].replace(".","_").toLowerCase();var b=new Image();b.onload=function(d){var f;if(a===undefined){f=0}else{f=a+1}if(f==v.defaultGroup){f++}setTimeout(function(){v.preloadBgImages(f)},300)};b.src="img/libBg/libBg-"+c+".png?ver="+s.versionNumber},closed:function(){return $("#library").find("#tabLibrary").hasClass("closed")},toggle:function(){var a=$("#library");function d(){var h=a.find("#tabLibrary");h.toggleClass("closed open");var i=h.hasClass("closed");var j=(i)?"Open Library":"Close Library";f.attr("title",j);if(fluid.zoom.getCtx()==="page"){fluid.zoom.zoomToPage({pageId:$(".screen.active").attr("id"),libToggled:true,keepZoomCenter:true})}else{fluid.zoom.onSelectionChanged()}}var f=a.find("#tabLibrary");var b=a.outerWidth();var c=(f.hasClass("open"))?-b:0;a.animate({left:c},v.fadeInSpeed,"easeInOutQuad",d);if(closed){fluid.main.fire("libraryClosing")}},show:function(c){var a=$("#library");if(v.closed()){a.show();if(c&&$.isFunction(c)){c()}}else{if(a.position().left!=0||!a.is(":visible")){var b=fluid.main.account.get("libraryWidth");a.css({left:"-"+b+"px",display:"block",width:b});u.animateRaf(function(d){a.css({left:(b*(d-1))+"px"})},v.fadeInSpeed,"easeInOutQuad",function(){if(a.children("#widgets").find(".thumb").height()===0||(v.currentDisplay==="Uploads"&&(!v.lastAccount||v.lastAccount!==fluid.main.account.get("id")))){v.lastAccount=fluid.main.account.get("id");v.updateScrollbar()}if(c&&$.isFunction(c)){c();v.updateScrollbarRelative()}})}}},resize:function(a,c){var d=c.size.width;z.set({libraryWidth:d});var b=$("#canvasPages .active");if(b.length==1){fluid.zoom.zoomToPage(b)}v.updateScrollbar()},setHeaderHoverIn:function(a){$(this).find("h6").stop(true,true).delay(300).fadeTo(200,1);setTimeout(function(){$(this).css("background","#ccc")},600)},setHeaderHoverOut:function(a){$(this).find("h6").stop(true,true).hide();setTimeout(function(){$(this).css("background","rgba(205,205,205,0.0)")},600)},collapseSection:function(j){var f=$(this).parents(".basicBG").attr("id");var d=$("#"+f);var a=d.children(".scrollbar");var i=a.children(".track");var h=i.children(".thumb");var b=parseFloat(h.css("top"));if($(this).hasClass("closed")){$(this).removeClass("closed").html("Hide")}else{$(this).addClass("closed").html("Show")}$(this).parent("header").siblings("ol").toggleClass("hidden");$(this).parent("header").siblings(".hideButton").toggleClass("hidden");$(d).tinyscrollbar();var c=(b+h.height())-i.height();if(c<0){c=0}d.tinyscrollbar_update(b-c)},updateScrollbar:function(){$("#widgets").tinyscrollbar()},updateScrollbarRelative:function(){$("#widgets").tinyscrollbar_update("relative")},scrollBottom:function(){$("#widgets").tinyscrollbar_update("bottom")},init:function(){v.drawMenu();fluid.main.on("editor.afterLogin",v.refreshLockedLibsStatus);fluid.main.on("editor.afterLogout",v.drawMenu);fluid.main.on("afteruploadssynced",function(){if(v.currentDisplay=="Uploads"){v.draw(v.currentDisplay)}});fluid.main.on("syncdownlibrefreshneeded",function(h,d){$("#msgLoadingAfterLogin").hide();var f=$("#widgetGroupTitle").text();if(d&&f==d){v.draw(f)}z.setLoadingStep(5)});fluid.main.on("libraryredrawneeded",function(f,d){v.draw(d)});fluid.main.on("libraryadded",function(f,d){v.addLibrary(d)});fluid.main.on("accountupgraded",v.refreshLockedLibsStatus);fluid.main.on("libremovalneeded",function(f,d){v.removeLibrary(d)});v.draw(v.groupList[this.defaultGroup]);v.currentDisplay=r.currentDisplay=v.groupList[this.defaultGroup];B.addUploads();var c=[];var a=fluid.main.account.get("uploads");if(a){for(var b=0;b<a.length;b++){c.push(a[b].id)}}s.onReady(function(){s.get("uploadThumbs",c,function(d){if(!window.uploadThumbsCache){window.uploadThumbsCache={}}for(var f=0;f<d.fetched.length;f++){uploadThumbsCache[d.fetched[f]]=d.resultsObj[d.fetched[f]].data}})});fluid.main.projects.on("add remove",v.updateProjectsList);fluid.main.uploads.on("add",function(i,h){var d=h.attributes;var f=fluid.util.tpl("uploadMarkup",{id:d.id,title:d.title,uploadThumbsCacheExists:!!uploadThumbsCache[d.id],src:uploadThumbsCache[d.id]});v.canvasToLoad($('[data-groupname="Uploads"],#project-notInAny .uploadTabs-project').prepend(f).find("canvas.toLoad"));v.setCounter("notInAny",parseInt($("#project-notInAny").find(".tab-count").text(),10)+1)});fluid.main.uploads.on("change:removed",function(d,i,j){if(j===0){var f=i.attributes;var h=fluid.util.tpl("uploadMarkup",{id:f.id,title:f.title,uploadThumbsCacheExists:!!uploadThumbsCache[f.id],src:uploadThumbsCache[f.id]});v.canvasToLoad($('[data-groupname="Uploads"],#project-notInAny .uploadTabs-project').prepend(h).find("canvas.toLoad"));v.setCounter("notInAny",parseInt($("#project-notInAny").find(".tab-count").text(),10)+1)}else{$('[data-id="'+i.id+'"]').remove();v.setCounter("notInAny",parseInt($("#project-notInAny").find(".tab-count").text(),10)-1)}});fluid.main.on("projectTab.uploadAdded",function(f,d){v.addUploadToProjectTab(d.projectId,d.uploadId)});fluid.main.on("projectTab.uploadRemoved",function(f,d){v.removeUploadFromProjectTab(d.projectId,d.uploadId)});fluid.main.on("projectTab.setCounter",function(f,d){v.setCounter(d.projectId,d.count)});fluid.main.on("projectTab.changeNameOfActiveTab",v.changeNameOfActiveTab)},_createDragHelper:function(a){var c=$(this).attr("id");if(!c){c=$(this).attr("data-id")}var h=$.extend(true,{isHelperWidget:true,widgetId:c},B.get(c));h.wh=h.wh||[80,120];h.wh[0]=(h.wh[0]=="a")?"100%":h.wh[0];h.wh[1]=(h.wh[1]=="a")?"100%":h.wh[1];if(h.upload==="y"){var b=A.get(document.querySelector(".canvasObject.active").id),d=u.getFitSize({object:{width:h.wh[0],height:h.wh[1]},frame:{width:b.width,height:b.height}});h.wh=[d.width,d.height]}h.wh[0]=(typeof h.wh[0]==="string")?$("#canvasPages .active .widgetHolder").width()*parseInt(h.wh[0])/100:h.wh[0];h.wh[1]=(typeof h.wh[1]==="string")?$("#canvasPages .active .widgetHolder").height()*parseInt(h.wh[1])/100:h.wh[1];var f=(h.st&&h.st=="b")?[0,0,80,120]:[0,0,h.wh[0],h.wh[1]];var i=$("#tmplDraggingWidgetContainer").tmpl(h);if(h.upload=="y"){i.addClass("upload")}else{if($(this).hasClass("userWidget")){i.addClass("userWidget")}}B._drawFromRoot($(this).attr("id")||$(this).attr("data-id"),i.find(".widgetParts"),f,h);i.find(".container").css("transform","scale("+fluid.zoom.getCurrentScale()+")");return i},setActiveCategory:function(c,a){var b=parseFloat($("#widgets").children(".scrollbar").find(".thumb").css("top"));v.thumbPos[v.currentDisplay]=b;v.closeMenu();fluid.hoverListMenu.select($("#lib-menu")[0],$('#lib-menu [data-for="'+c+'"]')[0]);setTimeout(function(){var d=v.currentDisplay!=c;if(d){v.draw(c);v.currentDisplay=r.currentDisplay=r.currentDisplay=c}if(a){window.setTimeout(function(){v.scrollBottom()},100);if(d){window.setTimeout(function(){v.scrollBottom()},4000)}}else{$("#widgets").tinyscrollbar_update(v.thumbPos[c])}},10)},adjustToCssClass:function(a){a=a.replace(".","_").toLowerCase();return a},draw:function(d,m){var k={Wireframe:"wireframe",Desktop:"desktop","Android-5":"android5",iOS8:"ios8","iOS8-tablet":"ios8",iOS7:"ios7",iPad:"ios",iPhone:"ios","Android-4.4":"android4","Android-Tablet":"android4",Android:"android","Google-Glass":"googleGlass","Galaxy-Gear":"galaxyGear","Android-Wear":"androidWear",Pebble:"pebble","Apple-Watch":"appleWatch","Windows-8":"windows8"};if(k[d]&&v.loadedDefinitions.indexOf(k[d])===-1){var n=v.loadDefinition(k[d]),j;for(j in n){if(n.hasOwnProperty(j)){window.widgets.summary[j]=n[j]}}v.loadedDefinitions.push(k[d])}if(d===undefined||d===null){d=v.currentDisplay}var b=v.currentDisplay;var h=$("#library").removeClass(this.adjustToCssClass(b)).addClass(this.adjustToCssClass(d));var l=d.toLowerCase()=="uploads";var f=d==b;v.currentDisplay=r.currentDisplay=d;var a=$("#widgets .viewport");a.find(".overview").hide().remove();if(l){if(v.cached.hasOwnProperty(d)){delete v.cached[d]}}var i=v.cached.hasOwnProperty(d);if(!i&&!f){$("#libraryLoading").show()}function c(){function o(){if($.isFunction(m)){m()}}$("#libraryLoading").hide();if(!i){if(d==="Uploads"){v.cacheUploads()}else{v.cache(d)}}v.cached[d].appendTo(a);if(f){v.cached[d].show()}else{v.cached[d].fadeIn(this.fadeInSpeed,o)}r.filter();v.drawTimeout=null;if(f){o()}}if(f){c()}else{if(v.drawTimeout){window.clearTimeout(v.drawTimeout)}v.drawTimeout=window.setTimeout(c,10)}return false},drawSingleUpload:function(a,j){var b=$("[data-groupName='Uploads']");if(b.length){var i=$("<li id="+a+' class="libraryWidget" title="Click or drag-and-drop to add" style="background-image: none;">');var h=$('<div class="pageWidget" style="top:2px;left:2px;width:50px;height:50px;">');i.append(h);h.append('<canvas width="50" height="50" id="'+a+'-thumb"></canvas>');h.append('<div class="widgetTitle">'+j+"</div>");var d=h[0].querySelector("canvas");d.style.backgroundImage="url(img/ajax-loader.gif)";d.style.backgroundSize="100%";b.prepend(i);var f=new Image(),c=A.get(a);f.onload=v.onUploadLoad;f.onerror=v.onUploadError;if(c&&c.storage!=="db"){f.crossOrigin="Anonymous";f.src=imgCloudUrl+(widgets.summary[a].data||a)+".png"}else{f.src="data/img/"+a}}else{v.draw("Uploads")}},onUploadComplete:function(a){if(a.success){v.onUploadLoad(a)}else{v.onUploadError(a)}},_onUploadLoad:function(f){var c=f.image,a=f.id;var d=widgets.summary[a];var b=document.querySelectorAll('canvas[data-id="'+a+'-thumb"]');if(d){if(!d.wh[0]){d.wh[0]=this.width}if(!d.wh[1]){d.wh[1]=this.height}if(!d.groups){d.groups=[]}}if(b.length){Array.prototype.forEach.call(b,function(i){i.style.backgroundImage="none";var h=i.getContext("2d");h.fillStyle="#cccccc";h.fillRect(0,0,50,50);if(c.width===0&&c.height===0){h.drawImage(c,0,0)}else{if(c.width<=50&&c.height<=50){h.drawImage(c,25-c.width/2,25-c.height/2-Math.max((34-c.height)/2,0))}else{if(c.width<c.height){h.drawImage(c,0,0,50*c.width/c.height,50)}else{h.drawImage(c,0,0,50,50*c.height/c.width)}}}})}},onUploadLoad:function(a){if(fluid.main.account.get("loggedIn")==="no"){return}if(a.image){v._onUploadLoad(a)}else{if(a.imgData){a.image=new Image();a.image.onload=v._onUploadLoad.bind(a.image,a);a.image.onerror=function(b){};a.image.src=a.imgData}}},onUploadError:function(){},createLibOrder:function(a){var b=[];var d=$.extend(true,{},widgets.summary);for(var h in d){if(d.hasOwnProperty(h)){b.push(h)}}var f=b;if(a=="Desktop"){var c=G.createOrder();if(c.length>0){f=c}}if(a==="Uploads"){f.reverse()}return f},cacheUploads:function(){var k=$('<nav class="overview" style="display:none;"></nav>');if(fluid.main.account.get("loggedIn")==="yes"){k.append($("#tmplUpload").tmpl())}else{k.append($("#tmplUploadDisabled").tmpl());v.cached.Uploads=k;return}var b="";var d="";var f="";var m="";var l={};_.each(widgets.summary,function(n,o){if(n.t&&n.t.indexOf("Invisible Link Areas")!==-1){l[o]=n}});var j="";_.each(l,function(o,n){j+=fluid.util.tpl("widgetMarkup",{id:n,title:o.title,widgetClass:""})});var i='<section class="setHeader"><header><h2>Invisible Link Areas</h2><h6>Hide</h6></header>';i+='<ol data-groupName="Invisible Link Areas">';i+=j;i+="</ol></section>";k.append($(i));var a=fluid.main.projects.models.sort(function(n,o){return n.attributes.updated<o.attributes.updated});var h=[];var c=[];fluid.main.uploads.models.forEach(function(n){var o=n.attributes;if(!o.removed){b+=fluid.util.tpl("uploadMarkup",{id:o.id,title:o.title,uploadThumbsCacheExists:!!uploadThumbsCache[o.id],src:uploadThumbsCache[o.id],count:fluid.main.uploads.length})}});d=fluid.util.tpl("uploadTabsTpl",{allUploads:b,openAllUploads:true});a.forEach(function(o){var p=o.attributes.name;var n=o.attributes.id;var q=_.map(o.attributes.uniqueUploads,function(J){return fluid.main.uploads.get(J).attributes});q.forEach(function(J){c.push(J.id)});f+=fluid.util.tpl("uploadTabsProject",{id:n,name:p,currentProject:(o.id===fluid.main.project.id),activeProject:(o.id===fluid.main.project.id),empty:(q.length===0),uploads:q,count:q.length})});fluid.main.uploads.models.forEach(function(n){if(n.attributes.removed){return}if(c.indexOf(n.id)===-1){h.push(n)}});m+=fluid.util.tpl("uploadTabsProject",{id:"notInAny",name:"Not in any projects",notInAny:true,activeProject:true,empty:(h.length===0),uploads:_.map(h,function(n){return n.attributes}),count:h.length});k.append(d);k.find("#perProjectGroupContainer").prepend(f);k.find("#perProjectGroupContainer").prepend(m);v.cached.Uploads=k;v.canvasToLoad(k.find("canvas.toLoad"))},canvasToLoad:function(a){a.each(function(f,j){var d=$(j);var c=d.attr("data-id").replace("-thumb","");var i=new Image();var h=fluid.main.uploads.get(c).attributes;i.onload=function(){b(d,c,i)};i.onerror=v.onUploadError;if(uploadThumbsCache[c]){i.src=uploadThumbsCache[c]}else{if(h&&h.storage==="cloud"){i.crossOrigin="Anonymous";i.src=imgCloudUrl+c+".png"}else{i.src="data/img/"+c}}d.removeClass("toLoad")});function b(j,c,h){var d=j[0];var f=widgets.summary[c];if(f){if(!f.wh[0]){f.wh[0]=d.width}if(!f.wh[1]){f.wh[1]=d.height}}d.style.backgroundImage="none";var i=d.getContext("2d");i.fillStyle="#cccccc";i.fillRect(0,0,50,50);if(h.width===0&&h.height===0){i.drawImage(h,0,0)}else{if(h.width<=50&&h.height<=50){i.drawImage(h,25-h.width/2,25-h.height/2-Math.max((34-h.height)/2,0))}else{if(h.width<h.height){i.drawImage(h,0,0,50*h.width/h.height,50)}else{i.drawImage(h,0,0,50,50*h.height/h.width)}}}s.set("uploadThumbs",{id:c,data:d.toDataURL("image/jpeg",0.9)})}},cache:function(j){var o=$('<nav class="overview" style="display:none;"></nav>');var K=[];var c;for(var f=0;f<widgets.t.length;f++){K[f]=""}var p=v.createLibOrder(j);var i={};for(var n=0;n<p.length;n++){var l=p[n];var b=widgets.summary[l];if(b&&b.g&&b.g.indexOf(j)!=-1){i[l]=b;var h=b.t;if(!h){continue}c=widgets.t.indexOf(h[0]);if(widgets.summary[l].removed){continue}if(!widgets.summary[l].upload){var m=b.g==z.defaultUserLibrary?"userWidget":"";K[c]+=fluid.util.tpl("widgetMarkup",{id:l,title:b.title,widgetClass:m})}}}var q="";var k=[];for(f=0;f<K.length;f++){if(K[f]!=""){if(widgets.t[f]!=="Uploads"){q+='<section class="setHeader"><header><h2>'+widgets.t[f]+"</h2><h6>Hide</h6></header>";q+='<ol data-groupName="'+widgets.t[f]+'">';q+=K[f];q+="</ol></section>"}}}o.get(0).innerHTML=q;if(j===z.defaultUserLibrary){o.get(0).innerHTML=fluid.util.tpl("tmplMyWidgets",{title:"My Widgets"});var d=o.find('[data-groupname="My Widgets"]');for(var a in i){d.append(fluid.util.tpl("widgetMarkup",{id:a,title:i[a].title,widgetClass:"userWidget"}))}w.renderer.afterPageRendered=v.afterUserWdgRender;for(var a in i){w.renderer.renderWdg(a,i[a])}}v.cached[j]=o},getWidgetHtml:function(a,c){var b="libraryWidget";if(c.g==z.defaultUserLibrary){b+=" userWidget"}return'<li id="'+a+'" class="'+b+'" title="Click or drag-and-drop to add"><div class="widgetTitle">'+c.title+"</div></li>"},showUploads:function(){v.setActiveCategory("Uploads")},esc:function(){if($("#canvas").hasClass("editing")){if(fluid.zoom.getCtx()!=="project"){fluid.zoom.zoomOut()}}else{if(!$("#previewHolder").hasClass("open")){$("#accountFrame").fadeOut()}}},addUploadToProjectTab:function(c,a){var b=$("#project-"+c+" .uploadTabs-project");var d=$('#project-notInAny [data-id="'+a+'"]');if(d.length){d.detach().appendTo(b);v.setCounter("notInAny",parseInt($("#project-notInAny").find(".tab-count").text(),10)-1)}else{v.canvasToLoad($('[data-id="'+a+'"]').first().clone().appendTo(b).find("canvas").addClass("toLoad"))}v.updateScrollbarRelative()},removeUploadFromProjectTab:function(d,a){var b=$("#project-"+d);var c=b.find('[data-id="'+a+'"]').detach();var f=[];var h=[];fluid.main.projects.models.forEach(function(i){i.attributes.uniqueUploads.forEach(function(j){f.push(j)})});fluid.main.uploads.models.forEach(function(i){if(i.attributes.removed){return}if(f.indexOf(i.id)===-1){h.push(i.id)}});if(h.indexOf(a)!==-1){$("#project-notInAny .uploadTabs-project").append(c)}v.setCounter("notInAny",h.length);v.updateScrollbarRelative()},setCounter:function(a,b){var c=$("#project-"+a);c.find(".tab-count").text(b);if(b===0){c.addClass("empty")}else{c.removeClass("empty")}},changeNameOfActiveTab:function(b,a){$("#project-"+a.id+" .tab-name").text(a.name)},changeActiveTab:function(a){$("#perProjectGroupContainer .projectTab.current").removeClass("current active");$("#perProjectGroupContainer #project-"+a).addClass("current active").detach().insertAfter("#project-notInAny")},openMenu:function(){var b=$("#lib-menu"),a=b.find('.hover-menu-level-1[data-for="'+v.currentDisplay+'"]');b.removeClass("closed");fluid.hoverListMenu.clearState(b[0]);fluid.hoverListMenu.select(b[0],a[0])},closeMenu:function(){$("#lib-menu").addClass("closed");fluid.main.fire("libMenuClosing")},menuClosed:function(){return $("#lib-menu").hasClass("closed")},toggleMenu:function(){if(v.menuClosed()){return v.openMenu()}return v.closeMenu()},drawMenu:function(){var a=fluid.main.account.get("whitelist");if(!a){a=["Wireframe","Desktop","iPhone","Android"];z.set({whitelist:a})}$("#lib-menu").empty();fluid.util._.each(widgets.g,function(b,c){b.groups=fluid.util._.map(b.groups,function(d){d.locked=a.indexOf(d.id)===-1;return d});if(b.archive){b.archive=fluid.util._.map(b.archive,function(d){d.locked=a.indexOf(d.id)===-1;return d})}$("#tmplLibMenu").tmpl({section:c,icon:b.icon,items:b.groups,archive:b.archive}).appendTo("#lib-menu");$('[data-for="Wireframe"]').click()})},refreshLockedLibsStatus:function(){fluid.api.getLibrariesWhitelist(function(b){var a=JSON.parse(b).whitelist;z.set({whitelist:a});v.drawMenu()})},updateProjectsList:function(i,a){var b=arguments[3];var h=$("#perProjectGroupContainer");var d=a.attributes;if(b.add){h.find(".projectTab.current").removeClass("current");var c=h.find("#project-"+d.id);if(!c.length){var f=fluid.util.tpl("uploadTabsProject",{id:d.id,name:d.name,currentProject:true,activeProject:true,empty:true,uploads:[],count:0});c=$(f);c.insertAfter($("#project-notInAny"))}c.addClass("current")}if(b.remove){fluid.main.projects.filter(function(j){if(j.removed){return true}}).forEach(function(j){var k=fluid.main.project.get("id");h.find("#project-"+k).remove()})}}};fluid.main.on("libfilterdone",function(){v.updateScrollbar()});fluid.main.on("escpressed",function(){v.esc()});fluid.main.on("aftercustomwidgetdeleted",function(c,a,b){v.afterUserWdgRender(a,b)});fluid.main.on("projectInactive",function(){$("#library").hide()});F.exports=v;window.lib=v},{"./class-account":3,"./class-dbStorage":8,"./class-hoverListMenu":14,"./class-page":18,"./class-search":30,"./class-storage":33,"./class-tracker":34,"./class-widget":37,"./class-widgetLibOrder":39,"./fluid/fluid.templating":51,"./utils":69}],16:[function(r,p,k){var m=r("./class-storage");var n=r("./class-page");var l=r("./utils");var q=r("./functions");var o={mouseTimeoutForHover:false,isLinking:false,toggleRemoveTimeout:{},showahrefs:function(b){if(b){var a=(new Date).getTime();if(a-o.mouseTimeoutForHover<b){setTimeout(o.showahrefs,300,[b]);return}}$(".linkTemplate").stop(true,true).delay(500).fadeOut(400)},hoverIn:function(U){if(fluid.main.project.isReadOnly()){return}var Q=$(this).attr("id");if(!m.get(Q)){return}$(this).addClass("front");var f=$(this).find(".linkToggle"),i=this;clearTimeout(o.toggleRemoveTimeout[Q]);if(f.length===0){f=$('<a class="linkToggle tooltip4" title="Gestures and transitions" alt="Gestures and transitions"></a>');$(i).append(f)}f.tooltip({effect:"fade",delay:0,offset:[-10,0],opacity:0.8,tipClass:"tooltip4Text",predelay:50});o.toggleRemoveTimeout[Q]=setTimeout(function(){f.stop(true,false).fadeTo(10,1,o.showLinkMenuIntro)},200);var a=o.comesFrom($(this).attr("id"));var X=o.goesTo($(this).attr("id"));var M=$("#"+a);var j=m.get(a,{returnModel:true}).getPage().id;if(fluid.zoom.isEditMode()){M.css("outline","3px solid rgba(25,163,255,1.0)");var O=$("#"+j);var ab=O.hasClass("active");var Z=$("#"+X);var b=O.find(".page");var c=parseInt(O.css("top"))+parseInt(M.css("top"))+parseInt(M.css("height"))/2;var d=parseInt(O.css("left"))+parseInt(M.css("left"))+parseInt(M.css("width"))/2;var h=(parseInt(Z.css("top"))+parseInt(Z.css("height"))/2);var Y=(parseInt(Z.css("left"))+parseInt(Z.css("width"))/2);var W=13;var S=60;if(!ab){S=0}var ac=0;if(d<Y){ac=parseInt(O.css("left"))+parseInt(b.css("width"))+S}else{ac=parseInt(O.css("left"))-S}var T=(((h-c)/(Y-d))*(ac-d))+c;var aa=parseInt(O.css("top"))-S;var N=parseInt(O.css("top"))+parseInt(b.css("height"))+S;if((T<=aa)||(T>=N)){if(c<h){T=parseInt(O.css("top"))+parseInt(b.css("height"))+S}else{T=parseInt(O.css("top"))-S-20;if(d<Y){W=-20}}ac=(((T-c)/(h-c))*(Y-d))+d}var P=T-c;var V=ac-d;var R=Math.sqrt(P*P+V*V)+25;$(this).find(".linkToggle").css({"margin-left":R+"px","margin-top":W+"px"})}else{var ad=n.isLinked(X,j);if(ad&&U){o.hoverIn.apply(document.getElementById(ad),[false])}}},hoverOut:function(a){$(".tooltip4Text").hide();if(!$("#canvas").hasClass("loaded")){return}var f=$(this).attr("id");if(!m.get(f)){return}var i=o.goesTo(f);var j=o.comesFrom(f);var h=this;if(a){o.draw($(this),j,i,"ahref")}var c=$(".link").not(".open-link-menu").find(".linkToggle");if(!a||!($(a.target).hasClass("open-link-menu")||$(a.target).hasClass("openLinkMenu"))){clearTimeout(o.toggleRemoveTimeout[f]);o.toggleRemoveTimeout[f]=setTimeout(function(){c.fadeTo(200,0);o.toggleRemoveTimeout[f]=setTimeout(function(){$(h).find("*").remove();$(".link").removeClass("front");delete o.toggleRemoveTimeout[f]},300)},2000)}$("#"+j).css("outline","");o.draw($(this),j,i,"ahref");var b=j?m.get(j,{returnModel:true}).getPage().id:false;var d=n.isLinked(i,b);if(d&&a){o.hoverOut.apply(document.getElementById(d),[false])}return false},closeMenu:function(){$(".openLinkMenu").removeClass("openLinkMenu");$(".open-link-menu").removeClass("open-link-menu");$(".linkMenu").hide();return false},setLinkMenuText:function(){$("#smallRemoveLink, #zoomedOutLinks, #linkAmount").hide();if(!fluid.zoom.isEditMode()){$("#zoomedOutLinks").show();var a=fluid.main.project.get("links")["linkCanvId"].length;$("#linkAmount").show().text(a);var b=(a>1)?("remove "+a+" links"):("remove 1 link");$("#removeLinkTxt").text(b)}else{$("#smallRemoveLink").show()}},toggleMenu:function(b){if($(this).hasClass("openLinkMenu")){o.closeMenu()}$(".openLinkMenu").removeClass("openLinkMenu");$(this).addClass("openLinkMenu");$(this).parents(".link").addClass("open-link-menu");$("body").bind("click.linkToggle",function(d){if($(d.target).parents(".linkMenu").length>0){return}var f=$(".openLinkMenu");if(d.target!=f.get(0)){f.removeClass("openLinkMenu").parent(".link").removeClass("open-link-menu");$(d.target).addClass("openLinkMenu").parent(".link").addClass("open-link-menu")}else{$(".openLinkMenu").removeClass("openLinkMenu");$(".open-link-menu").removeClass("open-link-menu")}o.hoverOut();$(".linkMenu").hide();$("body").unbind("click.linkToggle");if(d.target!=f.get(0)){$(d.target).click()}return l.prevent(d)});var c=m.get($(this).parents(".link").attr("id"));var a=$(this).offset();$(".linkMenu .transitionSelector").find("[value='"+c.transType+"']").attr("selected","selected");$(".linkMenu .linkTriggerSelector").find("[value='"+c.triggerType+"']").attr("selected","selected");$(".linkMenu").css({top:a.top,left:a.left}).show();return false},follow:function(d){if(fluid.zoom.isEditMode()&&$(".connectorHelper").length==0){$(this).find(".linkToggle").hide(10,o.hideLinkMenuIntro);var c=o.goesTo($(this).attr("id"));var a=l.getActivePageId();if(a==c){c=o.comesFromPage($(this).attr("id"))}var b=$("#"+c);if(b.length===0){n.drawDetailed(c,"init");b=$("#"+c)}n.activate(b);fluid.zoom.zoomToPage(c)}},template:function(d,c,a){$("#"+d).remove();var b=$("#tmplLinkNew").tmpl({id:d}).appendTo("#canvasLinks");if(c=="ahref"){b.fadeIn(400)}else{b.addClass("linkTemplate")}return b},dragStart:function(a,c){$(document.body).addClass("dragging_link");if($("#dragCanvas").length==0){$("#tmplDragCanv").tmpl({}).appendTo($("#canvas"))}o.isLinking=true;if((typeof c=="boolean"&&c)||!$(this).data("dragOnClickStarted")){fluid.main.fire("linkdragstart",$(".screen.active").attr("id"));var b=fluid.zoom.getCurrentScale();$("#canvas").data("revertZoom",b);$("#canvasLinks").filter(":visible").hide();if($(this).attr("id")=="cmLink2"){o.remove(".ui-selected")}fluid.zoom.zoomOutForLink($(this))}if(c){$(this).data("dragOnClickStarted",true);$(".ui-draggable").not(this).not(".pageWidget").draggable("disable")}},drag:function(a){if(!o.$dragCanvas){o.$dragCanvas=$("#dragCanvas");o.$dragCanvas.add($(".connectorHelper"))}var b=q.getHoverPageParams(a);var c=b.pageId?b.pageId:false;if(c){if(c!=$(".pageLinkableCandidate").attr("id")){o.removeHighlightedPage(a);if(c!=$(".activeZoomedOut").attr("id")){$("#scaled-"+c).addClass("pageLinkableCandidate")}}}else{o.removeHighlightedPage(a)}o.draw($("#dragCanvas"),fluid.zoom.getselectedBeforeZoomOut(),$(".connectorHelper"),"ahref")},dragStop:function(a){$(document.body).removeClass("dragging_link");fluid.zoom.afterLinkDone();if(fluid.zoom.isZoomingNow()){o.dragAborted=true;$("#dragCanvas").addClass("hide")}$(this).data("dragOnClickStarted",false);$(".ui-draggable").not(this).not(".pageWidget").draggable("enable");$(".scaled-screen").removeClass("pageLinkable pageLinkableCandidate");o.isLinking=false;fluid.main.fire("linkdone")},drawSome:function(c,d){var b;for(var a=0;a<c.linkOrigin.length;a++){b=m.get(c.linkOrigin[a],{returnModel:true});if(b&&c.linkDest[a]!==b.getPage().id){o.draw($("#"+c.linkCanvId[a]),c.linkOrigin[a],c.linkDest[a],c.linkType[a],d)}}},drawAll:function(a){fluid.main.project.links.forEach(function(b,c,d){o.draw($("#"+b.id),b.get("linkOrigin"),b.get("linkDest"),b.get("linkType"))})},update:function(b){var a=fluid.main.project.links.toJSON();var f=[];b.each(function(){var i=$(this).attr("id"),v;if(i.indexOf("scaled-")!==-1){i=i.split("-")[1]}for(var j=0,z=a.linkOrigin.length;j<z;j++){v=m.get(a.linkOrigin[j],{returnModel:true});if(!v){continue}var w=m.get(a.linkOrigin[j],{returnModel:true}).getPage().id;if(w===i||a.linkDest[j]===i){f.push(j)}}});for(var h=0,c=f.length;h<c;h++){var d=f[h];o.draw($("#"+a.linkCanvId[d]),a.linkOrigin[d],a.linkDest[d],a.linkType[d])}},overlapCheck:function(c,d){var a={left:c[0],right:c[0]+c[2],top:c[1],bottom:c[1]+c[3]};var b={left:d[0],right:d[0]+d[2],top:d[1],bottom:d[1]+d[3]};if((b.left>=a.left&&b.left<=a.right&&b.top>=a.top&&b.top<=a.bottom)||(b.right>=a.left&&b.right<=a.right&&b.top>=a.top&&b.top<=a.bottom)||(b.left>=a.left&&b.left<=a.right&&b.bottom>=a.top&&b.bottom<=a.bottom)||(b.right>=a.left&&b.right<=a.right&&b.bottom>=a.top&&b.bottom<=a.bottom)){return true}else{return false}},drawPageToPage:function(a,O,Y,af){if(o.overlapCheck(O,Y)){a.hide();return}var S;var ae=15;var W,b,V,ab;var j=0,P=0,ac=0,ad=0;var d,U,Q;if(O[1]<Y[1]){d=O;U=Y;Q=true}else{d=Y;U=O;Q=false}var T,f,aa;if(O[0]<Y[0]){T=O;f=Y;aa=true}else{T=Y;f=O;aa=false}if(U[1]-d[1]<d[3]){var R="";if(d[1]+d[3]>U[1]+U[3]){P=U[1]+U[3]/2}else{P=U[1]+(d[1]+d[3]-U[1])/2}if(aa){j=O[0]+O[2];S=Y[0]-O[0]-O[2];R="right"}else{j=Y[0]+Y[2];S=O[0]-Y[0]-Y[2];R="left"}a.css({top:P*af,left:j*af,width:S*af>ae?S*af-ae:0,height:"4px","-webkit-transform-origin":"0px 2px","-moz-transform-origin":"0px 2px","-webkit-transform":"none","-moz-transform":"none"}).removeClass("right up left down").addClass(R).show();return}else{if(f[0]-T[0]<T[2]){var R="";if(j>T[0]+T[2]||f[0]+f[2]>T[0]+T[2]){j=f[0]+(T[0]+T[2]-f[0])/2}else{j=f[0]+f[2]/2}if(Q){P=O[1]+O[3];S=Y[1]-O[1]-O[3];R="down"}else{P=Y[1]+Y[3];S=O[1]-Y[1]-Y[3];R="up"}a.css({top:Q?P*af:P*af+ae,left:j*af,height:S*af>ae?S*af-ae:0,"-webkit-transform-origin":"0px 2px","-moz-transform-origin":"0px 2px","-webkit-transform":"none","-moz-transform":"none"}).removeClass("right up left down").addClass(R).show();return}else{W=(O[1]+O[3]/2);b=(O[0]+O[2]/2);V=(Y[1]+Y[3]/2);ab=(Y[0]+Y[2]/2);var c=ab-b;var h=V-W;var X=h/c;if(Math.abs(X)>O[3]/O[2]){if(V<W){P=-O[3]/2}else{P=O[3]/2}j=P/X}else{if(ab<b){j=-O[2]/2}else{j=O[2]/2}P=j*X}if(Math.abs(X)>Y[3]/Y[2]){if(V<W){ad=h+Y[3]/2}else{ad=h-Y[3]/2}ac=ad/X}else{if(ab<b){ac=c+Y[2]/2}else{ac=c-Y[2]/2}ad=X*ac}j=(b+j)*af;P=(W+P)*af;ac=(b+ac)*af;ad=(W+ad)*af;var Z=(ac-j);var i=(ad-P);var S=Math.sqrt(Z*Z+i*i);var N=Z<0?(180/Math.PI)*Math.atan(-i/Z):(180/Math.PI)*Math.atan(i/Z);if(Z<0){N=180-N}a.css({top:P,left:j,width:S>ae?S-ae:0,height:4,"-webkit-transform-origin":"0px 2px","-moz-transform-origin":"0px 2px","-webkit-transform":"rotate("+N+"deg)","-moz-transform":"rotate("+N+"deg)"}).removeClass("right up left down").show()}}},drawWdgToPage:function(c,P,K,J,T){if(o.overlapCheck(K,J)){c.hide();return}var b;var S=15;var M,h,d,O;var L=0,a=0,Q=0,R=0;M=K[1]+P[1]+P[3]/2-5;h=K[0]+P[0]+P[2]/2-5;d=(J[1]+J[3]/2);O=(J[0]+J[2]/2);var j=O-h;var I=d-M;var f=I/j;if(Math.abs(f)>J[3]/J[2]){if(d>M){Q=j-J[3]/(2*f)}else{Q=j+J[3]/(2*f)}R=Q*f}else{if(O>h){Q=j-J[2]/2}else{Q=j+J[2]/2}R=f*Q}L=(h+L)*T;a=(M+a)*T;Q=(h+Q)*T;R=(M+R)*T;var i=(Q-L);var H=(R-a);var N=i<0?(180/Math.PI)*Math.atan(-H/i):(180/Math.PI)*Math.atan(H/i);if(i<0){N=180-N}b=Math.sqrt(i*i+H*H);c.css({top:a,left:L,width:b-S,height:4,"-webkit-transform-origin":"0px 2px","-moz-transform-origin":"0px 2px","-webkit-transform":"rotate("+N+"deg)","-moz-transform":"rotate("+N+"deg)"}).removeClass("right up left down").show()},drawDragged:function(A,h,b,f,C){var i;var F=15;var c,D,d,a;c=Math.floor(b[1]+h[1]+h[3]/2)*C-5;D=Math.floor(b[0]+h[0]+h[2]/2)*C-5;d=Math.floor(f[1]+document.getElementById("viewport").scrollTop+f[3]/2)-5;a=Math.floor(f[0]+document.getElementById("viewport").scrollLeft+f[2]/2)-5;var B=(a-D);var E=(d-c);var j=B<0?(180/Math.PI)*Math.atan(-E/B):(180/Math.PI)*Math.atan(E/B);if(B<0){j=180-j}i=Math.sqrt(B*B+E*E);A.css({top:c,left:D,width:i-F,height:4,"-webkit-transform-origin":"0px 2px","-moz-transform-origin":"0px 2px","-webkit-transform":"rotate("+j+"deg)","-moz-transform":"rotate("+j+"deg)"})},draw:function(i,D,E,H,f){var d=[];var C=[];var c=[];if(!(D&&E)){return}f=fluid.zoom.getCurrentScale();var B=(E.hasClass&&E.hasClass("connectorHelper"))?true:false;if(typeof(D)==="string"){var a=m.get(D,{returnModel:true}),b=a&&a.getPage?a.getPage():null,h=m.get(E,{returnModel:true});if(b&&b.id===E){i.remove();return}d=a.getBox();C=b.getBox();if(!d||!C){return}if(h&&h.getBox){c=h.getBox()}else{if(B){c=[parseInt(E.css("left")),parseInt(E.css("top")),parseInt(E.css("width")),parseInt(E.css("height"))]}else{var j=$(D).closest(".screen");var F=$(".page",$(j));c=[parseInt($(E).css("left")),parseInt($(E).css("top")),parseInt(F.css("width")),parseInt(F.css("height"))]}}}else{if(m.get(D.attr("id"),{returnModel:true}).getPage().id===E){i.remove();return}var j=$(D).closest(".screen");var F=$(".page",$(j));var G=$(".page",$(E));d=[parseInt($(D).css("left")),parseInt($(D).css("top")),parseInt($(D).css("width")),parseInt($(D).css("height"))];C=[parseInt(j.css("left")),parseInt(j.css("top")),parseInt(F.css("width")),parseInt(F.css("height"))];c=[parseInt($(E).css("left")),parseInt($(E).css("top")),parseInt(G.css("width")),parseInt(G.css("height"))]}if(H=="ahref"&&B){o.drawDragged(i,d,C,c,f);return}else{if(!fluid.zoom.isEditMode()){o.drawPageToPage(i,C,c,f);return}else{if(fluid.zoom.isEditMode()){o.drawWdgToPage(i,d,C,c,f);return}else{return null}}}if(window.intercom){intercom.updateIfNotSet("everUsedLink",true)}},from:function(a){var b=fluid.main.project.links.where({linkOrigin:a},true);return b?b.id:false},goesTo:function(a){if(!a){return false}var b=m.get(a);return b?b.linkDest:false},comesFrom:function(a){if(!a){return false}var b=m.get(a);return b?b.linkOrigin:false},comesFromPage:function(a){if(!a){return false}var b=m.get(a);if(!b){return false}return m.get(b.linkOrigin,{returnModel:true}).getPage().id},add:function(a,v,c,j,d,h){var i=d!=undefined?d:fluid.main.project.get("defaultTransition");var f=h!=undefined?h:fluid.main.project.get("defaultGesture");$(".page","#"+v).addClass("linkDropSuccess");setTimeout(function(){$(".page","#"+v).removeClass("linkDropSuccess")},500);var b=j||l.guid("l");fluid.main.fire("beforelinkadded",b,m.get(a,{returnModel:true}).getPage().id);fluid.main.project.links.add({linkOrigin:a,linkDest:v,linkCanvId:b,linkType:c,transType:i,triggerType:f});fluid.main.project.set({links:fluid.main.project.links.toJSON()});var u=o.template(b,c,i);u.find(".linkToggle").stop(true,true).fadeTo(300,1,o.showLinkMenuIntro);return u},load:function(c,d){var a;if(d){var b="";for(var f=0;f<c.linkOrigin.length;f++){if(c.linkDest[f]===m.get(c.linkOrigin[f],{returnModel:true}).getPage().id){continue}b+='<div id="'+c.linkCanvId[f]+'" class="link link-new"></div>'}document.getElementById("canvasLinks").innerHTML=b}else{for(var f=0;f<c.linkOrigin.length;f++){a=m.get(c.linkOrigin[f],{returnModel:true});if(a&&c.linkDest[f]===a.getPage().id){continue}o.template(c.linkCanvId[f],c.linkType[f],c.transType[f])}}},del:function(a){if(typeof a==="object"){a=$(".openLinkMenu").closest(".link").attr("id")}if(!a){return false}var b=fluid.main.project.links.get(a);$("#"+b.id).fadeOut(450,function(){$("#"+b.id).remove()});fluid.main.project.links.remove(b.id);o.closeMenu();if(fluid.zoom.getCtx==="project"){$("#canvas").click()}},remove:function(a){var b=fluid.main.project.links.toJSON();$(a).each(function(){var d=$(this).attr("id");function f(s){s.remove()}for(var j in b.linkOrigin){var c=m.get(b.linkOrigin[j],{returnModel:true});if(!c){continue}var t=c.getPage().id;if(b.linkOrigin[j]==d||t==d||b.linkDest[j]==d){var h=b.linkCanvId[j];var i=$("#"+b.linkCanvId[j]);i.fadeOut(450,f(i));fluid.main.project.links.remove(h);o.remove(a);break}}})},spliceOut:function(b,a){b.linkOrigin.splice(a,1);b.linkDest.splice(a,1);b.linkCanvId.splice(a,1);b.linkType.splice(a,1);b.transType.splice(a,1);b.triggerType.splice(a,1);fluid.main.project.save()},getCanvasHeight:function(){var a=18;return a/o.getCanvasScale()},getHeadHeight:function(){var a=14;return a/o.getCanvasScale()},getPadding:function(){var a=7;return a/o.getCanvasScale()},getCanvasScale:function(){return fullCanvas.currentScale},removeHighlightedPage:function(a){$(".scaled-screen").removeClass("pageLinkableCandidate")},hideLinkMenuIntro:function(){$(this).removeClass("linkToggleIntro")},showLinkMenuIntro:function(){$(this).addClass("linkToggleIntro")},serialize:function(a){return JSON.stringify(fluid.main.project.links.toJSON())},deserialize:function(a){fluid.main.project.links.deserialize(a);o.load(fluid.main.project.links.toJSON());o.drawAll("all")}};fluid.main.on("closeallpopups",o.hoverOut);fluid.main.on("afterpageorientationchange",function(a,b){o.update(b)});fluid.main.on("pageaddedvialinkdrop",function(c,d,f,a){var b=o.add(d,f,a);o.draw(b,d,f,a)});fluid.main.on("pagedragged pagemoved pageresized widgetmoved",function(a,b){o.update(b)});fluid.main.on("afterpagedragged",function(){o.showahrefs()});fluid.main.on("beforepagedeleted",function(c,a,b){o.remove(b)});p.exports=o},{"./class-page":18,"./class-storage":33,"./functions":64,"./utils":69}],17:[function(h,k,i){var l=h("./functions");var j={config:{displayDuration:4500,alertDisplayDuration:9000,alertTypes:["alert","testAlert"],alertResumeThreshold:1000,messageExpiration:2000,pageSize:3,expandMessageDelay:30,fadeInDuration:300,fadeOutDuration:150,openDuration:300,closeDuration:150,moveDuration:300,summaryOrientation:"horizontal",summaryShowDuration:1000,summaryFadeInDuration:150},messages:[],alerts:[],summaries:{total:{count:0}},expandedType:null,expandedPage:0,currentMessage:null,currentPage:0,messageTimeout:null,summaryTimeout:null,interrupted:false,init:function(){$("#tmplNotifications").tmpl({}).appendTo("body");var a=$("#notifications > .summaries");a.mouseover(function(){j._stopSummaries()}).mouseout(function(){if(!j.expandedType){j._hideSummariesDelayed()}})},add:function(d,c,b,f){if($.isPlainObject(b)){f=b;b=undefined}else{f|={}}var a={type:d,message:c,scope:f.scope,detailedInfo:f.detailedInfo?f.detailedInfo:null,permanent:Boolean(f.permanent),stopBuggingCallBack:f.stopBuggingCallBack,noCloseButton:f.noCloseButton};if(a.stopBuggingCallBack!=undefined){j.removeAll(d,a.scope)}if($.inArray(d,this.config.alertTypes)>-1){this.alerts.push(a);this._drawAlerts()}else{this._stopSummaries();this.messages.push($.extend(a,{info:b||f.info}));if(this.summaries.hasOwnProperty(d)){this.summaries[d].count++}else{this.summaries[d]={count:1}}this._updateTotal();this._drawMessages();this._drawSummaries()}},remove:function(a){if(!a.removed){if(this.currentMessage&&this.currentMessage===a){this._stopMessages()}this._stopMessageExpiration(a);var c=$.inArray(a.type,j.config.alertTypes)>-1;if(c){this.alerts.splice($.inArray(a,this.alerts),1)}else{this.messages.splice($.inArray(a,this.messages),1);this.summaries[a.type].count--}this._updateTotal();a.removed=true;if(a.element.is(":visible")){a.element.fadeOut(this.config.fadeOutDuration,function(){a.element.remove();if(c){if(j.alerts.length==0){j._continueInterrupted()}}else{if(!j.expandedType){j._drawNextCollapsed()}}});if(this.alerts.length>0){j._drawAlerts()}}else{a.element.remove()}if(!c){if(this.expandedType&&this.alerts.length==0){var b=this._pageOfType(this.expandedType,this.currentPage);$(b).map(function(){return this.element}).not(":visible").fadeIn(this.config.fadeInDuration);this._drawMessages()}this._drawSummaries();if(this.expandedType&&this.summaries[this.expandedType].count==0){this.expandedType=null;this._hideSummariesDelayed()}}}},removeAll:function(b,c){if(c&&!$.isArray(c)){c=[c]}var f;if(b){f=[$.inArray(b,this.config.alertTypes)>-1?this.alerts:this.messages]}else{f=[this.messages,this.alerts]}for(var d=0;d<f.length;d++){var a=f[d];for(var o=a.length-1;o>=0;o--){var p=a[o];if(!c||$.inArray(p.scope,c)>-1){this.remove(p)}}}},expand:function(a){if(this.alerts.length==0){this._stopMessages();this._stopSummaries();if(this.expandedType){this.collapse(function(){j.expand(a)})}else{this.expandedType=a;this.currentPage=0;if(this.currentMessage){function b(){j.currentMessage=null;window.setTimeout(function(){j._showMessages(a)},10)}if(this.currentMessage.element.data("stopped")){this.currentMessage.element.queue(b)}else{this.currentMessage.element.fadeOut(this.config.fadeOutDuration,b)}}else{this._showMessages(a)}}}},_showMessages:function(c,b,d,n){if(!b){this._drawPager();var f=this._pageCount();n=f>1?-1*$("#notifications .pager").outerHeight(true):0;if(this.currentPage>=f){this.currentPage=f-1}b=this._pageOfType(c,this.currentPage);d=0}var a=b[d];this._drawMessage(a,n);n-=a.element.outerHeight();this.messageTimeout=new Timeout(this.config.expandMessageDelay,function(){if(d<b.length-1){j._showMessages(c,b,d+1,n)}})},_pageOfType:function(f,t){var r=[];var q=t*this.config.pageSize;var c=q+this.config.pageSize-1;if(!f||f=="total"){var d=this.messages.length-c-1;r=this.messages.slice(Math.max(d,0),d+this.config.pageSize)}else{var b=0;for(var a=this.messages.length-1;a>=0;a--){var s=this.messages[a];if(s.type==f){if(b>=q){r.unshift(s)}if(b==c){break}b++}}}return r},collapse:function(a){this._stopMessages();this.expandedType=null;this._hideMessages(a);this._hideSummariesDelayed()},_hideMessages:function(a,b,c){if(c===undefined&&typeof b=="boolean"){c=b;b=undefined}if(!b){b=this._prevVisible()}var f=$(b.element);var d=j._prevVisible(b);if(!d&&!c){f=f.add("#notifications .pager")}$.when(f.fadeOut(this.config.fadeOutDuration)).then(function(){if(b.expanded){j._toggleInfo(b)}if(!d&&a){b.element.queue(function(){b.element.dequeue();a.call(j)})}});if(d){this.messageTimeout=new Timeout(this.config.expandMessageDelay,function(){j._hideMessages(a,d,c)})}},_prevVisible:function(c){var b;var d=c?$.inArray(c,this.messages):this.messages.length;for(var f=d-1;f>=0;f--){var a=this.messages[f];if(a.element&&a.element.is(":visible")){b=a;break}}return b},_drawMessages:function(){if(this.alerts.length==0){if(this.expandedType){this._drawExpanded()}else{this._drawCollapsed()}}},_drawExpanded:function(t,c){var f;if(c){f={idx:0,next:function(){return this.idx<j.alerts.length?j.alerts[this.idx++]:null}}}else{f={page:this._pageOfType(this.expandedType,this.currentPage),idx:0,next:function(){return this.idx<this.page.length?this.page[this.idx++]:null}}}var a=0;var b=t||0;this._drawPager();if(this._pageCount()>1){b-=$("#notifications .pager").outerHeight(true)}var s,d;while((a<this.config.pageSize)&&(s=f.next())){if(!d){d=s}if(!s.removed){if(s.shown){var q=b-s.element.outerHeight();var r=s.element.is(":visible");if(q!=s.element.position().top){if(r){s.element.animate({top:q},this.config.moveDuration)}else{s.element.css({top:q}).fadeIn(this.config.fadeInDuration)}}else{if(!r){s.element.fadeIn(this.config.fadeInDuration)}}b=q}else{this._drawMessage(s,b);if(c&&!s.permanent){s.timeout=new l.Timeout(this.config.alertDisplayDuration,(function(m){return function(){j.remove(m)}})(s))}b-=s.element.outerHeight()}}a++}if(!c){s=d;while(s=this._prevVisible(s)){s.element.fadeOut(this.config.fadeOutDuration)}}},_drawCollapsed:function(){if(!this.currentMessage&&(!this.messageTimeout||this.messageTimeout.complete())){for(var b=0,c=this.messages.length;b<c;b++){var a=this.messages[b];if(!a.removed&&!a.shown){this.currentMessage=a;break}}if(this.currentMessage){this._drawMessage(this.currentMessage,0);this.messageTimeout=new Timeout(this.config.displayDuration,function(){j._drawNextCollapsed()})}else{this._hideSummariesDelayed()}}},_drawNextCollapsed:function(){if(this.currentMessage&&this.currentMessage.element&&!this.interrupted){if(this.currentMessage.element.is(":visible")){this.currentMessage.element.fadeOut(this.config.fadeOutDuration,function(){var a=j.currentMessage;j.currentMessage=null;if(!a||!a.element||!a.element.data("stopped")){j._drawCollapsed()}})}else{j.currentMessage=null;j._drawCollapsed()}}},_drawAlerts:function(){var b=0;var a=this._expandedMessage();if(a){b=-1*a.element.outerHeight();if(a.element.position().top!=b){a.element.animate({top:b+"px"},this.config.moveDuration)}}this._interrupt(function(){j._drawExpanded(b,true)})},_drawMessage:function(a,c){var b=$("#notifications .messages ul");if(!a.element){a.element=$("#tmplNotification").tmpl({type:a.type,text:typeof a.message=="string"?a.message:$(a.message).html(),info:typeof a.info=="string"?a.info:$(a.info).html(),stopBugging:false,noCloseButton:a.noCloseButton}).addClass("collapsed").click((function(d){if($.inArray(d.type,j.config.alertTypes)==-1){return function(f){j._toggleInfo(d)}}else{return function(){}}})(a)).prependTo(b);a.element.find(".close").click((function(d){return function(f){j.remove(d)}})(a));a.element.find("input[type=submit], input[type=button], button").click((function(d){return function(f){fluid.main.fire("upgradepromptclicked",d);j.remove(d)}})(a))}else{a.element.show()}fluid.main.fire("promptdisplayed",a);a.element.stop(true,true).dequeue().css({width:a.element.closest("div").width()-a.element.outerWidth()+a.element.width()}).css({top:c-a.element.outerHeight()}).hide().fadeIn(this.config.fadeInDuration);a.shown=true},_pageCount:function(){return this.expandedType?Math.ceil(this.summaries[this.expandedType].count/this.config.pageSize):1},_drawPager:function(){var c=$("#notifications .pager");var d=c.find(".pager-page");var b=this._pageCount();if(d.size()!=b){c.empty();for(var f=0;f<b;f++){var a=$("#tmplNotificationPage").tmpl({}).click((function(n){return function(){j._toPage(n)}})(f)).appendTo(c);if(f==this.currentPage){a.addClass("active")}}}else{d.filter(".active").removeClass("active");d.eq(this.currentPage).addClass("active")}if(b>1){c.fadeIn(this.config.fadeInDuration)}else{c.fadeOut(this.config.fadeOutDuration)}},_toPage:function(a){this._hideMessages(function(){this.currentPage=a;this._showMessages(this.expandedType)},true)},_updateTotal:function(){this.summaries.total.count=0;for(var a in this.summaries){if(a!="total"){this.summaries.total.count+=this.summaries[a].count}}},_drawSummaries:function(){var a=$("#notifications .summaries ul");var r=0;var q=this.config.summaryOrientation!="vertical";for(var b in this.summaries){var c=this.summaries[b];if(c.element){if(c.count>0){c.element.children(".summary").text(c.count.toString());var p=c.element.is(":visible");var f=c.element.position();if(r!=(q?f.left:f.top)){var d=q?{left:r}:{top:r};if(!p){c.element.css({opacity:0.001}).show();d.opacity=1}c.element.animate(d,this.config.moveDuration)}else{if(!p){c.element.fadeIn(this.config.fadeInDuration)}}if(b=="total"&&c.element.hasClass("totalHidden")){c.element.switchClass("totalHidden","",this.config.fadeInDuration)}}else{c.element.fadeOut(this.config.fadeOutDuration)}}else{if(c.count>0){c.element=$("#tmplNotificationSummary").tmpl({type:b,text:c.count.toString()}).css(q?{left:r}:{top:r}).click((function(m,n){return function(o){if(n=="total"&&m.element.hasClass("totalHidden")){j._showSummaries()}else{if(j.expandedType==n){j.collapse()}else{j.expand(n)}}}})(c,b)).hide().appendTo(a).fadeIn(this.config.fadeInDuration)}}if(c.count>0&&c.element){r+=q?c.element.outerWidth():c.element.outerHeight()}}},_toggleInfo:function(p){this._stopMessages();var c=p.element.find(".message .content");var b;if(this.expandedType&&!this.interrupted){var a=this._pageOfType(this.expandedType,this.currentPage);b=$(a).map(function(){return this.element[0]}).not(p.element)}if(p.expanded){if(p.element.is(":visible")){if(b){b.fadeIn(this.config.fadeInDuration)}var f=p.element.outerHeight()-c.height();c.animate({height:p.height},{duration:this.config.closeDuration,complete:function(){j._hideInfo(p);if(!j.expandedType){j._drawNextCollapsed()}}});p.element.animate({top:this.alerts.length>0?-1*(p.height+f):p.top},this.config.closeDuration)}else{j._hideInfo(p)}p.expanded=false;j._startMessageExpiration(p)}else{if(b){b.fadeOut(this.config.fadeOutDuration)}p.top=p.element.position().top;p.height=c.height();p.element.removeClass("collapsed").addClass("expanded");c.find(".info").show();var o=-1*p.element.outerHeight();if(this._pageCount()>0){o-=$("#notifications .pager").outerHeight(true)}if(o<p.top){p.element.animate({top:o},this.config.openDuration)}var d=c.height();c.css({height:p.height+"px"}).animate({height:d},this.config.openDuration);p.expanded=true}if(this.alerts.length>0){p.element.fadeOut(this.config.fadeOutDuration);this._drawAlerts()}},_interrupt:function(a){var c=this.interrupted;if(!c){this.interrupted=true;if(this.messageTimeout&&!this.messageTimeout.complete()&&!this.messageTimeout.paused()){this.messageTimeout.pause();for(var d=0,f=this.messages.length;d<f;d++){var b=this.messages[d];if(b.expirationTimeout){b.expirationTimeout.pause()}}}if(this.expandedType){c=Boolean(this._expandedMessage());if(!c){this._hideMessages(function(){a.call()})}}else{if(this.currentMessage&&!this.currentMessage.expanded&&!this.currentMessage.removed){this.currentMessage.element.fadeOut(this.config.fadeOutDuration,function(){a.call()})}else{c=true}}}if(c){a.call()}},_continueInterrupted:function(){var b=true;this.interrupted=false;if(this.messageTimeout&&!this.messageTimeout.complete()&&this.messageTimeout.paused()){if(this.messageTimeout.timeRemaining()>=this.config.alertResumeThreshold){this.messageTimeout.resume()}else{this.messageTimeout.exec();b=false}}for(var c=0,d=this.messages.length;c<d;c++){var a=this.messages[c];if(a.expirationTimeout&&a.expirationTimeout.paused()){a.expirationTimeout.resume()}}if(this.expandedType){if(!this._expandedMessage()){this._showMessages(this.expandedType)}}else{if(this.currentMessage&&b){if(this.currentMessage.removed){this._drawNextCollapsed()}else{this.currentMessage.element.fadeIn(this.config.fadeInDuration)}}}},_startMessageExpiration:function(a){this._stopMessageExpiration(a);a.expirationTimeout=new Timeout(this.config.messageExpiration,function(){a.element.addClass("expired")})},_stopMessageExpiration:function(a){if(a.expirationTimeout){a.expirationTimeout.stop();a.expirationTimeout=null}},_hideInfo:function(a){var b=a.element.find(".message .content");b.find(".info").hide();b.css({height:""});a.element.removeClass("expanded").addClass("collapsed")},_expandedMessage:function(){var b;for(var c=0,d=this.messages.length;c<d;c++){var a=this.messages[c];if(a.expanded&&!a.removed){b=a;break}}return b},_stopMessages:function(){if(this.messageTimeout&&!this.messageTimeout.complete()){this.messageTimeout.stop()}else{if(this.currentMessage&&this.currentMessage.element&&this.currentMessage.element.is(":animated")){this.currentMessage.element.data("stopped",true)}}},_showSummaries:function(){this._stopSummaries();for(var a in this.summaries){var b=this.summaries[a];if(b.element){if(a=="total"){b.element.switchClass("totalHidden","",this.config.summaryFadeInDuration)}else{if(b.count>0){b.element.fadeIn(this.config.summaryFadeInDuration)}}}}},_hideSummaries:function(){this._stopSummaries();var a=$("#notifications > .summaries");a.find("li.total").switchClass("visible","totalHidden",this.config.fadeOutDuration);a.find("li").filter(":not(.total)").fadeOut(this.config.fadeOutDuration)},_hideSummariesDelayed:function(){this._stopSummaries();this.summaryTimeout=new Timeout(this.config.summaryShowDuration,function(){j._hideSummaries();j.summaryTimeout=null})},_stopSummaries:function(){if(this.summaryTimeout){this.summaryTimeout.stop();this.summaryTimeout=null}}};fluid.main.on("editor.afterLogout connectionProblemOff",function(){j.removeAll()});fluid.main.on("dbStorage.failed",function(){});fluid.main.on("connectionProblem",function(c,a){j.removeAll();var b=a.nextCheckIn;j.add("alert",'Connection lost. <span style="display: none;" id="reconnectingText">Reconnecting...</span> <span id="countdownText">Attempting to reconnect in <span id="countdown">'+b+'</span> seconds<span class="inlineLink checkServerStatus">Try again</span></span>',{permanent:true,noCloseButton:true});$("#offline-lock-overlay").show();fluid.main.fire("updateCountdown",b);$(".inlineLink.checkServerStatus").on("click",_.debounce(function(){if(j.countdown){clearTimeout(j.countdown);j.countdown=null}$("#countdownText").hide();$("#reconnectingText").show();fluid.main.fire("serverStatus:forceCheck")},300,true));$(".closeButton").hide()});fluid.main.on("connectionProblemOff",function(){$(".inlineLink.checkServerStatus").off("click");j.removeAll();$("#offline-lock-overlay").hide();if(j.countdown){clearTimeout(j.countdown);j.countdown=null}$(".inlineLink.checkServerStatus").off("click")});fluid.main.on("updateCountdown",function(b,a){$("#countdown").text(a);if(j.countdown){clearTimeout(j.countdown)}j.countdown=setTimeout(function(){a=a-1;if(a===0){$("#countdownText").hide();$("#reconnectingText").show();fluid.main.fire("serverStatus:forceCheck")}else{fluid.main.fire("updateCountdown",a)}},1000)});fluid.main.on("startCountdown",function(){$("#countdownText").show();$("#reconnectingText").hide()});k.exports=j},{"./functions":64}],18:[function(t,u,s){var q=t("./class-storage");var r=t("./class-widget");var n=t("./class-group");var m=t("./functions");var o=t("./utils");var v=t("./class-grid");var p={frame:null,frameVisible:false,menu:null,displayingMenu:false,orient:function(){var a=$(".screen.active");var b=a.attr("id");var c=$(this).val();p.update({orientation:c},b);a.each(p.resizeAfterOrient);p.updateOptionsMenu();v.showGrid()},resizeAfterOrient:function(){var b=$(this);var a=b.attr("id");var c=[p.get(a,"height"),p.get(a,"width")];b.css({width:c[0],height:c[1]});b.find(".page").css({width:c[0],height:c[1]});b.find(".page").children(".widgetHolder").css({width:c[0],height:c[1]});p.update({width:c[0],height:c[1]},a);if(fluid.zoom.isEditMode()&&b.hasClass("active")){if($("#"+a).hasClass("active")){p.drawDetailed(a,"init")}}else{p.draw(a,"init")}fluid.main.fire("afterpageorientationchange",b)},updateOptionsMenu:function(){var j=$("#canvasPages > .screen.active").first().attr("id");if(typeof j==="undefined"){return}var F=fluid.main.project.get("pageWH");var f=fluid.main.project.get("homepage");var h=p.get(j,"orientation");var H=fluid.main.project.get("orientation");var G=$("#pageMenu");var E=f==j?"This is the start page":"Make this the start page";var d=f==j?"Start Page":"Make Start Page";var I=f==j?"homePageOn":"homePageOff";var i=p.get(j,"name");i=i==undefined?"":i;$(".homePageStatusText").text(E);$(".homePageStatusText").attr("alt",d).attr("title",d);$(".iconPageSettingsIndicator").not(".gridOff, .gridOn, .snapToWidgetsOff, .snapToWidgetsOn").removeClass("homePageOn homePageOff").addClass(I).attr("alt",d).attr("title",d);G.find(".pageSize.rangeWidget.width>input").val(p.get(j,"width"));G.find(".pageSize.rangeWidget.height>input").val(p.get(j,"height"));G.find(".orientationSelector2").find("[value='"+H+"']").attr("selected","selected");var k=G.find(".buttonSwitchContainer");k.children().removeClass("activeOption");k.find("[data-for='"+h+"']").addClass("activeOption");$(".inputPageTitle").val(i);var l=fluid.main.project.get("deviceModel");var b=$("#DeviceSizeTmpl");var J=$("#deviceModelTemplate");if(l){$("option[data-type='"+l+"']",b).attr("selected","selected");$("option[data-type='"+l+"']",J).attr("selected","selected")}else{var a=fluid.main.project.get("pageWH");var c=false;$.each(b.children(),function(B,w){if($(w).val()!="Custom"){var A=$(w).val().split(",");if(((a[0]==A[0])&&(a[1]==A[1]))||((a[0]==A[1])&&(a[1]==A[0]))){$(w).attr("selected","selected");var z=$(w).attr("data-type");$("option[data-type='"+z+"']",J).attr("selected","selected");c=true;return false}}});if(!c){$("option[data-type='Custom']",b).attr("selected","selected");$("option[data-type='Custom']",J).attr("selected","selected")}}if($("option:selected",b).val()=="Custom"){$(".screenSize").parents("tr").children().show()}else{$(".screenSize").parents("tr").children().hide()}m.updateTLWH();var i=p.get(j,"name");fluid.main.fire("afteroptionsmenuupdated")},addViaLinkDrop:function(c,i,j,f,k,a){var d=$("#viewport");var h=p.add({x:(d.get(0).scrollLeft+d.width()*0.75),y:(d.get(0).scrollTop+d.height()*0.5)},f,k);if(!h){return}var b="ahref";var l=fluid.zoom.getselectedBeforeZoomOut();fluid.main.fire("pageaddedvialinkdrop",l,h,b);$(canvas).fadeIn(600);return h},click:function(b){n.deselect();if(!fluid.zoom.isZoomingNow()&&b.target.tagName!=="TEXTAREA"){var c=$(this).closest(".screen").attr("id");if(!c){c=$(this).closest(".scaled-screen").attr("id").split("-")[1]}var a=b.originalEvent&&$(b.originalEvent.target);if(a&&(a.hasClass("track")||a.hasClass("thumb"))){return}if(fluid.zoom.getCtx()==="project"||c!==$(".screen.active").attr("id")){fluid.zoom.zoomToPage({pageId:c,clientX:b.clientX,clientY:b.clientY,shiftKey:b.shiftKey||b.ctrlKey})}fluid.controllers.bin.show();p.hideOptionsMenu()}},makeHome:function(c,a){if(typeof a==="undefined"){a=$(this).closest(".screen")}if($(a).hasClass("template")){return}var b=$(a).attr("id");fluid.main.project.set({homepage:b});p.updateOptionsMenu();$(".scaled-screen").removeClass("homePage");$(a).addClass("homePage")},removeHome:function(a){fluid.main.project.set({homepage:a||null});if(a){$("#scaled-"+a+".scaled-screen").addClass("homePage")}p.updateOptionsMenu()},add:function(b,f,c){if(fluid.main.project.isReadOnly()){fluid.main.fire("showAlertEditInactive");return false}if(fluid.zoom.isEditMode()){return}var a=$("#cmLink").data("lastClicked")||0;if((new Date()).getTime()<a+600){return}var d=p.create(b.y/fluid.zoom.getCurrentScale(),b.x/fluid.zoom.getCurrentScale());return d},correctPageCoords:function(b,c){var a=fluid.zoom.getCurrentScale();var f=fluid.main.project.get("canvasWidth");var d=fluid.main.project.get("canvasHeight");var h=fluid.main.project.get("pageWH");if(c+h[1]>d){c=d-h[1]}if(b+h[0]*a>f){b=f-h[0]}return{left:b,top:c}},create:function(b,a,l,c){var k=fluid.main.project.get("pageWH");var d=fluid.main.project.get("orientation");if(c){if(p.lastCameraY){if(p.lastCameraY===viewport.scrollTop){if(d==="Portrait"){a=p.lastPageX+k[0]+20}else{a=p.lastPageX+k[1]+20}p.lastPageX=a}else{p.lastCameraY=viewport.scrollTop;p.lastPageX=a}}else{p.lastCameraY=viewport.scrollTop;p.lastPageX=a}}var i=p.correctPageCoords(a,b);if(!fluid.main.fire("page.beforeAdd")){return}var h={x:i.left,y:i.top,width:k[0],height:k[1],orientation:d,widgets:[]};var f=o.guid("x");p.addPageToProject(f);q.set(f,h);p.template(h,f,l);$("#zoomedOutPages").append('<div id="scaled-'+f+'" class="scaled-screen"></div>');var j=fluid.zoom.getCurrentScale();$("#scaled-"+f).css({top:q.get(f).y*j,left:q.get(f).x*j,width:q.get(f).width*j,height:q.get(f).height*j});if(!l){$("#scaled-"+f).bounce()}fluid.main.fire("pageadded",f);return f},addPageToProject:function(b){var a=fluid.main.project.get("pages")||[];a.push(b);fluid.main.project.set({pages:a})},hideOptionsMenu:function(c){p.hideNotes();p.pageMenuClick();$("#pageMenus").children().addClass("hide");var d=$(".zoomModeSwitch .buttonSwitch.activeOption").attr("data-for");var b=$(".screen.active");if(d!==undefined&&b.length&&d!==fluid.main.account.get("zoomMode")){fluid.main.account.set({zoomMode:d});fluid.zoom.zoomToPageDebounced({pageId:b.attr("id"),forceZoom:true})}var a=parseInt($("#zoomToInput").val(),10);if(a&&b.length&&a!==fluid.main.account.get("zoomTo")){fluid.main.account.set({zoomTo:a});fluid.zoom.zoomToPageDebounced({pageId:b.attr("id"),forceZoom:true})}},toggleOptionsMenu:function(c){var a=document.getElementById("pageMenu"),b;if(!a){return}b=!a.classList.contains("hide");p.pageMenuClick();p.updateOptionsMenu();p.toggleMenus();if(!b){a.classList.remove("hide")}},toggleSettingsMenu:function(c){var a=document.getElementById("deviceSettingsMenu"),b=!a.classList.contains("hide");p.pageMenuClick();p.updateSettingsMenu();p.toggleMenus();if(!b){a.classList.remove("hide")}},hideSettingsMenu:function(){var a=document.getElementById("deviceSettingsMenu"),b;b=!a?false:!a.classList.contains("hide");if(b){a.classList.remove("hide")}},updateSettingsMenu:function(){var b=o.getActivePageId();var i=fluid.main.project.get("pageWH");var h=p.get(b,"orientation");var d=fluid.main.project.get("orientation");$("#currentDeviceSize").text(i[0]+"X"+i[1]);var a=fluid.main.project.get("deviceModel");if($("#deviceModelTemplate").attr("data-type")!=a){var f=$("#deviceModelTemplate").attr("data-type",a).val();$("#deviceModelTemplate").val(f)}var c=$("#deviceSettingsMenu").find(".buttonSwitchContainer");c.children().removeClass("activeOption");c.find("[data-for='"+d+"']").addClass("activeOption")},toggleSnapSettings:function(){var a=document.getElementById("snapSettingsPanel"),b;b=!a.classList.contains("hide");if(b){p.hideOptionsMenu();return}p.showDefaultSnapOptions()},showDefaultSnapOptions:function(){p.toggleMenus();document.getElementById("snapSettingsPanel").classList.remove("hide");var d=fluid.main.account.get("gridStatus");var f=fluid.main.account.get("snapToWidget");(d=="on")?$("#gridSwitchOn").show():$("#gridSwitchOff").show();(f=="on")?$("#snapSwitchOn").show():$("#snapSwitchOff").show();var c=fluid.main.account.get("zoomMode");var a=fluid.main.account.get("zoomScroll");if(!c||c==="Smart"){$(".zoomModeSwitch .buttonSwitch[data-for=Smart]").addClass("activeOption")}else{$(".zoomModeSwitch .buttonSwitch[data-for=Fixed]").addClass("activeOption")}var b=parseInt(fluid.main.account.get("zoomTo"),10);if(!b){b="100"}$("#zoomToInput").val(b+"%");if(!a||a==="ScrollOn"){$(".zoomScrollSwitch .buttonSwitch[data-for=ScrollOn]").addClass("activeOption");$(".zoomScrollSwitch .buttonSwitch[data-for=ScrollOff]").removeClass("activeOption")}else{$(".zoomScrollSwitch .buttonSwitch[data-for=ScrollOff]").addClass("activeOption");$(".zoomScrollSwitch .buttonSwitch[data-for=ScrollOn]").removeClass("activeOption")}},resize:function(b,d,i){var k=fluid.main.project.get("pageWH");var j=fluid.main.project.get("orientation");var a=p.get(b,"orientation");if(a!=j){k=[k[1],k[0]]}if((d<k[0])||(isNaN(d))){d=k[0]}else{if(d>k[0]){$(".pageSize").filter(".width").val(d)}}if((i<k[1])||(isNaN(i))){i=k[1]}else{if(i<k[1]){$(".pageSize").filter(".height").val(i)}}var f=$("#"+b+" .page");p.update({width:d,height:i},b);f.parent(".screen").css({width:d,height:i});f.css({width:d,height:i});f.children(".widgetHolder").css({width:d,height:i});var h=$("#"+b+" .backgroundWidget");var c={top:0,left:0,width:d,height:i};p.autoWidth(f.parent(".screen"));v.showGrid();fluid.main.fire("pageresized",f);return false},get:function(a,b){if(typeof a!="string"){return""}var c=q.get(a);if(typeof c==="undefined"||!c){return""}return c[b]},updateDragPos:function(a){var k=$(a);var i=fluid.zoom.getCurrentScale();var c=k.attr("id").indexOf("scaled-")!==-1?true:false;var d=c?k.attr("id").split("-")[1]:k.attr("id");if(!k.data().draggable){return}var j=c?k.data().draggable.position.top:Math.round(k.data().draggable.position.top/i);var f=c?k.data().draggable.position.left:Math.round(k.data().draggable.position.left/i);k.data().draggable.position.top=j;k.data().draggable.position.left=f;var h=fluid.main.project.get(d,{returnModel:true});var b=h.getBox();b[0]=f/fluid.zoom.getCurrentScale();b[1]=j/fluid.zoom.getCurrentScale();h.set({box:b},{silent:true});fluid.main.fire("pagedragged",k);if(m.intersectTrash(k)==true){$("#trash").addClass("droppableStyle")}else{$("#trash").removeClass("droppableStyle")}},dragStart:function(a){if(fluid.main.project.isReadOnly()||fluid.zoom.isZoomingNow()){return false}if(fluid.zoom.isEditMode()){$("#canvasLinks").hide()}},drag:function(){p.updateDragPos(this)},dragStop:function(C){var D=$(this);var k=D.position();var a=D.attr("id").indexOf("scaled-")!==-1?true:false;var b=a?D.attr("id").split("-")[1]:D.attr("id");var f=$("#scaled-"+b);var l=q.get(b);var B=fluid.main.project.toJSON();var c=B.canvasWidth-l.width;var h=B.canvasHeight-l.height;var j=fluid.zoom.getCurrentScale();var i=Math.min(Math.max(Math.round(k.left/j),0),c);var d=Math.min(Math.max(Math.round(k.top/j),0),h);fluid.command.create("move",{id:b,x:i,y:d}).dispatchTo("fluid.controllers.page");D.appendTo(D.parent("#canvasPages"));f.appendTo(f.parent("#zoomedOutPages"));fluid.zoom.updatePagesBounding();if(fluid.zoom.getCtx()==="page"){fluid.zoom.zoomToPage(b)}if(k.top<0){D.css({top:0})}else{if(k.top/j>h){D.css({top:(B.canvasHeight-l.height)*j})}}if(k.left<0){D.css({left:0})}else{if(k.left/j>c){D.css({left:(B.canvasWidth-l.width)*j})}}fluid.main.fire("afterpagedragged",b)},selectStart:function(a){if(fluid.main.project.isReadOnly()){a.preventDefault();a.stopPropagation();return false}},selectStop:function(b){var a=document.querySelectorAll("#canvasPages .ui-selected");fluid.main.fire("dragselection",{selected:a});if(fluid.selection.getSelectionModel().models.length){fluid.zoom.onSelectionChangedDebounced(b,null,{sourceEvt:"dragselection"})}},updatePageName:function(){var b=$(this).val(),a=$(this).parents(".screen");if(a.length){p.update({name:b},a.attr("id"))}},template:function(i,b,c){var d=$.extend(true,{},i);d.id=b;var f=p.get(b,"width");var a=p.get(b,"height");d.screenWH=[f,a];var h=$("#tmplPage").tmpl(d).appendTo("#canvasPages");if(d.id===fluid.main.project.get("homepage")){h.addClass("homePage")}},updatePagePreviewButton:function(){var b=$("#pagePreview"),c=fluid.zoom.getCurrentScale(),d=$(".canvasObject.active").attr("id"),a=q.get(d).width*c;pageButtonsWidth=243;if(d&&q.get(d).widgets.length===0){b.parent().hide()}else{b.parent().show()}},updateNotesIcon:function(){var c=document.querySelector(".canvasObject.active"),a=document.getElementById("pageAddNote");if(!c||!a){return}var b=q.get(c.id).notes;if(b&&b[3]){a.classList.add("written")}else{a.classList.remove("written")}},hideNotes:function(){var a=document.getElementById("pageNote");if(!a){return}if(!a.classList.contains("hide")){p.saveNotesInput()}a.classList.add("hide")},showNotes:function(){p.hideOptionsMenu();var a=document.getElementById("pageNote");if(!a){return}p.setNotesTextboxValue();a.classList.remove("hide")},saveNotesInput:function(){var b=$(".canvasObject.active").attr("id"),a=$("#pageNote textarea");p.update({notes:[a.width(),a.height(),"",a.val()]},b);p.updateNotesIcon()},setNotesTextboxValue:function(){var c=document.getElementById("pageNote"),a=document.querySelector(".canvasObject.active").id,b=p.get(a,"notes")||[200,120,"",""];$("textarea",c).css({width:b[0],height:b[1]}).val(b[3])},toggleNotes:function(){var a=document.getElementById("pageNote");if(a.classList.contains("hide")){p.showNotes()}else{p.hideNotes()}},toggleMenus:function(){p.hideOptionsMenu();$("#pageMenus").show()},activate:function(f,h,c,d){var a;if(typeof(f)==="string"){a=f;f=$("#"+f)[0]}else{if($(f).hasClass("scaled-screen")){a=$(f).attr("id").split("-")[1];f=$("#"+a)[0]}}p.deactivate({activatingId:a});function b(){if(fluid.zoom.getCtx()==="project"){return}$("#canvasPages .screen.active").not($(f)).add(d).removeClass("active").each(function(){var k=$(this).attr("id");p.draw(k,"init")});$(f).addClass("active");var j=document.querySelector("#canvasPages .active");if(!fluid.main.project.isReadOnly()&&j){p.attachFrameTo(j)}p.updateOptionsMenu();var i=h==undefined?true:h;p.displayMenu(i);if($(f).find(".page-preview").length){p.drawDetailed($(f).attr("id"),"init")}if(c==="wdgDrag"){r.afterSelectionChange()}n.drawExisting(a);fluid.main.fire("pageactivated",a)}b()},deactivate:function(a){var b=$("#canvasPages .screen.active");b.each(function(){if(!a||!a.activatingId||$(this).attr("id")!==a.activatingId){$(this).removeClass("active");$(this).selectable("destroy").removeData("initSelectable");$(this).draggable("destroy").removeData("initDraggable");var c=$(this).attr("id");var d=fluid.main.project.pages.get(c);if(d.attributes.imgData){p.draw(c,"useCache")}else{p.draw(c,"init")}}});p.detachFrame();r.resetCache()},detachFrame:function(){if(p.frameVisible){p.frame.parentNode.removeChild(p.frame);p.menu.parentNode.removeChild(p.menu);p.frameVisible=p.displayingMenu=false;p.frame.style.display="none"}},attachFrameTo:function(a){p.frame=p.frame||document.getElementById("pageFrame");p.menu=p.menu||document.getElementById("pageMenus");p.frame.style.display="none";a.appendChild(p.menu);a.querySelector(".page").appendChild(p.frame);p.adjustPageFrameScale(a);p.frameVisible=p.displayingMenu=true;p.setNotesTextboxValue();p.updatePagePreviewButton()},adjustPageFrameScale:function(a){if(!p.frame){return}requestAnimationFrame(function(){var h=fluid.zoom.getCurrentScale();var i=51;var d=$(p.frame).closest(".screen").attr("id");if(!d&&a&&a.id){var C=$(a).find(".page");C.append(p.frame);d=a.id}if(!d){return}var B=q.get(d);var k=B.width*h;var j=243;var l=41;var b=50/h;var c=$("#pageExpander");p.updatePagePreviewButton();var f=0;$("#pageSettingsMenu li").each(function(){if($(this).css("display")!=="none"){f++}});j=l*f;$("#pageSettingsMenuContainer").width(j+l);if(k<j){i=i+(j-k)/4;b=((k+2*i-j)/2+1)/h}else{if(B.widgets.length){$("#pageSettingsMenu li").show()}else{$("#pageSettingsMenu li > a:not(#pagePreview)").parent().show()}c.addClass("expanded").add(c.parent("li")).hide()}$(".pageBackground").css({"border-radius":(32/h)+"px"});$(".pageDragHandle").css({height:26/h,"border-bottom-width":1/h+"px","border-radius":(32/h)+"px "+(32/h)+"px 0 0"});p.frame.style.top=((-86)/h)+"px";p.frame.style.bottom=(-50/h)+"px";p.frame.style.left=(-i/h)+"px";p.frame.style.right=(-i/h)+"px";$("#pageSettingsMenuContainer").css({top:(((21+16)/h)+0)+"px",left:b+"px",transform:"scale("+1/h+")","transform-origin":"left top"});$("#pageMenus").css({transform:"scale("+(1/h)+")","transform-origin":"left top",left:(-i/h)+"px",top:(-78/h)+"px"});$("#pageMenus").children().each(function(w){$(this).css({left:(b*h+l*w)})});var D=$("#pageMenu").add("#deviceSettingsMenu").add("#snapSettingsPanel");D.show();$("#"+p.focusedInputId).focus().select();$(p.frame).fadeIn(250)})},onExpanderHovered:function(b){var a=$("#pageExpander");if(b.type==="mouseenter"){a.addClass("visible")}else{if(!a.hasClass("expanded")){a.removeClass("visible")}}},toggleSettingsBtns:function(){var b=$("#pageSettingsMenu li");if(!$(this).hasClass("expanded")){var a=0;var c=$(this).parents(".screen").attr("id");b.each(function(){if($(this).find("#pageExpander").length&&q.get(c).widgets.length===0){$(this).css({left:a}).show()}else{$(this).css({left:a}).show();a=a+40}});$(this).addClass("expanded");p.updatePagePreviewButton()}else{p.hideOptionsMenu();b.each(function(){$(this).css({left:$(this).find("#pageExpander").length?40:0})});$(this).removeClass("expanded");setTimeout(function(){b.not($("#pageExpander").parents("li")).not($("#pageMenuToggle").parents("li")).hide()},300)}},displayMenu:function(f){var c=f==undefined?true:f;var b=true;if((fluid.main.project.isReadOnly()||(fluid.zoom.getCtx()==="project"))){b=false}if(b){p.updateNotesIcon();p.updatePagePreviewButton()}if(c&&b){function d(){if((p.displayingMenu)&&($("#pageSettingsMenuContainer").css("display")=="none")){$("#pageSettingsMenuContainer").fadeIn(300)}p.displayingMenu=false}p.displayingMenu=true;p.displayMenuTimer=setTimeout(d,200)}else{if(b){var a=fluid.selection.getSelectionModel().getRoots().getElements();if((a.length==1)&&($(".ui-selected").hasClass("backgroundWidget"))){p.displayMenu();return}}p.displayingMenu=false;$("#pageSettingsMenuContainer").stop(true,true).hide()}},del:function(b){function a(c,d){$(c).remove();if(fluid.main.project.pages.length===0){fluid.main.fire("pagedeleted",d);fluid.zoom.updatePagesBounding();return}if(fluid.main.project.widgets.length===0){$("#previewView, #preview, #pagePreview, #shareMenu").addClass("hud-hidden");$("#pagePreview").parent().hide()}fluid.main.fire("pagedeleted",d);fluid.zoom.updatePagesBounding()}b.each(function(){var i=$(this);var f=i.attr("id");fluid.main.fire("beforepagedeleted",f,i);var d=i.find("#canvasPages .widgetHolder > .pageWidget");d.each(function(){var j=$(this);r.del(j)});p.deleteFromProject(f);q.remove(f);if(f==fluid.main.project.get("homepage")){var c=fluid.main.project.get("pages");var h=c&&c.length?c[0]:null;p.removeHome(h)}i=i.add("#scaled-"+f);i.fadeOut(450,a(i,f));fluid.main.fire("afterpagedeleted",f,i)})},deleteFromProject:function(b){var c=null;var a=fluid.main.project.get("pages");for(var d=0;d<a.length;d++){if(a[d]==b){c=d;break}}a.splice(c,1);fluid.main.project.set({pages:a});p._deletePageWidgets(b)},_deletePageWidgets:function(b){var c=q.get(b);if(c){for(var d=0,a=c.widgets.length;d<a;d++){q.remove(c.widgets[d])}}},drawRasterised:function(b,c,a,d){p.checkIntegrity(b);var f=p.calculateWdgPositions(b);this.renderer.afterPageRendered=c;if(!f||f.widgets===0){return}this.renderer.renderPage(f,a,d)},draw:function(f,A){if(!f){return}p.checkIntegrity(f);var k=p.calculateWdgPositions(f);if(this.renderer.renderingQueue[k.id]&&this.renderer.renderingQueue[k.id].length){return}this.renderer.afterPageRendered=null;var l=$("#"+f);if(l.length===0){p.template(k,f,A);l=$("#"+f)}else{var h=l.find(".pageWidget");setTimeout(function(){h.remove()},650)}var d=l.find(".widgetHolder");if($("#scaled-"+f).length===0){$("#zoomedOutPages").append('<div id="scaled-'+f+'" class="scaled-screen"></div>');var j=fluid.zoom.getAllPagesParams().newScale;$("#scaled-"+f).css({top:q.get(f).y*j,left:q.get(f).x*j,width:q.get(f).width*j,height:q.get(f).height*j})}var i=q.get(f,{returnModel:true}).get("imgData");if(A==="useCache"&&i){l.find(".page-preview, .pageWidget").remove();var a=new Image();var b=new Image();a.src=i;b.src=i;d.append(a);d.find("img").addClass("page-preview");$("#scaled-"+f).get(0).innerHTML="";$("#scaled-"+f).append(b);return}if(!k){return}else{if(k.widgets.length===0){$("#scaled-"+f).empty();return}}var B=this.renderer.renderPage(k);n.erase();l.find(".page-preview").remove();if(B.length){var c;if(B[0].$shapeRendition){c=B[0].$shapeRendition}else{if(B[0].$textRendition){c=B[0].$textRendition}else{if(B.length&&B[0].segments){c=B[0].segments[0].$shapeRendition}}}if(c){c.addClass("page-preview");d.append(c)}}},calculateWdgPositions:function(b){if(!this.renderer){this.renderer=new fluid.wdgRenderer()}var a=q.get(b);if(a.widgets&&a.widgets.length>0){var c={};for(var d=0;d<a.widgets.length;d++){c[a.widgets[d]]=r.get(a.widgets[d])}}a.widgets=c||[];a.id=b;this.renderer.canvasSize=[a.width,a.height];return a},drawDetailed:function(b,c,f){p.calculateWdgPositions(b);var h=$.extend({},q.get(b));if(!h){return false}var a=$();var i=$("#"+b);if(i.length===0){p.template(h,b,c)}else{a=i.find(".pageWidget")}if(h.widgets.length>0){r.load(b,h.widgets);m.updateTLWH()}var d=$("#"+b).find(".page-preview");setTimeout(function(){d.remove()},200);a.remove();if(f&&f.restoreSelection){$("#"+f.restoreSelection).click()}},updateView:function(a,c){var b=true;if(c&&c.zoomedOutOnly){b=false}if(!b&&fluid.zoom.isEditMode()&&$("#"+a).hasClass("active")){p.drawDetailed(a,"init")}else{if(!fluid.zoom.isEditMode()){p.draw(a,"init")}}},move:function(b,a,c){p.update({x:a,y:c},b);var h=$("#"+b);var f=$("#scaled-"+b);var d=h.position();if(d.left!=a||d.top!=c){h.css({left:a+"px",top:c+"px"});f.css({left:(a*fluid.zoom.getCurrentScale())+"px",top:(c*fluid.zoom.getCurrentScale())+"px"});fluid.main.fire("pagemoved",h)}},update:function(d,b){var a=q.get(b,{getAll:true});if(!a){return}for(var c in d){a[c]=d[c]}q.set(b,a)},orderWidgets:function(b){var d=$(b).parents("li.canvasObject").attr("id");var c=$(b).find(".pageWidget");var a=[];c.each(function(){a.push($(this).attr("id"))});p.update({widgets:a},d)},removeWidget:function(a,b){var c=q.get(a);if(!c){return}var d=$.inArray(b,c.widgets);c.widgets.splice(d,1);q.set(a,c)},enableSelectableWidgetHolder:function(a){if($(".selectArea").data("selectable")){var b=$(".selectArea").selectable("option","cancel").split(/\s*,\s*/);var c=b.indexOf(".widgetHolder");if(a||a===undefined){if(c>-1){b.splice(c,1);$(".selectArea").selectable("option","cancel",b.join(","))}}else{if(c==-1){b.push(".widgetHolder");$(".selectArea").selectable("option","cancel",b.join(","))}}}},isLinked:function(h,b){var d=fluid.main.project.links.toJSON();var a=p.get(h,"widgets");var c;for(var f=0;f<a.length;f++){c=d.linkOrigin.indexOf(a[f]);if(c!=-1){if(d.linkDest[c]==b){return d.linkCanvId[c]}}}return false},checkIntegrity:function(c){if(c){var b=p.get(c,"widgets");if(b){var a=q.get(c);$.each(b,function(f,d){if(!r.checkIntegrity(d,a)){return false}})}}},autoWidth:function(l){var d=$(l).children(".page");var b=$(l).attr("id");var k=d.children(".widgetHolder");var c=k.children(".rootWidget");for(var a=0;a<c.length;a++){var i=$(c[a]);var f=i.attr("id");var j=q.get(f);if((typeof(j.tlwh[0])==="string")||(typeof(j.tlwh[1])==="string")||(typeof(j.tlwh[2])==="string")||(typeof(j.tlwh[3])==="string")){var h=r._setTMPLVars(f,j,[0,0,d.width(),d.height()]);i.css({top:h.absTLWH[0],left:h.absTLWH[1],width:h.absTLWH[2],height:h.absTLWH[3]});r._resize(i,b,h.tlwh)}}},duplicate:function(b){var h=$("#"+b);var c=$(".page",h);var d=p.get(b,"orientation");var f={top:parseFloat(h.css("top")),left:parseFloat(h.css("left"))+parseFloat(c.css("width"))+100};var a={width:parseFloat(c.css("width")),height:parseFloat(c.css("height"))};var k=p.get(b,"name");var B=k==undefined||k==""?"":k+" - Copy";var l=p.create(f.top,f.left,"init");if(l){var j=$("#"+l);p.update({orientation:d},l);p.update({name:B},l);p.resize(l,a.width,a.height);var i=$.extend(true,{},r._copies);r.resetSelection();var A=q.get(b,{returnModel:true}).get("widgets");r._copy(null,A,false,b);p.activate(j,false);fluid.zoom.zoomToPage(j);if(r._copies.oldId.length>0){r._paste(null)}r._copies=$.extend(true,[],i);i=null;r.resetSelection()}return l},createNew:function(b){var j=$("#canvas");var i=fluid.zoom.getCurrentScale();var f=(b==="button");var k=fluid.main.project.get("pages");var h;b=b||"init";if(fluid.zoom.isEditMode()){var d=$(".screen.active").attr("id");if(!d){if(k.length){d=k[k.length-1]}}if(d){var l=q.get(d);h={top:l.y,left:l.x+l.width+100}}else{var a=$("#viewport");h={top:Math.abs(parseInt(j.css("top"),10))+Math.round(a.height()/2),left:Math.abs(parseInt(j.css("left"),10))+Math.round(a.width()/2)+450}}}else{var a=$("#viewport");h={top:(a.get(0).scrollTop+Math.round(a.height()/2))/i,left:(a.get(0).scrollLeft+Math.round(a.width()/2))/i};b=""}var c=p.create(h.top,h.left,b,f);if(c){p.postCreate(c)}return c},postCreate:function(b,c){if(fluid.zoom.getCtx()!=="project"){var a=$("#"+b);p.activate(a,undefined,c);fluid.zoom.zoomToPage(a);r.resetSelection()}},serialize:function(b){var f=q.get(b);if(!f){return}var h={id:b};h[b]=f;var c=f.widgets;for(var i=0,a=c.length;i<a;i++){var d=q.get(c[i]);if(!d){continue}h[c[i]]=d}return JSON.stringify(h)},deserialize:function(k,d){var i=JSON.parse(k);if(i){var h=i.id;var b=i[h],a=!fluid.main.project.get(h);if(!b){return}q.set(h,b);p.addPageToProject(h);var z=b.widgets;for(var j=0,c=z.length;j<c;j++){var f=z[j];var l=i[f];if(l){q.set(f,l)}}if(fluid.zoom.getCtx()==="project"){p.draw(h,d)}else{p.drawDetailed(h,d)}if(a){p.postCreate(h,d)}}},navigateWithKeys:function(l){if(fluid.zoom.getCtx()==="project"||!$("#canvas").hasClass("editing")){return true}var k=l!=undefined?o.getNavigationKeyDirection(l.keyCode):"right";if(k==""){return true}var f=$(".ui-selected").not(".backgroundWidget");if(f.size()>0){return}var d=fluid.main.project.get("pages");if(d<2){return}var b={distance:Number.MAX_VALUE,id:""};var c={distance:0,id:""};var a=$(".screen.active").attr("id");var i={x:p.get(a,"x"),y:p.get(a,"y")};$.each(d,function(E,D){if(a!=D){var F={x:p.get(D,"x"),y:p.get(D,"y")};var C=p._getNavigationDistanceFrom(i,F,k);if((C>=0)&&(C<b.distance)){b={distance:C,id:D}}else{if((C<0)&&(C<c.distance)){c={distance:C,id:D}}}}});var h=b.id!=""?b.id:c.id;if(h!=""){var j=$("#"+h);$(".screen").removeClass("active").filter(j).addClass("active");fluid.zoom.zoomToPage(j);p.activate(j);r.resetSelection()}},_getNavigationDistanceFrom:function(a,b,c){if(a==b){return -1}var d=0;if((c=="left")||(c=="right")){d=b.x-a.x}else{d=b.y-a.y}if(((c=="left")||(c=="top"))&&(d<0)){return Math.abs(d)}else{if(((c=="right")||(c=="bottom"))&&(d>0)){return d}}return Math.abs(d)*-1},pageMenuClick:function(){$("input","#pageMenus").blur();return false},renderBlurs:function(a){a=a||((a=document.querySelector(".canvasObject.active"))&&a.id);if(!a){return}p.calculateWdgPositions(a);q.get(a).widgets.forEach(function(c){var b=document.getElementById(c);if(!b){return}if(q.get(c).blur){r.blurLayers[c]=r.renderBlurLayer(c,a);r.setBlurBG(b)}})}};fluid.main.on("afterzoomaction",function(){p.hideSettingsMenu()});fluid.main.on("beforezoomout",function(a,b,c){p.hideOptionsMenu();if(!b.keepActivePage&&b.newCtx==="project"){p.deactivate()}else{if(b.newCtx==="project"){fluid.zoom.setSelectedBeforeZoomOut($("#canvasPages .ui-selected").attr("id"));p.draw(c,"init")}}p.hideOptionsMenu();if(b.newScale!==b.oldScale){p.detachFrame();p.adjustPageFrameScale()}});fluid.main.on("afterzoomedtopage",function(a,b){if(b.newScale!==b.oldScale||$("#canvasPages .screen.active").attr("id")!==b.pageId){p.activate(b.pageId)}p.enableSelectableWidgetHolder()});fluid.main.on("beforezoomin",function(a,c){var b=$("#pageMenu");if(!b.hasClass("hide")&&fluid.zoom.getCurrentScale()!==c.newScale){p.focusedInputId=b.find("input:focus").attr("id");b.hide()}});fluid.main.on("beforewidgetadd",function(c,b){var a=fluid.main.project.pages.get(b);if(a&&a.get("widgets").length===0){$("#previewView, #preview, #pagePreview, #shareMenu").removeClass("hud-hidden");$("#pagePreview").parent().show();p.makeHome(null,$("#"+b))}});fluid.main.on("beforelinkadded",function(a,b,c){if(!fluid.main.project.hasLinks()){var d=$("#"+c);p.makeHome(null,d)}});fluid.main.on("wdgselection librarywdgdragstart",function(){if($("#pageMenu").is(":visible")){p.hideOptionsMenu()}});fluid.main.on("widgetDropped widgetDroppedUndone",function(){p.adjustPageFrameScale($(".screen.active"))});fluid.main.on("widgetdragstart",p.hideOptionsMenu);fluid.main.on("afterzoomedtoselection",p.adjustPageFrameScale);fluid.main.on("afterzoomedonselectioreset",function(a,b){if(b.oldScale!==b.newScale){p.activate($(".screen.active").attr("id"))}else{p.displayMenu()}});fluid.main.on("widgetdragstart",function(){p.displayMenu(false)});fluid.main.on("afterwidgetdragstop",function(a,b){if(!b.dragStartSelection.length){p.displayMenu();$(".ui-selected").removeClass("ui-selected")}});fluid.main.on("zalignmentchange",function(a,b){if(b.renderBlurs){p.renderBlurs(b.pageId)}});fluid.main.on("beforelogout",function(){p.detachFrame()});fluid.main.on("linkdragstart",function(a,b){p.calculateWdgPositions(b)});fluid.main.on("project.orientantionchanged",function(){p.updateSettingsMenu()});fluid.main.on("resolutionChanged",function(){p.adjustPageFrameScale()});fluid.main.on("fluidmenutoggled beforepreviewopen beforesharetoggle libmousedown",function(){p.hideOptionsMenu()});u.exports=p},{"./class-grid":12,"./class-group":13,"./class-storage":33,"./class-widget":37,"./functions":64,"./utils":69}],19:[function(k,j,h){var i=k("./class-event");var l={isWorking:false,lastSubmitButton:null,hideTimeOut:null,errors:{"default":"Something went wrong... Please try again!",defaultShort:"ERROR!",emailUsed:"Your new email is already being used.",passInvalid:"The password is not valid.",oldPassInvalid:"The old password is not valid.",passNotChanged:"The new password cannot be equal to the old one.",upgradeFreeWrongPass:"Your password is not valid.  Please try again.",resetNoEmail:"We were unable to match that email address to an account. Please try again...",resetCantSendEmail:"Error sending email. Please try again...",resetPasswordMatch:"The two passwords you entered don't match. Please try again...",resetLinkExpired:"This link has expired (for security reasons, password recovery attempts expire after 1 hour)."},messages:{"default":"Your changes have been applied successfully.",defaultShort:"Changes applied!",resetPass:"We have sent an e-mail to your account with your password",promoCode:"The code has been applied to your account!",contact:"Thanks!  We will contact you soon!",recoverySuccess:"Please check your email. You will have a link to reset your password there.",resetSuccess:"Your password has been updated successfully. You can now sign in.",projectClone:"Project Cloned Successfully",projectTransfer:"Project Teleported Successfully",projectRestore:"Project Restore Successful",projectBranding:"Project Branding Changed"},processingMessages:{"default":"Processing...",projectClone:"Cloning...",projectTransfer:"Teleporting..."},setWorkArea:function(){$(".modalWindowContentArea").css({width:$(window).width()-50})},hideMessages:function(){l.hideErrors();l.hideSuccessMessage()},hideErrors:function(){clearTimeout(l.hideTimeOut);$(".messageError").fadeOut(250,l.placeMessageReset);l.enableLastButton(true)},displayError:function(b){var a=l.errors["default"];if(b!=undefined){a=l.errors[b]!=undefined?l.errors[b]:b}function c(){$(".userSettingsMessageContainer.messageError").text(a).fadeIn(250)}l.placeMessage(l.lastSubmitButton,c);l.enableLastButton(true);l.hideTimeOut=setTimeout(l.hideErrors,3000)},enableLastButton:function(d,n){if(!l.lastSubmitButton){return}var c=$(l.lastSubmitButton);if((d)||(d==undefined)){if(c.attr("data-label")!=undefined){l.changeButtonLabel(c,c.attr("data-label"))}c.removeAttr("disabled");return}else{c.attr("disabled","disabled");var f=c.prop("tagName")=="INPUT"?c.val():c.text();var a=n==undefined?"default":n;var b=l.processingMessages[a]?l.processingMessages[a]:l.processingMessages["default"];c.attr("data-label",f);l.changeButtonLabel(c,b)}},isLastButtonDisabled:function(){if(l.lastSubmitButton==null){return false}var a=$(l.lastSubmitButton);return a.attr("disabled")=="disabled"},hideSuccessMessage:function(){$(".userSettingsMessageContainer.messageSuccess").fadeOut(250,l.placeMessageReset);l.setSuccessMessage()},setSuccessMessage:function(a,c){var d=$(".userSettingsMessageContainer.messageSuccess");if(!a){d.text("").fadeOut(250,l.placeMessageReset);return}var b=l.messages[a]!=undefined?l.messages[a]:a;d.text(b);if(!c.length){c=l.lastSubmitButton}l.placeMessage(c);setTimeout(l.displaySuccessMessage,400)},displaySuccessMessage:function(){clearTimeout(l.hideTimeOut);if($(".userSettingsMessageContainer.messageSuccess").text()!=""){$(".userSettingsMessageContainer.messageSuccess").fadeIn(250);l.hideTimeOut=setTimeout(l.hideSuccessMessage,3000)}else{l.hideSuccessMessage()}},placeMessage:function(a,c){if(a==undefined||a.length===0){$(".userSettingsMessageWrapper").css({top:10,left:0,height:30,width:499});return}var q=a.attr("type")=="submit"||a.hasClass("toAlert")?0:30;var f=a.offset().top+q-3;var r=a.offset().left-2;var b=a.innerHeight()+8;var s=a.innerWidth()+7;var d=a.css("padding");d=a.attr("type")=="text"?"6px":d;d=isNaN(parseInt(d,10))?"6px":parseInt(d,10)<6?"6px":d;var t=$(".userSettingsMessageWrapper");t.css({top:f,left:r,height:b,width:s});t.children().css({padding:d});if($.isFunction(c)){c()}},placeMessageReset:function(){$(".userSettingsMessageWrapper").children().hide();$(".userSettingsMessageWrapper").css({height:0,width:0})},changeButtonLabel:function(a,b){if(a.prop("tagName")=="INPUT"){a.val(b)}else{a.text(b)}},getCloseExternalWindowButtonLabel:function(){var a="Close";if(top!=self){a=window.parent.userSettings.isOpen?"Back":a}return a},display:function(d,c,a){if(l.isWorking){return}l.isWorking=true;function b(){if(d.attr("id")==="projectSettingsPanelSettings"&&fluid.main.account.get("accType")==="Free"){$("#projectSettingsSwitchActivate").hide();$(".projectSettingsButtonClone").hide()}else{$("#projectSettingsSwitchActivate").show();$(".projectSettingsButtonClone").show()}d.parent().transition({width:d.innerWidth(),height:"auto",complete:function(){d.css({height:"auto"}).slideDown((c/2)+100);d.children().transition({opacity:1},c/4);l.isWorking=false;var f=$(".scrollbar",d);if(f.size()>0){l.adjustScroll(f.parent())}if($.isFunction(a)){a()}}},c*3/4)}if(d.parent().hasClass("hiding")){setTimeout(b,c*1.3)}else{setTimeout(b,100)}return},hide:function(c,b,a){if(c.size()>0){c.parent().addClass("hiding");c.children().transition({opacity:0},b/4);c.parent().css({height:c.innerHeight(),width:c.innerWidth()});c.parent().delay(b/4).transition({height:0,width:0,complete:function(){c.hide();$(this).removeClass("hiding");if($.isFunction(a)){a()}}},b*3/4)}else{if($.isFunction(a)){a()}}if(window.page){page.updateSettingsMenu()}},adjustScroll:function(c){function a(){c.tinyscrollbar();setTimeout(b,300)}function b(){c.tinyscrollbar_update("top")}setTimeout(a,100)},rateEditor:function(a){var b=$(a.currentTarget);$("#experienceRating").val(b.data("exp"));$(".experienceType").removeClass("selected");b.addClass("selected")},submitFree:function(){var d=$("#submitButtonFreeUpgrade");if(d.attr("disabled")=="disabled"){return false}var f=$("#cancelReason").val().length;var b=parseInt($("#experienceRating").val());if((b!==0&&b!==1&&b!==-1)||f<1){fluid.main.fire("hidePauseBillingErrors");$("#pauseBillingSubmitError").show();return false}l.lastSubmitButton=d;d.attr("disabled","disabled").data("origVal",d.val()).val("Applying changes");var c=fluid.main.account.get("email");var a={t:"upgradeFree",accountEmail:c,rating:$("#experienceRating").val(),cancelReason:$("#cancelReason").val(),password:$("#confirmPass").val()};$.ajax({url:"upgrade.php",type:"POST",data:a,complete:l.pauseComplete,error:l.pauseError});return false},pauseComplete:function(b,p){function q(){var m="Your account was paused successfully.";i.triggerEditor("closeModalWindow",{successMsg:m},true);fluid.main.fire("deferReloadRelease")}function f(){l.display($("#upgradeError"),400)}try{var d=JSON.parse(b.responseText)}catch(a){fluid.main.fire("accountpausefail");$("#pauseBillingSystemError").show();return}if(d.r=="s"){l.hide($("#userSettingsPanelPauseBilling"),400,q);fluid.main.fire("accountpausecomplete",d)}else{fluid.main.fire("accountpausefail");$("#pauseBillingPasswordError").show();var c=$("#submitButtonFreeUpgrade");c.removeAttr("disabled");c.val("Pause Billing")}},pauseError:function(b,a){userSettings.hidePauseBillingScreens();userSettings.hidePauseBillingErrors();userSettings.showPauseBillingFirstStep();$("#pauseBillingSystemError").show();return}};fluid.main.on("afterprojectcloned",function(c,b,a){if(a.active){l.setSuccessMessage("projectClone",$(".projectSettingsButtonClone"))}else{l.setSuccessMessage("projectClone",$("#selectedProjectNameEdit"))}setTimeout(l.enableLastButton,600)});j.exports=l},{"./class-event":9}],20:[function(l,k,h){var i=l("./jsvat");var j={creditCardLength:{VISA:16,MC:16,AMEX:15},cvvLength:{VISA:3,MC:3,AMEX:4},diacriticsMap:[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],replaceDiacritics:function(a){var b=j.diacriticsMap;for(var c=0,d=b.length;c<d;c++){a=a.replace(b[c].letters,b[c].base)}return a},getCreditCardType:function(a){var b={VISA:/^4[0-9]{12}(?:[0-9]{3})?$/,MC:/^5[1-5][0-9]{14}$/,AMEX:/^3[47][0-9]{13}$/,DINERS:/^3(?:0[0-5]|[68][0-9])[0-9]{11}$/,DISCOVER:/^6(?:011|5[0-9]{2})[0-9]{12}$/,JCB:/^(?:2131|1800|35\d{3})\d{11}$/};for(var d in b){if(b.hasOwnProperty(d)){var c=b[d];if(c.test(a)){return d}}}return""},luhnCheck:function(f){if(/[^0-9-\s]+/.test(f)){return false}var b=0,c=0,n=false;f=f.replace(/\D/g,"");for(var a=f.length-1;a>=0;a--){var d=f.charAt(a),c=parseInt(d,10);if(n){if((c*=2)>9){c-=9}}b+=c;n=!n}return(b%10)==0},populateCardYears:function(a,b){var o=new Date();var d=o.getFullYear();a.append('<option selected disabled hidden value="">Year</option>');for(var c=d;c<(d+b);c++){var f=c.toString().substr(2);a.append('<option value="'+f+'">'+c+"</option>")}},isVATApplicable:function(b){var a=["DK","EE","FI","FR","DE","GR","AT","BE","BG","CY","CZ","HR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE","GB"];return $.inArray(b,a)>-1},getMoss:function(b){var a={BE:0.21,BG:0.2,CZ:0.21,DK:0.25,DE:0.19,EE:0.2,GR:0.23,ES:0.21,FR:0.2,HR:0.25,IE:0.23,IT:0.22,CY:0.19,LV:0.21,LT:0.21,LU:0.17,HU:0.27,MT:0.18,NL:0.21,AT:0.2,PL:0.23,PT:0.23,RO:0.24,SI:0.22,SK:0.2,FI:0.24,SE:0.25,GB:0.2};if(a.hasOwnProperty(b)){return a[b]}else{return 0}},getVatAmount:function(c,a){var b=0;if(j.isVATApplicable(c)){if(c=="IE"||!a){b=j.getMoss(c)}}return b},validation:{init:function(b){$("#month, #year").on("change",function(){$(this).trigger("blur")});$(b.elem.form).data("validationConfig",b);function c(d){return $(d.form).data("validationConfig")}$.validator.addMethod("creditcardValid",function(t,d){var f=c(d);var v=j.getCreditCardType(t);var u=j.creditCardLength[v]!=undefined?j.creditCardLength[v]:0;var r=j.luhnCheck(t);var s=u>0&&r;f.elem.type.val(v);if(s){$("#cardNumberSection .icon-card").hide();$("#cardNumberSection .icon-card."+v.toLowerCase()).show();f.elem.cvv.attr("maxlength",j.cvvLength[v])}else{f.elem.cvv.attr("maxlength",3)}return s});$.validator.addMethod("cardexpirefield",function(u,d){var s=$(d).parent().parent().parent().find("[name=year]"),r=$(d).parent().parent().parent().find("[name=month]");var t=new Date();var v=!!((s.val()>t.getFullYear()-2000&&r.val()!=="")||(parseInt(s.val(),10)===t.getFullYear()-2000&&r.val()>=t.getMonth()+1));if($(d).attr("id")==="year"){var f=$('.error[for="month"][generated="true"]');f.text("Please enter valid expiration date");f[(v?"hide":"show")]()}if($(d).attr("id")==="userSettingsCardYear"){if(v){$('[for="'+r.attr("id")+'"]').hide()}else{$('[for="'+r.attr("id")+'"]').show()}$('[for="'+s.attr("id")+'"]').hide()}return v},"Invalid date");$.validator.addMethod("cvvLength",function(r,d){var q=c(d);var t=q.elem.type.val();var s=j.cvvLength[t]?j.cvvLength[t]:3;var f=q.elem.form.data("validator");f.settings.messages.cvv.cvvLength=$.validator.format(f.settings.messages.cvv.cvvLengthTmpl,s);return r.length==s});$.validator.addMethod("alphabeticChars",function(d,f){d=j.replaceDiacritics(d).replace(/[^\sa-zA-Z]/g,"");$(f).val(d);return(d.search(/[^\sa-zA-Z]/)===-1)});$.validator.addMethod("requiredForVAT",function(p,d){var f=c(d);var o=$("#billingVATSection").is(":visible")||$("#userSettingsVATSection").is(":visible");return !o||!f.elem.billingVAT.val()||Boolean(p)});$.validator.addMethod("validVATNumber",function(f,w){var A=c(w);var z=$("#billingVATSection").is(":visible")||$("#userSettingsVATSection").is(":visible"),t=A.elem.billingCountry.get(0),v=t.options[t.selectedIndex].value,d=true;if(z&&f){for(var u=2;u>0;u--){var B=i.checkVATNumber(f,v);d=B.valid_country&&B.valid_vat;if(d){$(w).val(B.number);break}else{f=v+f}}}return d});var a=b.elem.form.validate({onsubmit:false,onkeyup:false,focusCleanup:true,ignore:":hidden",rules:{loginEmail:{required:true,email:true},loginPassword:{required:true},name:{required:true,alphabeticChars:true},number:{required:true,digits:true,creditcardValid:true},month:{cardexpirefield:true},year:{cardexpirefield:true},cvv:{required:true,digits:true,cvvLength:true},billingCountry:{required:true},billingAddress:{required:true},billingCompany:{requiredForVAT:true},billingVAT:{validVATNumber:true}},messages:{loginEmail:{required:"Please enter your login email address",email:"Please enter a valid email address"},loginPassword:{required:"Please enter your password"},name:{required:"Please enter the name on the card",alphabeticChars:"Please only use alphabetic characters"},number:{required:"Please enter the card number",digits:"Please enter digits only",creditcardValid:"Invalid card number or card not accepted"},month:{cardexpirefield:"Please enter valid expiration date"},year:{cardexpirefield:"Please enter valid expiration date"},cvv:{required:"Please enter security code from the back of the card",digits:"Please enter digits only",cvvLengthTmpl:"Please enter exactly {0} digits"},billingCountry:{required:"Please select your country of residence"},billingAddress:{required:"Please enter your billing address"},billingCompany:{requiredForVAT:"Please enter your company name"},billingVAT:{validVATNumber:"Invalid VAT number"}},invalidHandler:b.handler.invalidHandler,errorPlacement:b.handler.errorPlacement,success:b.handler.success})},reset:function(a){var b=a.data("validator");if(b){b.resetForm()}$("input, select",a).removeClass("error");this.stopValidateAll()},stopValidateAll:function(a){$("input, select",a).not("input[name=cvv]").unbind("blur")}}};k.exports=j},{"./jsvat":68}],21:[function(N,S,A){var B=N("./class-dbStorage");var D=N("./class-storage");var C=N("./utils");var E=C.getParentWindow;var K=N("./class-branding");var O=N("./class-widget");var L=N("./class-widgetEvents");var Q=N("./class-widgetNewMoving");var J=N("./class-widgetNewDraw");var H=N("./browserdetect");var F=N("./class-scrollview");var z=N("./class-contextMenu");var R=N("./class-canvas");var G=N("./class-share");var M=N("./class-previewMenu");var T=N("./class-userSettings");var I={url:null,printURL:null,embedURL:null,pageTransitioning:false,multiOrientations:false,projectWH:[320,480],delayStart:1000,loaded:false,pageScale:1,pageRotation:0,pageTranslation:[0,0],viewportScaled:false,currentFrameScale:1,navigationStackBack:[],navigationStackForward:[],navigationQueueNext:[],navigationQueueFlow:[],navigationCompleted:false,navigationEnabled:false,navigationDefaultTransition:null,parentWindow:null,parentDoc:null,useZoomSlider:false,pageNotes:{},isOpen:false,exported:location.origin==="file://"||location.origin==="null",initExported:function(){if($("#previewPage").size()>0){$(window).on("message",I._crossDomainCallListener)}I._showPreviewPage(false)},scaleFrame:function(l,o,h){o=o||false;l=l||false;if(!I.loaded&&!o&&l){return}if(window.g_print||window.g_embedded){return}var c=C.getParentWindow()||window,r=c.document,d=$("#previewPage",r),p=window;if(d[0]){p=d[0].contentWindow}else{if(C.getParentWindow()){d=$("#previewPage",r)}else{if(window.parent!==window){I._crossDomainCall(window.parent,"scaleFrame",arguments);return}}}if(!l&&!d[0]){if(C.isMobileDevice()){I.scaleViewport()}return}var a,k=r.getElementById("previewZoomSlider");if(!h&&k&&p.preview&&p.preview.useZoomSlider){a=k.value}else{var m=d.outerWidth(),b=d.outerHeight(),f=Math.max(m,b),q=(h?{width:m,height:b}:{width:f,height:f}),i=(h?{width:c.innerWidth,height:c.innerHeight}:I.availableRect),j=C.getFitSize({object:q,frame:i,expand:h});a=j.width/q.width}if(!I.useZoomSlider&&k&&typeof a==="number"){var n=c.$(k);if(n){n.slider("value",a)}}if(h){if(c===window){d[0].contentWindow.preview.useZoomSlider=true}else{I.useZoomSlider=true}}d.css({"-webkit-transform":"scale("+a+")","-moz-transform":"scale("+a+")",transform:"scale("+a+")"});I.centerFrame(c);I.positionNotes();I.currentFrameScale=M.currentFrameScale=a;I._showPreviewPage(true)},scaleViewport:function(b){if(!I.viewportScaled){b=b||$(".ui-page-active");var d=$(".ui-content",b);var i=window.innerWidth;var c=I.getTrueHeight();var j=i>c?[c,i]:[i,c];var h=I.projectWH[0];var f=I.projectWH[1];var a=h>f?[f,h]:[h,f];I.pageScale=Math.min(j[0]/a[0],j[1]/a[1]);if(C.hideBrowserBar()){window.scrollTo(0,1)}}},applyPageTransforms:function(f){var b=I.pageScale!==1?"scale("+I.pageScale+") ":"";var a=I.pageRotation!=0?"rotate("+I.pageRotation+"deg)":"";var d=(I.pageTranslation[0]||I.pageTranslation[1])?" translate("+I.pageTranslation[0]+"px,"+I.pageTranslation[1]+"px)":"";var c=b+a+d;$(".widgetHolder",f).css({"-webkit-transform":c,"-moz-transform":c,transform:c})},_showPreviewPage:function(b){if(typeof b=="undefined"){b=true}var a=$("#previewPage");if(a.size()==0){if(C.getParentWindow()){a=$("#previewPage",window.parent.document)}else{if(window.parent!==window){I._crossDomainCall(window.parent,"_showPreviewPage",[b])}}}a.css({visibility:b?"visible":"hidden"})},updateExportUi:function(j){var i={Pages:$("#previewShareContainer .shareLinkExportImg").add("#projectSettingsShareTop .shareLinkExportImg"),Project:$("#previewShareContainer .shareLinkExportImgFull").add("#projectSettingsShareTop .shareLinkExportImgFull")};var b;var c=["Pages","Project"];var f;var a;for(var d=0,h=c.length;d<h;d++){f=j["export"+c[d]];b=i[c[d]].next(".msg");if(f&&f.snapshotId){if(f.status==="FINISHED"){b.html('<a class="export-link" rel="'+f.snapshotId+'">Download ('+f.processDate+")</a>");a=b.find(".export-link");a.click(function(k){window.open(document.location.origin+document.location.pathname+"snapshot/"+k,"_snapshot")}.bind(a,f.snapshotId));b.removeClass("pulsing")}else{if(f.status==="STARTED"||(f.status==="NEW"&&f.queue===0)){b.html("exporting...");b.addClass("pulsing");G.startExportPolling(f.snapshotId)}else{if(f.status==="NEW"){f;b.html("queued ("+f.queue+")...");b.addClass("pulsing");G.startExportPolling(f.snapshotId)}else{if(f.status==="FAILED"){b.html("export failed...");b.removeClass("pulsing")}}}}}else{b.html("");b.removeClass("pulsing")}}},open:function(d,a){var c=fluid.main.project.get("id");var b=fluid.main.project.bundle(c);z.hide();fluid.main.fire("beforepreviewopen");fluid.api.projectSync(c,b,function(){R.setEditorVisibility(false);$("#previewPage").contents().find("body").remove();$("#hud .hud-buttons .hud-secondary").hide();fluid.command.create("hideButton").dispatchTo("fluid.controllers.timeline");I.hideMenu();fluid.controllers.bin.hide();I.hideNotes();if(document.getElementById("previewShowNotes").checked){I.getNotesElement().style.display=""}else{I.getNotesElement().style.display="none"}I._showPreviewPage(false);fluid.main.fire("projectIntegrityCheckNeeded");var h=fluid.main.project.get("pageWH");var j=fluid.main.project.isMultiOrientation();if(d&&(d.currentTarget.id=="preview"||d.currentTarget.id==="pagePreview")){var f=(document.location.href).split("?");var i=c+"."+fluid.main.project.get("updated");G.init(c);I.embedURL=f[0]+"embed/"+i;var k=$("#tmplEmbedCode").tmpl({url:I.embedURL,width:j?Math.max(h[0],h[1]):h[0]+64,height:j?Math.max(h[0],h[1]):h[1],multiorient:j}).html();$("#embedCode").html(k)}if(fluid.main.account.get("loggedIn")!="yes"){$("#previewSignup").show();$("#previewShareContainer").hide()}$("#previewPage").css({width:h[0],height:h[1],webkitTransform:"scale(2)",transform:"scale(2)"}).attr("src","project/"+c);$("#previewHolder").fadeIn(200).addClass("open");$("#previewHolder2").fadeIn(200);$("#previewFrameParent").removeClass("to-landscape to-portrait");I.setAvailableRect(I.calcAvailableRect());I.centerFrame();I.isOpen=true;fluid.main.fire("preview")},function(){notification.add("alert","Could not save your project to the server. Please check your connection.")})},close:function(){R.setEditorVisibility(true);$("#hud .hud-buttons .hud-secondary").fadeIn(300);fluid.command.create("showButton").dispatchTo("fluid.controllers.timeline");$("#previewPage").find(".widgetHolder").empty();$("#previewSignup").hide();$("#previewShareContainer").show();$("#previewHolder").removeClass("open").fadeOut(200);$("#previewHolder2").fadeOut(200);$(".messageError").hide();window.preview.startPage=null;fluid.controllers.bin.show();fluid.main.fire("previewclosed");M.close();I.isOpen=false},parseDownload:function(a,b,i){var d="Couldn't download correctly (has it been deleted/made inactive?)";try{var j=JSON.parse(a)}catch(c){try{var j=JSON.parse(i.responseText)}catch(c){$("body").html("Unable to parse download - unknown error (1)");throw ("Error Downloading "+item+"Caller:"+arguments.callee.caller+" Second level:"+arguments.callee.caller.caller+"loadSate"+loading_Stage_Check)}}if(j.r!="s"){I.displayErrorMessageOnLoad(d);return false}try{var f=JSON.parse(j.t.toString())}catch(c){I.displayErrorMessageOnLoad("Unable to download the mockup - download was interrupted.")}if(!fluid.main.project&&g_preview){fluid.main.project=new fluid.models.project(f,{parse:true,projectId:g_preview,syncOnChange:false})}var j=f[g_preview];if(j&&j.active===false){var h=(location.origin==="file://"||location.origin==="null")?window:top;I.displayErrorMessageOnLoad("");I._crossDomainCall(window.parent,"setFrameSize",[324,500]);$("#projectInactive").tmpl().appendTo("body");return false}if(I.exported){I.afterPreviewLoad(f)}else{return f}},displayErrorMessageOnLoad:function(a){$("body").html(a);I.scaleFrame(true,true)},afterPreviewLoad:function(a){if(a===false){return}var m=[];var h=$("#homePage");if(innerWidth===300&&a[window.g_preview]&&a[window.g_preview].pageWH){m=a[window.g_preview].pageWH;if(m[0]<m[1]){h.css("background-size",m[0]+"px auto")}else{h.css("background-size","auto "+m[1]+"px")}}else{if(innerWidth<innerHeight){m[0]=innerWidth+"px";m[1]="auto"}else{m[0]="auto";m[1]=innerHeight+"px"}h.css("background-size",m[0]+" "+m[1])}var d=K.deviceScreen(),c=d.device,l=d.screen,s=a[window.g_preview]||a,o=s.deviceModel,p,i,q=window.innerWidth>window.innerHeight,b=document.getElementById("homePageStyle"),r='<link id="appIcon" rel="apple-touch-icon" href="'+(K.getUrl("icon",null,s)||"img/apple-touch-icon-144.png")+'" />';if(/iPhone/.test(o)){p=(K.getUrl("splash"+o,l.splash,s)||"img/fluidLoading"+K.screens[o].splash+".png");r+='<link id="splashP" rel="apple-touch-startup-image" href="'+p+'" />'}else{p=K.getUrl("splashP"+o,l.splashP,s)||(l.splashP?"img/fluidLoading"+l.splashP+".png":"");i=K.getUrl("splashL"+o,l.splashL,s)||(l.splashL?"img/fluidLoading"+l.splashL+".png":"");r+='<link id="splashP" rel="apple-touch-startup-image" sizes="'+l.splashP+'" media="(orientation: portrait)" href="'+p+'" /><link id="splashL" rel="apple-touch-startup-image" sizes="'+l.splashL+'" media="(orientation: landscape)" href="'+i+'" />'}var n=s&&s.pageWH[0]||"1024px 748px;";var f=s&&s.pageWH[1]||"748px 1024px;";if(b){b.innerHTML="#homePage { background: url("+(q&&i?i:p)+") no-repeat bottom; background-size: "+(/iPad/.test(o)?(q?"1024px 748px;":"764px 1004px;"):o==="iPhone5"?"320px 568px;":o==="iPhone"?"320px 460px;":n+"px "+f+"px;}")}if(!c){if(!p&&!i){document.head.removeChild(b);$("#default-branding-links").tmpl().appendTo("head")}}$("head").append(r);try{C.getParentWindow().preview.setAvailableRect()}catch(j){I._crossDomainCall(window.parent,"setAvailableRect")}$(document).ready(function k(t){if(C.isMobileDevice()){$("body").addClass("mobile")}O.useCanvas=true;I.runDraw(a);$(window).bind("orientationchange",function(){$("body").scrollTop(0).scrollLeft(0);loading_Stage_Check="preview Loaded"})})},load:function(b,c){if(location.origin==="file://"||location.origin==="null"||!frameElement){a()}else{$(frameElement).load(a)}function a(){B.onReady(function(){D.init(function(){if(location.origin!=="file://"&&location.origin!=="null"){$(frameElement).off("load")}var f=D.get(b);if(f&&f.unloaded!==true){if(typeof c==="function"){c(f)}if(window.g_print){I.runDraw(b)}}else{function d(j){var i=I.parseDownload.apply(this,arguments);if(typeof c==="function"){c(i)}j=JSON.parse(j);var h=JSON.parse(j.t);if(window.g_print){I.runDraw(h)}}fluid.api.syncDown(b,false,false,d,d)}})})}},draw:function(c){if(!c){return false}if($.mobile){$.mobile.defaultHomeScroll=0}for(var a in c){D.setTempItem(a,c[a])}var s=c[g_preview]||c;for(var l=0;l<s.pages.length;l++){var j=D.get([s.pages[l]]);I.pageNotes[s.pages[l]]=j&&j[3]||""}I.viewportScaled=window.navigator.hasOwnProperty("standalone")&&window.navigator.standalone;I.projectWH=[s.pageWH[0],s.pageWH[1]];var m=I.viewportScaled?I.projectWH[0]:$(window).width();var t=I.viewportScaled?I.projectWH[1]:I.getTrueHeight();if(C.isMobileDevice()&&m>t&&window.screen.width<window.screen.height){var f=m;m=t;t=f}var b=I.viewportScaled?Math.min(window.screen.width/m,window.screen.height/t):1;if(/iP(hone|od|ad)/.test(navigator.platform)){var p=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);if(p&&p[1]&&p[1]==="6"){$("#metaViewport").attr("content","initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no")}}else{$("#metaViewport").attr("content","width="+m+",height="+t+",minimum-scale="+b+",maximum-scale="+b+",initial-scale="+b+",user-scalable=0")}if(C.getParentWindow()){if(!window.g_embedded){try{var r=$("#previewPage",window.parent.document);if(r.size()>0){r.css({width:s.pageWH[0],height:s.pageWH[1]});$(".ui-mobile-viewport").css("overflow","hidden")}}catch(h){}}I.scaleFrame()}else{if(window.parent!==window){I._crossDomainCall(window.parent,"setFrameSize",s.pageWH);I._crossDomainCall(window.parent,"scaleFrame")}}if(location.origin==="file://"||location.origin==="null"){$(".pageList:not(#homePage)").css("height",I.getTrueHeight()+"px")}else{$(".pageList").css("height",I.getTrueHeight()+"px")}document.title=s.name;document.projectLoaded=true;for(var l=0;l<s.pages.length;l++){if(!D.get(s.pages[l])){s.pages.splice(l,1);l--}}if(!D.get(s.homepage)){s.homepage=s.pages[0]}var n=s.orientation;I.multiOrientations=false;for(var l=0,k=s.pages.length;l<k;l++){if(D.get(s.pages[l]).orientation!=n){I.multiOrientations=true;break}}if(H.OS=="Android"&&I.multiOrientations){var d=$(window).width();var q=window.outerHeight||getTrueHeight();$(".ui-mobile-viewport").css({"min-height":Math.max(d,q)+"px"})}if(window.g_embedded&&(I.projectWH[0]>I.projectWH[1]||I.multiOrientations)){}if(window.g_print){for(var l=0,k=s.pages.length;l<k;l++){I.drawPage(s.pages[l],s)}$("#font-preloader").remove()}else{var o=C.getParentWindow()?C.getParentWindow().preview.startPage:null,i=o||(s.homepage?s.homepage:s.pages[0]);I.homePage=i;I.drawPage(i,s);if(typeof g_previewMode!="undefined"&&g_previewMode==true){I.scaleViewport();I.bindMobileEvents(s.links);g_homepage=i;setTimeout(function(){I.changePage("#"+i,null,false,true)},I.delayStart)}}},showPage:function(a){$(".previewPage").hide();$("#"+a).show();if(typeof window.callPhantom==="function"){window.callPhantom({event:"shownPage",id:a})}},drawPage:function(a,d){if(!d){d=D.get(g_preview)}var c="transparent";var b=D.get(a);if(!b){return}var h=[b.width,b.height];var f={pageId:a,width:h[0],height:h[1],widthScreen:$(window).width(),heightScreen:I.getTrueHeight(),bgColor:c};if(window.g_embedded){if(I.multiOrientations){if(h[0]>h[1]){f.top=(h[0]-h[1])>>1}else{f.left=(h[1]-h[0])>>1}}else{f.left=$(".previewLogoHolder").outerWidth()}}if((window.g_print)&&(b.notes!=undefined)){f.notes=b.notes[3];f.title=b.name==undefined?"":b.name}var i=$("#tmplPreviewPage").tmpl(f).appendTo("body");I.drawWidgets(g_preview,a,d.links);I.showLinks(d.links,a);$("#"+a).bind("pageshow",I.navigateInit);if(window.g_print){if(b.width===d.pageWH[0]&&b.height===d.pageWH[1]){i.addClass("project-size")}}},changePage:function(j,i,a,f){var c=j.substr(1);if($(j).size()==0){I.drawPage(c);$(j).trigger("pageinit")}$(j).addClass("visited");var h=i;var d=f=="undefined"?true:!f;if((!h)&&(d)){var k=I.navigationDefaultTransition.split(":");var b=(k.length>1)?true:false;h={transition:k[0],reverse:b}}I.orient(null,$(j),$(".ui-page.ui-page-active"));if(C.isMobileDevice()){$.mobile.changePage(j,h)}else{setTimeout(function(){$.mobile.changePage(j,h)},300)}if(window.Android){Android.updateOrientation()}window.setTimeout(function(){I.preloadLinkedPages(c);I._fixNavigationStatus(c,i,a)},100)},_fixNavigationStatus:function(f,d,b){if((I.navigationStackBack.length>0)&&(b!=2)){var a=d;if(I.navigationQueueNext.length>0){if(I.navigationQueueNext[0].args){a=I.navigationQueueNext[0].args;a.reverse=!a.reverse}}I.navigationStackBack.push({pageId:f,args:a})}I.navigationQueueFlow=$.grep(I.navigationQueueFlow,function(h,i){return h.pageId!=f});var c=$("#"+f).hasClass("blank");if(!c){I.navigationQueueFlow.push({pageId:f,args:d})}I.navigationQueueNext=$.grep(I.navigationQueueNext,function(h,i){return h.pageId!=f})},_isPageVisited:function(b){var a=$("#"+b);if((a.size()>0)&&(a.hasClass("visited"))){return true}return false},preloadLinkedPages:function(a){if((I.navigationCompleted)&&(I.navigationQueueFlow.length>1)){var d=I.navigationQueueFlow.slice(0);var b=d.pop();I.navigationStackBack.push(b);return}var i=D.get(g_preview);var c=D.get(a);var h=i.links;var f=0;var j=0;$.each(h.linkOrigin,function(k,n){if(h.linkType[k]=="ahref"&&$("#"+n).closest(".page").attr("id")==a){var o=h.linkDest[k];var q=D.get(o);if(!q){return}var r=$("#"+o);if((r.size()==0)&&(q.widgets.length>0)){var p=h.transType[k].split(":");var l=(p.length>1)?true:false;var m={transition:p[0],reverse:l};I.navigationQueueNext.push({pageId:o,args:m});I.drawPage(o,i);f++}else{if(r.size()>0){if((I.navigationQueueFlow.length>0)&&(o==I.navigationQueueFlow[0].pageId)&&(!I.navigationQueueFlow[0].args)){var p=h.transType[k].split(":");var l=(p.length>1)?true:false;I.navigationQueueFlow[0].args={transition:p[0],reverse:l}}}}}if((I.navigationStackBack.length==0)&&(j<1)){if((h.linkType[k]=="ahref")&&(h.linkDest[k]==a)){var o=I.getPageIdForWidget(n);var q=D.get(o);if(!q){return}if((!I._isPageVisited(o))&&(q.widgets.length>0)){var p=h.transType[k].split(":");var l=(p.length>1)||p[0]=="none"?false:true;var m={transition:p[0],reverse:l};I.navigationStackBack.push({pageId:o,args:m});j++}}}});I.preloadNextUndisplayedPage(i);I.preloadPreviousUndisplayedPage(i)},preloadNextUndisplayedPage:function(a){return I.findUnlinkedPage(a,a.pages,I.navigationQueueNext,true)},preloadPreviousUndisplayedPage:function(c){var b=c.pages.slice(0);I.findUnlinkedPage(c,b.reverse(),I.navigationStackBack,false);if((I.navigationCompleted)&&(I.navigationQueueFlow.length>1)){var a=I.navigationQueueFlow.slice(0);var d=a.pop();I.navigationStackBack.push(d)}},findUnlinkedPage:function(f,d,b,a){if((I.navigationCompleted)||(b.length>0)){return false}var c=false;$.each(d,function(i,j){if(!I._isPageVisited(j)){var h=D.get(j);if(h.widgets.length>0){b.push({pageId:j,args:null});if(a){I.drawPage(j,f)}c=true;return false}}});if(!c){I.navigateSetCompleted()}return c},showLinks:function(a,b){$.each(a.linkOrigin,function(f,h){if(a.linkType[f]=="ahref"&&(!b||$("#"+h).closest(".page").attr("id")==b)){$("[id="+h+"]").addClass("widgetLink");var c=$("[id="+h+"]").attr("data-lockto");var d=$('[data-lockto="'+c+'"]').each(function(){var i=$(this).attr("id");if(I.linkShowRipple(i,h)){$("#"+i).addClass("widgetLink")}})}})},drawWidgets:function(f,i,j){if(!fluid.main.project&&top&&top.fluid&&top.fluid.main.project){fluid.main.project=top.fluid.main.project}var b=$("#"+i).find("[data-role=content]");var a=[];for(var c in j.linkDest){if(j.linkType[c]=="template"&&j.linkDest[c]==i){var d=fluid.main.project.pages.get(j.linkOrigin[c]).attributes.widgets;a=a.concat(d)}}var d=fluid.main.project.pages.get(i).attributes.widgets;widgetList=a.concat(d);for(var c=0;c<widgetList.length;c++){O.checkIntegrity(widgetList[c])}if(widgetList.length>0){var h=true;O.load(i,widgetList,h)}else{I.showBlankPage(i,j)}},showBlankPage:function(a,c){var d=$("#blankPage").find(".pageList").html();var b=$("#"+a).find(".widgetHolder");b.html(d);b.parent().addClass("blank");$(".blankPageBackButton",b).bind("click",I.navigateBack)},getPageIdForWidget:function(c){var d=D.get(g_preview);var b=d.pages;var a="";$.each(b,function(i,h){var f=D.get(h).widgets;$.each(f,function(j,k){if(k==c){a=h;return false}});if(a!=""){return false}});return a},orient:function(c,a,b){if(!window.g_embedded){try{if(C.isMobileDevice()){I._orientMobile(a,b)}else{I._orientParent(a,b)}I.scaleViewport(a);I.centerFrame()}catch(c){}}},_orientationData:function(h){var a=D.get(g_preview);var k=D.get(h.attr("id"));var c=a.pageWH||[320,480];var j=k.orientation?(k.orientation!="Landscape"):(k.width<=k.height);var f=j?k.width>k.height:k.width<=k.height;var d=$.event.special.orientationchange;var b=(d&&$.isFunction(d.orientation))?d.orientation()=="portrait":window.screen.width<window.screen.height;var l=c[1]>=c[0];var i=j&&l||!j&&!l;return{portrait:j,crossOriented:b!=j,multiOriented:I.multiOrientations,projectOriented:i,width:c[0],height:c[1]}},_orientMobile:function(i,h,f){f=f||I._orientationData(i);I.pageRotation=f.crossOriented?(f.portrait?-90:90):0;var a;if((f.portrait&&f.projectOriented)||(!f.portrait&&!f.projectOriented)){a="width"}else{a="height"}I.pageTranslation=I.pageRotation?(I.pageRotation>0?[0,-f[a]]:[-f[a],0]):[0,0];I.applyPageTransforms(i);if(H.OS=="iOS"){var c=window.screen.width*(I.viewportScaled?window.devicePixelRatio:1);var b=window.screen.height*(I.viewportScaled?window.devicePixelRatio:1);var d=f.portrait!=f.crossOriented;$(document.body).css({width:(d?Math.min(c,b):Math.max(c,b))+"px"})}else{if(C.hideBrowserBar()){window.scrollTo(0,1)}}},orientPrevPage:function(f,d,c){if(!d){return}var a,b=(c.portrait&&c.projectOriented)||(!c.portrait&&!c.projectOriented);translateSide=b?"width":"height";if(c.portrait){a="rotate(90deg) translate(0,-"+c[translateSide]+"px)"}else{a="rotate(-90deg) translate(-"+c[translateSide]+"px, 0)"}$(".widgetHolder",d).css({"-webkit-transform":a,"-moz-transform":a,transform:a})},_orientParent:function(h,a,c){var b=$("#previewPage",C.getParentWindow()?frameElement.ownerDocument:document);c=c||I._orientationData(h);if(c.crossOriented){if(!C.getParentWindow()&&window.g_preview){setTimeout(function(){I.orientPrevPage(h,a,c)},0)}else{I.orientPrevPage(h,a,c)}if(b&&b.length){I.hideNotes();var f=b[0],d=f.parentNode,i={};if(c.projectOriented){i.width=c.width;i.height=c.height}else{i.width=c.height;i.height=c.width}$(".widgetHolder",h).css({"-webkit-transform":"","-moz-transform":"",transform:"",width:i.width+"px",height:i.height+"px"});f.style.width=i.width+"px";f.style.height=i.height+"px";I.centerFrame(window.parent||window);if(c.portrait){d.classList.remove("to-landscape");d.classList.add("to-portrait")}else{d.classList.remove("to-portrait");d.classList.add("to-landscape")}}else{if(window.parent!==window){I._crossDomainCall(window.parent,"_orientParent",[null,null,c])}}}fluidEvent.triggerPreview("changeOrientation",{},true)},finishOrient:function(c,a,b){if(!window.g_embedded){try{if(!C.isMobileDevice()){I._finishOrient(a,b)}}catch(c){}}},clearPageOrientation:function(){I.pageRotation=0;I.pageTranslation=[0,0]},_finishOrient:function(a,c,d){var b=C.getParentWindow()&&window.parent&&$("#previewPage",window.parent.document);d=d||I._orientationData(a);if(C.getParentWindow()&&a){I.multiOrientations=d.multiOriented;I.updateNotes(a[0].id);I.debouncedPositionAndShowNotes()}if(c){I.clearPageOrientation();c.find(".widgetHolder").css({transform:"",webkitTransform:"",mosTransform:""});I.clearPageOrientation();I._crossDomainCall(window.parent,"_finishOrient",[null,null,d])}},bindMobileEvents:function(i){F.setup(i);function b(l,m){I.pageTransitioning=true;F.showPage.call(l.target,l)}function d(l,m){F.isScrolling=false;F.isDoubleTapping=false;F.isSwiping=false;I.pageTransitioning=false;I.finishOrient(l,$(l.target),m.prevPage);$(".ui-scrollview-clip",l.target).scrollview("option","rotate",I.pageRotation);setTimeout(function(){F.isTapHolding=false;if(C.hideBrowserBar()){window.scrollTo(0,1)}},350)}function j(l){I.orient(l,$.mobile.activePage);$(".ui-scrollview-clip",$.mobile.activePage).scrollview("option","rotate",I.pageRotation)}function a(p){F.isScrolling=false;F.isDoubleTapping=false;F.isTapHolding=false;F.isSwiping=true;var n={up:0,right:90,down:180,left:270};var o={0:"up",90:"right",180:"down",270:"left"};var l=p.type.substr(5);var m=o[(360+(n[l]-I.pageRotation))%360];I.handleUserInput("swipe"+m,$(p.currentTarget).attr("id"),i);return false}function f(l){l.stopImmediatePropagation();if(F.isSwiping){F.isSwiping=false}else{if(F.isScrolling){F.isScrolling=false}else{if(F.isDoubleTapping){F.isDoubleTapping=false}else{if(F.isTapHolding){F.isTapHolding=false}else{I.handleUserInput(l.type,$(l.currentTarget).attr("id"),i)}}}}}function h(l){F.isTapHolding=true;var m=$(l.currentTarget).attr("id");I.handleUserInput(l.type,m,i)}function k(l){F.isDoubleTapping=true;var m=$(l.target).parents(".pageWidget").attr("id");I.handleUserInput("doubletap",m,i)}function c(l){$(document).trigger("mouseup")}if(C.isMobileDevice()){if($.support.orientation){$(window).bind("orientationchange",j)}$(window).resize(function(){window.setTimeout(function(){I.scaleViewport($.mobile.activePage)},100)})}$("body").bind("pageinit",function(l){$(".pageWidget",l.target).doubletap(k)}).bind("pagebeforeshow",b).bind("pageshow",d).mouseleave(c);$(document).bind("touchmove",false);$(".pageWidget").live("swipeleft swiperight swipeup swipedown",a).live("vclick",function(l){l.preventDefault();f(l)}).live("taphold",h)},handleUserInput:function(h,c,a){var d=C.getParentWindow()&&C.getParentWindow().fluid.main.project||fluid.main.project;var a=d.get("links");if(F.isScrolling){return false}h=(h=="vclick"||h=="click")?"tap":h;var f=I.linkCheck(c,a);if(f>-1&&a.triggerType[f]==h){I.navigateSetIncompleted();var b=d.links.get(a.linkCanvId[f]).get("transType").split(":");var i=(b.length>1)?true:false;I.changePage("#"+a.linkDest[f],{transition:b[0],reverse:i})}else{}},alertCopyEmbedCode:function(a){notification.add("alert","Embed Code Copied")},showDebugInfo:function(a){var b=$("#divDebugInfo").html();if(b){a=b+a}$("#divDebugInfo").remove();$("body").append("<div id='divDebugInfo'>"+a+"<br/></div>")},getTrueHeight:function(){return(window.hasOwnProperty("innerHeight")?window.innerHeight:$(window).height())||480},linkCheck:function(c,b){do{var a=$.inArray(c,b.linkOrigin);if(a>-1){return a}c=D.get(c);if(c==null){return -1}c=c.of}while(c);return -1},linkShowRipple:function(c,a){var b=D.get(c);if(b&&b.segments==null){if(b.of==null){return}if(a!=b.of){if(I.linkShowRipple(b.of,a)){$("#"+c).addClass("widgetLink")}}if(a==b.of){return true}}},runDraw:function(h){var d=h;var a;if(typeof(h)=="string"){h=fluid.main.project.bundle(h);a=h[g_preview];if(!a||!a.pages){fluid.api.syncDown(previewId,false,false,I.parseDownload,I.parseDownload);return}}a=a||h[window.g_preview];I.loaded=true;I.navigationStackBack=[];I.navigationStackForward=[];I.navigationQueueNext=[];I.navigationQueueFlow=[];I.navigationCompleted=false;I.navigationDefaultTransition=a?a.defaultTransition:"none";I.draw(h);if(window.g_print){var j=20,c=a.pageWH[0];height=a.pageWH[1],printStyle="@page { size: "+a.orientation+"; margin: "+j+"px; }\n.printPageWrapper { width: "+c+"px; height: "+height+" }\n";for(var m=1;m>0;m-=0.1){m=m.toFixed(1);var k=Math.floor(c*m),f=Math.floor(height*m);printStyle+="@media print and (max-width: "+(k+j)+"px) {\n    .project-size .page { -webkit-transform: scale("+m+"); transform: scale("+m+"); }\n    .printPageWrapper.project-size { width: "+k+"px; height: "+f+"px}\n}\n"}for(var l=0;l<a.pages.length;l++){var b=a.pages[l],i=h[b];if(i.width===c&&i.height===height){continue}printStyle+="#print_"+b+" { width: "+i.width+"px; height: "+i.height+"px; }\n";for(var m=1;m>0;m=m-=0.1){m=m.toFixed(1);var k=Math.floor(i.width*m),f=Math.floor(i.height*m);printStyle+="@media print and (max-width: "+(k+j)+"px) {\n    #"+b+" { -webkit-transform: scale("+m+"); transform: scale("+m+"); }\n    #print_"+b+" { width: "+k+"px; height: "+f+"px; }\n}\n"}}$("head").append('<style type="text/css">'+printStyle+"</style>")}},restart:function(){I.changePage("#"+I.homePage,null,false,true)},hideMenu:function(){},navigateInit:function(a,b){I.navigationEnabled=true},navigateSetCompleted:function(){I.navigationQueueNext=[];I.navigationStackForward=[];I.navigationCompleted=true},navigateSetIncompleted:function(){I.navigationCompleted=false},navigateWithKeys:function(c){if((c.keyCode==27)&&(self!=top)&&(window.parent.lib!=undefined)){window.parent.lib.esc()}var a=C.getNavigationKeyDirection(c.keyCode);if(a==""){return}var b=top==self?document.getElementById("previewPage").contentWindow.preview:window.preview;if((!b)||(!b.navigationEnabled)){return}if((a=="top")||(a=="right")){b.navigateNext();return}b.navigateBack()},navigateNext:function(){if(I.navigationStackForward.length>0){var a=I.navigationStackForward.pop();I.changePage("#"+a.pageId,a.args);return}if(I.navigationQueueNext.length>0){var a=I.navigationQueueNext.shift();I.changePage("#"+a.pageId,a.args);return}if(I.navigationQueueFlow.length>0){var a=I.navigationQueueFlow.shift();I.changePage("#"+a.pageId,a.args);return}},navigateBack:function(){if(I.navigationStackBack.length>1){var b=I.navigationStackBack.pop();var c=I.navigationStackBack.pop();var h=$("#"+c.pageId).hasClass("blank");if(h){if(I.navigationStackBack.length>0){c=I.navigationStackBack.pop()}else{return}}if(I.navigationCompleted){var d=I.navigationQueueFlow.pop();I.navigationQueueFlow.splice(0,0,d);var a=I.navigationQueueFlow.pop();if(a.pageId!=c.pageId){I.navigationQueueFlow.push(a)}}else{I.navigationStackForward=$.grep(I.navigationStackForward,function(j,k){return j.pageId!=b.pageId});var f=$("#"+b.pageId).hasClass("blank");if(!f){var i={pageId:b.pageId,args:c.args};I.navigationStackForward.push(i)}}I.changePage("#"+c.pageId,c.args,1);return}if((I.navigationCompleted)&&(I.navigationQueueFlow.length>0)){var d=I.navigationQueueFlow.pop();I.changePage("#"+d.pageId,d.args,1)}},_crossDomainCall:function(c,a,b){c.postMessage(JSON.stringify({funcName:a,args:b}),"*")},_crossDomainCallListener:function(b){var a=JSON.parse(b.originalEvent.data);if($.isFunction(I[a.funcName])){I[a.funcName].apply(I,a.args)}},getNotesElement:function(c){c=c||window;var a=c.document.getElementById("inPreviewNotes");if(a){return a}try{if(c.frameElement){return I.getNotesElement(c.frameElement.ownerDocument.defaultView)}}catch(b){}return null},positionNotes:function(){var a=I.getNotesElement(),d=a&&a.clientWidth||0;if(a){var c=document.getElementById("previewPage")||window.frameElement,b=c.getClientRects()[0];if(!b){return}x=b.left;y=b.top;a.style.left=(x-d+1)+"px";a.style.top=Math.max(y,0)+"px"}},updateNotes:function(c){var a=I.getNotesElement();if(!a){return}var b=I.getNotesElement().querySelector("#previewNotesContent");var d=fluid.main.project.pages.get(c).get("notes");b.textContent=d&&d[3]||"This page has no notes"},showNotes:function(){notesElement=I.getNotesElement();notesElement&&notesElement.classList.remove("hide")},hideNotes:function(){notesElement=I.getNotesElement();notesElement&&notesElement.classList.add("hide")},toggleShare:function(){var a=document.getElementById("previewShare");a.classList.toggle("closed");I.setAvailableRect(I.calcAvailableRect());I.scaleFrame()},centerFrame:function(b){b=b||C.getParentWindow()||window;var j=b.document,c=j.getElementById("previewPage");if(!c){I._crossDomainCall(window.parent,"centerFrame");return}var l=c.parentNode,i=l.style,d=I.availableRect,f=$(c).outerWidth(),h=$(c).outerHeight(),a=d.width/2+d.left,k=d.height/2+d.top;i.marginLeft=-(f/2)+"px";i.marginTop=-(h/2)+"px";i.left="50%";i.top="50%";i.width=f+"px";i.height=h+"px";setTimeout(I.positionNotes,400)},calcAvailableRect:function(b){b=b||window;var a=b.document;return{width:b.innerWidth,height:b.innerHeight,left:0,top:0}},setFrameSize:function(a,b){$("#previewPage").css({width:a,height:b});I.scaleFrame()},availableRect:{width:(location.origin==="file://"||location.origin==="null")?window.innerWidth:top.innerWidth,height:(location.origin==="file://"||location.origin==="null")?window.innerHeight:top.innerHeight,top:0,left:0},setAvailableRect:function(a){a=a||I.calcAvailableRect();I.availableRect=a;if(I.canAccessFrame()&&$("#previewPage")[0].contentWindow.preview){$("#previewPage")[0].contentWindow.preview.availableRect=a}else{if($("#previewPage").length){I._crossDomainCall($("#previewPage")[0].contentWindow,"setAvailableRect",a)}}},canAccessFrame:function(){try{return !!(document.getElementById("previewPage").contentWindow.document)}catch(a){return false}},debouncedPositionAndShowNotes:P(function(){I.positionNotes();I.showNotes()},300,false)};function P(a,c,b){var d;return function(){var f=this,h=arguments;var i=function(){d=null;if(!b){a.apply(f,h)}};var j=b&&!d;clearTimeout(d);d=setTimeout(i,c);if(j){a.apply(f,h)}}}fluid.main.on("previewzoomsliderchanged previewbestfitclick previewfullscreenclick",function(b,a){if(a&&a.sliderValue){I.pageScale=a.sliderValue}I.hideNotes();I.debouncedPositionAndShowNotes();if(a&&a.bestFit){I.scaleFrame()}else{if(a&&a.fullscreen){I.scaleFrame(undefined,undefined,true)}}});fluid.main.on("previewshownoteschange",function(b,a){if(a){I.getNotesElement().style.display="";$(".show-notes-icon").children().eq(0).hide().next().show();I.positionNotes()}else{I.getNotesElement().style.display="none";$(".show-notes-icon").children().eq(0).show().next().hide()}});fluid.main.on("keyup",function(b,a){if(!T.isOpen){I.navigateWithKeys(a)}});fluid.main.on("escpressed",function(){if($("#previewHolder").hasClass("open")){I.close()}});fluid.main.on("project.opening",function(b,a){if($("#previewHolder").is(":visible")){I.close()}});S.exports=I},{"./browserdetect":2,"./class-branding":5,"./class-canvas":6,"./class-contextMenu":7,"./class-dbStorage":8,"./class-previewMenu":22,"./class-scrollview":29,"./class-share":31,"./class-storage":33,"./class-userSettings":35,"./class-widget":37,"./class-widgetEvents":38,"./class-widgetNewDraw":41,"./class-widgetNewMoving":42,"./utils":69}],22:[function(A,D,z){var B=r(function(){preview.positionNotes();preview.showNotes()},400),w=null,E={menuElement:null,isOpen:F,toggle:u,open:v,close:q,debouncePositionNotes:B,width:0},s=300,C=null,t=null;function F(){return !w.classList.contains("closed")}function u(){$("#qrHolder").hide();w.classList.toggle("closed")}function v(){if(!F()){u()}}function q(){if(F()){u()}}function r(c,j,h){var a,f,d,b,i;return function(){d=this;f=arguments;b=new Date();var l=function(){var m=(new Date())-b;if(m<j){a=setTimeout(l,j-m)}else{a=null;if(!h){i=c.apply(d,f)}}};var k=h&&!a;if(!a){a=setTimeout(l,j)}if(k){i=c.apply(d,f)}return i}}$(document).ready(function(){w=E.menuElement=document.getElementById("previewMenu");if(!w){return}C=document.getElementById("previewPage");t=C.contentWindow;$(".show-notes-icon").children().eq(1).hide();if(C){C.addEventListener("load",function(){t=C.contentWindow;if(w.querySelector("#previewShowLinks").checked){t.document.body.classList.add("highlight-links")}})}document.getElementById("restartPreview").addEventListener("click",function(d){if(t&&t.preview){t.preview.restart()}});function c(f,d){C.style.webkitTransform=C.style.mozTransform=C.style.transform="scale("+d.value+")";t.preview.useZoomSlider=true;fluid.main.fire("previewzoomsliderchanged",{sliderValue:d.value})}function a(f,d){$("#previewPage").addClass("user-scaling")}function b(f,d){$("#previewPage").removeClass("user-scaling")}$("#previewZoomSlider").slider({range:"min",min:0.3,max:2,step:0.01,start:a,slide:c,change:b,stop:b});document.getElementById("previewShowLinks").addEventListener("change",function(d){if(t){if(d.target.checked){t.document.body.classList.add("highlight-links")}else{t.document.body.classList.remove("highlight-links")}}});document.getElementById("previewShowNotes").addEventListener("change",function(d){fluid.main.fire("previewshownoteschange",d.target.checked)});document.getElementById("previewBestFit").addEventListener("click",function(d){t.preview.useZoomSlider=false;fluid.main.fire("previewbestfitclick",{bestFit:true});$("#previewZoomSlider").slider("value",E.currentFrameScale)});document.getElementById("previewFullscreen").addEventListener("click",function(d){t.preview.useZoomSlider=false;fluid.main.fire("previewfullscreenclick",{fullscreen:true});$("#previewZoomSlider").slider("value",E.currentFrameScale)});document.addEventListener("click",function(d){if(!$(d.target).is("#previewMenu, #previewMenu *, #togglePreviewMenu, #togglePreviewMenu *")){q()}})});D.exports=E},{}],23:[function(G,J,F){var C=G("./class-account");var z=G("./class-projectSettings");var D=G("./class-storage");var s=G("./fluid/fluid.i18n");var u=G("./utils");fluid.command=G("./fluid/fluid.command");var B=G("./class-page");var H=G("./class-notification");var w=G("./class-link");var I=G("./class-fluidMenu");var A=G("./class-lib");var E=G("./class-userSettings");var t=G("./class-staticWidgets");G("./class-wdgRenderer");var v={isInitialized:false,isModified:false,activeProjectTooltip:"",autoPreviewTimeout:300000,inactiveProjectTooltip:"This project is inactive. Editing is disabled.",colors:{hStart:5,hEnd:210,s:"90%",l:"50%"},unloadedProps:["name","created","updated","active","preview"],lastProjectClosed:false,orient:function(d,j){var j=d!=undefined?$(d.target).attr("data-for"):j;var i=fluid.main.project.get("pageWH");var b=parseInt(i[0],10);var c=parseInt(i[1],10);var h=Math.min(b,c);var a=Math.max(b,c);i=j=="Portrait"?[h,a]:[a,h];v.set({orientation:j});v.set({pageWH:i});var k=fluid.main.project.get("pages");for(var f in k){B.update({orientation:j,width:i[1],height:i[0]},k[f])}$(".screen").each(B.resizeAfterOrient);B.updateOptionsMenu()},isMultiOrientation:function(){var b=fluid.main.project.get("pages");var h=fluid.main.project.get("orientation");var c=false;if(!b||!b.length){return false}for(var d=0,f=b.length;d<f;d++){var a=B.get(b[d],"orientation");if(a!=h){c=true;break}}return c},setNumber:function(c,a){var b=fluid.main.projects.filter(function(i,h,f){if(i.get("removed")){return false}return true}).length;var d="All Projects ("+b+")";$(".projectSettingsButton").removeClass("buttonDisabled").find("span").text(d);$("#logout").removeClass("hidden")},hoverIn:function(){$(this).children(".foreground").addClass("projectHover");$(this).children(".popOutPage").addClass("popOutPageHover")},hoverOut:function(){$(this).children(".foreground").removeClass("projectHover");$(this).children(".popOutPage").removeClass("popOutPageHover")},_template:function(c,a){c.id=a;c.name=c.name||"New Project";c.date=fluid.i18n.formatDate(c.created);c.dateCreate=moment(c.created).format("YYYY/MM/DD HH:mm:ss");c.dateUpdate=moment(c.updated).format("YYYY/MM/DD HH:mm:ss");c.tooltip=c.active===false?v.inactiveProjectTooltip:v.activeProjectTooltip;c.nameLower=c.name.toLowerCase();var b=$("#tmplProjectThumb").tmpl(c);if(c.active===false){b.addClass("inactivePrj")}else{b.addClass("activePrj")}b.insertAfter("#projectAdd");z.updateThumbnail(a);delete c.dateCreate;delete c.dateUpdate;delete c.nameLower;return b},hasWidgets:function(){var b=fluid.main.account.get("lastOpenProject");var a=D.get(b);var c=false;if((a)&&(a.pages)){$.each(a.pages,function(f,h){var d=B.get(h,"widgets");if((d)&&(d.length>0)){c=true;return false}})}return c},get:function(a){return fluid.main.project.get(a)},set:function(b){var a=fluid.main.account.get("lastOpenProject");v.loadIfUnloaded(a,function(){var d=D.get(a);if(!d){return}for(var c in b){d[c]=b[c]}D.set(a,d)})},changeScreenSize:function(j,f){if(typeof f==="object"){var i=f[0];var h=f[1]}else{var i=parseInt($(".screenSize").filter(".width").val());var h=parseInt($(".screenSize").filter(".height").val())}var b=50;var a=50;if((isNaN(i))||(isNaN(h))){i=v.get("pageWH")[0];h=v.get("pageWH")[1];$(".screenSize").filter(".width").val(i);$(".screenSize").filter(".height").val(h)}else{i=i<b?b:i;h=h<a?a:h;i=parseInt(i,10);h=parseInt(h,10);v.set({pageWH:[i,h]});var d=h>=i?"Portrait":"Landscape";v.orient(null,d)}t.zoomInBoundary();var c=$("#canvasPages .screen.active").attr("id");if(c){fluid.zoom.zoomToPage({pageId:c})}else{fluid.zoom.zoomToAllPages()}},save:function(){var a=fluid.main.project.get("id");var b=D.get(a);b.updated=new Date().getTime();D.set(a,b)},dragStart:function(h,r){var k=$(this).hasClass("inactiveProject");var m=$("#projects").outerHeight();var p=$("#projects").closest(".viewport").height();var l=$("#projects").parent().position().top;var i=k?$("#projectList"):$("#inactiveProjectList");var f=i.outerHeight();var q=i.children("h2, h3, h4, h5");var n=q.outerHeight(true)||50;var j=k?l+f:f-m+p-l;var a=j<n;var c=0;if(a){var d=k?-1:1;c=d*(j-n-q.position().top);if(k){c+=2;q.css({"-webkit-transform":"translate(0, "+(f-n-8)+"px)","-moz-transform":"translate(0, "+(f-n-8)+"px)"});i.children(".addProject, .project").css({"-webkit-transform":"translate(0, -"+(q.outerHeight()||0)+"px)","-moz-transform":"translate(0, -"+(q.outerHeight()||0)+"px)"})}i.removeClass("bouncing").css({top:j<0?j+4+"px":"","z-index":1}).addClass("bouncing scrolledIntoView");var o=parseInt(i.css("-webkit-transition-duration"));var M=j>=0?j/n:1;o=o*M+(o>1?"ms":"s");i.css({top:c+"px","-webkit-transition-duration":o,"-moz-transition-duration":o,"-webkit-animation-delay":o,"-moz-animation-delay":o});var N=$("#projects .project").first().outerHeight(true)||0;var b=c-d*N;$("#projects").data("popoutAreaHeight",N).data("popoutTranslateTop",b)}$("#projects").data("showDest",a)},drag:function(k,b){var c=$(this);var d=$("#fluidDropdown .viewport");if($("#projects").is(":visible")&&u.isMouseOver(k,d)){var l=$(this).hasClass("inactiveProject");var f=l?$("#projectList"):$("#inactiveProjectList");var h=$("#projects");var a=h.data("popoutAreaHeight");var i=h.data("popoutTranslateTop");var j=u.relativeMousePos(k,d).top;if(h.data("showDest")&&((l&&j<a)||(!l&&d.height()-j<a))){f.removeClass("bouncing").css({top:i+"px","-webkit-transition":"top 0.2s ease-in-out","-moz-transition":"top 0.2s ease-in-out"}).bind("webkitTransitionEnd",function(){f.unbind("webkitTransitionEnd")})}v._updateDroppables(k,c)}else{$("#projectList, #inactiveProjectList").removeClass("hover")}if(intersectTrash(c.data().draggable.helper)==true){$("#trash").addClass("droppableStyle")}else{$("#trash").removeClass("droppableStyle")}},_updateDroppables:function(a,b){var c=[{elem:$("#projectList"),accept:".inactiveProject"},{elem:$("#inactiveProjectList"),accept:".project:not(.inactiveProject)"}];$.each(c,function(f,h){var d=h.elem;if(u.isMouseOver(a,d)&&b&&b.is(h.accept)){if(!d.hasClass("hover")){d.addClass("hover")}}else{if(d.hasClass("hover")){d.removeClass("hover")}}})},dragStop:function(b){$("#projectList, #inactiveProjectList").removeClass("hover");$("#projects").data("showDest",false);var a=$(this).hasClass("inactiveProject")?$("#projectList"):$("#inactiveProjectList");a.removeClass("bouncing").animate({top:"0px"},200,function(){a.removeClass("scrolledIntoView").children("h2, h3, h4, h5, .addProject, .project").removeAttr("style")});$("#trash").removeClass("droppableStyle")},dropToActive:function(b,c){var c=c==undefined?false:true;var a=false;if(fluid.main.fire("project.beforeActivate")&&!c){if(v.isOpen(b)){H.removeAll("alert","projectInactive")}H.removeAll("alert","projectLimit");v._handleActiveInactiveDrop(b,false);z.getItemById(b).removeClass("inactivePrj").addClass("activePrj");z.displayStatus(true);z.applyFilter();z.actionLoadVersions();$("#canvasPages .pageWidget").draggable("option","disabled",false);a=true}B.displayMenu();$("#projectList, #inactiveProjectList").removeClass("hover");return a},dropToInactive:function(b){var a=false;v._handleActiveInactiveDrop(b,true);H.removeAll("alert","projectLimit");B.displayMenu(false);$("#projectList, #inactiveProjectList").removeClass("hover");z.getItemById(b).addClass("inactivePrj").removeClass("activePrj");z.applyFilter();$("#canvasPages .pageWidget").draggable("option","disabled",true);a=true;return a},_handleActiveInactiveDrop:function(a,b){v.loadIfUnloaded(a,function(){var c=D.get(a);c.active=!b;c.updated=new Date().getTime();D.set(a,c);v.sync(a);v.setNumber()})},updateInactiveProjectList:function(){var a=$("#inactiveProjectList");var i=a.find(".inactiveProject");var f=a.children(".promptContainer");var h=f.css("display")!="none";var b=f.is(":visible");if(i.size()==0){if(!h){if(b){f.fadeIn(300)}else{f.show()}}}else{if(h){if(b){f.fadeOut(300)}else{f.hide()}}}var d=a.find(".projectPlaceholder");var c=d.size();d.hide().slice(-1*(c-i.size()%c)).fadeIn(300);a.removeWhitespace()},unbundle:function(b,a){a(b)},checkIntegrity:function(k){var h=D.get(k);if(h.unloaded){delete h.unloaded}v.save();if(!h){C.logout();localStorage.setItem("postloadMessage","loginAgain");location.reload()}if(!fluid.main.project.get("canvasWidth")){v.set({canvasWidth:24004})}if(!fluid.main.project.get("canvasHeight")){v.set({canvasHeight:16004})}if(!fluid.main.project.get("canvasPosX")&&fluid.main.project.get("canvasPosX")!==0){v.set({canvasPosX:1000})}if(!fluid.main.project.get("canvasPosY")&&fluid.main.project.get("canvasPosY")!==0){v.set({canvasPosY:1000})}if(typeof fluid.main.project.get("lastTransition")==="undefined"){v.set({lastTransition:"pop"})}if(typeof fluid.main.project.get("pageWH")==="undefined"){v.set({pageWH:[320,480]})}if(typeof fluid.main.project.get("orientation")==="undefined"){v.set({orientation:"Portrait"})}if(typeof fluid.main.project.get("defaultTransition")==="undefined"){v.set({defaultTransition:"slide"})}if(typeof fluid.main.project.get("defaultGesture")==="undefined"){v.set({defaultGesture:"tap"})}if(typeof fluid.main.project.get("widgetGroups")==="undefined"){v.set({widgetGroups:{}})}if(!h.pages){h.pages=[]}if(h.pages.length!==fluid.util._.uniq(h.pages).length){h.pages=fluid.util._.uniq(h.pages);v.set({pages:h.pages})}if(!D.get(h.homepage)&&h.pages.length){v.set({homepage:h.pages[0]})}for(var c=0;c<h.pages.length;c++){var j=D.get(h.pages[c]);if(!j){h.pages.splice(c,1);c--;continue}if(j.x>h.canvasWidth){B.update({x:j.x/4},h.pages[c])}if(j.y>h.canvasHeight){B.update({y:j.y/4},h.pages[c])}if(!j.height){B.update({height:480},h.pages[c])}if(!j.width){B.update({width:320},h.pages[c])}if(!j.orientation){B.update({orientation:"Portrait"},h.pages[c])}if(j.width!==~~j.width){B.update({width:~~j.width},h.pages[c])}if(j.height!==~~j.height){B.update({height:~~j.height},h.pages[c])}var d,l;if(!j.widgets){B.update({widgets:[]},h.pages[c]);j.widgets=[]}for(var f=0;f<j.widgets.length;f++){d=D.get(j.widgets[f]);if(!d){B.removeWidget(h.pages[c],j.widgets[f]);continue}else{if(d.upload&&d.upload==="y"){l=D.get(d.data);if(!l&&C.syncedUploads){continue}}}}}var a=fluid.main.project.links.toJSON();if(!a){a={linkCanvId:[],linkDest:[],linkOrigin:[],linkType:[],transType:[],triggerType:[]};h.links=a}if(typeof a.transType==="undefined"){a.transType=(a.linkType).slice(0);for(var c in a.transType){a.transType[c]=(a.linkType[c]=="ahref")?fluid.main.project.get("defaultTransition"):null}}if(typeof a.triggerType==="undefined"){a.triggerType=(a.linkType).slice(0);for(var c in a.triggerType){a.triggerType[c]=(a.linkType[c]=="ahref")?fluid.main.project.get("defaultGesture"):null}}var b=false;var i;for(var c=0;c<a.linkDest.length;c++){b=false;if(!D.get(a.linkDest[c])){a.linkCanvId.splice(c,1);a.linkDest.splice(c,1);a.linkOrigin.splice(c,1);a.linkType.splice(c,1);a.transType.splice(c,1);a.triggerType.splice(c,1);c--}else{if(!D.get(a.linkOrigin[c])){a.linkCanvId.splice(c,1);a.linkDest.splice(c,1);a.linkOrigin.splice(c,1);a.linkType.splice(c,1);a.transType.splice(c,1);a.triggerType.splice(c,1);c--}}}fluid.main.project.widgets.each(function(o,p,m){var n=o.get("segment"),q=o.get("segmentRoot"),r=o.get("lockTo"),L=o.get("seg");if((n||L)&&q&&q!==r){o.set({segmentRoot:r})}});v.save()},bundle:function(a){if(fluid.main.project&&fluid.main.project.id===a){return fluid.main.project.bundle()}else{var b=fluid.main.projects.get(a);return b.bundle()}},notifySyncAttempt:function(b,a){},sync:function(a,b){if(fluid.main.account.get("accType")=="New"){d();return}var c=fluid.main.account.get("lastOpenProject");if(a===undefined||a===null){a=c}function d(f){if($.isFunction(b)){b.call(null,f)}}v.loadIfUnloaded(a,function(){var f=D.get(a,{returnModel:true});var i=a==c?!f.isSynced():true;v.notifySyncAttempt(i,a);if(i){var h=D.get(a);h.saved=new Date().getTime();D.set(a,h,false);var j=v.bundle(a);setTimeout(function(){fluid.api.projectSync(a,j,function(){d({data:j,synced:true})},function(){H.add("alert","Could not save your project to the server. Please check your connection.")})},2000)}else{d({synced:false})}if(a==c){fluid.main.project.setModified(false)}})},setName:function(a){var b=D.get(a.id);if(!b){return}b.name=a.name;D.set(a.id,b);if(fluid.main.account.get("lastOpenProject")==a.id){C.set({name:a.name})}},sort:function(){var b=fluid.main.account.get("projectIds");var a=$.merge([],b);a.sort(function(d,f){var h=D.get(d)?D.get(d).created:0;var c=D.get(f)?D.get(f).created:0;return h-c});C.set({projectIds:a})},load:function(){C.setLoadingStep(2);if($(".submenuLink .fluidSubmenuActive").length==0){$("#fluidDropdownSubmenu a:first").addClass("fluidSubmenuActive")}v.sort();var h=fluid.main.account.get("accType");var i=fluid.main.account.get("projectIds");var b=fluid.main.account.get("maxActiveProjects");var a=0;if(b!=0&&fluid.main.projects.activeProjectCount()>b){a=fluid.main.projects.activeProjectCount()-b}z.displayFrame();$("#fluidDropdown .project").not(".addProject").remove();$(".projectThumb").not("#projectAdd").not("#profile .projectThumb").remove();z.resetFilter();for(var f=0,c=i.length;f<c;f++){var d=i[f];var j=D.get(d);if(j){j=v.ensureHeaderIntegrity(j);var k=j.active!==undefined?j.active:true;v._template(j,i[f])}fluid.main.fire("project.loaded",{step:f,count:i.length})}v.setNumber();this.updateInactiveProjectList()},ensureHeaderIntegrity:function(a){if(!a.name){a.name="New Project"}return a},windowClose:function(){D.commitCache();if(fluid.main.project.isEmpty()==false){v.sync()}},windowClose2:function(){alert("Close!");D.commitCache();if(!fluid.main.project.isEmpty()){v.sync()}},close:function(a){fluid.command.history.reset();fluid.command.create("hideButton").dispatchTo("fluid.controllers.timeline");B.detachFrame();var b=fluid.main.account.get("lastOpenProject");$("#canvas").removeClass("loaded");$(".project").removeClass("open");$(".projectThumb").removeClass("open");$(".screen").remove();$("#canvasLinks").empty();if($("#dragCanvas").length==0){$("#tmplDragCanv").tmpl({}).appendTo($("#canvas"))}if(b&&D.get(b)&&!fluid.main.projects.get(b).isEmpty()&&!v.lastProjectClosed){v.sync(null,a)}v.lastProjectClosed=true},open:function(c,a){fluid.main.fire("project.opening");$("#canvas").removeClass("loaded");v.afterOpenedCallback=a;v.openStartTime=new Date().getTime();v.uploadPreload=true;v.useLocalDb=true;fluid.command.history.reset();C.setLoadingStep(3);$("#pagePreview",B.frame||document).parent().hide();H.removeAll("alert",["projectInactive","projectLimit"]);if(!v.lastProjectClosed){v.close()}if(c=="last"){c=fluid.main.account.get("lastOpenProject");var b=D.get(c);if(!c||!b){c=v.add("","New Project")}}C.set({lastOpenProject:c});v.lastProjectClosed=false;v.loadIfUnloaded(c,v.afterLoaded.bind(this,c),{buildModel:true,setAsMain:true});A.changeActiveTab(c)},drawThumbnail:function(a){var b=$("#profile");b.find(".projectThumb").remove();var d={id:"opened_"+a,name:fluid.main.project.get("name")||"New Project"};var h=$("#tmplProjectThumb").tmpl(d);h.addClass(fluid.main.project.get("active")===false?"inactivePrj":"activePrj");var c=fluid.main.project.get("preview");if(!fluid.main.project.get("pages")||fluid.main.project.get("pages").length===0){h.append('<div class="project-thumb">Project empty</div>')}else{if(c&&c.src){h.append('<img class="project-thumb" src="'+c.src+'">')}}var f=$("#tmplProjectSettingsFrame").tmpl();$(".selectedProjectName",f).text(h.attr("title"));$(f).click(fluid.util.debounce(function(){z.lastSelectedId=fluid.main.project.get("id");v.sync();z.goToSettingsUpdate();E.open(null,$("#projectSettingsPanelSettings"))},500));f.css({opacity:0.75,display:"block"}).appendTo(h);h.addClass("selectedPrj");b.prepend(h)},adjustViewport:function(){var n=24004;var l=16004;var h=$("#viewport");var a=fluid.zoom.getPagesBounding();var m={width:n,height:n*h.height()/h.width()};if(m.height<a.maxY-a.minY+3000){m={height:a.maxY-a.minY+5000,width:h.width()*(a.maxY-a.minY+5000)/h.height()}}v.set({canvasWidth:m.width,canvasHeight:m.height});var d=a.minX+(a.maxX-a.minX)/2;var f=a.minY+(a.maxY-a.minY)/2;var j=m.width/2-d;var k=m.height/2-f;var i=fluid.main.project.get("pages");if(i.length){var b;for(var c=0;c<i.length;c++){b=D.get(i[c]);b.x=b.x+j;b.y=b.y+k;D.set(i[c],b)}}else{h.get(0).scrollTop=m.height/2*fluid.zoom.getFitParams().newScale*0.25;h.get(0).scrollLeft=m.width/2*fluid.zoom.getFitParams().newScale*0.25}},afterLoaded:function(a){if(D.get(C.get("id")).email.indexOf("@")===-1){$("#profile .projectThumb").remove()}else{v.drawThumbnail(a)}v.checkIntegrity(a);v.adjustViewport();$("#zoomedOutPages").get(0).innerHTML="";fluid.zoom.zoomToAllPages({instantSwitch:true,finishedCallback:function(b){v.preparePages(a)}})},preparePages:function(b){w.newLinks=true;function c(){var f=v.getPagesInViewport("init");if(f==0){v.centerOnHomepage();f=v.getPagesInViewport("init")}return f}var a=c();for(var d=0;d<a.length;d++){B.draw(a[d],"useCache")}v.onPagesPrepared(b);if(B.renderer&&B.renderer.countRemainingLoads()==0){fluid.main.fire("images.loaded")}},onPagesPrepared:function(a){v.updatePages(v.updateLinks);v.setSettingsPanelData();z.getItemById(a).addClass("open");document.title=fluid.main.project.get("name")+" :: Fluidui.com";$(".pageWidget").draggable("disable");$("#startMenu").delay(300).fadeIn(300);v.isInitialized=true;if(fluid.main.project.isReadOnly()){fluid.command.create("hideButton").dispatchTo("fluid.controllers.timeline");C.alertEditInactive();$("#canvasPages .pageWidget").draggable("option","disabled",true);I.setCanvasFirstPage()}else{if(fluid.main.project.get("pages").length>0){I.setCanvasFirstPage()}else{I.setCanvasNoPages()}}if(!v.previewRenderer){v.previewRenderer=new fluid.wdgRenderer()}v.previewRenderer.renderProjectPreview(v.bundle(a),function(c,d){v.onPreviewReady(c,d,"projectopen")});if(fluid.main.account.get("loggedIn")=="yes"){$("#projectName").hide().text(fluid.main.project.get("name")).fadeIn(1000).delay(1000).fadeOut(500)}var b=fluid.main.project.get("pages");if(!b||b.length==0){I.setCanvasNoPages(false)}if($.isFunction(v.afterOpenedCallback)){v.afterOpenedCallback.call(null);v.afterOpenedCallback=null}$("#zoomedOutPages").fadeIn(300);$("#canvas").addClass("loaded");$("#scaled-"+fluid.main.project.get("homepage")).addClass("homePage");fluid.main.fire("projectopened");fluid.main.fire("project.opened");if(_.keys(fluid.main.project.bundle().uploads).length===0){fluid.main.fire("images.loaded")}},onPreviewReady:function(a,f,b){$("#profile .projectThumb .loader-wrap").remove();var c=f.get(0).toDataURL();var h=D.get(a);if(!h||h.unloaded){return}h.preview={src:c};D.set(a,h,false);z.updateThumbnail(a);if(fluid.main.project.get("id")===a){var d=fluid.main.project.get("pages");if(!d||d.length===0){$("#profile .project-thumb").remove();$("#profile .projectThumb").prepend('<div class="project-thumb">Project empty</div>')}else{$("#profile div.project-thumb").remove();var i=$("#opened_"+a+"Thumb img.project-thumb");if(i.length){i.attr("src",c)}else{$("#profile .projectThumb").prepend('<img class="project-thumb" src="'+c+'">')}}}if(b!=="autopreviewgen"){v.renderMissingPreviews(b!=="projectopen"?a:null)}if(b==="projectopen"){setTimeout(v.initAutoPreviewGen.bind(this,a),v.autoPreviewTimeout)}},initAutoPreviewGen:function(a){if(fluid.main.account.get("lastOpenProject")!==a){return}v.previewRenderer.renderProjectPreview(v.bundle(fluid.main.account.get("lastOpenProject")),function(b,c){v.onPreviewReady(b,c,"autopreviewgen")});setTimeout(v.initAutoPreviewGen.bind(this,a),v.autoPreviewTimeout)},renderMissingPreviews:function(a){var c=$(".projectThumb div.preview").not(".empty");var b;if(c.length>0){b=z.getSelectedId(c.eq(0).parents(".projectThumb").attr("id"));v.renderPreview(b)}},renderPreview:function(c,a){if(c===fluid.main.project.id&&!fluid.main.project.modifiedSinceThumb){return}var b=a||"missingpreview";if(c===fluid.main.project.get("id")){$('<div class="loader-wrap"><img class="ajax-loader" src="img/ajax-loader.gif"/></div>').insertAfter("#profile .project-thumb")}v.loadIfUnloaded(c,function(){if(!v.previewRenderer){v.previewRenderer=new fluid.wdgRenderer()}v.previewRenderer.renderProjectPreview(v.bundle(c),function(d,f){v.onPreviewReady(d,f,b);if(!v.isOpen(d)){v.sync(d,function(){v.unload(d)})}})})},isOpen:function(a){if(!a){a=this.id}return a==fluid.main.account.get("lastOpenProject")},addWithoutLimit:function(a){v._freeSlotForProject();v.add(a,null,true)},add:function(b,n,m,a){var m=m==undefined?false:true;if((!C.canAddProjects())&&(!m)){H.removeAll("alert","projectLimit");var l;if(fluid.main.account.get("maxActiveProjects")<=1){l=C.alerts.projectLimitHit.onAddActive}else{l=C.alerts.projectLimitHit.onNeedHigherThanStandard}H.add("alert",l,{scope:"projectLimit",stopBuggingCallBack:v.addWithoutLimit});return false}var j;if(n==undefined){var n="";var d=D.get("projectsCount");var i=fluid.main.account.get("projectIds");if(!d){d=i.length+1}else{d+=1}function c(o){i.forEach(function(p){if(D.get(p).name===o){d+=1;o=c("Project "+d)}});return o}D.set("projectsCount",d);n=c("Project "+d)}var h=new Date().getTime();j=u.guid("p");var f={name:n,created:h,updated:h,canvasWidth:24004,canvasHeight:16004,canvasPosX:-2000*0.5,canvasPosY:-2000*0.5,orientation:"Portrait",pages:[],pageWH:[320,568],deviceModel:"iPhone5",lastTransition:"pop",defaultTransition:"pop",defaultGesture:"tap",links:{linkOrigin:[],linkDest:[],linkCanvId:[],linkType:[],transType:[],triggerType:[]}};if(!fluid.main.project){fluid.main.project=new fluid.models.project(f,{projectId:j});fluid.main.newProjectModel=fluid.main.project}else{fluid.main.newProjectModel=new fluid.models.project(f,{projectId:j})}fluid.main.projects.add(fluid.main.newProjectModel);C.addProjectId(j);D.set(j,f);fluid.main.newProjectModel.save(function(){if(a){a(j)}});var k=v._template(f,j);v.setNumber();z.applyFilter();v.sync(j,false);return j},del:function(a,b){function c(){function h(){$("#fluidDropdown #"+a).draggable("destroy").fadeOut(300,function(){var k=$(this).hasClass("inactiveProject");$(this).remove();if(k){v.updateInactiveProjectList()}A.updateUploadsProjectsList()});var i=fluid.main.account.get("projectIds");i=fluid.util._.without(i,a);C.set({projectIds:i});var j=v.unload(a);D.remove(a);v.setNumber();z.displayFrame();z.getItemById(a).remove();z.refreshListHeader();if(b){b.call(null,j)}}fluid.api.remove(a,h,h)}var d=v.isOpen(a);if(d){v.close()}var f=D.get(a);f.removed=true;f.updated=new Date().getTime();D.set(a,f);if(fluid.main.projects.get(a).isEmpty()){c()}else{v.sync(a,c)}H.removeAll("alert","projectAction");H.add("alert","Your project has been deleted.  In case you want to restore, please open the bin...",{scope:"projectAction"});fluid.controllers.bin.show()},rename:function(b){var a=E.isOpen?z.lastSelectedId:$(b.target).closest(".project").attr("id");var c=$(b.target).val();v.setName({name:c,id:a});v.sync(a,false);if(v.isOpen(a)){document.title=fluid.main.project.get("name")+" :: Fluidui.com"}$(".title","#"+a).val(c);$(".selectedProjectName").text(c);z.getItemById(a).attr({"data-name":c.toLowerCase(),title:c,alt:c});fluid.main.trigger("projectNameChanged");return false},readOnly:function(){return fluid.main.project.get("active")===false},storageChangeProjectHandler:function(a,b){if((!b)||(!b.timeUpdated)){return}if(/^[xwp]/.test(b.id)){if(/^p/.test(b.id)&&(b.id!=fluid.main.account.get("lastOpenProject"))){return}fluid.main.project.setModified(true)}},unload:function(a,c){return D.get(a);if(!c){c=D.get(a)}if(this.previewRenderer){this.previewRenderer.onProjectUnloaded(a)}if(!c.unloaded){v._deleteProjectPages(a);for(var b in c){if(c.hasOwnProperty(b)&&$.inArray(b,v.unloadedProps)==-1){delete c[b]}}c.unloaded=true;D.set(a,c)}return c},unloadOldest:function(){var j,c,d;var b=fluid.main.account.get("projectIds");for(var f=0,h=b.length;f<h;f++){var a=b[f];if(a!=fluid.main.account.get("lastOpenProject")){var i=D.get(a);if(!i.unloaded&&(!d||d>i.updated)){d=i.updated;j=a;c=i}}}if(c){v.unload(j,c)}else{throw"Could not find a project to unload"}},loadIfUnloaded:function(h,a,d){function c(){if($.isFunction(a)){a.apply(this,arguments)}}var b=D.get(h);if(b&&b.unloaded){function f(n){var k=JSON.parse(n);if(k.r==="f"){var j=D.get(h,{returnModel:true});if(j){j.set({unloaded:false})}c();return}var l=k.t;if(l.length){l=l[0].replace(/[\r\n]/g,"\\n")}else{l=l.replace(/[\r\n]/g,"\\n")}var o=JSON.parse(l);var j=fluid.main.projects.get(h);var i=fluid.main.projects.indexOf(j);o[h].unloaded=false;o[h].removed=false;o[h].uniqueUploads=Object.keys(o.uploads);var m=fluid.main.project=new fluid.models.project(o,{parse:true,projectId:h});if(!d||d.setAsMain!==false){fluid.main.project=m}if(j&&j.get("active")===false){m.set({active:false})}fluid.main.projects.remove(j);fluid.main.projects.add(m,{at:i});c(m.bundle())}fluid.api.syncDown(h,false,false,f,f)}else{if(d&&d.setAsMain){fluid.main.project=fluid.main.projects.get(h);c()}else{c(v.bundle(h));return}}},resetCanvas:function(){var b=-1000,a=-1000;v.set({canvasPosY:a,canvasPosX:b});$("#viewport").get(0).scrollLeft=b;$("#viewport").get(0).scrollTop=a},centerOnHomepage:function(){var h=fluid.main.project.get("homepage");if(h){var a=D.get(h),c=u.getTLWH("#canvas"),d=u.getTLWH("#viewport");var f=fluid.zoom.getCurrentScale(),i=Math.max((a.x*f+(a.width*f-d.width)/2),10),b=Math.max((a.y*f+(a.height*f-d.height)/2),10);if(i+d.width-10>c.width){i=c.width-d.width-10}if(b+d.height-10>c.height){b=c.height-d.height-10}$("#viewport").get(0).scrollLeft=i;$("#viewport").get(0).scrollTop=b;v.set({canvasPosY:-b,canvasPosX:-i})}},updateOnSignup:function(){v.setNumber();v.previewRenderer.renderProjectPreview(v.bundle(fluid.main.account.get("lastOpenProject")),function(a,b){v.onPreviewReady(a,b,"projectopen")})},_freeSlotForProject:function(){var h=false;if(!C.canAddProjects()){var d=fluid.main.account.get("projectIds");for(var f in d){var a=d[f];var b=D.get(a);if(b){var c=b.active!==undefined?b.active:true;if(c){if(!v.isOpen(a)){v.dropToInactive($("#"+a));h=true;break}}}}}if(!h){v.dropToInactive($("#"+fluid.main.account.get("lastOpenProject")))}},getPagesInViewport:function(f){var b=[];var c=document.getElementById("viewport");var p=$.extend([],fluid.main.project.get("pages"));var l=fluid.zoom.getCurrentScale();var o={left:f==="init"?-fluid.main.project.get("canvasPosX")/l:c.scrollLeft/l,top:f==="init"?-fluid.main.project.get("canvasPosY")/l:c.scrollTop/l,width:window.innerWidth/l,height:window.innerHeight/l};o.right=o.left+o.width;o.bottom=o.top+o.height;var j,d,n,h,a,k;var m;for(var i=0;i<p.length;i++){m=p[i];p[i]=$.extend({},D.get(p[i]));j=p[i].x;d=p[i].x+p[i].width;n=p[i].y;h=p[i].y+p[i].height;a=p[i].width;k=p[i].height;if(f!=="strict"&&((j<=o.right)&&(o.left<=d)&&(n<=o.bottom)&&(o.top<=h))){b.push(m)}else{if(f==="strict"&&((d<=o.right)&&(o.left<=j)&&(h<=o.bottom)&&(o.top<=n))){b.push(m)}}}fluid.main.project.set({visiblePages:b});return b},getLinksInViewport:function(h){var b=v.getPagesInViewport(h);var c=fluid.main.project.links.toJSON();var a={linkCanvId:[],linkDest:[],linkOrigin:[],linkType:[],transType:[],triggerType:[]};var f;for(var d=0;d<c.linkCanvId.length;d++){f=D.get(c.linkOrigin[d],{returnModel:true});if(b.indexOf(c.linkDest[d])!==-1||(f&&b.indexOf(f.getPage().id)!==-1)){a.linkCanvId.push(c.linkCanvId[d]);a.linkDest.push(c.linkDest[d]);a.linkOrigin.push(c.linkOrigin[d]);a.linkType.push(c.linkType[d]);a.transType.push(c.transType[d]);a.triggerType.push(c.triggerType[d])}}return a},updateThumbsActiveStatus:function(){$("#projectSettingsPanelMain .projectThumb").each(function(){var a=$(this);var c=a.attr("id");if(c.indexOf("Thumb")!==-1){c=c.substring(0,c.indexOf("Thumb"));var b=fluid.main.projects.get(c);if(b&&b.get("active")===false){a.removeClass("activePrj").addClass("inactivePrj")}else{a.removeClass("inactivePrj").addClass("activePrj")}}})},setSettingsPanelData:function(){var b=fluid.main.project.get("orientation");var a=$("#deviceSettingsMenu").find(".buttonSwitchContainer");if(a.length===0){a=$(B.menu).find("#deviceSettingsMenu .buttonSwitchContainer")}a.children().removeClass("activeOption");a.find("[data-for='"+b+"']").addClass("activeOption")},updatePages:function(j,a){var i=$(".screen");var b=v.getPagesInViewport();var d=fluid.main.project.get("pages");var h;var c=i.filter(function(){if(b.indexOf($(this).attr("id"))!==-1){return false}else{return true}});c=c.filter(function(l,k){if(k.getAttribute("id")!==u.getActivePageId()){return true}else{return false}});var f;a=a||fluid.zoom.getAllPagesParams().newScale;requestAnimationFrame(function(){if(d.length!==fluid.main.project.pages.length){return}for(var k=0;k<b.length;k++){f=i.filter("#"+b[k]);if(f.length===0){B.draw(b[k],"useCache")}else{if(!f.is(":visible")){f.show()}}}for(var k=0;k<d.length;k++){h=D.get(d[k]);$("#scaled-"+d[k]).css({top:h.y*a,left:h.x*a,width:h.width*a,height:h.height*a})}var l=fluid.zoom.getAllPagesParams();if(fluid.zoom.getCtx()!=="project"){$("#zoomedOutPages").css({"-webkit-transform":"scale("+$("#canvas").width()/(fluid.main.project.get("canvasWidth")*l.newScale)+")","-moz-transform":"scale("+$("#canvas").width()/(fluid.main.project.get("canvasWidth")*l.newScale)+")"});fluid.zoom.setLastTransScale($("#canvas").width()/(fluid.main.project.get("canvasWidth")*l.newScale))}if(j){j()}c.hide()})},updateLinks:function(d){var c=$(".link");var f=v.getLinksInViewport();var a=c.filter(function(){if(f.linkCanvId.indexOf($(this).attr("id"))!==-1){return false}else{return true}});var b;var h=fluid.zoom.getCurrentScale();requestAnimationFrame(function(){var i=fluid.main.project.get("links");var j=j={linkCanvId:[],linkDest:[],linkOrigin:[],linkType:[],transType:[],triggerType:[]};for(var k=0;k<f.linkCanvId.length;k++){b=c.filter("#"+f.linkCanvId[k]);if(b.length===0){j.linkCanvId.push(f.linkCanvId[k]);j.linkDest.push(f.linkDest[k]);j.linkOrigin.push(f.linkOrigin[k]);j.linkType.push(f.linkType[k]);j.transType.push(f.transType[k]);j.triggerType.push(f.triggerType[k])}}w.load(j);w.drawSome(f,h);a.hide();if(d){d()}})},afterClone:function(a,b){var d=new Date();b.created=b.updated=d.getTime();b.active=C.canAddProjects();C.addProjectId(a);D.set(a,b,false);C.set({lastOpenProject:a});v._template(b,a);v.setNumber();var c=z.getItemById(a);z.displayFrame(c);var i=moment().format("MMMM Do YYYY");$("#selectedProjectNameEdit").val("Copy of "+$("#selectedProjectNameEdit").val());$(".projectSettingsLastUpdateDate").text("Modified on "+i);$(".projectSettingsCreationDate").text("Created on "+i);z.displayStatus(b.active);if(b.active){$(".projectSettingsButtonVersions").text("Version History");z.actionLoadVersions()}fluid.main.fire("afterprojectcloned",a,b);function h(l){var k=JSON.parse(l).t;var m=JSON.parse(k);for(var j in m){if((j!="uploads")&&(j!=a)){if(m.hasOwnProperty(j)){D.set(j,m[j])}}}}fluid.api.syncDown(a,false,false,h,h);function f(){$("#selectedProjectNameEdit").focus();$(".actionOpenProject").removeClass("disabled");fluid.main.trigger("projectCloned")}setTimeout(f,600)},cloneCallback:function(j,l){var k=z._callbackSanitize(j,l,"defaultShort");if(k==null){return}var c=new fluid.models.project(k.projectData,{parse:true,projectId:k.newProjectId});fluid.main.projects.add(c,{silent:true});var m=new Date().getTime();c.set({created:m,updated:m,active:C.canAddProjects()});var d=c.toJSON();var i=k.newProjectId;var a=JSON.parse(k.projectData);d=a[i];var b=a.uploads;var h=Object.keys(b).length;var f=0;if(b&&h){$.each(b,function(n){currentUpload=D.get(n);if(currentUpload.groups){if($.inArray(d.id,currentUpload.groups)===-1){currentUpload.groups.push(d.id)}}else{currentUpload.groups=[d.id]}D.set(n,currentUpload);f+=1;if(f===h){v.afterClone(i,d)}})}else{v.afterClone(i,d)}},clone:function(c,a){var b=v.bundle(a);fluid.api.projectSync(a,b,function(){fluid.api.projectDuplicate(a,v.cloneCallback)},function(){H.add("alert","Could not save your project to the server. Please check your connection.")})},lastProjectClosed:true};fluid.main.on("projectclonetrigger",v.clone);fluid.main.on("noprojectssynceddown",function(){v.add("","",null,function(a){v.open(a);v.setNumber()})});fluid.main.on("projects.synced",v.sort);fluid.main.on("uploads.synced",function(b,a){fluid.main.fire("projects.loading",{count:a.length});v.load();fluid.main.fire("projects.loaded")});fluid.main.on("editor.afterAccountRegister",v.updateOnSignup);fluid.main.on("afteruploadssynced",function(){var b=fluid.main.account.get("lastOpenProject");var a=fluid.main.account.get("projectIds");if(a.length>0){v.open((($.inArray(b,a)>-1&&b)||fluid.main.projects.getLatestActiveProject()||a[a.length-1]))}});fluid.main.on("fluidmenuopenedbyuser",function(){v.renderPreview(fluid.main.project.get("id"))});fluid.main.on("canvasdragstop",function(){if(fluid.zoom.getCtx()!=="project"){v.updatePages();v.updateLinks()}else{if(v.getPagesInViewport("strict").length<v.get("pages").length){fluid.zoom.zoomToAllDebounced()}}});fluid.main.on("beforepaneldisplay",function(b,a){if(a==="projectSettingsPanelMain"){v.updateThumbsActiveStatus()}});fluid.main.on("projectIntegrityCheckNeeded",function(){v.checkIntegrity(fluid.main.project.get("id"))});fluid.main.on("beforelogout",function(){v.sync(null,C.syncedBeforeLogout)});fluid.main.on("needprojectsync",function(){v.sync()});fluid.main.on("loggingout projectclosetrigger",function(){v.close()});fluid.main.on("editor.afterLogout",function(){v.load()});fluid.main.on("orientationchange",function(b,a){v.orient(a);v.updatePages();v.updateLinks()});fluid.main.on("projectpreviewneeded",function(c,a,b){v.renderPreview(a,b)});fluid.main.on("projectloadneeded",function(d,a,b,c){v.loadIfUnloaded(a,b,c)});fluid.main.on("projectactivestatuschange",function(d,a,c){var b=false;if(c){b=v.dropToActive(z.lastSelectedId)}else{b=v.dropToInactive(z.lastSelectedId);fluid.main.fire("projectInactive")}fluid.main.fire("afterprojectstatuschange",a,b)});fluid.main.on("projectrenametrigger",function(b,a){v.rename(a)});fluid.main.on("projectaddtrigger",function(f,a){var d=parseInt(fluid.main.account.get("maxActiveProjects"),10);var b=fluid.main.projects.filter(function(i){if(i.get("removed")){return false}else{return true}}).length;if(d!==0&&b>=d){fluid.main.fire("account:alert","projectLimitHit","onAddActive")}else{var c=v.add(a);if(c){var h=z.getItemById(c);z.displayFrame(h);fluid.main.trigger("projectCreated",c)}}});fluid.main.on("projectopentrigger",function(c,a,b){v.open(a,b)});fluid.main.on("updatepagesandlinksneeded",function(){v.updatePages();v.updateLinks()});fluid.main.on("userSettings.closePanels",function(){if(!fluid.main.project||fluid.main.project.get("removed")){var a=fluid.main.account.get("projectIds");if(a.length){v.open(a[a.length-1])}else{v.add("","",null,function(b){v.open(b)})}}});fluid.main.on("accountupgraded",function(b,a){if(fluid.main.projects.activeProjectCount()>a.maxActiveProjects){v.load()}else{v.setNumber();z.resetFilter()}});fluid.main.on("branding.uploadError branding.uploadComplete",function(b,a){if(!a){a={}}if(a.needSync&&a.projectId){v.sync(a.projectId,null)}else{if(a.projectObj){v.set(a.projectObj)}}});fluid.main.on("editor.afterLogout",function(){var a=v.add(null,"Project 1");v.load();fluid.command.create("open",{id:a}).dispatchTo("fluid.controllers.project")});window.projTempObj=v;J.exports=v},{"./class-account":3,"./class-fluidMenu":11,"./class-lib":15,"./class-link":16,"./class-notification":17,"./class-page":18,"./class-projectSettings":24,"./class-staticWidgets":32,"./class-storage":33,"./class-userSettings":35,"./class-wdgRenderer":36,"./fluid/fluid.command":45,"./fluid/fluid.i18n":47,"./utils":69}],24:[function(A,C,w){var u=A("./class-storage");var D=A("./class-event");var t=A("./class-panels");var v=A("./class-userSettings");var s=A("./class-page");var p=A("./class-staticWidgets");var q=A("./utils");var z=A("./class-branding");var B=A("./class-notification");var r={hasScroll:false,lastSelectedId:null,lastSettingsUpdateId:null,lastView:"Thumb",lastVersions:new Array(),recentProjectDays:15,mainDashTitles:{all:"All Projects",activePrj:"Active Projects",inactivePrj:"Inactive Projects",todayPrj:"Today's Projects",recentPrj:"Recent Projects"},hiddingElements:0,init:function(){$(".projectSettingsButton").live({click:_.debounce(r.open,500,true)});$("#projectSettingsFilter li").live({click:_.debounce(r.selectFilter,500,true)});$("#projectSettingsSearchBoxInput").live({focus:_.debounce(r.displayFilters,500,true),blur:_.debounce(r.displayFilters,500,true),keydown:function(a){if(a.keyCode==13){r.applyFilter()}}});$("#projectSettingsPanelMain").live({click:_.debounce(r.unselectProject,500,true)});$("#projectSettingsPanelMain .projectThumb").live({click:r.selectProject});$("#projectAdd").live({click:fluid.util.debounce(r.actionAdd,500,true)});$(".actionOpenProject").live({click:_.debounce(r.actionOpen,500,true)});$("#selectedProjectNameEdit").live({blur:_.debounce(r.actionRename,500,true)});$(".buttonSwitch","#projectSettingsSettingsTop").live({click:_.debounce(r.actionChangeStatus,500,true)});$(".dropDownStyled select").live({change:fluid.util._.debounce(function(a){if(a.target.id==="deviceModelTemplate"){r.lastSelectedId=fluid.main.project.get("id");fluid.main.fire("projectSettings.lastSelectedChange",r.lastSelectedId);r.actionChangeValue(a)}else{r.actionChangeValue(a)}},500,true)});$(".buttonSwitch","#projectSettingsValuesTop").live({click:_.debounce(r.actionChangeOrientation,500,true)});$(".projectSettingsButtonClone").live({click:_.debounce(r.actionClone,500,true)});$(".projectSettingsButtonDelete").live({click:_.debounce(r.actionDelete,500,true)});$(".projectSettingsVersionRestore").live({click:_.debounce(r.actionRestoreVersion,500,true)});$(".brandingSettingsRow").bind("change",r.onBrandingChange).bind("reset",r.onBrandingReset);$("#updateBranding").bind("click",function(a){r.onBrandingSubmit(a)});$("#brandingImageTable .chooseFile.disabled").live("click",function(a){fluid.main.fire("account:alert","projectLimitHit","onFeatureStandard")});$(".projectOptionsButtonSettings").live({click:_.debounce(r.goToSettings,500,true)});$(".projectSettingsButtonShare, .projectSettingsButtonShared").live({click:_.debounce(r.goToShare,500,true)});$(document).on("click",".projectSettingsButtonDevice",fluid.util._.debounce(function(a){if(a.target.classList.contains("disabled")){B.add("alert","You can only change the device type of the currently opened project.");return}r.goToValues(a)},500,true));$(".projectSettingsButtonBranding").live("click",_.debounce(r.goToBranding,500,true));$(".projectSettingsButtonVersions").live({click:_.debounce(r.goToVersions,500,true)});D.bindEditor("panelGoBack",r.goToBackEnhancer);$(window).resize(r._resizeScreen)},goToBackEnhancer:function(a,b){if(!b){return}if(b.panelId=="projectSettingsPanelMain"){r.lastSettingsUpdateId=null;setTimeout(r.autoSelectOnOpen,800,true);return}},open:function(a){var b=a?$(a.target):null;if((b)&&((b.hasClass("buttonDisabled"))||(b.parent().hasClass("buttonDisabled")))){return}r.unselectProject();r.refreshListHeader();v.open(null,$("#projectSettingsPanelMain"));r.adjustMainPanelSize();$("#projectSettingsFilter").hide();fluid.controllers.bin.showNonEmpty();setTimeout(r.autoSelectOnOpen,800)},autoSelectOnOpen:function(a){var b=a?r.lastSelectedId:fluid.main.account.get("lastOpenProject");r.actionSelectProject(r.getItemById(b))},close:function(){r.lastSelectedId=null;fluid.main.fire("projectSettings.lastSelectedChange",r.lastSelectedId);r.lastSettingsUpdateId=null;r.lastVersions=new Array();v.close(null,false)},adjustMainPanelSize:function(){var b=$("#projectSettingsPanelMain .projectThumb").not(".hidden").size();var f=3;var a=Math.ceil(b/f);var c=(a*180)-20;var d=$(window).height()-210;d=c<d?c:d;d=d>570?570:d;$("#projectSettingsMainTop").css({height:d+"px"});if(d<c){r.hasScroll=true;t.adjustScroll($("#projectSettingsMainTop"));$("#projectSettingsMainTop").removeClass("no-scroll");$(".scrollbar","#projectSettingsMainTop").fadeIn(300)}else{r.hasScroll=false;$("#projectSettingsMainTop").addClass("no-scroll").tinyscrollbar().tinyscrollbar_update();$(".scrollbar","#projectSettingsMainTop").hide()}},adjustVersionsPanelSize:function(){var a=$(".projectVersionItem").size();var b=(a*60);var c=$(window).height()-220;c=b<c?b:c;$("#projectSettingsVersionsTop").css({height:c+"px"})},selectProject:function(b){var a=$("#projectSettingsPanelMain .projectOptionsFrame");var c=$(b.target);c=c.hasClass("projectThumb")?c:c.parents(".projectThumb");var d=c.attr("id");if((a.is(":visible"))&&((d==a.parent().attr("id"))||(c.hasClass("projectOptionsFrame"))||(c.parents(".projectOptionsFrame").size()>0))){r.actionOpen(b);return false}r.actionSelectProject(c);b.stopPropagation()},actionSelectProject:function(a){if(a==undefined){r.unselectProject();return}if(r.hasScroll){r._scrollToSelected(a)}r.displayFrame(a)},unselectProject:function(a){if(a!=undefined){if($(a.target).hasClass("projectThumb")){a.stopPropagation();return false}if(($(a.target).hasClass("projectSettingsSearchBox"))||($(a.target).parents(".projectSettingsSearchBox").size()>0)){return true}}r.displayFrame()},displayFrame:function(b){var c=true;if((b==undefined)||(b.hasClass("projectPlaceholder")||b.parent().hasClass("projectPlaceholder"))){c=false}$(".projectThumb").removeClass("selectedPrj");$("#projectSettingsPanelMain .projectOptionsFrame").hide().remove();if(c){var d=$("#tmplProjectSettingsFrame").tmpl();$(".selectedProjectName",d).text(b.attr("title"));d.css({opacity:0.75}).appendTo(b);d.fadeIn(250);r.lastSelectedId=r.getSelectedId(b.attr("id"));fluid.main.fire("projectSettings.lastSelectedChange",r.lastSelectedId);b.addClass("selectedPrj")}else{var a=$("#projectSettingsPanelSettings").is(":visible");if(!a||r.lastSelectedId!=r.lastSettingsUpdateId){r.lastSelectedId=null;fluid.main.fire("projectSettings.lastSelectedChange",r.lastSelectedId)}}},displayFilters:function(a){function b(){r.applyFilter();$("#projectSettingsFilter").hide()}if(!$("#projectSettingsFilter").is(":visible")){$("#projectSettingsFilter").fadeIn(250);return}setTimeout(b,200)},resetFilter:function(){$("#projectSettingsFilter li").removeClass("activeMenuOption");$("#projectSettingsSearchBoxInput").val("");r.applyFilter()},selectFilter:function(a){var b=$(a.target);var d=b.hasClass("activeMenuOption");var c=b.attr("data-filter")==undefined?"data-sort":"data-filter";if(d){b.removeClass("activeMenuOption")}else{$("#projectSettingsFilter li["+c+"]").removeClass("activeMenuOption");b.addClass("activeMenuOption")}if(c=="data-filter"){r.applyFilter()}else{r.applySort()}a.stopPropagation();return false},applyFilter:function(){if(r.hiddingElements>0){return}var a=$("#projectSettingsFilter li[data-filter].activeMenuOption");var c=a.size()==0?"all":a.attr("data-filter");var f=$.trim($("#projectSettingsSearchBoxInput").val().toLowerCase());var b=$(".projectThumb","#projectSettingsMainContent").not(".projectPlaceholder");var h=b;if(f!=""){h=b.filter("[data-name*='"+f.toLowerCase()+"']")}if((c=="todayPrj")||(c=="recentPrj")){r._refreshFilterAttributes()}if(c!="all"){h=h.filter("."+c)}var d=b.not(h);h.removeClass("hidden");d.each(r._hideProjectFromList);if(d.size()==0){r.postApplyFilter()}},postApplyFilter:function(){r.refreshListHeader();if($(".projectOptionsFrame").parent().hasClass("hidden")){r.unselectProject()}r.adjustMainPanelSize()},applySort:function(){var a=$("#projectSettingsFilter li[data-sort].activeMenuOption");var c=a.size()==0?"":a.attr("data-sort");var d=a.size()==0?"":a.attr("data-order");if(c!=""){var b=$(".projectThumb","#projectSettingsMainContent");if(d=="desc"){$("#projectSettingsMainContent").append(b.sort(function(f,h){return(f=$(f).attr("data-"+c),h=$(h).attr("data-"+c),f==undefined||f==""?-1:f==h?0:f>h?1:-1)}))}else{$("#projectSettingsMainContent").append(b.sort(function(f,h){return(f=$(f).attr("data-"+c),h=$(h).attr("data-"+c),f==undefined||f==""?-1:f==h?0:f<h?1:-1)}))}t.adjustScroll($("#projectSettingsMainTop"))}},_refreshFilterAttributes:function(){var a=$(".projectThumb","#projectSettingsMainContent").not(".projectPlaceholder");var c=moment().format("YYYY/MM/DD");var b=moment().subtract("days",r.recentProjectDays).format("YYYY/MM/DD");a.each(function(h,l){var m=r.getSelectedId($(l).attr("id"));var f=u.get(m);var d=moment(f.updated).format("YYYY/MM/DD HH:mm:ss");var k=d.split(" ")[0];var i=c==k;var j=k>b;$(l).attr("data-updated",d);if(i){$(l).addClass("todayPrj")}else{$(l).removeClass("todayPrj")}if(j){$(l).addClass("recentPrj")}else{$(l).removeClass("recentPrj")}})},actionDelete:function(a){if(!r.lastSelectedId){r.lastSelectedId=$("#selectedProjectNameEdit").attr("data-id");fluid.main.fire("projectSettings.lastSelectedChange",r.lastSelectedId)}fluid.command.create("drop",{id:r.lastSelectedId}).dispatchTo("fluid.controllers.bin");$("#"+r.lastSelectedId+"Thumb").remove();setTimeout(function(){r.open();setTimeout(function(){v._fixCloseButton(false)},500)},500)},actionAdd:function(a){fluid.main.fire("projectaddtrigger")},actionOpen:function(b){var a=r.lastSelectedId;if(r.lastSelectedId===fluid.main.project.get("id")&&!((a)&&(a!="")&&r.openingId!==a)){r.close()}if($(".actionOpenProject").hasClass("disabled")){return false}if((a)&&(a!="")&&r.openingId!==a){r.openingId=a;fluid.command.create("open",{id:a,onLoad:function(){r.close();r.openingId=null}}).dispatchTo("fluid.controllers.project")}},actionRename:function(a){fluid.main.fire("projectrenametrigger",a);r.applyFilter();r.applySort()},actionActivateForced:function(){var a=$("#"+r.lastSelectedId);project.dropToActive(a,true)},actionChangeStatus:function(a){var b=$(a.target);if(b.hasClass("activeOption")){return false}function c(){var h=b.hasClass("switchOn")?true:false;var d=false;var f=$("#"+r.lastSelectedId);if(h){if(fluid.zoom.getCtx()!=="project"){$("#library").show()}else{$("#library").hide()}}else{if($("#tabLibrary").hasClass("open")){if(fluid.zoom.getCtx()!=="project"){$("#library").show()}else{$("#library").hide()}}}fluid.main.fire("projectactivestatuschange",r.lastSelectedId,h);r.displayStatus(h)}setTimeout(c,100)},actionTransferCallback:function(a,b){if(a&&a[0]==="{"){a=JSON.parse(a);if(a.r==="f"){b=a.t}}fluid.main.fire("projecttransfercomplete",b,a)},actionChangeValue:function(b){var o=$(b.target);var d=o.attr("data-for");if((d=="deviceModel")&&(r.isLastSelectedOpen())){var i=$(b.target);var m=i.find("option:selected").data("type"),K=fluid.main.project.get("deviceModel"),n=u.get(q.getLatestActiveProject()),l={};hasOldBranding=false;hasNewBranding=false;l.newDevice=m;l.oldDevice=K;for(var a in n){hasOldBranding=hasOldBranding||(a.indexOf(K)!==-1&&/Branding$/.test(a)&&n[a]);hasNewBranding=hasNewBranding||(a.indexOf(m)!==-1&&/Branding$/.test(a)&&n[a]);if(hasOldBranding&&hasNewBranding){break}}if(hasOldBranding&&!hasNewBranding){B.add("alert",'You may need to update your <span class="inlineLink projectSettingsButtonBranding close"> branding graphics</span>')}var c=i.find("option:selected").val().split(",");if(l.newDevice==="Custom"){var J=$(".customDeviceSize.width input").val()|0,h=$(".customDeviceSize.height input").val()|0,j=$(".customDeviceSize.width input").attr("min"),k=$(".customDeviceSize.height input").attr("min");c[0]=J<j?j:J;c[1]=h<k?k:h;$(".customDeviceSize").show()}else{$(".customDeviceSize").hide()}c[0]=c[0]|0;c[1]=c[1]|0;l.newSize=c;l.oldSize=fluid.main.project.get("pageWH");fluid.command.create("settingDevice",l).dispatchTo("fluid.controllers.page");r._fixOrientationAfterDeviceChange(fluid.main.project.get("orientation"))}else{if(d=="deviceModel"){var M=o.children(":selected").attr("data-type");var f=o.val().split(",");var n=r.getLastSelectedObject();f=n.orientation=="Portrait"?f:f.reverse();r.actionChangeValueData(b,d,M,false);r.actionChangeValueData(b,"pageWH",f)}else{r.actionChangeValueData(b,d,o.val())}}if(d=="deviceModel"){var M=o.children(":selected").attr("data-type");var L=r.getDeviceLabel(M);$(".projectSettingsButtonDevice").text("Device Settings ("+L+")")}s.updateSettingsMenu()},actionChangeOrientation:function(b){var d=$(b.target);if(d.hasClass("activeOption")){return false}var f=d.attr("data-for");var c=r.getLastSelectedObject();if(r.isLastSelectedOpen()){r.actionChangeValueData(b,"orientation",f)}else{r.actionChangeValueData(b,"orientation",f,false);r.actionChangeValueData(b,"pageWH",[c.pageWH[1],c.pageWH[0]])}d.siblings().removeClass("activeOption");d.addClass("activeOption");var a=$(".screen.active");if(a.length){p.showStaticBoundary(a.attr("id"))}fluid.main.fire("project.orientantionchanged");s.detachFrame();if(a.length){s.attachFrameTo(a.get(0))}if($("#canvas").hasClass("zoomedOut")){fluid.zoom.zoomToAllPages()}},actionChangeValueData:function(i,j,b,h){if(r.isLastSelectedOpen()){if(j=="orientation"){fluid.main.fire("orientationchange",i)}else{fluid.main.project.set(j,b)}}else{var d=r.getLastSelectedObject();if((j=="pageWH")||(j=="orientation")){var a=d.pages;for(var k in a){if(j=="pageWH"){s.update({width:b[0],height:b[1]},a[k])}else{s.update({orientation:b},a[k])}}}d[j]=b;u.set(r.lastSelectedId,d);d.isModified=true}var c=h==undefined?true:h;if(c){if((j=="deviceModel")||(j=="orientation")||(j=="pageWH")){var f=r.isLastSelectedOpen()?"autopreviewgen":"missingpreview";fluid.main.fire("projectpreviewneeded",r.lastSelectedId,f);setTimeout(r.updateThumbnailMedium,3000)}else{fluid.main.fire("needprojectsync")}}},actionClone:function(){if(t.isLastButtonDisabled()){return}var b=parseInt(fluid.main.account.get("maxActiveProjects"),10);var a=fluid.main.projects.filter(function(c){if(c.get("removed")){return false}else{return true}}).length;if(b!==0&&a>=b){fluid.main.fire("account:alert","projectLimitHit","onAddActive");return}$(".actionOpenProject").addClass("disabled");t.hideErrors();t.lastSubmitButton=$(".projectSettingsButtonClone");t.enableLastButton(false,"projectClone");fluid.main.fire("projectclonetrigger",r.lastSelectedId);return false},actionCloneCallback:function(a,b){var i=function(){var J=new Date();k.created=k.updated=J.getTime();k.active=account.canAddProjects();account.addProjectId(n);u.set(n,k,false);account.set({lastOpenProject:n});project._template(k,n);project.setNumber();var I=r.getItemById(n);r.displayFrame(I);var o=moment().format("MMMM Do YYYY");$("#selectedProjectNameEdit").val("Copy of "+$("#selectedProjectNameEdit").val());$(".projectSettingsLastUpdateDate").text("Modified on "+o);$(".projectSettingsCreationDate").text("Created on "+o);r.displayStatus(k.active);if(k.active){$(".projectSettingsButtonVersions").text("Version History");r.actionLoadVersions()}if(k.active){t.setSuccessMessage("projectClone",$(".projectSettingsButtonClone"))}else{t.setSuccessMessage("projectClone",$("#selectedProjectNameEdit"))}function L(G){var F=JSON.parse(G).t;var H=JSON.parse(F);for(var E in H){if((E!="uploads")&&(E!=n)){if(H.hasOwnProperty(E)){u.set(E,H[E])}}}}fluid.api.syncDown(n,false,false,L,L);function K(){t.enableLastButton();$("#selectedProjectNameEdit").focus();$(".actionOpenProject").removeClass("disabled");fluid.main.trigger("projectCloned")}setTimeout(K,600)};var c=r._callbackSanitize(a,b,"defaultShort");if(c!=null){var j=new fluid.models.project(c.projectData,{parse:true,projectId:c.newProjectId});fluid.main.projects.add(j,{silent:true});var f=new Date().getTime();j.set({created:f,updated:f,active:account.canAddProjects()});var k=j.toJSON();var n=c.newProjectId;var d=JSON.parse(c.projectData);k=d[n];var h=d.uploads;var m=Object.keys(h).length;var l=0;if(h&&m){$.each(h,function(o){currentUpload=u.get(o);if(currentUpload.groups){if($.inArray(k.id,currentUpload.groups)===-1){currentUpload.groups.push(k.id)}}else{currentUpload.groups=[k.id]}u.set(o,currentUpload);l+=1;if(l===m){i()}})}else{i()}}return false},actionLoadVersions:function(){fluid.api.projectVersionList(r.lastSelectedId,r.actionLoadVersionsCallback,r.actionLoadVersionsCallback)},actionLoadVersionsCallback:function(b,c){var a=r._callbackSanitize(b,c);if(a!=null){r.lastVersions=a.versions;var d=a.versions.length-1;if(d<=0){d="No Older Versions Available"}else{d+=d==1?" Older Version":" Older Versions"}$(".projectSettingsButtonVersions").text(d)}},actionRestoreVersion:function(b){var c=$(b.target);var a=c.parents(".projectVersionItem");var d=a.attr("id");t.lastSubmitButton=c;fluid.api.projectVersionRestore(r.lastSelectedId,d,true,r.actionRestoreVersionCallback.bind(this,d),r.actionRestoreVersionCallback.bind(this,d))},actionRestoreVersionCallback:function(a,k,h){var c=r._callbackSanitize(k,h,"defaultShort");if(c!=null){var b=r.lastSelectedId===fluid.main.project.id;if(b){fluid.main.fire("projectclosetrigger")}var j=JSON.parse(c.projectData);var i=fluid.main.projects.get(r.lastSelectedId);var d=fluid.main.projects.indexOf(i);j[r.lastSelectedId].unloaded=false;var f=new fluid.models.project(j,{parse:true,projectId:r.lastSelectedId});fluid.main.projects.remove(i);fluid.main.projects.add(f,{at:d});if(b){fluid.main.project=f;fluid.command.create("open",{id:r.lastSelectedId}).dispatchTo("fluid.controllers.project")}else{r.updateThumbnail(r.lastSelectedId);r.goToSettingsUpdate()}fluid.main.project.set({restoredFromDate:a});v.goBack(null,"projectRestore",$(".projectSettingsButtonVersions"))}},goToSettings:function(b,a,c){if(fluid.main.project.id===r.lastSelectedId){fluid.main.fire("needprojectsync");r.goToSettingsUpdate()}else{fluid.main.fire("projectloadneeded",r.lastSelectedId,r.goToSettingsUpdate,{buildModel:true})}function d(){t.setSuccessMessage(a,c)}v._panelDisplay($("#projectSettingsPanelSettings"),true,d,true);if(b!=undefined){b.stopPropagation()}return false},goToSettingsUpdate:function(){var b=r.getLastSelectedObject(),a=b.active==undefined?true:b.active,c=r.getDeviceLabel(b.deviceModel||"iPhone"),d=b.id===fluid.main.project.id;r.lastSettingsUpdateId=b.id;$("#selectedProjectNameEdit").val(b.name).attr("data-id",b.id);$(".selectedProjectName").not("#profile .selectedProjectName").text(b.name);$(".projectSettingsLastUpdateDate").text("Modified on "+moment(b.updated).format("MMMM Do YYYY"));$(".projectSettingsCreationDate").text("Created on "+moment(b.created).format("MMMM Do YYYY"));$(".projectSettingsButtonDevice").text("Device Settings ("+c+")")[d?"removeClass":"addClass"]("disabled");r.displayStatus(a);r.updateThumbnailMedium();if(a){$(".projectSettingsButtonVersions").text("Version History");r.actionLoadVersions()}},goToShare:function(){fluid.main.trigger("projectSharingOpened");if($("#projectSettingsShareTop").children().size()==0){var a=$("#previewShareContainer").html();a=a.replace(/accordionPreviewSharing/g,"accordionProjectSharing");$("#projectSettingsShareTop").html(a)}share.init(r.lastSelectedId);v._panelDisplay($("#projectSettingsPanelShare"),true,null,true)},goToTransfer:function(){$(".projectSettingsTransferRecipients").val("");$(".projectSettingsTransferRemoveLocalInput").removeAttr("checked");if(r.isLastSelectedOpen()){$("#projectSettingsTransferRemoveLocalArea").hide()}else{$("#projectSettingsTransferRemoveLocalArea").show()}v._panelDisplay($("#projectSettingsPanelTransfer"),true,null,true)},goToBranding:function(){var b=document.getElementById("brandingImageTable"),a=z.deviceScreen().screen,c=r.getLastSelectedObject(),h=c.deviceModel||"iPhone",f="tr.brandingSettingsRow[data-key=splash]";switch(h){case"iPhone":var d=b.querySelector(".brandingSettingsRow[data-key=splash] p[data-recommended]");d.setAttribute("data-recommended",z.screens.iPhone4.splash.replace("x"," \u00D7 "));f="tr.brandingSettingsRow:not([data-key=splash]):not([data-key=icon])";break;case"iPhone5":var d=b.querySelector(".brandingSettingsRow[data-key=splash] p[data-recommended]");d.setAttribute("data-recommended",z.screens.iPhone5.splash.replace("x"," \u00D7 "));f="tr.brandingSettingsRow:not([data-key=splash]):not([data-key=icon])";break;case"iPad":b.querySelector(".brandingSettingsRow[data-key=splashP] p[data-recommended]").setAttribute("data-recommended",z.screens.iPadRetina.splashP.replace("x"," \u00D7 "));b.querySelector(".brandingSettingsRow[data-key=splashL] p[data-recommended]").setAttribute("data-recommended",z.screens.iPadRetina.splashL.replace("x"," \u00D7 "));break;default:b.querySelector(".brandingSettingsRow[data-key=splashP] p[data-recommended]").setAttribute("data-recommended",c.pageWH[0]+"\u00D7"+c.pageWH[1]);b.querySelector(".brandingSettingsRow[data-key=splashL] p[data-recommended]").setAttribute("data-recommended",c.pageWH[0]+"\u00D7"+c.pageWH[1]);break}if(z.screens[h]){b.querySelector(".brandingSettingsRow[data-key=icon] p[data-recommended]").setAttribute("data-recommended",z.screens[h].icon+" \u00D7 "+z.screens[h].icon)}else{b.querySelector(".brandingSettingsRow[data-key=icon] p[data-recommended]").setAttribute("data-recommended",z.screens.iPhone5.icon+" \u00D7 "+z.screens.iPhone5.icon)}_.each(b.querySelectorAll("tr.brandingSettingsRow"),function(i,j,k){i.style.display=""});_.each(b.querySelectorAll(f),function(i,j,k){i.style.display="none"});r.brandingUpdatePreview();z.resetChange();v._panelDisplay($("#projectSettingsPanelBranding"),true,r.afterBrandingPanelShow,true)},afterBrandingPanelShow:function(){fluid.main.fire("branding.panelShow")},brandingUpdatePreview:function(){var c=document.getElementById("brandingImageTable"),a=c.querySelectorAll("tr.brandingSettingsRow"),h=c.getElementsByTagName("form");_.forEach(h,function(j){j.reset()});for(var d=0,i=a.length;d<i;d++){var f=a[d].getAttribute("data-key"),b;if(!/icon|splashiPhone/.test(f)){f+=r.getLastSelectedObject().deviceModel}b=z.getUrl(f);if(b){a[d].getElementsByClassName("brandingPreview")[0].src=b;a[d].classList.add("set")}else{a[d].getElementsByClassName("brandingPreview")[0].src=a[d].getAttribute("data-default");a[d].classList.remove("set")}}},previewBrandingImage:function(d,a,b){var c=d.getAttribute("changeTime");if(c&&c>b){return}d.setAttribute("changeTime",b);d.src=a},onBrandingChange:function(b){var d=this.querySelector("img.brandingPreview"),c=this.getAttribute("data-key"),f=r.getLastSelectedObject().deviceModel;if(!/icon|splashiPhone/.test(c)){c+=f}if(b.target.files.length){var a=b.target.files[0];this.classList.add("set");z.changeImage(c,a,function(h){r.previewBrandingImage(d,h,b.timeStamp)},function(h){r.onBrandingReset.call(this,h)})}else{r.onBrandingReset.call(this,b)}},onBrandingReset:function(a){var c=this.querySelector("img.brandingPreview"),b=this.getAttribute("data-key");if(b!=="icon"){b+=r.getLastSelectedObject().deviceModel}c.src=this.getAttribute("data-default");z.resetChange(b);if(z.get(b)){z.changeImage(b,null)}this.classList.remove("set")},onBrandingSubmit:function(a){z.update();v.goBack(a,"projectBranding",$(".projectSettingsButtonBranding"))},goToValues:function(a){if(a===undefined){a=true}fluid.main.fire("projectloadneeded",r.lastSelectedId,function(){if($(".projectSettingsDevice").children().size()==0){$(".projectSettingsDevice").html($("#DeviceSizeTmpl",s.menu).html());$(".projectSettingsGesture").html($(".linkTriggerSelector").html());$(".projectSettingsTransition").html($(".transitionSelector").html())}var f=r.getLastSelectedObject(),h=f.deviceModel||"iPhone",j=f.orientation||"Portrait",b=f.defaultGesture||"tap",i=f.defaultTransition||"slide";var c=$(".projectSettingsDevice").children().filter("[data-type=Custom]");var d=$(".customDeviceSize");c.val(f.pageWH.join(","));c.text("Custom Display Size ("+f.pageWH.join("x")+")");if(h==="Custom"){d.show()}else{d.hide()}$(".projectSettingsDevice").children().filter("[data-type='"+h+"']").attr("selected",true);$(".projectSettingsGesture").children().filter("[value='"+b+"']").attr("selected",true);$(".projectSettingsTransition").children().filter("[value='"+i+"']").attr("selected",true);r._fixOrientationAfterDeviceChange(j);v._panelDisplay($("#projectSettingsPanelValues"),true,null,a)})},_fixOrientationAfterDeviceChange:function(b){var a=$(".projectSettingsOrientation").children();a.removeClass("activeOption");a.filter("[data-for='"+b+"']").addClass("activeOption")},goToVersions:function(){var h=r.lastVersions.length-1;if(h<=0){return}var i=$("#projectSettingsVersionsContent");i.children().remove();var d=u.get(fluid.main.project.get("id")).restoredFromDate;var a=false;for(var c=1;c<=h;c++){var b=r.lastVersions[c];b.updated=b.updated||Math.round(new Date().getTime()/1000);b.name=b.name||"Restored Project";b.dateUpdate=moment(b.updated).format("YYYY/MM/DD HH:mm:ss");b.sizeKb=(b.size/1024).toFixed(2);var f=$("#tmplProjectVersion").tmpl(b);if(d===b.date||(c===1&&!d)){f.addClass("activeVersion");a=true}f.appendTo(i)}if(!a){i.find(".projectVersionItem").eq(0).addClass("activeVersion")}$(".projectVersionsCount").text(h);r.adjustVersionsPanelSize();v._panelDisplay($("#projectSettingsPanelVersions"),true,null,true)},refreshListHeader:function(){var a=$("#projectSettingsFilter li[data-filter].activeMenuOption");var c=a.size()==0?"all":a.attr("data-filter");var d=$(".projectThumb","#projectSettingsMainContent").not(".projectPlaceholder ");var h=d.not(".hidden");var f=d.size()==h.size()?d.size():h.size()+" of "+d.size();$(".projectsListFilterAmount").text("("+f+")");$(".projectsListFilterLabel").text(r.mainDashTitles[c]);if(h.size()<3){$("li[data-sort], .separator","#projectSettingsFilter").hide()}else{$("li[data-sort], .separator","#projectSettingsFilter").show()}var b=$("#projectSettingsFilter li.activeMenuOption").size()==0?false:true;var i=$.trim($("#projectSettingsSearchBoxInput").val().toLowerCase());b=b||i!="";if(b){$("#projectSettingsSearchBoxInput").addClass("usingFilter")}else{$("#projectSettingsSearchBoxInput").removeClass("usingFilter")}},navigateWithKeys:function(b){if(r.lastSelectedId==null){r.actionSelectProject($(".projectThumb").not(".hidden").eq(1));return}var h=$(".projectThumb").not(".hidden").size();if(h<3){return}var c=q.getNavigationKeyDirection(b.keyCode);if(c==""){if((b.keyCode==13)&&(b.target.tagName!="INPUT")&&($("#projectSettingsPanelMain").is(":visible"))){r.actionOpen()}return}var d=r.getLastSelectedItem();var j=3;var i=1;var a=true;if((c=="top")||(c=="bottom")){i=j}if((c=="top")||(c=="left")){a=false}var f=r._findItemToNavigate(d,i,a);r.actionSelectProject(f)},_findItemToNavigate:function(b,d,a){if(d==0){return b}if(a){var c=b.nextAll().not(".hidden");b=c.size()>0?c.eq(0):$(".projectThumb").not(".hidden").eq(1);d=c.size()>0?d-1:0}else{var c=b.prevAll().not(".hidden");b=c.size()>1?c.eq(0):$(".projectThumb").not(".hidden").last();d=c.size()>1>0?d-1:0}return r._findItemToNavigate(b,d,a)},displayStatus:function(c){$(".buttonSwitch","#projectSettingsSettingsTop").removeClass("activeOption");var b=c?"projectSettingsButtonActive":"projectSettingsButtonInactive";$("."+b).addClass("activeOption");var d=$("#projectSettingsPanelSettings");var a=$(".buttonForActive",d);if(c){$(".projectThumbMedium, .projectThumbButtonOpen",d).add("#fluidDropdown .projectThumb").removeClass("inactivePrj");a.show()}else{$(".projectThumbMedium, .projectThumbButtonOpen",d).add("#fluidDropdown .projectThumb").addClass("inactivePrj");a.hide()}},_resizeScreen:function(){if(!v.isOpen){return}if($("#projectSettingsPanelMain").is(":visible")){setTimeout(r.adjustMainPanelSize,600);return}else{if($("#projectSettingsPanelVersions").is(":visible")){setTimeout(r.adjustVersionsPanelSize,600);return}}},getSelectedId:function(a){if(a==undefined){return undefined}return a.replace(r.lastView,"")},getItemById:function(a){if(a==null){return undefined}return $("#"+a+r.lastView)},getLastSelectedItem:function(){return $("#"+r.lastSelectedId+r.lastView)},getObjectById:function(a){return u.get(a)},getLastSelectedObject:function(){return r.getObjectById(r.lastSelectedId)},isLastSelectedOpen:function(){if(r.lastSelectedId==null){return false}return r.lastSelectedId===fluid.main.project.id},getDeviceLabel:function(b){var c=$("#DeviceSizeTmpl",s.menu).children();var a=c.filter("[data-type='"+b+"']").text();var d=a.replace(/\(([^\)]+)\)/,"").trim();return d},_hideProjectFromList:function(c,b){r.hiddingElements++;var a=$(b);a.transition({width:0,height:0,"margin-left":100,"margin-top":80,opacity:0,"margin-right":0,complete:function(){a.addClass("hidden");a.removeAttr("style");r.hiddingElements=r.hiddingElements-1;if(r.hiddingElements<=0){r.postApplyFilter()}}},350)},_callbackSanitize:function(c,f,h){if(c==null){if(f!=""){t.displayError(f);return null}t.displayError();return null}try{var b=JSON.parse(c)}catch(d){return null}if(b.t===true||b.t==="true"){return b}else{var a=h==undefined?b.t:h;t.displayError(a)}return null},updateThumbnail:function(a){var c=r.getObjectById(a);var b=r.getItemById(a);r._updateThumbnail(b,c)},updateThumbnailMedium:function(){var b=r.getObjectById(r.lastSelectedId);var a=$(".projectThumbMedium");r._updateThumbnail(a,b)},_updateThumbnail:function(b,d,c){b.find(".preview").remove();if((!d.unloaded&&d.pages&&d.pages.length===0)){b.append($('<div class="preview empty">Project empty</div>'))}else{if(c||(d.preview&&d.preview.src)){var a=c!=undefined&&c!=null?c:d.preview.src;b.append($('<img class="preview" src="'+a+'">'))}else{b.append($('<div class="preview">Preview not available</div>'))}}},_scrollToSelected:function(b){var d=$("#projectSettingsPanelMain .projectThumb").not(".hidden");var i=d.size();if((b==undefined)||(b==null)||(i<4)||b.length===0){return}var o=d.eq(3).position().top;var L=$("#projectSettingsMainTop").height();var m=3;var j=parseInt($("#projectSettingsMainContent").css("top"),10);var a=30;var l=parseInt(i/m,10);l=l*3==i?l:l+1;var h=L/o;var k=o*(l-h)-10;var n=o*2>L?0:o;var J=Math.abs(j);var c=b.position().top-n;c=c>0?c:0;c=c<k?c:k;if(c!=J){var K=c-J;for(var I=1;I<=a;I++){var f=J+(K/a)*I;setTimeout(r._scrollStepToSelected,I*11,f)}}},_scrollStepToSelected:function(a){$("#projectSettingsMainTop").tinyscrollbar_update(a)}};fluid.main.on("loggingout",function(){r.resetFilter()});fluid.main.on("afterprojectstatuschange",function(c,a,b){if(b){r.displayStatus(status)}});fluid.main.on("keyup",function(b,a){if(v.isOpen){r.navigateWithKeys(a)}});C.exports=r},{"./class-branding":5,"./class-event":9,"./class-notification":17,"./class-page":18,"./class-panels":19,"./class-staticWidgets":32,"./class-storage":33,"./class-userSettings":35,"./utils":69}],25:[function(p,o,q){var n=p("./class-propertyInspectorController");var m=p("./class-storage");var r=p("./utils");var k=p("./jquery.colorpicker");var l={init:function(){$("#tmplColorWheel").tmpl().appendTo($("#flatEditorView"));l.masterElements=$(".masterElementsHidable");l.hidablePropertyInspector=$(".piHidable");l.shapeProps=$(".shapeProps");l.textProps=$(".textProps");l.backgroundBorderHolder=$("#backgroundBorder");l.backgroundContainers=$("#captionBackground,#shapeBackground");l.borderContainers=$("#captionBorder,#shapeBorder");l.borderContainers.css({"pointer-events":"auto",opacity:1});l.shapeBorderControl=$("#shapeBorderControl");l.increaseBorderSize=n.increaseBorderSize=$("#shapeBorderControl .increaseNumber").filter(".shapeBorderBtn");l.increaseRadiusSize=n.increaseRadiusSize=$("#shapeBorderControl .increaseNumber").filter(".shapeRadiusBtn");l.shapeSizeProperties=$("#shapeSizeProperties");l.shapeOpacityControl=$("#shapeOpacityControl");l.heightProps=$("#widgetHeight");l.heightProps.css({"pointer-events":"auto",opacity:1});l.widthProps=$("#widgetWidth");l.widthProps.css({"pointer-events":"auto",opacity:1});l.widgetBorderRadius=$("#widgetBorderRadius");l.widgetBorderRadius.css({"pointer-events":"auto",opacity:1});l.flatColorView=$(".flatColorView");l.gradientGallery=$(".gradientGallery");l.colorStopEditor=$(".colorStopEditor");l.advancedGradientEditor=$(".advancedGradientEditor");l.textColorPicker=$(".textColorPicker");l.borderColor=$(".borderColor");l.defaultColorFill=n.defaultColorFill="-linear-gradient(45deg, transparent,transparent 44%,#f00 45%,#f00 55%,transparent 56%,transparent)";l.defaultColor=n.defaultColor="background:-webkit"+l.defaultColorFill+";background:-moz"+l.defaultColorFill+";";$(".piClickable").click(l.toggle);l.initGradientGallery();l.pickerWidth=k.pickerWidth=parseInt($("#rgbSelector").css("width"));l.pickerRadius=k.pickerRadius=parseInt($("#rainbowColorPicker").css("width"))/2;l.rainbowColorDivPosition=k.rainbowColorDivPosition=$("#rainbowColorPicker").position();$("#rgbSelector").draggable({start:k.dragStart,drag:k.rgbDrag,stop:k.rgbDragStop});$("#hslSelector").draggable({start:k.dragStart,drag:k.hslDrag,stop:k.hslDragStop});$("#rgbSelector, #hslSelector").click(k.clickOnSelectorEdge);$("#colorHexValue").on("input",k.inputHex);$("#rgbArea").click(k.rgbClick);$("#hslArea").click(k.hslClick);$("#cPickerOptions").click(k.applyToWidget);$("#gradientTypeSelector").change(k.applyToWidget);$("#addColorStop").click(k.addColorStops);$("#gradientStop").click(l.gradientStopClick);$("#bgColorDisplay, #bgColorOriginal").click(k.sortApplyColors);$(".gradientStopSlider").live("change",k.changeColorStopSlider);$(".gradientStopSlider").live("mouseup",k.changeColorStopSlider);fluid.main.on("closeallpopoups",l.resetPropInspector)},colorStopNumber:false,gradientStopClick:function(f){var d=$(f.originalEvent.target);var a=d.parent(".colorStopOption");if(d.hasClass("colorStopButton")){l.colorStopNumber=k.colorStopNumber=d.attr("data-colorStop");var c="colorStopButton";l.toggle(null,c)}else{if(d.hasClass("colorStopDelete")){var b=$("#gradientStop .colorStopOption").index();if(b>0){k.removeColorStop(null,a)}}}},initGradientGallery:function(){var b=$([]);var d=["(rgba 0,0,0,0.0),(rgba 0,0,0,0.0))","radial-gradient(circle, #e6e6e6,#fafafa)","linear-gradient(#FBFBFB,#B9B9B9)","radial-gradient(circle, #F0F0F9,#A8A8B1)","linear-gradient(rgb(221,221,223),rgb(221,221,223) 15%,rgb(206,207,209) 49%,rgb(184,186,188) 50%,rgb(188,190,193))","radial-gradient(circle, #ABABAB,#7B7B7B)","linear-gradient(#A4A4A4,#848484)","linear-gradient(rgb(85,89,96),rgb(38,44,53) 49%,rgb(20,29,38) 50%,rgb(39,45,55))","linear-gradient(rgb(217,130,136),rgb(207,86,96) 49%,rgb(188,19,32) 50%,rgb(188,19,32))","linear-gradient(left, #B03247,#CB3157)","linear-gradient(left, #C55746,#E45D40)","linear-gradient(-45deg, #EF7165,#E94C3D,#E31E27)","linear-gradient(-45deg, #F9A665,#F68C3E,#F26D20)","linear-gradient(#E4D0A0,#EFCD64 49%,#EFBD22 50%,#F6DC23)","linear-gradient(-45deg, #BBD87D,#8EBF3F)","linear-gradient(#79BE80,#31AB3B 49%,#009E10 50%,#008F0B)","linear-gradient(+45deg, #84C185,#369946)","linear-gradient(left, #3E91A3,#49A9B9)","linear-gradient(left, #277EDF,#3691EC)","radial-gradient(circle, #0298DB,#065A9D)","linear-gradient(rgb(116,153,232),rgb(54,110,223) 49%,rgb(34,96,221) 50%,rgb(35,98,221))","linear-gradient(rgb(130,158,188),rgb(90,125,166) 49%,rgb(70,103,151) 50%,rgb(71,104,153))","radial-gradient(circle, #9CBDD3,#657E8F)","linear-gradient(-45deg, #6D90B3,#306393,#12477F)","linear-gradient(left, #6031B1,#6F3CBD)"];var f=[{bg:"l",bgc:["rgba(0,0,0,0.0)","rgba(0,0,0,0.0)"],bgd:[0,1]},{bg:"r",bgc:["#e6e6e6","#fafafa"],bgd:[0,1]},{bg:"l",bgc:["#FBFBFB","#B9B9B9"],bgd:[0,1]},{bg:"r",bgc:["#F0F0F9","#A8A8B1"],bgd:[0,1]},{bg:"l",bgc:["rgb(221,221,223)","rgb(221,221,223)","rgb(206,207,209)","rgb(184,186,188)","rgb(188,190,193)"],bgd:[0,0.15,0.49,0.5,1]},{bg:"r",bgc:["#ABABAB","#7B7B7B"],bgd:[0,1]},{bg:"l",bgc:["#A4A4A4","#848484"],bgd:[0,1]},{bg:"l",bgc:["rgb(85,89,96)","rgb(38,44,53)","rgb(20,29,38)","rgb(39,45,55)"],bgd:[0,0.49,0.5,1]},{bg:"l",bgc:["rgb(217,130,136)","rgb(207,86,96)","rgb(188,19,32)","rgb(188,19,32)"],bgd:[0,0.49,0.5,1]},{bg:"ld2",bgc:["#EF7165","#E94C3D","#E31E27"],bgd:[0,0.5,1]},{bg:"lrl",bgc:["#C55746","#E45D40"],bgd:[0,1]},{bg:"ld2",bgc:["#EF7165","#E94C3D","#E31E27"],bgd:[0,0.5,1]},{bg:"ld2",bgc:["#F9A665","#F68C3E","#F26D20"],bgd:[0,0.5,1]},{bg:"l",bgc:["#E4D0A0","#EFCD64","#EFBD22","#F6DC23"],bgd:[0,0.49,0.5,1]},{bg:"ld2",bgc:["#BBD87D","#8EBF3F"],bgd:[0,1]},{bg:"l",bgc:["#79BE80","#31AB3B","#009E10","#008F0B"],bgd:[0,0.49,0.5,1]},{bg:"ld",bgc:["#84C185","#369946"],bgd:[0,1]},{bg:"lrl",bgc:["#3E91A3","#49A9B9"],bgd:[0,1]},{bg:"lrl",bgc:["#277EDF","#3691EC"],bgd:[0,1]},{bg:"r",bgc:["#0298DB","#065A9D"],bgd:[0,1]},{bg:"l",bgc:["rgb(116,153,232)","rgb(54,110,223)","rgb(34,96,221)","rgb(35,98,221)"],bgd:[0,0.49,0.5,1]},{bg:"l",bgc:["rgb(130,158,188)","rgb(90,125,166)","rgb(70,103,151)","rgb(71,104,153)"],bgd:[0,0.49,0.5,1]},{bg:"r",bgc:["#9CBDD3","#657E8F"],bgd:[0,1]},{bg:"ld",bgc:["#6D90B3","#306393","#12477F"],bgd:[0,0.5,1]},{bg:"lrl",bgc:["#6031B1","#6F3CBD"],bgd:[0,1]}];for(var a=0;a<d.length;a++){var c=JSON.stringify(f[a]);var h={color:"-webkit-"+d[a],color3:"-moz-"+d[a],color2:c,size:36};b=b.add($("#tmplSwatchBox").tmpl(h))}b.appendTo($("#gradientColorPicker"))},removeInputFocus:function(){$("#colorHexValue").blur();l.masterElements.find(".numberInput").blur()},lastAction:false,menuButtonActions:{menuExpander:{to:"showShapeInspector",alsoFrom:["showGradientGallery","showBorder","showFlatColor","showColorStopEditor","showAdvancedGradientEditor","showBackground"],from:"hideInspectors"},textMenuExpander:{to:"showTextInspector",from:"hideInspectors"},shapeBackground:{to:"showBackground",alsoFrom:["showGradientGallery","showFlatColor","showColorStopEditor","showAdvancedGradientEditor"],from:"showShapeInspector"},shapeBorder:{to:"showBorder",from:"showShapeInspector"},textColor:{to:"showTextColor",from:"showTextInspector"},cgpButton:{to:"showGradientGallery",alsoFrom:["showAdvancedGradientEditor"],from:"showFlatColor"},swatchEdit:{to:"showAdvancedGradientEditor"},backButton:{to:"showGradientGallery",alsoFrom:["showColorStopEditor"],from:"showAdvancedGradientEditor"},captionBackground:{to:"showShapeInspector"},captionBorder:{to:"showShapeInspector"},colorStopButton:{to:"showColorStopEditor"}},toggle:function(d,c){if(d){var a=(d.target.id)?d.target.id:$(d.target).parent().attr("id")}else{var a=c}if(!l.menuButtonActions[a]){return}var b=$.inArray(l.lastAction,l.menuButtonActions[a].alsoFrom);var f=l.menuButtonActions[a].to;if((f==l.lastAction||b>-1)&&l.menuButtonActions[a].from){f=l.menuButtonActions[a].from}l.showCorrectScreen(f);fluid.main.fire("propinspectortoggle")},showCorrectScreen:function(a){l.position();l.lastAction=k.lastAction=a;l.hidablePropertyInspector.hide();(l[a])();l.removeInputFocus()},resetPropInspector:function(){l.lastAction=k.lastAction="hideInspectors";l.removeInputFocus()},hideInspectors:function(){l.masterElements.hide();l.hidablePropertyInspector.hide()},showTextColor:function(){l.masterElements.show();l.textColorPicker.show();$("#textColor").addClass("pickerOpen");k.getTextColor()},showBorder:function(){l.masterElements.show();l.removePickerHighlight();$("#shapeBorder").addClass("pickerOpen");l.borderColor.show();n.updateBackgroundBorderInfo();k.getBorderColor()},showBackground:function(){l.masterElements.show();l.removePickerHighlight();$("#shapeBackground").addClass("pickerOpen");var a=n.filterBackgroundTypes();l.showCorrectScreen(a)},showFlatColor:function(){l.flatColorView.show();$("#cgpButton").text("Gradient");$("#cgpButton").attr("alt","Edit Gradient").attr("title","Edit Gradient");n.updateBackgroundBorderInfo();k.getColorBackground()},showGradientGallery:function(){l.gradientGallery.show();$("#cgpButton").text("Color");$("#cgpButton").attr("alt","Edit Color").attr("title","Edit Color");n.updateBackgroundBorderInfo()},showAdvancedGradientEditor:function(){l.advancedGradientEditor.show();k.populateAdvancedGradient()},showColorStopEditor:function(){l.colorStopEditor.show();k.setColorStops()},showShapeInspector:function(){l.removePickerHighlight();l.masterElements.show();l.shapeProps.show();l.updateShapeProps();var a=true;n.updateBackgroundBorderInfo(a)},showTextInspector:function(){l.removePickerHighlight();l.masterElements.show();l.textProps.show();n.updateTextProps()},removePickerHighlight:function(){$("#textColor, #shapeBorder, #shapeBackground").removeClass("pickerOpen")},position:function(){var a=$("#propInspectors");var b=$("#propertyInspectorBtn, #propertyInspectorBtn2").not(":hidden").position();if(b&&b.left){a.css({top:45,left:b.left-168})}},update:function(j){var j=j||fluid.selection.getSelectionModel().getElements();if(l.lastAction=="hideInspectors"||j.length==0){return}var a=n.filterTextOrShape();if(!a){return}else{var d=$.inArray(l.lastAction,a.showDefaults);if(d>-1){var h=a.showDefaults[d]}else{var h=a.showDefaults[0]}var f=["showGradientGallery","showFlatColor","showBackground","showAdvancedGradientEditor","showColorStopEditor","showTextColor","showBorder"];var b=$.inArray(l.lastAction,f);if(b>-1){if(a.showColorPicker==false){var h=a.showDefaults[0]}else{var c=f[b];var i=$.inArray(c,a.showColorPicker);if(i>-1){var h=a.showColorPicker[i]}else{var h=a.showColorPicker[0]}}}}l.showCorrectScreen(h)},updateShapeProps:function(){function Q(){var t=fluid.selection.getSelectionModel().getElements();var u=(t.length>0)?t.last():t.last();if($(u).attr("data-segment")){var v=$(u).attr("data-lockto");var s=$("#"+v);if(s.hasClass("ui-selected")&&!$(u).hasClass("ui-selected")){var u=s}}return u}function S(){l.heightProps.css({"pointer-events":"auto",opacity:1});l.widthProps.css({"pointer-events":"auto",opacity:1})}function H(){var s=$(this);var z=s.attr("id");var w=m.get(z);b=$.extend(true,{},w);if(s.hasClass("backgroundWidget")){i=i.add(s)}if(w.b||w.bbs||w.bts||w.bms||w.bls||w.brs||w.bs){var t=["b","bs","bts","bls","bms","bbs","brs"];for(var u=0;u<t.length;u++){var A=w[t[u]];try{if(A.length>0){O=O.add(s);$.extend(true,T,A)}}catch(v){}}}if(w.bgc){J=$.extend(true,{},w)}if(w.upload||w.upload=="y"||w.type=="image/png"){a=a.add(s)}if(s.hasClass("rootWidget")){I=I.add(s)}if(w.segment){N=N.add(s)}if(w.seg){j=j.add(s)}if(w.r=="h"){h=h.add(s)}if(w.r=="v"){R=R.add(s)}if(w.s){if(w.s=="c"||w.s=="arcU"||w.s=="arcD"||w.s=="arcL"||w.s=="arcR"){P.push(z)}}}function K(){if(T.length>0){var u=T[2];f=T[0]}else{var u=0;f=0}var v=(J)?J.bgc[0]:"rgba(0,0,0,0.0)";var t=parseInt(r.getRgbaAlpha(v)*100);var s=Q();width=parseFloat($(s).css("width"))||0;height=parseFloat($(s).css("height"))||0;$("#shapeBorderWidth").val(f);$("#shapeBorderRadius").val(u);$("#shapeOpacitySlider").slider("value",t);$("#shapeWidth").val(width);$("#shapeHeight").val(height)}function M(t,s){if(O.length<1){l.borderContainers.css({"pointer-events":"none",opacity:0.5})}else{(s.length==c)?l.widgetBorderRadius.css({"pointer-events":"none",opacity:0.5}):l.widgetBorderRadius.css({"pointer-events":"auto",opacity:1});(t==0)?l.borderContainers.css({"pointer-events":"none",opacity:0.5}):l.borderContainers.css({"pointer-events":"auto",opacity:1})}if(i.length==c){l.shapeSizeProperties.hide();l.shapeBorderControl.hide()}if(a.length==c){l.shapeBorderControl.hide();l.backgroundContainers.hide();l.borderContainers.hide();l.backgroundBorderHolder.hide();l.shapeOpacityControl.hide()}if(c>1){l.shapeSizeProperties.hide()}if(h.length==c){l.heightProps.css({"pointer-events":"none",opacity:0.5})}if(R.length==c){l.widthProps.css({"pointer-events":"none",opacity:0.5})}}var L=fluid.selection.getSelectionModel().getShapeWidgets().getElements();L=L.add(fluid.selection.getSelectionModel().getUploadWidgets().getElements());if(L.length==0){l.shapeProps.hide();return}var i=$([]);var I=$([]);var j=$([]);var O=$([]);var N=$([]);var a=$([]);var h=$([]);var R=$([]);var d=$([]);var b;var J;var T=[];var f;var P=[];S();L.each(H);var c=n.getWidgetAmount(I,j,N);K();M(f,P)}};fluid.main.on("inspectorAdjustBorderContainer",function(b,a){(a>0)?l.borderContainers.css({"pointer-events":"auto",opacity:1}):l.borderContainers.css({"pointer-events":"none",opacity:0.5})});fluid.main.on("linkdragstart",function(){l.resetPropInspector()});fluid.main.on("widgetcut",function(c,b,a,d){l.resetPropInspector()});o.exports=l},{"./class-propertyInspectorController":26,"./class-storage":33,"./jquery.colorpicker":67,"./utils":69}],26:[function(r,s,q){var l=r("./functions");var p=r("./class-widget");var n=r("./utils");var t=r("./jquery.colorpicker");var o=r("./class-storage");var m={textPropMap:{textBold:{property:"font-weight",active:"bold",inactive:"normal",importAction:"checkbox",command:{name:"setFont",property:"weight"}},textItalics:{property:"font-style",active:"italic",inactive:"normal",importAction:"checkbox",command:{name:"setFont",property:"style"}},textUnderline:{property:"text-decoration",active:"underline",inactive:"none",importAction:"checkbox",command:{name:"setTextProperty",property:"decoration"}},textLeft:{property:"text-align",active:"left",importAction:"checkbox",command:{name:"setTextProperty",property:"align"}},textCenter:{property:"text-align",active:"center",importAction:"checkbox",command:{name:"setTextProperty",property:"align"}},textRight:{property:"text-align",active:"right",importAction:"checkbox",command:{name:"setTextProperty",property:"align"}},textColor:{property:"color",importAction:"textColor",command:{name:"setColor",property:"color"}},textSize:{property:"font-size",importAction:"select",command:{name:"setFont",property:"size"}},textFont:{property:"font-family",importAction:"select",command:{name:"setFont",property:"family"}},textOpacitySlider:{property:"opacity",importAction:"slider",command:{name:"setColor",property:"opacity"}},textOpacityArea:{property:"opacity",importAction:"slider",command:{name:"setColor",property:"opacity"}},textVerticalCenter:{property:"top",active:"0.5%",importAction:"checkbox",command:{name:"setTextProperty",property:"alignVertical"}},textVerticalBottom:{property:"top",active:"1%",importAction:"checkbox",command:{name:"setTextProperty",property:"alignVertical"}},textVerticalTop:{property:"top",active:"0%",importAction:"checkbox",command:{name:"setTextProperty",property:"alignVertical"}}},shapePropMap:{shapeBackground:{controlCssProp:"background-color",property:"bgc",index:0,command:{name:"setBackgroundColor",property:"color"}},shapeBorder:{property:"b",controlCssProp:"background-color",index:1,command:{name:"setBorder",property:"color"}},shapeBorderStyle:{property:"border-style"},shapeBorderWidth:{property:"b",index:0,command:{name:"setBorder",property:"width"}},shapeBorderRadius:{property:"b",index:2,command:{name:"setBorder",property:"radius"}},shapeOpacitySlider:{property:"bgc",command:{name:"setColor",property:"opacity"}},shapeOpacityArea:{property:"bgc",command:{name:"setColor",property:"opacity"}},shapeHeight:{cssProperty:"height",property:"tlwh",index:3,command:{name:"resize",property:"height"}},shapeWidth:{cssProperty:"width",property:"tlwh",index:2,command:{name:"resize",property:"width"}}},currentSelection:false,textWidgets:false,shapeWidgets:false,uploadWidgets:false,saveSelection:function(a){var c=document.querySelectorAll("#canvasPages .ui-selected");var b=[];_.forEach(c,function(h){var d=h.id;b.push(h);if(!a){var f=p.getSubTextElements(h);b=b.concat(_.toArray(f));var j=p.get(d);if(j.seg){var i=document.querySelectorAll('[data-lockto="'+d+'"]');b=b.concat(_.toArray(i))}}});b=$(b);m.currentSelection=b;m.textWidgets=m.getTextWidgets(b);m.shapeWidgets=m.getShapeWidgets(b);m.uploadWidgets=m.getUploads(b)},filterTextOrShape:function(){var h=fluid.selection.getSelectionModel().getElements();var j=h.length;var w=$([]);var d=$([]);var k=$([]);var c=$([]);var i=$([]);function f(){var B=$(this);var u=B.attr("id");var v=p.get(u);if(v.tc){k=k.add(B)}if(!v.tc&&!v.upload){d=d.add(B)}if(v.b){c=c.add(B)}if(v.upload&&v.upload=="y"){w=w.add(B)}if(!v.bgc&&!v.r){i=i.add(B)}}h.each(f);if(h.length<1){var z=false}else{if(k.length>0&&d.length>0){var a=(c.length>0)?"showBorder":"showBackground";var b={showDefaults:["showShapeInspector","showTextInspector"],showColorPicker:["showBackground",a,"showTextColor"]}}else{if(w.length==j){var b={showDefaults:["showShapeInspector"],showColorPicker:false}}else{if(i.length==j){var b={showDefaults:["hideInspectors"],showColorPicker:false}}else{if(k.length>0&&d.length==0){var b={showDefaults:["showTextInspector"],showColorPicker:["showTextColor"]}}else{if(k.length==0&&d.length>0){var a=(c.length>0)?"showBorder":"showBackground";var b={showDefaults:["showShapeInspector"],showColorPicker:["showBackground",a]}}}}}}}return b},updateBackgroundBorderInfo:function(d){var z=t.getWidgetForCP();var c="transparent";var h=m.defaultColor;var i=0;var j=["b","bs","bts","bls","bms","bbs","brs"];for(var b=0;b<j.length;b++){var B=z[j[b]];try{if(B.length>0){c=n.replaceRgbaAlpha(B[1],1);i=B[0];h=(i==0)?m.defaultColor:"background:none;"}}catch(a){}}var k="transparent";var f=m.defaultColor;if(z.bgc){var A=$.extend(true,[],z.bgc);A=A.toString();if(A){if(A!=="rgba(0,0,0,0.0),rgba(0,0,0,0.0)"){k=n.replaceRgbaAlpha(z.bgc[0],1);f="background:none;"}}}$("#shapeBackground").css("background-color",k);$("#noBackground").attr("style",f);$("#shapeBorder").css("background-color",c);$("#noBorder").attr("style",h);if(d){return}else{fluid.main.fire("inspectorAdjustBorderContainer",i)}},getWidgetAmount:function(h,b,d){var c=d.length;var i=b.length;var f=h.length;var a=0;if(c>0){d.each(function(){var A=$(this);var z=A.attr("id");if(i>0){var B=$(b).find(z);a+=1}})}var j=fluid.selection.getSelectionModel().getShapeWidgets().getElements().add(fluid.selection.getSelectionModel().getUploadWidgets().getElements());var k=j.length-a;return k},_getTextPropertyValue:function(b,c,a){var d;if(c.importAction){d=m.widgetTextPropGet(c,$("#"+a))}return d},_getShapePropertyValue:function(h,j,z,w,k){j=j||m.getPropMap("shape")[h];w=w||$("#"+h);var c=$("#"+z);var f;if(!k){k=p.get(z);if(!k[j.property]&&k.segments&&k.segments.length){k=p.get(k.segments[0].id)}}if(j.property!==undefined&&j.index!==undefined){var i=k[j.property];f=i&&i[j.index];if(typeof f==="string"&&w.attr("type")=="number"){var b=c.css(j.cssProperty);f=b?parseFloat(b):0}}else{if(h=="shapeOpacitySlider"||h=="shapeOpacityArea"){f=100;try{var d=k[j.property][0];f=parseInt(n.getRgbaAlpha(d)*100)}catch(a){}}}return f},filterBackgroundTypes:function(){var d=fluid.selection.getSelectionModel().getShapeWidgets().getElements();var c=d.filter(".ui-selected").last().attr("id");var b=p.get(c);if(b.bg=="c"||b.bg=="s"||!b.bg){var a="showFlatColor"}else{var a="showGradientGallery"}return a},updateTextProps:function(){var b=fluid.selection.getSelectionModel().getTextWidgets().getElements();var c=m.textPropMap;if(b.length>0){var a=b.last();$("#propContainer").find(".radio, .checkbox").removeClass("activeCheckbox");for(property in c){if(c[property].importAction){m[c[property].importAction+"PropImport"](b,c,property,a)}}}else{return}},checkboxPropImport:function(v,f,k,d){var a=$("#"+k);var j=f[k];var b=m.widgetTextPropGet(j,d);if(j.property=="top"){var c=parseInt(d.css("height"));var i=parseInt(d.find(".widgetText").css("padding-top"));var h=(i/c);if(h>0){b="0%";if(h>0.3){b="0.5%";if(h>0.7){b="1%"}}}}if(b==j.active){a.addClass("activeCheckbox")}else{if(b==j.inactive){a.removeClass("activeCheckbox")}}},textColorPropImport:function(h,b,d,f){var c=b[d];var a=m.widgetTextPropGet(c,f);$("#textColor").css("background-color",a)},selectPropImport:function(i,b,d,f){var h=$("#"+d);var c=b[d];var a=m.widgetTextPropGet(c,f);if(a[0]=="'"){a=a.split("'")[1]}h.val(a)},_sliderChanged:function(c,b,a){m._exportProps(c,b/100,a)},sliderInput:function(a,b){this.querySelector(".ui-slider-handle").textContent=b.value+"%"},sliderChanged:function(a,b){m._sliderChanged(this.id,b.value,false);if(a.target.id=="shapeOpacitySlider"){m.updateBackgroundBorderInfo()}},sliderPropImport:function(h,b,d,f){var c=b[d];var a=parseFloat(m.widgetTextPropGet(c,f));$("#textOpacitySlider").slider("value",a*100)},widgetTextPropGet:function(c,a){var d=m.widgetSelectText(a).css(c.property);if(d===undefined&&"inactive" in c){d=c.inactive}if(c.property=="font-size"){d=(d)?parseInt(d):10}var b=parseFloat(d);if((!isNaN(b))&&(b==parseFloat(c.active))){return c.active}return d},toggleCheckboxStyle:function(){$(this).toggleClass("activeCheckbox");var a=m.textPropMap;var b;if($(this).hasClass("activeCheckbox")){b=a[this.id].active}else{b=a[this.id].inactive}m._exportProps(this.id,b)},toggleRadioStyle:function(){var a=m.textPropMap;$(this).addClass("activeCheckbox").siblings(".radio").removeClass("activeCheckbox");m._exportProps(this.id,a[this.id].active)},togglehozontalAlignment:function(){var a=m.textPropMap;$(this).addClass("activeCheckbox").siblings(".hozontalAlignment").removeClass("activeCheckbox");m._exportProps(this.id,a[this.id].active)},numFieldInput:false,keyToggle:false,changeShapeProps:function(c){if(c.keyCode>=37&&c.keyCode<=40){return false}var a=$(this);var b=a.val();var b=Math.abs(parseInt(b));if((isNaN(b))==true){a.val("");return false}m.numFieldInput=b;if(m.keyToggle=="on"){return false}m.keyToggle="on";m.launchInputTimer(a);return false},launchInputTimer:function(a){function b(){$(a).val(m.numFieldInput);var c=a;m.applyChangedField(c);m.keyToggle=false;m.numFieldInput=false}setTimeout(b,2000)},setClickTimeout:false,targetElement:false,applyChangedField:function(d){if(!$("#propContainer").is(":visible")){return}var c=d.attr("id");var b=d.val();if((isNaN(b))==true){return false}if(c=="shapeBorderRadius"||c=="shapeBorderWidth"){var f=m.calculateBorderLimits();if(b>f){d.val(f)}}var a=d.val();m._exportProps(c,a);l.updateTLWH();m.updateBackgroundBorderInfo();m.updateBorderLimits()},selectNumberValue:function(){$(this).select()},selectChanged:function(b){if($(this).val().length==0){return}var a=($(this).attr("type")=="number")?parseInt($(this).val()):$(this).val();m._exportProps(this.id,a);l.updateTLWH();m.updateBackgroundBorderInfo();return false},getBorderValue:function(h,d,a,j){var f=false;var i=["b","bts","bls","brs","bbs","bms"];for(type in i){if(h[i[type]]!=null){var c=(h.id==undefined)?h.segment:h.id;h[i[type]][a]=d;p.set(h,j.attr("id"));p._redraw(j,h)}else{var b=[0,"#333",0];p.set({b:b},j.attr("id"));p._redraw(j,h)}f=true}return f},resizeWidget:function(d,f,h,a){var c=a?a:o.get(h.attr("id"));if((c)&&(c.tlwh[d.index]=="a")){c.tlwh[d.index]="100%";p.set(c,h.attr("id"))}h.css(d.cssProperty,f);var b=[parseInt(h.css("top")),parseInt(h.css("left")),h.width(),h.height()];if(c.segment==null){p._resize(h,null,b)}if(h.get(0).id!=h.data("lockto")){var i=h.parents(".page").get(0).id;p._resize(h,i,false)}m.updateBorderLimits()},adjustOpacity:function(f,a,d,c){var b=fluid.selection.getSelectionModel().getShapeWidgets().getElements();b.each(function(){var i=$(this);var A=i.attr("id");var k=p.get(A);if(!k.bgc){return}var h,B,z;if(i){z=i.find("canvas, img")}else{z=$("#"+A).find("canvas, img")}if(k.bgc){for(var j=0;j<k.bgc.length;j++){h=n.hex2rgba(k.bgc[j],a);h=n.replaceRgbaAlpha(h,a);k.bgc[j]=h}}if(k.b){B=n.hex2rgba(k.b[1],a);B=n.replaceRgbaAlpha(B,a);k.b[1]=B}p.set(k,A);p._redraw(i,k)})},getPropMap:function(a){return m[(a)+"PropMap"]},calculateBorderLimits:function(){function c(C){var F=C.tlwh[2];var D=C.tlwh[3];var E=Math.min(D,F);var u=parseInt(E/2);return u}var i=fluid.selection.getSelectionModel().getShapeWidgets().getElements();var b=false;var d=[];i.each(function(){var A=$(this);if(A.hasClass("ui-selected")){var B=A.attr("id");b=p.get(B);var u=c(b);d.push(u)}});var k=$.extend(true,[],d);var v=k.sort(function(u,z){return z-u});var a=v[0];var h=d.indexOf(a);var j=i.eq(h);b=p.get(j.attr("id"));var f=(b)?c(b):1000;return f},updateBorderLimits:function(){var f=parseInt($("#shapeBorderWidth").val());var b=parseInt($("#shapeBorderRadius").val());var d=m.increaseBorderSize;var a=m.increaseRadiusSize;var c=m.calculateBorderLimits();(f==c)?d.css({"pointer-events":"none",opacity:0.75}):d.css({"pointer-events":"auto",opacity:1});(b==c)?a.css({"pointer-events":"none",opacity:0.75}):a.css({"pointer-events":"auto",opacity:1})},_prevValues:{},_exportProps:function(i,d,k){var a=$(".shapeProps").is(":visible")&&"shape"||$(".textProps").is(":visible")&&"text"||undefined;if(!a){return}var f=m.getPropMap(a)[i];var E=({shape:m._getShapePropertyValue,text:m._getTextPropertyValue})[a];if(f&&"command" in f&&E){var D=E;var h=$("#canvasPages .ui-selected");if(i=="shapeBorderWidth"||i=="shapeBorderRadius"){var h=$("#canvasPages .ui-selected").not(".backgroundWidget")}var j=h.map(function(){return $(this).attr("id")}).get();var c=n.getActivePageId();var B={id:j,pageId:c,propertyId:i,property:f.command.property,mode:a,from:$.map(j,function(u){var v=u+i;if(v in m._prevValues){var w=m._prevValues[v]}else{var w=E(i,f,u)||0}if(k){m._prevValues[v]=w}else{delete m._prevValues[v]}if(i=="shapeOpacitySlider"||i=="shapeOpacityArea"){w/=100}return w}),to:d};var b;for(var C=0,F=j.length;C<F;C++){b=B.from[C]!=B.to;if(b==true){break}}if(b){fluid.command.create(f.command.name,B).dispatchTo("fluid.controllers.widget",!Boolean(k))}}else{if(f){return m.exportProps(a,i,d)}else{return m.exportProps(a==="text"?"shape":"text",i,d)}}},widgetSelectText:function(a){if(!a.is(".widgetText")){var b=a.find(".widgetText");if(b.length===0&&a[0]){b=$(a[0]).find(".widgetText")}if(b.size()>0){a=b}else{a=$("[data-lockto="+a.attr("id")+"] .widgetText")}}return a},exportProps:function(T,ag,a,j){var ah=j?$("#"+j):$("#canvasPages .ui-selected");var R=j?p.get(j):p.get(ah.attr("id"));var V=m.getPropMap(T)[ag];var Z;var ai;if(R.sc&&R.sc>1&&ag!="shapeWidth"&&ag!="shapeHeight"&&!p.hasOwnColorProperties(R)){R.srps=true;for(var c=0;c<R.segments.length;c++){m.exportProps(T,ag,a,R.segments[c].id)}}if(ag.indexOf("text")>-1){var Q=[];ah.each(function(){var u=$(p.getSubTextElements(this));u.each(function(){Q.push($(this))})});Q.push(ah);for(var c=0;c<Q.length;c++){var X=Q[c];var aj=X.attr("id");var U=p.get(aj);var b=m.widgetSelectText(X);a=V.unit?a+V.unit:a;var k=parseInt(b.css("padding-top"));if(V.property=="top"&&a<=1){a=a.toString()+"%"}if(V.property=="font-size"){var i=b.css("font-size");var af=b.css("line-height");var ab=b.css("font");var ab=b.css("font-style");var ad=Math.round(parseInt(af)-parseInt(i)+parseInt(a));b.css("font-size",parseInt(a)+"px");b.css("line-height",ad+"px")}else{b.css(V.property,a)}p.verticalAlign(X);U.ts=b.attr("style");p.set({ts:b.attr("style")},aj)}}else{if(ag.indexOf("Opacity")>-1){var Y;for(var c=0;c<ah.length;c++){Y=p.get(ah.eq(c).attr("id"));m.adjustOpacity(Y,a,ah.eq(c),ah.eq(c).attr("id"))}}else{if(ag.indexOf("shape")>-1){a=parseInt(a);var ac=V.property;var W=V.index;var ae=1;if((ag=="shapeBackground"||ag=="shapeBorder")&&R.bgc){ae=n.getAlphaFromColor(R.bgc[0])}if(ac!=undefined&&W!=undefined){for(var c=0;c<ah.length;c++){Z=ah.eq(c).find("canvas, img");R=p.get(ah.eq(c).attr("id"));if(!j){R=p.get(ah.eq(c).attr("id"))}if(R[ac]==null&&ac=="b"){var f=m.getBorderValue(R,a,W,ah.eq(c))}if(typeof R[ac]!=="undefined"){if(ac=="tlwh"){m.resizeWidget(V,a,ah.eq(c))}else{if(ac=="b"&&R.segment){var S=["b","bs","bts","bls","bms","bbs","brs"];for(var aa=0;aa<S.length;aa++){var h=R[S[aa]];if(h){h[W]=a;if(W>1){h.splice(3,3)}}}}else{R[ac][W]=a}p.set(R,ah.eq(c).attr("id"));var d;if(R.segments){d={mode:"all"}}else{if(R.segment){d={mode:"seg",segId:j}}}p._redraw(ah.eq(c),R,d)}}if(ae!=1){m.adjustOpacity(R,ae,ah.eq(c),ah.eq(c).attr("id"))}}}m.updateBackgroundBorderInfo()}}}}};fluid.main.on("colorpickercolorapplied",function(){m.updateBackgroundBorderInfo()});s.exports=m},{"./class-storage":33,"./class-widget":37,"./functions":64,"./jquery.colorpicker":67,"./utils":69}],27:[function(j,i,f){var h=function(){var G=function(t,s){var k=236;var l=17;var Y=t;var W=d[s];var aa=null;var p=0;var V=null;var S=new Array();var o={dark:"#000",bright:"#FFF"};var r=function(I,J){p=Y*4+17;aa=function(N){var L=new Array(N);for(var K=0;K<N;K+=1){L[K]=new Array(N);for(var M=0;M<N;M+=1){L[K][M]=null}}return L}(p);U(0,0);U(p-7,0);U(0,p-7);u();T();m(I,J);if(Y>=7){X(I)}if(V==null){V=ab(Y,W,S)}q(V,J)};var U=function(J,L){for(var K=-1;K<=7;K+=1){if(J+K<=-1||p<=J+K){continue}for(var I=-1;I<=7;I+=1){if(L+I<=-1||p<=L+I){continue}if((0<=K&&K<=6&&(I==0||I==6))||(0<=I&&I<=6&&(K==0||K==6))||(2<=K&&K<=4&&2<=I&&I<=4)){aa[J+K][L+I]=true}else{aa[J+K][L+I]=false}}}};var Z=function(){var I=0;var J=0;for(var K=0;K<8;K+=1){r(true,K);var L=v.getLostPoint(o);if(K==0||I>L){I=L;J=K}}return J};var T=function(){for(var J=8;J<p-8;J+=1){if(aa[J][6]!=null){continue}aa[J][6]=(J%2==0)}for(var I=8;I<p-8;I+=1){if(aa[6][I]!=null){continue}aa[6][I]=(I%2==0)}};var u=function(){var N=v.getPatternPosition(Y);for(var K=0;K<N.length;K+=1){for(var L=0;L<N.length;L+=1){var I=N[K];var M=N[L];if(aa[I][M]!=null){continue}for(var J=-2;J<=2;J+=1){for(var O=-2;O<=2;O+=1){if(J==-2||J==2||O==-2||O==2||(J==0&&O==0)){aa[I+J][M+O]=true}else{aa[I+J][M+O]=false}}}}}};var X=function(I){var J=v.getBCHTypeNumber(Y);for(var K=0;K<18;K+=1){var L=(!I&&((J>>K)&1)==1);aa[Math.floor(K/3)][K%3+p-8-3]=L}for(var K=0;K<18;K+=1){var L=(!I&&((J>>K)&1)==1);aa[K%3+p-8-3][Math.floor(K/3)]=L}};var m=function(N,I){var J=(W<<3)|I;var K=v.getBCHTypeInfo(J);for(var L=0;L<15;L+=1){var M=(!N&&((K>>L)&1)==1);if(L<6){aa[L][8]=M}else{if(L<8){aa[L+1][8]=M}else{aa[p-15+L][8]=M}}}for(var L=0;L<15;L+=1){var M=(!N&&((K>>L)&1)==1);if(L<8){aa[8][p-L-1]=M}else{if(L<9){aa[8][15-L-1+1]=M}else{aa[8][15-L-1]=M}}}aa[p-8][8]=(!N)};var q=function(L,P){var N=-1;var R=p-1;var M=7;var Q=0;var I=v.getMaskFunction(P);for(var O=p-1;O>0;O-=2){if(O==6){O-=1}while(true){for(var J=0;J<2;J+=1){if(aa[R][O-J]==null){var K=false;if(Q<L.length){K=(((L[Q]>>>M)&1)==1)}var ac=I(R,O-J);if(ac){K=!K}aa[R][O-J]=K;M-=1;if(M==-1){Q+=1;M=7}}}R+=N;if(R<0||p<=R){R-=N;N=-N;break}}}};var n=function(an,ak){var N=0;var R=0;var aj=0;var O=new Array(ak.length);var K=new Array(ak.length);for(var ap=0;ap<ak.length;ap+=1){var ao=ak[ap].dataCount;var P=ak[ap].totalCount-ao;R=Math.max(R,ao);aj=Math.max(aj,P);O[ap]=new Array(ao);for(var am=0;am<O[ap].length;am+=1){O[ap][am]=255&an.getBuffer()[am+N]}N+=ao;var J=v.getErrorCorrectPolynomial(P);var ai=A(O[ap],J.getLength()-1);var M=ai.mod(J);K[ap]=new Array(J.getLength()-1);for(var am=0;am<K[ap].length;am+=1){var I=am+M.getLength()-K[ap].length;K[ap][am]=(I>=0)?M.get(I):0}}var al=0;for(var am=0;am<ak.length;am+=1){al+=ak[am].totalCount}var Q=new Array(al);var L=0;for(var am=0;am<R;am+=1){for(var ap=0;ap<ak.length;ap+=1){if(am<O[ap].length){Q[L]=O[ap][am];L+=1}}}for(var am=0;am<aj;am+=1){for(var ap=0;ap<ak.length;ap+=1){if(am<K[ap].length){Q[L]=K[ap][am];L+=1}}}return Q};var ab=function(N,O,J){var L=w.getRSBlocks(N,O);var M=z();for(var K=0;K<J.length;K+=1){var P=J[K];M.put(P.getMode(),4);M.put(P.getLength(),v.getLengthInBits(P.getMode(),N));P.write(M)}var I=0;for(var K=0;K<L.length;K+=1){I+=L[K].dataCount}if(M.getLengthInBits()>I*8){throw new Error("code length overflow. ("+M.getLengthInBits()+">"+I*8+")")}if(M.getLengthInBits()+4<=I*8){M.put(0,4)}while(M.getLengthInBits()%8!=0){M.putBit(false)}while(true){if(M.getLengthInBits()>=I*8){break}M.put(k,8);if(M.getLengthInBits()>=I*8){break}M.put(l,8)}return n(M,L)};o.addData=function(I){var J=H(I);S.push(J);V=null};o.isDark=function(I,J){if(I<0||p<=I||J<0||p<=J){throw new Error(I+","+J)}return aa[I][J]};o.getModuleCount=function(){return p};o.make=function(){r(false,Z())};o.createImgTag=function(I,J){I=I||2;J=(typeof J=="undefined")?I*4:J;var K=o.getModuleCount()*I+J*2;var L=J;var M=K-J;return B(K,K,function(Q,O){if(L<=Q&&Q<M&&L<=O&&O<M){var N=Math.floor((Q-L)/I);var P=Math.floor((O-L)/I);return o.isDark(P,N)?0:1}else{return 1}})};o.createDataUrl=function(I,M){I=I||200;var K=o.getModuleCount(),P=(I/K|0)||1,N=document.createElement("canvas"),O=N.getContext("2d");N.width=N.height=I;M=(I-P*K)/2|0;O.translate(M,M);for(var Q=0;Q<K;Q++){var L=Q*P;for(var J=0;J<K;J++){O.fillStyle=o.isDark(Q,J)?o.dark:o.bright;O.fillRect(J*P,L,P,P)}}return N.toDataURL()};return o};G.dataUrl=function(o,k,p,n){p=p|0>0?p|0:1;n=n||"L";try{var m=G(p,n);m.addData(o);m.make();return m.createDataUrl(k)}catch(l){if(/code length overflow/.test(l.message)){return G.dataUrl(o,k,p+1,n)}else{throw (l)}}};G.stringToBytes=function(n){var m=new Array();for(var l=0;l<n.length;l+=1){var k=n.charCodeAt(l);m.push(k&255)}return m};G.createStringToBytes=function(k,n){var l=function(){var r=E(k);var q=function(){var I=r.read();if(I==-1){throw new Error()}return I};var o=0;var N={};while(true){var t=r.read();if(t==-1){break}var u=q();var L=q();var M=q();var p=String.fromCharCode((t<<8)|u);var s=(L<<8)|M;N[p]=s;o+=1}if(o!=n){throw new Error(o+" != "+n)}return N}();var m="?".charCodeAt(0);return function(p){var r=new Array();for(var q=0;q<p.length;q+=1){var o=p.charCodeAt(q);if(o<128){r.push(o)}else{var s=l[p.charAt(q)];if(typeof s=="number"){if((s&255)==s){r.push(s)}else{r.push(s>>>8);r.push(s&255)}}else{r.push(m)}}}return r}};var c={MODE_NUMBER:1<<0,MODE_ALPHA_NUM:1<<1,MODE_8BIT_BYTE:1<<2,MODE_KANJI:1<<3};var d={L:1,M:0,Q:3,H:2};var C={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};var v=function(){var k=[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]];var m=(1<<10)|(1<<8)|(1<<5)|(1<<4)|(1<<2)|(1<<1)|(1<<0);var o=(1<<12)|(1<<11)|(1<<10)|(1<<9)|(1<<8)|(1<<5)|(1<<2)|(1<<0);var n=(1<<14)|(1<<12)|(1<<10)|(1<<4)|(1<<1);var p={};var l=function(r){var q=0;while(r!=0){q+=1;r>>>=1}return q};p.getBCHTypeInfo=function(r){var q=r<<10;while(l(q)-l(m)>=0){q^=(m<<(l(q)-l(m)))}return((r<<10)|q)^n};p.getBCHTypeNumber=function(r){var q=r<<12;while(l(q)-l(o)>=0){q^=(o<<(l(q)-l(o)))}return(r<<12)|q};p.getPatternPosition=function(q){return k[q-1]};p.getMaskFunction=function(q){switch(q){case C.PATTERN000:return function(r,s){return(r+s)%2==0};case C.PATTERN001:return function(r,s){return r%2==0};case C.PATTERN010:return function(r,s){return s%3==0};case C.PATTERN011:return function(r,s){return(r+s)%3==0};case C.PATTERN100:return function(r,s){return(Math.floor(r/2)+Math.floor(s/3))%2==0};case C.PATTERN101:return function(r,s){return(r*s)%2+(r*s)%3==0};case C.PATTERN110:return function(r,s){return((r*s)%2+(r*s)%3)%2==0};case C.PATTERN111:return function(r,s){return((r*s)%3+(r+s)%2)%2==0};default:throw new Error("bad maskPattern:"+q)}};p.getErrorCorrectPolynomial=function(r){var s=A([1],0);for(var q=0;q<r;q+=1){s=s.multiply(A([1,F.gexp(q)],0))}return s};p.getLengthInBits=function(q,r){if(1<=r&&r<10){switch(q){case c.MODE_NUMBER:return 10;case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:return 8;case c.MODE_KANJI:return 8;default:throw new Error("mode:"+q)}}else{if(r<27){switch(q){case c.MODE_NUMBER:return 12;case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw new Error("mode:"+q)}}else{if(r<41){switch(q){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw new Error("mode:"+q)}}else{throw new Error("type:"+r)}}}};p.getLostPoint=function(t){var U=t.getModuleCount();var T=0;for(var r=0;r<U;r+=1){for(var V=0;V<U;V+=1){var u=0;var P=t.isDark(r,V);for(var q=-1;q<=1;q+=1){if(r+q<0||U<=r+q){continue}for(var Q=-1;Q<=1;Q+=1){if(V+Q<0||U<=V+Q){continue}if(q==0&&Q==0){continue}if(P==t.isDark(r+q,V+Q)){u+=1}}}if(u>5){T+=(3+u-5)}}}for(var r=0;r<U-1;r+=1){for(var V=0;V<U-1;V+=1){var S=0;if(t.isDark(r,V)){S+=1}if(t.isDark(r+1,V)){S+=1}if(t.isDark(r,V+1)){S+=1}if(t.isDark(r+1,V+1)){S+=1}if(S==0||S==4){T+=3}}}for(var r=0;r<U;r+=1){for(var V=0;V<U-6;V+=1){if(t.isDark(r,V)&&!t.isDark(r,V+1)&&t.isDark(r,V+2)&&t.isDark(r,V+3)&&t.isDark(r,V+4)&&!t.isDark(r,V+5)&&t.isDark(r,V+6)){T+=40}}}for(var V=0;V<U;V+=1){for(var r=0;r<U-6;r+=1){if(t.isDark(r,V)&&!t.isDark(r+1,V)&&t.isDark(r+2,V)&&t.isDark(r+3,V)&&t.isDark(r+4,V)&&!t.isDark(r+5,V)&&t.isDark(r+6,V)){T+=40}}}var s=0;for(var V=0;V<U;V+=1){for(var r=0;r<U;r+=1){if(t.isDark(r,V)){s+=1}}}var R=Math.abs(100*s/U/U-50)/5;T+=R*10;return T};return p}();var F=function(){var m=new Array(256);var n=new Array(256);for(var l=0;l<8;l+=1){m[l]=1<<l}for(var l=8;l<256;l+=1){m[l]=m[l-4]^m[l-5]^m[l-6]^m[l-8]}for(var l=0;l<255;l+=1){n[m[l]]=l}var k={};k.glog=function(o){if(o<1){throw new Error("glog("+o+")")}return n[o]};k.gexp=function(o){while(o<0){o+=255}while(o>=256){o-=255}return m[o]};return k}();function A(l,m){if(typeof l.length=="undefined"){throw new Error(l.length+"/"+m)}var n=function(){var o=0;while(o<l.length&&l[o]==0){o+=1}var p=new Array(l.length-o+m);for(var q=0;q<l.length-o;q+=1){p[q]=l[q+o]}return p}();var k={};k.get=function(o){return n[o]};k.getLength=function(){return n.length};k.multiply=function(o){var q=new Array(k.getLength()+o.getLength()-1);for(var p=0;p<k.getLength();p+=1){for(var r=0;r<o.getLength();r+=1){q[p+r]^=F.gexp(F.glog(k.get(p))+F.glog(o.get(r)))}}return A(q,0)};k.mod=function(o){if(k.getLength()-o.getLength()<0){return k}var p=F.glog(k.get(0))-F.glog(o.get(0));var r=new Array(k.getLength());for(var q=0;q<k.getLength();q+=1){r[q]=k.get(q)}for(var q=0;q<o.getLength();q+=1){r[q]^=F.gexp(F.glog(o.get(q))+p)}return A(r,0).mod(o)};return k}var w=function(){var l=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];var m=function(q,p){var o={};o.totalCount=q;o.dataCount=p;return o};var k={};var n=function(o,p){switch(p){case d.L:return l[(o-1)*4+0];case d.M:return l[(o-1)*4+1];case d.Q:return l[(o-1)*4+2];case d.H:return l[(o-1)*4+3];default:return undefined}};k.getRSBlocks=function(o,s){var p=n(o,s);if(typeof p=="undefined"){throw new Error("bad rs block @ typeNumber:"+o+"/errorCorrectLevel:"+s)}var q=p.length/3;var u=new Array();for(var M=0;M<q;M+=1){var L=p[M*3+0];var r=p[M*3+1];var t=p[M*3+2];for(var N=0;N<L;N+=1){u.push(m(r,t))}}return u};return k}();var z=function(){var l=new Array();var m=0;var k={};k.getBuffer=function(){return l};k.get=function(n){var o=Math.floor(n/8);return((l[o]>>>(7-n%8))&1)==1};k.put=function(n,o){for(var p=0;p<o;p+=1){k.putBit(((n>>>(o-p-1))&1)==1)}};k.getLengthInBits=function(){return m};k.putBit=function(o){var n=Math.floor(m/8);if(l.length<=n){l.push(0)}if(o){l[n]|=(128>>>(m%8))}m+=1};return k};var H=function(k){var n=c.MODE_8BIT_BYTE;var m=k;var l=G.stringToBytes(k);var o={};o.getMode=function(){return n};o.getLength=function(p){return l.length};o.write=function(q){for(var p=0;p<l.length;p+=1){q.put(l[p],8)}};return o};var b=function(){var l=new Array();var k={};k.writeByte=function(m){l.push(m&255)};k.writeShort=function(m){k.writeByte(m);k.writeByte(m>>>8)};k.writeBytes=function(m,o,n){o=o||0;n=n||m.length;for(var p=0;p<n;p+=1){k.writeByte(m[p+o])}};k.writeString=function(m){for(var n=0;n<m.length;n+=1){k.writeByte(m.charCodeAt(n))}};k.toByteArray=function(){return l};k.toString=function(){var m="";m+="[";for(var n=0;n<l.length;n+=1){if(n>0){m+=","}m+=l[n]}m+="]";return m};return k};var D=function(){var l=0;var q=0;var n=0;var m="";var p={};var k=function(r){m+=String.fromCharCode(o(r&63))};var o=function(r){if(r<0){}else{if(r<26){return 65+r}else{if(r<52){return 97+(r-26)}else{if(r<62){return 48+(r-52)}else{if(r==62){return 43}else{if(r==63){return 47}}}}}}throw new Error("n:"+r)};p.writeByte=function(r){l=(l<<8)|(r&255);q+=8;n+=1;while(q>=6){k(l>>>(q-6));q-=6}};p.flush=function(){if(q>0){k(l<<(6-q));l=0;q=0}if(n%3!=0){var r=3-n%3;for(var s=0;s<r;s+=1){m+="="}}};p.toString=function(){return m};return p};var E=function(q){var n=q;var m=0;var l=0;var p=0;var o={};o.read=function(){while(p<8){if(m>=n.length){if(p==0){return -1}throw new Error("unexpected end of file./"+p)}var r=n.charAt(m);m+=1;if(r=="="){p=0;return -1}else{if(r.match(/^\s$/)){continue}}l=(l<<6)|k(r.charCodeAt(0));p+=6}var s=(l>>>(p-8))&255;p-=8;return s};var k=function(r){if(65<=r&&r<=90){return r-65}else{if(97<=r&&r<=122){return r-97+26}else{if(48<=r&&r<=57){return r-48+52}else{if(r==43){return 62}else{if(r==47){return 63}else{throw new Error("c:"+r)}}}}}};return o};var a=function(q,s){var n=q;var m=s;var p=new Array(q*s);var l={};l.setPixel=function(J,t,u){p[t*n+J]=u};l.write=function(K){K.writeString("GIF87a");K.writeShort(n);K.writeShort(m);K.writeByte(128);K.writeByte(0);K.writeByte(0);K.writeByte(0);K.writeByte(0);K.writeByte(0);K.writeByte(255);K.writeByte(255);K.writeByte(255);K.writeString(",");K.writeShort(0);K.writeShort(0);K.writeShort(n);K.writeShort(m);K.writeByte(0);var u=2;var L=o(u);K.writeByte(u);var t=0;while(L.length-t>255){K.writeByte(255);K.writeBytes(L,t,255);t+=255}K.writeByte(L.length-t);K.writeBytes(L,t,L.length-t);K.writeByte(0);K.writeString(";")};var k=function(M){var L=M;var u=0;var N=0;var t={};t.write=function(J,I){if((J>>>I)!=0){throw new Error("length over")}while(u+I>=8){L.writeByte(255&((J<<u)|N));I-=(8-u);J>>>=(8-u);N=0;u=0}N=(J<<u)|N;u=u+I};t.flush=function(){if(u>0){L.writeByte(N)}};return t};var o=function(Y){var U=1<<Y;var W=(1<<Y)+1;var S=Y+1;var u=r();for(var V=0;V<U;V+=1){u.add(String.fromCharCode(V))}u.add(String.fromCharCode(U));u.add(String.fromCharCode(W));var X=b();var Z=k(X);Z.write(U,S);var R=0;var t=String.fromCharCode(p[R]);R+=1;while(R<p.length){var T=String.fromCharCode(p[R]);R+=1;if(u.contains(t+T)){t=t+T}else{Z.write(u.indexOf(t),S);if(u.size()<4095){if(u.size()==(1<<S)){S+=1}u.add(t+T)}t=T}}Z.write(u.indexOf(t),S);Z.write(W,S);Z.flush();return X.toByteArray()};var r=function(){var u={};var J=0;var t={};t.add=function(I){if(t.contains(I)){throw new Error("dup key:"+I)}u[I]=J;J+=1};t.size=function(){return J};t.indexOf=function(I){return u[I]};t.contains=function(I){return typeof u[I]!="undefined"};return t};return l};var B=function(q,s,k,m){var n=a(q,s);var t=b();n.write(t);var l=D();var r=t.toByteArray();for(var o=0;o<r.length;o+=1){l.writeByte(r[o])}l.flush();var p="";p+="<img";p+='\u0020src="';p+="data:image/gif;base64,";p+=l;p+='"';p+='\u0020width="';p+=q;p+='"';p+='\u0020height="';p+=s;p+='"';if(m){p+='\u0020alt="';p+=m;p+='"'}p+="/>";return p};return G}();i.exports=h},{}],28:[function(l,j,h){var i=l("./class-qr");var k={setURL:function(a,b){k._setCode(document.querySelector("#qrHolder img"),a,b)},setShareURL:function(b,c){var a=document.querySelectorAll(".qrContainer");_.each(a,function(d){k._setCode(d,b,c)})},_setCode:function(b,a,c){if(b instanceof HTMLImageElement){b.src=i.dataUrl(a)}else{b.style.backgroundImage="url("+i.dataUrl(a,c||200)+")";b.style.backgroundPosition="center";b.style.backgroundRepeat="no-repeat"}}};j.exports=k},{"./class-qr":27}],29:[function(n,m,i){var k=n("./class-storage");var j=n("./utils");var l={isScrolling:false,isSwiping:false,isDoubleTapping:false,isTapHolding:false,setup:function(a){$.mobile.scrollview.prototype._handleDragStart=(function(b){var c=$.mobile.scrollview.prototype._handleDragStart;return function d(p){var h=$.inArray($(p.target).closest(".pageWidget").attr("id"),a.linkOrigin);if(h==-1){h=$.inArray($(p.target).closest(".pageWidget").data("lockto"),a.linkOrigin)}var f=h>-1&&a.triggerType[h];if(f&&(f=="taphold"||f=="doubletap"||f.substr(0,5)=="swipe")){return true}c.apply(this,arguments)}}());$.mobile.scrollview.prototype._handleDragMove=(function(b){var c=$.mobile.scrollview.prototype._handleDragMove;return function d(f){l.isScrolling=true;c.apply(this,arguments)}}());$.mobile.scrollview.prototype._handleDragStop=(function(c){var d=$.mobile.scrollview.prototype._handleDragStop;return function b(f){setTimeout(function(){l.isScrolling=false},10);d.apply(this,arguments)}}())},showPage:function(c){var d=$(this);d.find(".ui-content").attr("data-"+$.mobile.ns+"scroll","y");var f=k.get(g_preview).pageWH;var b,s=$(d).attr("id");if(s=="home"){return}b=[k.get(s).width,k.get(s).height];if(f[0]>=b[0]&&f[1]>=b[1]){return}var a=k.get(g_preview).orientation;var r=k.get(s).orientation;var h=a==r;var t="xy";if(!h){b=[b[1],b[0]]}if(b[0]==f[0]){t=h?"y":"x"}if(b[1]==f[1]){t=h?"x":"y"}d.find(":jqmData(scroll):not(.ui-scrollview-clip)").each(function(){var p=$(this);var o=p.attr("id");if(p.hasClass("ui-scrolllistview")){p.scrolllistview();return true}var w=p.jqmData("scroll")+"";var w=p.jqmData("scroll")+"";var z=w&&w.search(/^[xy]p$/)!=-1;var q={direction:t||undefined,paging:z||undefined,scrollMethod:p.jqmData("scroll-method")||undefined};p.scrollview(q)});if(!h){f=[f[1],f[0]]}d.css({"min-height":j.getTrueHeight()+"px"}).children(".ui-content").css({width:f[0]+"px",height:f[1]+"px"})}};m.exports=l},{"./class-storage":33,"./utils":69}],30:[function(f,i,h){var j={filter:function(){if(!j.filterDebounced){j.filterDebounced=_.debounce(j._filter,500)}j.filterDebounced()},_filter:function(){var v=$("#searchBox").val().trim().toLowerCase();var c=widgets.summary,A=[],w=[],u,t,z,B=[],C,a;C=$("#library .libraryWidget").removeClass("hidden"),a=$("#library .overview .setHeader").show();if(v!==""){var b=$("#uploadTabs li.libraryWidget");for(z in widgets.summary){u=c[z];if(u.g&&$.inArray(j.currentDisplay,u.g)>-1){if(c.hasOwnProperty(z)&&u.title){w=u.x?u.x.concat([]):[];w.push(u.title);for(t=0;t<w.length;t++){if(w[t].toLowerCase().indexOf(v)!==-1){A.push(z);B=B.concat(u.t)}}}}}A.forEach(function(l,k){C=C.not("#"+l).not(b.filter('[data-id="'+l+'"]'))});C.addClass("hidden");B=fluid.util._.compact(B);a.not(".libraryUploads");var d=$("#widgets .overview");B.forEach(function(k){a=a.not($("[data-groupName='"+k+"']",d).parents(".setHeader"))});if(j.currentDisplay=="Uploads"){a=a.not($("[data-groupName='Uploads']",d).parent())}a.hide();if(B.length){$(".emptyLibDisplay").hide()}else{$(".emptyLibDisplay").show()}}else{$(".emptyLibDisplay").hide()}fluid.main.fire("libfilterdone")},focus:function(){$("#searchBox").focus().select()}};i.exports=j},{}],31:[function(q,t,p){var o=q("./class-storage");var r=q("./class-qrCode");var s=q("./class-notification");var n=q("./class-page");var m=q("./class-projectSettings");var l={lastProjectId:null,url:null,url2:null,downloadURL:null,printURL:null,init:function(a){l.lastProjectId=a;l.setElements(a);$("input[data-default]",".ac-container-sharing").click();fluid.main.on("projectOpened,projectSharingOpened",function(){$(".shareLinkExportLocalFull, .shareLinkExportLocal").siblings(".msg").find("a").remove()});fluid.main.on("editor.afterLogout",function(){$(".exportImgHolder .msg a").remove()});l.setMaxShareMenuHeight()},setElements:function(b){var f=o.get(b);var c=(document.location.href).split("?");var a=b+"."+f.updated;l.url=c[0]+"project/"+a;l.url2=c[0]+"preview/"+a;l.downloadURL=c[0]+"export/"+a;l.printURL=c[0]+"?p="+b+"&print=y&print_inter=y";var d="Mobile mockup created with FluidUI.com from @FluidUI_Team "+l.url2;r.setShareURL(l.url,200);$(".previewExternal").attr("href",l.url2);$(".previewLinkLong").html(l.url2);$(".shareSendMail").find("[name=p]").val(a);$(".shareFacebook").attr("href","http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(l.url2));$(".shareTwitter").attr("href","http://twitter.com/home?status="+encodeURIComponent(d))},actionCopyLinkOrCode:function(a){$(a.target).select()},actionAlertCopyLink:function(a){s.add("alert","Link Copied");fluid.main.fire("shareLinkCopy")},actionMailSent:function(a){l.mailClear()},actionPreviewExternal:function(){window.open(l.url2,"previewExternal")},actionParseSnapshot:function(b,c,a){try{var f=JSON.parse(a.responseText)}catch(d){s.add("alert","Error starting export");return false}if(f.a==="PAGES"){$msgBox=$("#previewShareContainer .shareLinkExportImg").add("#projectSettingsShareTop .shareLinkExportImg").next(".msg")}else{$msgBox=$("#previewShareContainer .shareLinkExportImgFull").add("#projectSettingsShareTop .shareLinkExportImgFull").next(".msg")}if(f.r=="s"){if(f.queue===0){$msgBox.html("exporting...");$msgBox.addClass("pulsing");s.add("alert","Export in progress. Please stick with us, this can take up to a minute.")}else{$msgBox.html("queued ("+f.queue+")...");$msgBox.addClass("pulsing");s.add("alert","Project queued for export. Please wait.")}l.startExportPolling(f.snapshotId)}else{$msgBox.html("error...");$msgBox.removeClass("pulsing");s.add("alert","Error starting export")}},startExportPolling:function(a){if(!l.exportPollTimeout){l.exportPollTimeout=7000;l.exportPollMaxRetries=50}l.exportPollTried=0;setTimeout(l.pollExport.bind(l,a),l.exportPollTimeout)},pollExport:function(a){$.ajax({url:"./index.php",type:"POST",data:{t:"getExportStatus",snapshotId:a},success:function(b,c,d){var h=JSON.parse(b);var f;if(h.projectId!==fluid.main.project.get("id")){return}if(h.stype==="PAGES"){f=$("#previewShareContainer .shareLinkExportImg").add("#projectSettingsShareTop .shareLinkExportImg").next(".msg")}else{f=$("#previewShareContainer .shareLinkExportImgFull").add("#projectSettingsShareTop .shareLinkExportImgFull").next(".msg")}if(h.status==="FAILED"){l.exportPollTried=0;f.html("failed...");f.removeClass("pulsing")}else{if(h.status==="FINISHED"){s.add("alert",'Export done successfully. Click <a class="export-link" rel="'+h.snapshotId+'">here</a> to download');l.exportPollTried=0;f.html('<a class="export-link" rel="'+h.snapshotId+'">Download ('+h.processDate+")</a>");f.removeClass("pulsing")}else{if(h.status==="STARTED"||(h.status==="NEW"&&h.queue===0)){f.html("exporting...");f.addClass("pulsing");l.exportPollTried++;if(l.exportPollTried<l.exportPollMaxRetries){setTimeout(l.pollExport.bind(l,a),l.exportPollTimeout)}}else{if(h.status==="NEW"){f.html("queued ("+h.queue+")...");f.addClass("pulsing");l.exportPollTried++;if(l.exportPollTried<l.exportPollMaxRetries){setTimeout(l.pollExport.bind(l,a),l.exportPollTimeout)}}}}}},error:function(b,c,d){l.exportPollTried=0;$msgBox.html("error...")}})},downloadExport:function(){var a=$(this).attr("rel");window.open(document.location.origin+document.location.pathname+"snapshot/"+a,"_snapshot")},actionLogSharedProject:function(a){var b=$(a.target).attr("data-for");fluid.api.shareLog(l.lastProjectId,b,function(){s.add("alert","Project shared")},function(){s.add("alert","Project could not be shared")})},actionLink:function(f){var a=[];function Z(z){var u=z.getHours();var w=z.getMinutes();var A=u>=12?"pm":"am";u=u%12;u=u?u:12;w=w<10?"0"+w:w;var v=u+":"+w+A;return v}var b=new Date();var at=b.getDate()+"-"+(b.getMonth()+1)+"-"+b.getFullYear()+" "+Z(b);var d,af,ap=[],W=l.lastProjectId,ah=o.get(W),an=ah.name,ao,ab,al=0,aj,Y,ad,k,h,ai,am=false;var aa=function(z,u){z=z.replace(/\/|\||\?|\*|\|/g,"_");var w=z;if(u){w=w||"Project"}else{var v=1;while(a.indexOf(w)!==-1){w=z+" "+v;v+=1}a.push(w)}return w};function aw(u){var v=new FormData();v.append("t","uploadExportForSafari");v.append("safariZip",u);$.ajax({url:document.location.origin+document.location.pathname,data:v,cache:false,contentType:false,processData:false,type:"POST"}).done(function(z){var w=document.location.origin+document.location.pathname+"?downloadExportForSafari&filename="+z;window.location.href=w}).fail(function(){s.add("alert","Something went wrong.")})}var ag=f.target.classList.toString().match(/shareLinkDownload|everUsedExport|shareLinkPrint|shareLinkExportLocalFull|shareLinkExportLocal/);if(!ag){return}else{target=ag[0]}if(fluid.main.fire("share.beforeAction",target)){var au=$(f.target);if(au.hasClass("shareLinkDownload")){if(au.hasClass("disabled")){return}window.open(l.downloadURL,"_export");fluid.main.fire("projectExport")}else{if(au.hasClass("shareLinkPrint")){window.g_window_print=window.open(l.printURL,"_print")}else{if(au.hasClass("shareLinkExportLocal")){s.add("alert","Export in progress. Please stick with us, this can take up to a minute.");if(window.JSZip){d=new JSZip();aj=d.folder(aa(an,true));h=function(v,u){if(v&&u){v=aa(v);v+=".png";u=u.slice(u.indexOf(",")+1);aj.file(v,u,{base64:true})}else{s.add("alert","Baah! Something went wrong...")}};ai=function(){var u=d.generate({type:"blob"});var v=aa(an,true)+" "+at+".zip";if(window.safari){aw(u)}else{saveAs(u,v)}};ab=ah.pages;setTimeout(function(){var v=1;var w={};var u=[];ab.forEach(function(B){var z=fluid.main.project.pages.get(B).attributes.name;var A="page "+(z||v++);if(u.indexOf(A)===-1){u.push(A)}else{if(z){A+=v++;u.push(A)}}w[B]=A;n.drawRasterised(B,function(C,D){h(w[C],D);al+=1;if(ab.length===al){ai()}},true,true)})},300)}else{s.add("alert","Baah! Something went wrong...")}}else{if(au.hasClass("shareLinkExportLocalFull")){s.add("alert","Export in progress. Please stick with us, this can take up to a minute.");k=function(v,z){var u=v[0];var w;if(z){for(w=1;w<v.length;w++){if(v[w]>u){u=v[w]}}}else{for(w=1;w<v.length;w++){if(v[w]<u){u=v[w]}}}return u};ab=ah.pages;var j={};var ac=[],c=[],ak=[],i=[];var av={xMin:null,yMin:null,xMax:null,yMax:null,padding:20};var ar=0;var X=0;var ae=0;var aq=0;ab.forEach(function(z){var w=o.get(z);var u=w.x+w.width;var v=w.y+w.height;j[z]={x:w.x,y:w.y,width:w.width,height:w.height,data:null};ac.push(w.x);c.push(w.y);ak.push(u);i.push(v)});av.xMin=k(ac);av.xMax=k(ak,true);av.yMin=k(c);av.yMax=k(i,true);Y=function(E,u){var H="",F="",C,z,I=E[ab[0]];var M=av.xMax-av.xMin+2*av.padding;var w=av.yMax-av.yMin+2*av.padding;var A=function(ax,T,aI){var ay,R,P,aG;var aH=0,N=0,aL=0,aM=0,aF,aK;ay=T.y+ax.top+ax.height/2;R=T.x+ax.left+ax.width/2;P=(aI.y+aI.height/2);aG=(aI.x+aI.width/2);var S=aG-R;var V=P-ay;var O=V/S;if(Math.abs(O)>aI.height/aI.width){if(P>ay){aL=S-aI.height/(2*O)}else{aL=S+aI.height/(2*O)}aM=aL*O}else{if(aG>R){aL=S-aI.width/2}else{aL=S+aI.width/2}aM=O*aL}aH=(R+aH);N=(ay+N);aL=(R+aL);aM=(ay+aM);var az=Math.sqrt(Math.pow((aH-aL),2)+Math.pow((N-aM),2));var U=20/az;var Q=U*aH+(1-U)*aL;var aJ=U*N+(1-U)*aM;return{x1:aH-av.xMin+av.padding,x2:Q-av.xMin+av.padding,y1:N-av.yMin+av.padding,y2:aJ-av.yMin+av.padding}};var B=function(ay,aJ,aF,aK){var aE='<line stroke-linecap="butt" x1="'+ay+'" y1="'+aJ+'" x2="'+aF+'" y2="'+aK+'" stroke="#3fa9f5" stroke-width="10"/>\n';var N=6;var P=10;var S=20;var U=(ay-aF);var ax=(aJ-aK);var V=Math.sqrt(U*U+ax*ax);var aG=U/V;var aI=ax/V;aF=aF+(P-S)*aG;aK=aK+(P-S)*aI;var az=aF+P*aG;var aH=aK+P*aI;var O=az-N*aI;var Q=aH+N*aG;var R=az+N*aI;var T=aH-N*aG;aE+='<polygon points="'+aF+","+aK+" "+O+","+Q+" "+R+","+T+'" stroke="#3fa9f5" stroke-width="10"/>\n';return aE};var D=ah.links;var J='<marker xmlns="http://www.w3.org/2000/svg" id="triangle" viewBox="0 0 10 10" refX="3.5" refY="5" fill="#3fa9f5" markerUnits="strokeWidth" markerWidth="4" markerHeight="3" orient="auto"><path d="M 0 0 L 10 5 L 0 10 z"/></marker>\n';H+='<?xml version="1.0" encoding="utf-8"?>\n';H+='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n';H+='<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="'+M+'px" height="'+w+'px">\n';H+=J;F=H;var G=v();var K=L();function L(){var N="";N+="<g>\n";ab.forEach(function(T){var O=E[T];var P=O.x-av.xMin+av.padding;var R=O.y-av.yMin+av.padding;var Q=O.width;var S=O.height;N+='    <image xlink:href="'+O.data+'" x="'+P+'" y="'+R+'" height="'+S+'px" width="'+Q+'px"/>\n';N+='    <rect x="'+P+'" y="'+R+'" height="'+S+'px" width="'+Q+'px" stroke="black" strokeWidth="2" fill="none"/>\n'});N+="</g>\n";return N}function v(){var N="";if(D.linkOrigin&&D.linkOrigin.length){N+="<g>\n";D.linkOrigin.forEach(function(P,O){var Q=o.get(D.linkDest[O]);var T=o.get(P,{returnModel:true});var S=T.getBox();var R=o.get(T.getPage().id);if(R&&Q){var U={};U.left=S[0];U.top=S[1];U.width=S[2];U.height=S[3];calcLine=A(U,R,Q);N+=B(calcLine.x1,calcLine.y1,calcLine.x2,calcLine.y2)}});N+="</g>\n"}return N}H+=K;H+=G;F+=G;F+=K;H+="</svg>";F+="</svg>";return{linksOnTop:H,normal:F}};d=new JSZip();aj=d.folder(aa(an,true));h=function(v,u){if(v&&u){v=aa(v);aj.file(v,u)}else{s.add("alert","Baah! Something went wrong...")}};ai=function(){var u=d.generate({type:"blob"});var v=aa(an,true)+" "+at+".zip";if(window.safari){aw(u)}else{saveAs(u,v)}};ad=function(){var A=ab[al],w,z,v,u;n.drawRasterised(A,function(B,C){j[B].data=C;al+=1;if(ab[al]){ad()}else{v=Y(j);h((an||"Project")+" visible links.svg",v.linksOnTop);h((an||"Project")+".svg",v.normal);ai()}},true,true)};setTimeout(function(){ad()},300)}}}}}},mailClear:function(a,c){if(c&&c.r==="s"){a=null}var f=$("#emailHolder .shareSendMailReceipients");var b=$("#emailHolder2 .shareSendMailReceipients");if(a){s.add("alert",a);b.val("")}else{var d=f.val();if(d!==""){s.add("alert","A link to your mockup has been sent to "+d);f.val("")}else{d=b.val();s.add("alert","Project sent successfully");b.val("")}}},setMaxShareMenuHeight:function(){$("#previewShare").css("max-height",window.innerHeight-72)},sharePreview:function(a){var b=$(this).find("input[name=email]").val();fluid.api.previewMail(b,$(this).find("input[name=p]").val(),function(){l.mailClear()},function(){s.add("alert","Failed to send mockup link.")});return false},sendMail:function(){var a=$(this).find("input[name=email]").val();fluid.api.previewMail(a,$(this).find("input[name=p]").val(),function(){l.mailClear()},function(){s.add("alert","Failed to send mockup link.")});return false},sendToUser:function(a){if(a){a.preventDefault()}var b=$(this);var c=b.find(".shareSendMailReceipients").val();if(c.indexOf(fluid.main.account.get("email"))!==-1){m.actionTransferCallback(null,"Use clone in project settings. Unable to send to own account.")}else{fluid.api.projectTransfer(fluid.main.project.get("id"),c,m.actionTransferCallback,m.actionTransferCallback)}return false}};fluid.main.on("projecttransfercomplete",function(b,a,c){l.mailClear(a,c)});fluid.main.on("sharemenuopen",function(b,a){l.init(a)});t.exports=l},{"./class-notification":17,"./class-page":18,"./class-projectSettings":24,"./class-qrCode":28,"./class-storage":33}],32:[function(o,n,p){var l=o("./class-storage");var m=o("./class-propertyInspectorController");var j=o("./utils");var k={initMenus:function(){k.fixedWidget=$("#fixedWidget");k.unfixedWidget=$("#unfixedWidget");k.fixedWidgetMenu=$("#fixedWidgetMenu");k.fixedWidgetsEditor=$("#contextMenuItems .fixedWidgetsEditor");k.pinnedBtn=$("#pinnedBtn");k.unpinnedBtn=$("#unpinnedBtn")},changeContextMenuIndicators:function(a){var b=k.determineStatic(a);k.unfixedWidget.hide();k.fixedWidget.hide();(b==false)?k.unfixedWidget.show():k.fixedWidget.show()},updateMenu:function(){var a=fluid.selection.getSelectionModel().getElements().not(".backgroundWidget");k.changeContextMenuIndicators(a);var c=k.staticMenuOpen;k.hideMenu();if(c==true){var b=j.findPositionOnScreen(a);if(a.length>0&&b==true){k.showMenu(a)}}},hideMenu:function(){k.staticMenuOpen=false;k.fixedWidgetsEditor.hide()},positionMenu:function(){var c=$("#staticWidgetBtn");var d=parseInt(c.css("left"));var a=parseInt(c.css("width"));var f=parseInt($("#fixedWidgMenuHolder").css("width"))+(2*(parseInt($("#fixedWidgMenuHolder").css("padding-left"))));var b=d+a-f;k.fixedWidgetMenu.css("left",(b)).css("top",45)},showMenu:function(a){k.positionMenu();k.staticMenuOpen=true;if(!a){a=fluid.selection.getSelectionModel().getElements()}k.fixedWidgetsEditor.show();var b=k.determineStatic(a);k.updateButtonStates(b,a)},updateButtonStates:function(d,b){function c(){k.pinnedBtn.hide().removeClass("pinBtnActivated");k.unpinnedBtn.removeClass("pinBtnActivated singlePinnedBtn");$("#fixedWidgMenuHolder").removeClass("smallFixedWidgMenu")}c();var a=j.findPositionOnScreen(b);if(a==true){switch(d){case (false):k.pinnedBtn.show();k.unpinnedBtn.addClass("pinBtnActivated");break;case ("front"):k.pinnedBtn.show().addClass("pinBtnActivated");break;case ("back"):k.pinnedBtn.show().addClass("pinBtnActivated");break}}else{if(d=="front"||d=="back"){k.pinnedBtn.show().addClass("pinBtnActivated")}else{$("#fixedWidgMenuHolder").addClass("smallFixedWidgMenu");k.unpinnedBtn.addClass("pinBtnActivated singlePinnedBtn");k.positionMenu()}}},staticMenuOpen:false,toggleStaticWidgetMenu:function(){if(k.staticMenuOpen==true){k.hideMenu()}else{k.showMenu();fluid.main.fire("staticwdgmenushown")}},hideStaticBoundary:function(){$("#staticBoundary1, #staticBoundary2").remove()},drawBoundaries:function(r){var a=$("#staticBoundary1, #staticBoundary2, #staticBoundary3, #staticBoundary4");a.remove();$staticBoundary1=$('<div id="staticBoundary1"></div>');$staticBoundary2=$('<div id="staticBoundary2"></div>');$staticBoundary3=$('<div id="staticBoundary3"></div>');$staticBoundary4=$('<div id="staticBoundary4"></div>');j.getActivePage().append($staticBoundary1,$staticBoundary2,$staticBoundary3,$staticBoundary4);var c=r.pageId,h=r.pageHeight,d=r.pageWidth,b=r.deviceWidth,f=r.deviceHeight,i=1/fluid.zoom.getCurrentScale()*2;if(i<1){i=1}if(h!==f){$staticBoundary1.css({width:b,height:f,background:"linear-gradient(to right, #3FA9F5 0%, #3FA9F5 40.70588%, transparent 40.70588%)",backgroundPosition:"0 bottom",backgroundSize:"30px "+i+"px",backgroundRepeat:"repeat-x"});$staticBoundary2.css({left:15,width:b-15,height:f,background:"linear-gradient(to right, #FFFFFF 0%, #FFFFFF 40.70588%, transparent 40.70588%)",backgroundPosition:"0 bottom",backgroundSize:"30px "+i+"px",backgroundRepeat:"repeat-x"})}if(d!==b){$staticBoundary3.css({width:b,height:f,background:"linear-gradient(to bottom, #3FA9F5 0%, #3FA9F5 40.70588%, transparent 40.70588%)",backgroundPosition:"right 0",backgroundSize:i+"px 30px",backgroundRepeat:"repeat-y"});$staticBoundary4.css({top:15,width:b,height:f-15,background:"linear-gradient(to bottom, #FFFFFF 0%, #FFFFFF 40.70588%, transparent 40.70588%)",backgroundPosition:"right 0",backgroundSize:i+"px 30px",backgroundRepeat:"repeat-y"})}},zoomInBoundary:function(){if(fluid.main.project.get("active")===false){return}k.hideStaticBoundary();var a=j.getActivePageId();if(a){k.showStaticBoundary(a)}},hLimiter:false,vLimiter:false,currentPageId:false,showStaticBoundary:function(a){var b=l.get(a).width;var h=l.get(a).height;var d=fluid.main.project.get("pageWH");d=$.extend(true,[],d);var c=fluid.main.project.pages.get(a).get("orientation");var i=d[0];var f=d[1];var r=(i<f)?"Portrait":"Landscape";if(c!==r){i=d[1];f=d[0]}k.drawBoundaries({pageId:a,pageHeight:h,pageWidth:b,deviceWidth:i,deviceHeight:f})},determineStatic:function(b){allStaticWidgetsFront=[];if(b){var c=b}else{var c=fluid.selection.getSelectionModel().getElements()}c=c.not(".backgroundWidget");var a=c.length;if(a==0){d=false;return}c.each(function(){var f=$(this).attr("id");var h=l.get(f);if(h.st=="f"){allStaticWidgetsFront.push(f)}});var d=false;if(allStaticWidgetsFront.length==a){d="front"}return d},getSelection:function(){var a=fluid.selection.getSelectionModel().getLockTos().getElements().not(".backgroundWidget");return a},mapSelection:function(i){var h=$([]);for(var a=0;a<i.length;a++){var b=$("#"+i[a]);var c=b.attr("data-lockto");var d=$("#"+c);var f=widget.getLockTos($("#"+c));h=h.add(f,d)}return h},createZalignOrder:function(a){var b=[];a.each(function(){var d=$(this);var c=d.nextAll(".rootWidget").first().attr("id");b.push({id:d.attr("id"),fromNextId:c})});return b},pushToForeground:function(){var a=k.getSelection();if(a.length==0||!a){return}var b=k.determineStatic(a);if(b=="toFront"){return}fluid.command.create("staticToForeground",{direction:"toForeground",pastState:b,sel:a,order:k.createZalignOrder(a)}).dispatchTo("fluid.controllers.widget")},removeStaticProperty:function(){var a=k.getSelection();if(a.length==0||!a){return}var b=k.determineStatic(a);if(b==false){return}fluid.command.create("removeStaticWidgets",{pastState:b,sel:a}).dispatchTo("fluid.controllers.widget")},zAlignWidgets:function(b,f,a){var d=fluid.main.project.widgets.getRoots(b,{returnEls:true});var c=(f=="toBackground")?"cmBack":"cmFront";fluid.main.fire("zalignmentchange",{direction:c,roots:d,renderBlurs:a,pageId:j.getActivePageId()})},alignAll:function(i){i=i||j.getActivePageId();if(!i){return}var f=l.get(i);var c=f.widgets;var a=$([]);var b=false;var u;if(c){for(var h=0;h<c.length;h++){var t=c[h];var d=l.get(t);if(d.st=="f"){u=$("#"+t);b=j.findPositionOnScreen(u);if(b==true){a=a.add(u)}}}}var v=false;k.zAlignWidgets(a,"toForeground",v)},create:function(b,a){var c="f";b.each(function(){var f=$(this).attr("id");l.get(f,{returnModel:true}).set({st:c})});var d=k.determineStatic(b);k.changeContextMenuIndicators(b);k.updateButtonStates(d,b)},destroy:function(a){a.each(function(c){var f=$(this).attr("id");var d=fluid.main.project.get(f,{returnModel:true});d.unset("st")});var b=k.determineStatic(a);k.changeContextMenuIndicators(a);k.updateButtonStates(b,a)},undoZalign:function(c){for(var d=c.length-1;d>=0;d--){var f=c[d];var h=$('[data-lockto="'+f.id+'"]');if(f.fromNextId){h.detach().insertBefore("#"+f.fromNextId)}else{var a=h.parent();h.detach().appendTo(a)}}var b=j.getActivePageId();page.renderBlurs(b)}};fluid.main.on("closeallpopups",k.hideMenu);fluid.main.on("pageactivated",k.zoomInBoundary);n.exports=k},{"./class-propertyInspectorController":26,"./class-storage":33,"./utils":69}],33:[function(z,A,s){var u=z("./fluid/fluid.main");var t=z("./fluid/models/project");var w=z("./fluid/models/upload");var v=z("./fluid/models/account");var p=z("./class-dbStorage");var B=z("./class-event");var o=z("./utils").getParentWindow;var q={tempStorage:{},cachedUpdates:{},caching:false,lastUpdate:new Date().getTime(),get:function(a){if(r.tempStorage[a]){return r.tempStorage[a]}if(localStorage){var b=localStorage.getItem(a);if(b){r.tempStorage[a]=JSON.parse(b);return r.tempStorage[a]}}return null},tabSynchronisationCheckInterval:3000,lastTabSynchronisationCheck:null,set:function(a,d,j){if(!a||!d){return}var b=j==undefined?true:j;if(this.lastTabSynchronisationCheck+this.tabSynchronisationCheckInterval<new Date().getTime()){var h=localStorage.getItem("instanceId");if(h&&parseInt(h)!=g_instanceId){var c=localStorage.getItem("restoreMyInstanceId");if(c){r._setItem("instanceId",g_instanceId);localStorage.removeItem("restoreMyInstanceId");return}r._setItem("postloadMessage","tab");location.reload();return}}if(typeof(d)=="string"){d=JSON.parse(d)}r.lastUpdate=this.lastTabSynchronisationCheck=new Date().getTime();if((d)&&(b)){d.updated=r.lastUpdate}var i=JSON.stringify(d);try{if(this.caching){this.cachedUpdates[a]=d}else{r._setItem(a,i)}this.tempStorage[a]=d}catch(f){}B.triggerEditor("storageChanged",{id:a,obj:d,timeUpdated:b})},remove:function(a){delete this.tempStorage[a];delete this.cachedUpdates[a];localStorage.removeItem(a)},cacheStart:function(){this.caching=true},commitCache:function(){if(!this.caching){return}this.caching=false;for(var a in this.cachedUpdates){this.set(a,this.cachedUpdates[a]);delete (this.cachedUpdates[a])}},setTempItem:function(a,b){this.tempStorage[a]=b},removeItem:function(a){localStorage.removeItem(a)},clear:function(){tempStorage={};cachedUpdates={};localStorage.clear()},_setItem:function(a,d){var b=false;while(!b){try{localStorage.setItem(a,d);b=true}catch(c){if(c&&(c.name=="QUOTA_EXCEEDED_ERR"||c.name=="NS_ERROR_DOM_QUOTA_REACHED"||c.code===22)){projTempObj.unloadOldest()}else{throw c}}}}};var r={get:function(a,f){var c=a&&a.substr?a.substr(1,1):"";var h,b,i;if(!a){return false}if(a[0]==="p"&&(!fluid.main.project||fluid.main.project.id!==a)&&fluid.main.projects){h=fluid.main.projects.get(a,f);if(f&&f.returnModel){return h}else{return h?h.toJSON():false}}else{if(fluid.main&&fluid.main.project&&((c==="_"&&(a[0]==="p"||a[0]==="x"||a[0]==="w"||a[0]==="l"))||((a[0]==="p"||a[0]==="x"||a[0]==="w"||a[0]==="l")&&a.length===33))){b=fluid.main.project.get(a,f);if(b){return b}else{_.each(fluid.main.projects,function(m,l,j){var k=j.models[l].get(a,f);if(k){b=k}});return b}}else{if(fluid.main&&fluid.main.account&&((c==="_"&&a[0]==="u")||(a[0]==="u"&&a.length===33))){b=fluid.main.account.toJSON();return b}else{if(fluid.main&&fluid.main.uploads&&((c==="_"&&a[0]==="i")||(a[0]==="i")||a.length===33)){h=fluid.main.uploads.get(a);if(f&&f.returnModel){return h}else{return h?h.toJSON():false}}else{if(!(location.origin!=="file://"&&location.origin!=="null")&&window.g_preview&&o()&&window.fluid.storage){var d=window.top.fluid.storage.get(a,f);return d}}}}}i=q.get(a);if(a!=="accounts"&&a!=="bin"&&i){}if(i){return $.extend({},i)}else{return false}},set:function(a,b,h){b=_.clone(b);var c=a&&a.substr?a.substr(1,1):"";if(!a||!a.length){}if(c==="_"||((a.length===33)&&(a[0]==="p"||a[0]==="x"||a[0]==="w"||a[0]==="i"||a[0]==="u"))){if(a[0]==="p"&&fluid.main.project){if(fluid.main.project.id===a){fluid.main.project.set(b);return true}else{var d=fluid.main.projects.get(a);if(d){d.set(b);return true}else{return false}}}else{if(a[0]==="u"){if(fluid.main.account&&fluid.main.account.id===a){fluid.main.account.set(b);return true}else{return false}}else{if(a[0]==="i"){if(!b.id){b.id=a}var i=fluid.main.uploads.get(a);if(i){i.set(b)}else{fluid.main.uploads.add(b)}delete b.id;return true}else{if(a[0]==="b"){var f=fluid.main.account.customwidgets.get(a);if(f){f.set(b)}else{fluid.main.account.customwidgets.add(b)}}else{if(fluid.main.project){fluid.main.project.setChild(a,b);return true}}}}}}q.set(a,b,h);return true},remove:function(a){var b=a.substr(0,2);if(b==="w_"){fluid.main.project.widgets.remove(a)}else{if(b==="x_"){fluid.main.project.pages.remove(a)}}return q.remove(a)},cacheStart:function(){return q.cacheStart()},commitCache:function(){return q.commitCache()},setTempItem:function(a,b){return q.setTempItem(a,b)},removeItem:function(a){return q.removeItem(a)},clear:function(){return q.clear()},_setItem:function(a,b){return q._setItem(a,b)},init:function(a){a=_.once(a);if(window.g_preview){a();return}fluid.main.projects=new fluid.Projects();fluid.main.uploads=new fluid.Uploads();p.onReady(function(){var b=r.get("accounts");if(b&&b.last){p.get("accounts",b.last,function(c){if(c.fetched.length){fluid.main.account=new fluid.models.Account(c.resultsObj[c.fetched[0]].data);p.get("uploadHeaders",fluid.main.account.id,function(h){if(h.fetched.length&&h.resultsArr[0]){var i=fluid.util._.toArray(h.resultsArr[0].data);fluid.main.uploads=new fluid.Uploads(i)}var d=fluid.main.account.get("lastOpenProject");var f=false;var j=fluid.main.account.get("projectIds");if(j.length){p.get("projects",j,function(F){if(F.fetched.length===0){a()}else{j=_.difference(j,F.failed);for(var k=0;k<F.resultsArr.length;k++){if(F.resultsArr[k]){var l=F.resultsArr[k].id,m=F.resultsArr[k].data,E=F.resultsArr[k].data[F.resultsArr[k].id];if(!E.id){E.id=l}if(l===d){f=true;fluid.main.project=new fluid.models.project(m,{parse:true,projectId:d});fluid.main.projects.add(fluid.main.project,{silent:true});if(fluid.main.project.get("removed")){fluid.main.project.set({removed:false})}j=_.without(j,F.resultsArr[k].id);if(m[d].unloaded){projTempObj.loadIfUnloaded(d,function(){if(j.length===0){a()}},{buildModel:true})}else{p.get("uploads",_.keys(m.uploads),function(C){if(C.fetched.length){var H;for(var D=0;D<C.resultsArr.length;D++){H=false;if(C.resultsArr[D]&&C.resultsArr[D].id){H=r.get(C.resultsArr[D].id,{returnModel:true})}if(H&&C.resultsArr[D]&&C.resultsArr[D].data){H.set({imgData:C.resultsArr[D].data},{})}}}if(j.length===0){a()}})}}else{if(E.unloaded){fluid.main.projects.add(E,{silent:true});j=_.without(j,F.resultsArr[k].id);if(j.length===0){a()}}else{var n=new fluid.models.project(m,{parse:true,projectId:l});fluid.main.project=n;fluid.main.projects.add(n,{silent:true});j=_.without(j,F.resultsArr[k].id);if(j.length===0){a()}}}}}if(!f){a()}}})}else{localStorage.clear();localStorage.setItem("badinit",true);p.clear();setTimeout(function(){location.reload()},200)}})}else{a()}})}else{a()}})},tempStorage:q.tempStorage};if(!fluid){fluid={}}fluid.storage=r;A.exports=r},{"./class-dbStorage":8,"./class-event":9,"./fluid/fluid.main":48,"./fluid/models/account":55,"./fluid/models/project":59,"./fluid/models/upload":60,"./utils":69}],34:[function(f,j,h){var i={enabled:false,defaultLevel:10,level:10,record:function(c,a,n,m,b){if(!i.enabled){return}a=a?a:i.defaultLevel;if(i.level<a){return false}var d={action:c,userId:fluid.main.account.get("id")};ajax.syncUp(d,"tracker","",b);return true},setLevel:function(a){a=a?a:i.defaultLevel;i.level=a},disable:function(){i.setLevel(0)}};j.exports=i},{}],35:[function(r,t,p){var n=r("./class-panels");var q=r("./class-payments");var s=r("./class-notification");var v=r("./class-canvas");var m=r("./functions");var u=r("./class-event");var o={isOpen:false,panelStack:new Array(),startPanel:null,helpLoaded:false,openMenuAfterExit:true,placeHolders:{feedbackFix:"Tell us a little more so we can fix the bug",feedbackNew:"Tell us a little more so we add more awesome features!",feedbackOther:"Tell us a little more so we can be more Fluid!"},init:function(){$("#userSettingsLink").live({click:o.open});$("input.upgrade").live({click:function(){if($(this).attr("id")==="upgradeLink"){fluid.main.fire("fluidMenuUpgradeLinkClicked")}o.goToUpgrade(null,undefined,undefined,true)}});$(".socialLinks .feedback").live({click:o.goToContact});$("#userSettingsChangeAccount").live({click:function(){fluid.main.fire("accountMenuUpgradeLinkClicked");o.goToUpgrade()}});$("#userSettingsChangeEmail").live({click:o.goToChangeEmail});$("#userSettingsChangePassword").live({click:o.goToChangePassword});$("#userSettingsPauseBilling").live({click:o.goToPauseBilling});$(".experienceType").click();$("#upgradeFormFree").submit(n.submitFree);$(".experienceType").click(n.rateEditor);$("#pauseBillingFeedback").click(o.proceedPauseBilling);$("#userSettingsContact").live({click:o.goToContact});$("#userSettingsBilling").live({click:o.goToBilling});$("#userSettingsBillingAddressBtn").live({click:o.goToBilling});$("#userSettingsBillingHistory").live({click:o.goToReceipts});$("#userSettingsCode").live({click:o.goToCode});$("#userSettingsRemoveAccount").live({click:o.goToRemoveAccount});$("#userSettingsRemoveAccountCancel, #userSettingsRemoveAccountConfirmCancel").live({click:o.reStart});$(".recoverPasswordSettings").live({click:o.goToResetPassword});$("#userSettingsChangeEmailForm").live({submit:o.actionChangeEmail});$("#userSettingsChangePasswordForm").live({submit:o.actionChangePassword});$("#userSettingsBillingForm").live({submit:o.actionBilling});$("#userSettingsCardYear, #userSettingsCardMonth").on("change",function(){$(this).trigger("blur")});$("#userSettingsContactForm").on("submit",o.actionContact).on("input",function(c){var d=document.getElementById("userSettingsContactMessage").value,f=document.getElementById("userSettincsContactSubmit");if(/(\s*\S\s*){3,}/.test(d)){f.removeAttribute("disabled")}else{f.setAttribute("disabled","")}});$("#userSettingsCodeForm").live({submit:o.actionCode});$("#userSettingsRemoveAccountForm").live({submit:o.actionRemoveAccount});$("#userSettingsRemoveAccountConfirmForm").live({submit:o.actionRemoveAccountConfirm});$("#userSettingsFeedbackForm").live({submit:o.actionFeedback});$("#userSettingsResetPasswordButton").live({click:o.actionResetPassword});$(".userSettingsFeedbackSetType").live({click:o.actionFeedbackSetType});$(".userSettingsMessageContainer").live({click:n.hideMessages});$("#userSettingsToggleMore").live({click:o.toggleMore});$("#updateBillingInfo").live("click",o.goToBilling);$("#userSettingsCardDetails").live("click",o.goToCardUpdate);$("#userSettingsCardSubmit").live("click",o.actionCardUpdate);$("#userSettingsBillingCountry").live("change",function(c){var d=c.target.options[c.target.selectedIndex].value;if(q.isVATApplicable(d)){$("#userSettingsVATSection").show()}else{$("#userSettingsVATSection").hide();$("#userSettingsBillingVAT").val("")}}).trigger("change");$("#monthlyEmailReceipt").live("click",function(){if(!fluid.main.account.get("emailReceiptEnabled")){fluid.main.account.set({emailReceiptEnabled:true})}else{fluid.main.account.set({emailReceiptEnabled:false})}o.toggeEmailReceiptmentForm.apply(this,arguments)});function a(f,d){var c=$(".form-error-area[data-for="+d.attr("id")+"]");if(c.size()>0){c.append(f)}}var b=$("#updateCardForm");q.validation.init({elem:{form:b,loginEmail:$("#userSettingsLoginEmail"),loginPassword:$("#userSettingsLoginPassword"),name:$("#userSettingsCardName"),number:$("#userSettingsCardNumber"),type:$("#userSettingsCardType"),logo:$("#userSettingsCardTypeLogo"),month:$("#userSettingsCardMonth"),year:$("#userSettingsCardYear"),cvv:$("#userSettingsCardCvv")},handler:{errorPlacement:function(d,c){switch(c.attr("id")){case"userSettingsCardNumber":d.insertAfter($("#userSettingsCardTypeLogo"));break;case"userSettingsCardMonth":d.insertAfter($("#userSettingsCardYear"));break;case"userSettingsCardYear":break;default:d.insertAfter(c)}}}});q.validation.init({elem:{form:$("#userSettingsBillingForm"),billingCompany:$("#userSettingsBillingCompany"),billingAddress:$("#userSettingsBillingAddress"),billingCountry:$("#userSettingsBillingCountry"),billingVAT:$("#userSettingsBillingVAT")},handler:{errorPlacement:a}});q.populateCardYears($("#userSettingsCardYear"),11);$(window).resize(o._resizeScreen);fluid.main.fire("userSettings.afterInit")},setInitialState:function(){$("#userSettingsBillingHistory, #userSettingsCardDetails, #userSettingsPauseBilling, #userSettingsBillingAddressBtn").hide();if(fluid.main.account.isFree()&&fluid.main.account.get("everUpgraded")===true){$("#userSettingsBillingHistory, #userSettingsBillingAddressBtn").show()}else{if(fluid.main.account.isFree()!==true){$("#userSettingsBillingHistory, #userSettingsCardDetails, #userSettingsPauseBilling, #userSettingsBillingAddressBtn").show()}}},reStartFromOutside:function(c,d){v.setEditorVisibility(true);var b=d!=undefined&&d.successMsg?d.successMsg:"";var a=d!=undefined&&d.successMsg!=undefined;if((a)||(o.isOpen)){o.isOpen=true;var f=o.startPanel==null?$("#userSettingsMain"):o.startPanel;o.reStart(c,b,$(".backFromUpgradeContainer",f))}else{fluidMenu.show()}},reStart:function(c,b,f){if(!o.isOpen){return}o.setInitialState();var d=o.startPanel==null?$("#userSettingsMain"):o.startPanel;if(d.is(":visible")){o.close();return}function a(){n.setSuccessMessage(b,f)}$(".currentEmail").text(fluid.main.account.get("email"));if(!$("#userSettingsContainer").is(":visible")){$("#userSettingsContainer").fadeIn(100)}$(".modalWindowContentWrapper").show();o._panelDisplay(d,true,a);o.panelStack=new Array()},open:function(b,c,a){fluid.main.fire("beforeusersetingopen");s.removeAll("projectLimit");n.hideMessages();n.setWorkArea();var d=$(".modalWindowContentFrame:visible, .modalWindowContentFrameLarge:visible, .modalWindowContentFrameExtraLarge:visible, .modalWindowContentFrameSmall:visible");d.hide();$("#userSettingsContainer").fadeIn(100);$(".modalWindowContentWrapper").show();if(!o.isOpen){o.isOpen=true;o.resetMore();o.panelStack=new Array();if((c!=undefined)&&(c.size()>0)){o.startPanel=c}else{o.startPanel=null}}if((c!=undefined)&&(c.size()>0)){o._panelDisplay(c,true,undefined,a)}else{o.reStart()}},close:function(b,a){o.openMenuAfterExit=o.openMenuAfterExit||a?true:false;v.setEditorVisibility(true);var c=$(".modalWindowContentFrame:visible, .modalWindowContentFrameLarge:visible, .modalWindowContentFrameExtraLarge:visible, .modalWindowContentFrameSmall:visible");if(c.length){if(!o.debouncedPanelHide){o.debouncedPanelHide=_.debounce(o.hide,500,true)}o._panelDisplay(c,false,o.debouncedPanelHide)}o.startPanel=null;o.isOpen=false;fluid.main.fire("userSettings.closePanels")},goBack:function(c,b,h){if(o.panelStack.length>1){var d=o.panelStack.pop();var f=o.panelStack.pop();function a(){u.triggerEditor("panelGoBack",{panelId:f.attr("id")},true);n.setSuccessMessage(b,h)}o._panelDisplay(f,true,a);return}o.reStart(c,b,h)},hide:function(){$(".modalWindowContentWrapper").hide();$("#userSettingsContainer").fadeOut(200);fluid.main.fire("usersettingshidden",o.openMenuAfterExit);o.openMenuAfterExit=true},hideCurrentPanel:function(b,c){n.hideMessages();var a=$(".modalWindowContentFrame:visible, .modalWindowContentFrameLarge:visible, .modalWindowContentFrameExtraLarge:visible, .modalWindowContentFrameSmall:visible");if(a.size()>0){o._panelDisplay(a,false,b)}else{var d=c==undefined?false:c;if(d){o.close()}b()}},resetMore:function(){$("#userSettingsBottomButtons").hide();$("#userSettingsToggleMore").text("More...")},toggleMore:function(){$("#userSettingsBottomButtons").slideToggle(400);var a=$("#userSettingsToggleMore");var b=a.text().indexOf("More")>-1?"...Less":"More...";a.text(b)},goToCreateAccount:function(b,a){if(o.isOpen){o.hideCurrentPanel(function(){account.startCreate(b,a)})}else{account.startCreate(b,a)}},goToUpgrade:function(b,l,c,a){var f={};if(!fluid.main.account.isFree()){f[fluid.main.account.get("accType")]=true}var d=fluid.util.tpl("upgradeDialogTmpl",f);var i=fluid.util.tpl("tipTemplate",{});document.getElementById("upgradeDialog").innerHTML=d;$("#upgradeDialog").parent().parent().append(i);var h=fluid.util.tpl("upgradeErrorTmpl");document.getElementById("upgradeError").innerHTML=h;if(o.isOpen){o.hideCurrentPanel(function(){fluid.main.trigger("upgrade.start");o.open(null,$("#upgradeDialog"))})}else{fluid.main.trigger("upgrade.start");$("body").keydown(m.preventDeleteBack);$("#form").show();fluid.main.trigger("upgrade.setUserData");var j=n.getCloseExternalWindowButtonLabel();var k=j=="Close"?"close":"back";$(".hud-button.userSettingsDone span").text(j);$(".hud-button.userSettingsDone").removeClass("close back").addClass(k);o.open(null,$("#upgradeDialog"));setTimeout(function(){o._fixCloseButton(true)},500)}},goToResetPassword:function(){o._panelDisplay($("#userSettingsPanelResetPassword"),true)},actionResetPassword:function(a){o.reStart(a,"resetPass");return false},goToChangeEmail:function(){$("#userSettingsChangeEmailNew").val("");$("#userSettingsChangeEmailPass").val("");o._panelDisplay($("#userSettingsPanelChangeEmail"),true)},actionChangeEmail:function(b){n.hideErrors();n.lastSubmitButton=$("#userSettingsChangeEmailSubmit");var a=$.trim($("#userSettingsChangeEmailNew").val());fluid.main.fire("useremailchangetrigger",a);return false},actionCheckedEmail:function(b,c){if(c.exists){n.displayError("emailUsed");return}var a=$.trim($("#userSettingsChangeEmailNew").val());var d=$.trim($("#userSettingsChangeEmailPass").val());if((a!="")&&(d!="")){fluid.api.changeEmail(a,d,o.actionChangeEmailCallback,o.actionChangeEmailCallback)}return false},actionChangeEmailCallback:function(c,a){if(c==null){if(a!=""){n.displayError(a);return false}n.displayError();return false}var b=JSON.parse(c);if(b.t===true||b.t==="true"){var d=$.trim($("#userSettingsChangeEmailNew").val());fluid.main.account.set({email:d});o.reStart(null,"default",$("#userSettingsChangeEmail"))}else{if(b.t.indexOf("Unknown error")>-1){n.displayError()}else{n.displayError("passInvalid")}}return false},goToChangePassword:function(){$("#userSettingsChangePasswordOld").val("");$("#userSettingsChangePasswordNew").val("");o._panelDisplay($("#userSettingsPanelChangePassword"),true)},actionChangePassword:function(c){n.hideErrors();n.lastSubmitButton=$("#userSettingsChangePasswordSubmit");var a=$("#userSettingsChangePasswordOld").val();var b=$("#userSettingsChangePasswordNew").val();if(a==b){n.displayError("passNotChanged");return false}fluid.api.changePass(a,b,o.actionChangePasswordCallback,o.actionChangePasswordCallback);return false},actionChangePasswordCallback:function(c,a){if(c==null){if(a!=""){n.displayError(a);return false}n.displayError();return false}var b=JSON.parse(c);if(b.t===true||b.t==="true"){o.reStart(null,"default",$("#userSettingsChangePassword"))}else{n.displayError("oldPassInvalid")}return false},goToCardUpdate:function(a){$("#userSettingsCardName, #userSettingsCardNumber, #userSettingsCardCvv, #userSettingsCardType").val("");$("#updateCardForm")[0].reset();$("#userSettingsCardTypeLogo").removeClass("ccTypeLogoVISA ccTypeLogoMC ccTypeLogoAMEX");$("#userSettingsCardSubmit").removeAttr("disabled");q.validation.reset($("#updateCardForm"));o._panelDisplay($("#userSettingsPanelCard"),true);return false},actionCardUpdate:function(c){function b(){fluid.api.updateCard({name:$("#userSettingsCardName").val(),number:$("#userSettingsCardNumber").val(),month:$("#userSettingsCardMonth").val(),year:$("#userSettingsCardYear").val(),type:$("#userSettingsCardType").val(),cvv:$("#userSettingsCardCvv").val()},o.actionCardUpdateCallback,o.actionCardUpdateCallback)}function a(){n.displayError("Sign in failed. Please check your email and password and try again.");$("#userSettingsCardSubmit").removeAttr("disabled")}if($(c.target.form).valid()){n.hideErrors();n.lastSubmitButton=$("#userSettingsCardSubmit");if(fluid.main.account.get("loggedIn")!="yes"){var d={t:"login",strict:true,uid:fluid.main.account.get("currentUserId"),instanceId:localStorage.getItem("instanceId"),email:$("#userSettingsLoginEmail").val(),password1:$("#userSettingsLoginPassword").val(),tandc:"on"};$.ajax({url:"./index.php",type:"POST",data:d,timeout:15000,success:function(h,f,i){var j=JSON.parse(i.responseText);if(j.r=="s"){signup.ajaxSuccess(h,f,i);b()}else{a()}},error:function(){a()},timeOut:function(){a()}})}else{b()}$("#userSettingsCardSubmit").attr("disabled","disabled")}return false},actionCardUpdateCallback:function(c,a){if(c==null){if(a!=""){$(".userSettingsLogin").fadeOut(200);n.displayError(a);return false}n.displayError();return false}var b=JSON.parse(c);if(b.t===true||b.t==="true"){if(fluid.main.account.get("status")=="pendingCardUpdate"){fluid.main.account.set({status:"ok"});o.showCloseButton();$("#updateCardForced").hide()}o.reStart(null,"default",$("#userSettingsCardDetails"))}else{n.displayError()}return false},goToBilling:function(){$("#userSettingsBillingCompany").val(fluid.main.account.get("billingCompany"));$("#userSettingsBillingAddress").val(fluid.main.account.get("billingAddress"));$("#userSettingsBillingCountry").val(fluid.main.account.get("billingCountry"));$("#userSettingsBillingVAT").val(fluid.main.account.get("billingVAT"));$("#userSettingsBillingCountry").trigger("change");o._panelDisplay($("#userSettingsPanelBilling"),true);return false},toggeEmailReceiptmentForm:function(){$(this).toggleClass("pressed");$("#emailReceiptsForm").toggle()},goToReceipts:function(){fluid.api.getPayments(function(a){a=JSON.parse(a);$("#userSettingsReceiptEmail").val(fluid.main.account.get("receiptEmails"));if(fluid.main.account.get("emailReceiptEnabled")){o.toggeEmailReceiptmentForm()}if(!a.receiptAvailable){$("#downloadAllReceipts").removeClass("active")}else{$("#downloadAllReceipts").addClass("active")}var b=a.t;var j=$("#receiptList .overview");j.find(".receiptListItem, .receiptEmptyMsg").remove();if(b.length===0){j.append('<div class="receiptEmptyMsg">No payments found...</div>');$("#downloadAllReceipts").removeClass("active")}if(a.msg){j.append('<div class="receiptEmptyMsg">'+a.msg+"</div>")}var f=["January","February","March","April","May","June","July","August","September","October","November","December"];var k,i,d;for(var l=0;l<b.length;l++){k=new Date(b[l].date*1000);d=k.getDate();if(d>3){i="th"}else{if(d==3){i="rd"}else{if(d==2){i="nd"}else{if(d==1){i="st"}}}}b[l].amountIncVat=b[l].amountIncVat/100;b[l].date=k.getFullYear()+" "+f[k.getMonth()]+" "+d+i;if(!a.receiptAvailable){b[l].hiddenClass="not-available"}if(b[l].status==="SUCCESS"){$("#tmplPaymentListItem").tmpl(b[l]).appendTo(j)}}n.adjustScroll($("#receiptList"));$(".pdfReceipt").live("click",function(){if(window.invoiceUser){window.open(window.location.href+"invoice/"+$(this).parent(".receiptListItem").attr("id").split("-")[1]+"/userId/"+window.invoiceUser,"invoice")}else{window.open(window.location.href+"invoice/"+$(this).parent(".receiptListItem").attr("id").split("-")[1],"invoice")}});$("#downloadAllReceipts").on("click",function(){if(!$(this).hasClass("active")){s.add("alert","No receipts to download!",{stopBuggingCallBack:true})}});$("#downloadAllReceipts.active").live("click",function(){window.open(window.location.href+"invoice/all","invoice")});function c(){var B=$("#userSettingsReceiptEmail").val().split(",");var D=true;for(var C=0;C<B.length;C++){B[C]=B[C].trim();if(!h(B[C])){D=false;break}}if(D){$("#updateReceiptEmails").val("Saving...");fluid.main.account.set({receiptEmails:B.join(", ")});fluid.main.fire("submittedreceiptemail")}}function h(B){var A=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return A.test(B)}$("#updateReceiptEmails").live("click",c);$("#userSettingsReceiptEmail").live("keyup",function(z){if(z.keyCode===13){c()}});$("#updateBillingInfo").live("click",function(){o.goBack(null,"",$(this))});o._panelDisplay($("#userSettingsPanelReceipts"),true)},function(){var a=$("#receiptList .overview");a.find(".receiptListItem, .receiptEmptyMsg").remove();a.append('<div class="receiptEmptyMsg">No payments found...</div>');$("#downloadAllReceipts").removeClass("active")})},showPauseBillingFirstStep:function(){$("#pauseBillingStep1").show();$("#confirmPass").val("");$("#confirmationFree").removeAttr("checked")},hidePauseBillingErrors:function(){$("#pauseBillingEntryError,#pauseBillingSystemError,#pauseBillingPasswordError,#pauseBillingSubmitError").hide()},hidePauseBillingScreens:function(){$("#pauseBillingStep1,#pauseBillingStep2").hide()},goToPauseBilling:function(){o.hidePauseBillingScreens();o.hidePauseBillingErrors();$("#submitButtonFreeUpgrade").val("Pause Billing");$("#cancelReason").val("");if(!o.isOpen){o.open(null,$("#userSettingsPanelPauseBilling"))}$("#upgradeAccountToFreeWarning").fadeIn(500);o._panelDisplay($("#userSettingsPanelPauseBilling"),true);o.showPauseBillingFirstStep()},proceedPauseBilling:function(){var c=$("#confirmPass").val();var a=$("#confirmationFree").is(":checked");var b=$("#submitButtonFreeUpgrade");b.removeAttr("disabled");b.val("Pause Billing");if(c.length<1||a===false){o.hidePauseBillingErrors();$("#pauseBillingEntryError").show();return}$("#pauseBillingStep1").hide();$("#pauseBillingSubmitError").hide();$("#pauseBillingStep2").show();$("#pauseBillingStep2").children().show()},actionBilling:function(b){if($(b.target).valid()){var d=$("#userSettingsBillingForm");n.hideErrors();n.lastSubmitButton=$("#userSettingsBillingSubmit");var f=$("#userSettingsBillingCompany").val(),h=$("#userSettingsBillingAddress").val(),c=d.find('[name="billingCountry"]').get(0),i=c.options[c.selectedIndex].value,a=$("#userSettingsBillingVAT").val();fluid.api.changeBilling({company:f,address:h,country:i,vat:a},o.actionBillingCallback,o.actionBillingCallback)}return false},actionBillingCallback:function(c,a){if(c==null){if(a!=""){n.displayError(a);return false}n.displayError();return false}var b=JSON.parse(c);if(b.t===true||b.t==="true"){fluid.main.account.set({billingCompany:b.billingCompany,billingCountry:b.billingCountry,billingAddress:b.billingAddress,billingVAT:b.billingVAT});o.reStart(null,"default",$("#userSettingsBillingHistory"))}else{n.displayError()}return false},goToContact:function(){if(!o.isOpen){o.open(null,$("#userSettingsPanelContact"))}var b=$("#userSettingsContactEmailContainer");var a=$("#userSettingsContactEmail");if(fluid.main.account.get("loggedIn")=="yes"){b.hide();a.val(fluid.main.account.get("email"))}else{b.show();a.val("")}$("#userSettingsContactMessage").val("");o._panelDisplay($("#userSettingsPanelContact"),true)},actionContact:function(b){n.hideErrors();var c=$("#userSettingsContactMessage").val();var a=$("#userSettingsContactEmail").val();fluid.api.contact(a,"Message from Contact Form",c,o.actionContactCallback,o.actionContactCallback)},actionContactCallback:function(){o.close();return false},goToCode:function(){$("#userSettingsCodeCode").val("");o._panelDisplay($("#userSettingsPanelCode"),true)},actionCode:function(a){n.hideErrors();o.reStart(a,"promoCode");return false},goToRemoveAccount:function(){$("#userSettingsRemoveAccountPassword").val("");o._panelDisplay($("#userSettingsPanelRemoveAccount"),true)},actionRemoveAccount:function(b){n.hideErrors();n.lastSubmitButton=$("#userSettingsRemoveAccountSubmit");var a=$.trim($("#userSettingsRemoveAccountPassword").val());fluid.api.validatePass(a,o.actionRemoveAccountPassValidated,o.actionRemoveAccountPassValidated);return false},actionRemoveAccountPassValidated:function(a){if(a==null){n.displayError();return false}var b=JSON.parse(a);if(b.t===true||b.t==="true"){o._panelDisplay($("#userSettingsPanelRemoveAccount"),false);o._panelDisplay($("#userSettingsPanelRemoveAccountConfirm"),true)}else{n.displayError("passInvalid")}return false},actionRemoveAccountConfirm:function(b){n.lastSubmitButton=$("#userSettingsRemoveAccountConfirmSubmit");var a=$("#userSettingsRemoveAccountPassword").val();fluid.api.removeAccount(fluid.main.account.get("id"),o.actionRemoveAccountConfirmCallback,o.actionRemoveAccountConfirmCallback);return false},actionRemoveAccountConfirmCallback:function(c,a){if(c==null){if(a!=""){n.displayError(a);return false}n.displayError();return false}var b=JSON.parse(c);if(b.t===true||b.t==="true"){account.logout();setTimeout(o.goToFeedback,500)}else{n.displayError()}return false},goToFeedback:function(a){$("#userSettingsFeedbackMessage").val("");o.actionFeedbackSetType();o._panelDisplay($("#userSettingsPanelFeedback"),true,null,false)},actionFeedback:function(b){n.hideErrors();var c=$("#userSettingsFeedbackType").val();var d=$("#userSettingsFeedbackMessage").val();var a="Feedback Message After Account removal - "+c;fluid.api.contact("",a,d,o.actionFeedbackCallback,o.actionFeedbackCallback)},actionFeedbackCallback:function(){o.close();return false},actionFeedbackSetType:function(c){var d=$("#userSettingsFeedbackOther");if(c!=undefined){d=$(c.target)}var b="";var a="";switch(d.attr("id")){case"userSettingsFeedbackFix":b=o.placeHolders.feedbackFix;a="Bug";break;case"userSettingsFeedbackNew":b=o.placeHolders.feedbackNew;a="Required Feature";break;default:b=o.placeHolders.feedbackOther;var a="Other";break}$("#userSettingsFeedbackMessage").attr("placeholder",b);$("#userSettingsFeedbackType").val(a);return false},goToHelp:function(a){window.open("/guide")},esc:function(a){if(a.target.tagName.toLowerCase()=="input"){$(a.target).blur();a.stopPropagation();return false}$(".userSettingsDone:visible").click()},showCloseButton:function(){$(".userSettingsDone").show()},hideCloseButton:function(){$(".userSettingsDone").hide()},_fixCloseButton:function(i){var d=o.startPanel==null?$("#userSettingsMain"):o.startPanel;var b=i==undefined?true:i;var h=d.is(":visible")||!b?"Close":"Back";var a=h=="Close"?"close":"back";var c=h=="Close"?o.close:o.goBack;var f=$("#userSettingsContainer .hud-button");$("#userSettingsContainer .hud-button span").text(h);f.removeClass("close back");f.addClass(a);f.attr("title",h);$(".userSettingsDone").unbind().bind("click",fluid.util.debounce(c,500))},_panelDisplay:function(d,f,b,a){fluid.main.fire("beforepaneldisplay",d.attr("id"));function c(){if(f){function h(){o._fixCloseButton(a);if($.isFunction(b)){b()}}if(d.attr("id")=="userSettingsPanelCard"){if(fluid.main.account.get("loggedIn")=="yes"){$(".userSettingsLogin").hide()}else{$(".userSettingsLogin").show()}}o.panelStack.push(d);n.display(d,350,h);return}n.hideSuccessMessage();n.hide(d,400,function(){b()})}if(f){o.hideCurrentPanel(c)}else{c()}},_resizeScreen:function(){if(!o.isOpen){return}n.setWorkArea();if($("#userSettingsPanelHelp").is(":visible")){setTimeout(o.goToHelp,1000);return}}};fluid.main.on("accountpausefail",function(){o.hidePauseBillingScreens();o.hidePauseBillingErrors();o.showPauseBillingFirstStep()});fluid.main.on("escpressed",function(a,b){o.esc(b)});fluid.main.on("hidePauseBillingErrors",function(){o.hidePauseBillingErrors()});t.exports=o},{"./class-canvas":6,"./class-event":9,"./class-notification":17,"./class-panels":19,"./class-payments":20,"./functions":64}],36:[function(p,o,j){var m=p("./class-widget");var l=p("./class-storage");var n=p("./browserdetect");var k=p("./StackBlur");p("./fluid/modules/upload");if(!Function.prototype.bind){Function.prototype.bind=function(d){if(typeof this!=="function"){throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable")}var f=Array.prototype.slice.call(arguments,1),a=this,c=function(){},b=function(){return a.apply(this instanceof c&&d?this:d,f.concat(Array.prototype.slice.call(arguments)))};c.prototype=this.prototype;b.prototype=new c();return b}}if(!window.fluid){window.fluid={}}fluid.wdgProvider=function(){var a=window.widgets?$.extend(true,{},widgets):null;return{getWidgets:function(b){var c=$.extend(true,{},a.summary);if(b){for(var d in c){if(c.hasOwnProperty(d)){c[d].originId=d}}}return c},getRootWidgets:function(f,b){var d=[];for(var c in a.summary){if(a.summary.hasOwnProperty(c)&&a.summary[c].g&&(f==undefined||a.summary[c].g.indexOf(f)!=-1)){d.push(a.summary[c]);if(b){d[d.length-1].originId=c}}}return d},getWdgGroups:function(){return $.extend(true,{},a.g)},getChildWidgets:function(d,i){var b=[];var h;var f;for(var c=0;c<d.ad.length;c++){h=d.ad[c][0];if(a&&a.summary[h]){f=$.extend(true,{},a.summary[h])}else{f=$.extend(true,{},widgets.summary[h])}if(i){f.originId=h}b.push(f)}return b},getById:function(b){if(a&&a.summary[b]){return $.extend(true,{},a.summary[b])}else{return $.extend({},widgets.summary[b])}},getChildById:function(b,c){parentChildren=c&&c.ad?c.ad:null;if(parentChildren&&parentChildren.length){for(var d=0;d<parentChildren.length;d++){if(b==parentChildren[d][0]){return parentChildren[d]}}}return false}}}();fluid.widget=function(){return{handleCollection:function(f,a,h){if(f.length==undefined){var d={};f=$.extend(true,{},f);h.unshift({});for(var b in f){if(f.hasOwnProperty(b)){h[0]=f[b];d[b]=a.apply(this,h)}}return d}else{var d=[];h.unshift({});for(var c=0;c<f.length;c++){h[0]=f[c];d.push(a.apply(this,h))}return d}},setSizeLimit:function(b,a,c){return this.handleCollection(b,function(h,f,d){if(!h.wh){h.wh=[f,d]}else{if(typeof h.wh[0]=="string"){h.wh[0]=f}if(typeof h.wh[1]=="string"){h.wh[1]=d}}return h},[a,c])},setRootSizeLimit:function(b,a,c){return this.handleCollection(b,function(h,f,d){if(!h.g){return h}if(!h.wh){h.wh=[f,d]}else{if(typeof h.wh[0]=="string"){h.wh[0]=f}if(typeof h.wh[1]=="string"){h.wh[1]=d}}return h},[a,c])},hasChildWidgets:function(a){return a.ad&&a.ad.length?true:false},hasSegments:function(a){return a.sc?true:false},isTextWidget:function(a){if(a.tc){return true}else{return false}},isShapeWidget:function(a){if(a.b||a.bg||a.bgc||a.bgd||a.i){return true}else{return false}},isUploadWidget:function(a){if(a.upload==="y"){return true}else{return false}}}}();fluid.wdgRenderer=function(b,a){this.canvasSize=[b||320,a||480];this.useCanvas=true;this.renderingQueue={};this.renditions={};this.imagesToLoad={};this.uploadsToLoad={};this.imagesLoaded={};this.canvases={};this.cropping={x:12004,y:9804,x2:0,y2:0};this.renderBlur=true;this.useOneCanvas=true;this.setCropping=function(c){if(c.x<this.cropping.x){this.cropping.x=c.x}if(c.y<this.cropping.y){this.cropping.y=c.y}if(c.x+c.width>this.cropping.x2){this.cropping.x2=c.x+c.width}if(c.y+c.height>this.cropping.y2){this.cropping.y2=c.y+c.height}};this.generateCanvas=function(c,d){this.canvas=$("<canvas>").attr({width:(d&&d.width!==undefined)?d.width:this.canvasSize[0],height:(d&&d.height!==undefined)?d.height:this.canvasSize[1]});if(c){this.canvas.attr({id:"pag-"+c})}this.canvases[c]=this.canvas;this.ctx=this.canvas.get(0).getContext("2d")};this.percentToPixel=function(h,f,d){var c;if(f.wh[0].indexOf&&f.wh[0].indexOf("%")!==-1){c=parseInt(f.wh[0],10)/100;c=c*d.box[2];h[2]=c}if(f.wh[1].indexOf&&f.wh[1].indexOf("%")!==-1){c=parseInt(f.wh[1],10)/100;c=c*d.box[3];h[3]=c}return h};this.getPixelDimensions=function(c,f,d){if(f.wh&&typeof f.wh[0]=="number"){c[2]=f.wh[0]}if(f.wh&&typeof f.wh[1]=="number"){c[3]=f.wh[1]}return c};this.parseBoxValue=function(f,c){if(typeof(f)==="number"&&!isNaN(f)){return f}else{var d=(parseFloat(f||0)/100)*(c||0);return isNaN(d)?0:d}};this.calculateBox=function(f,c,d){if(!c){c={box:[0,0,this.canvasSize[0],this.canvasSize[1]]}}var s=[0,0];var i;if(f.tlwh){s=[this.parseBoxValue(f.tlwh[1],c.box[2]),this.parseBoxValue(f.tlwh[0],c.box[3]),this.parseBoxValue(f.tlwh[2],c.box[2]),this.parseBoxValue(f.tlwh[3],c.box[3])];return s}if(!f.wh){s[2]=c.box[2];s[3]=c.box[3]}else{s=this.getPixelDimensions(s,f,c);s=this.percentToPixel(s,f,c)}if(d){if(!d[3]||d[3][1]=="l"){if(typeof d[1]=="number"){s[0]=d[1]}else{if(typeof d[1]=="string"){s[0]=(parseInt(d[1],10)/100)*c.box[2]}}}else{if(d[3][1]=="c"){var t;if(typeof d[1]=="number"){t=d[1]}else{t=(parseInt(d[1],10)/100)*c.box[2]}s[0]=(c.box[2]-s[2])/2+t}else{if(typeof d[1]=="number"){s[0]=c.box[2]-s[2]-d[1]}else{if(typeof d[1]=="string"){i=(parseInt(d[1],10)/100)*c.box[3];s[0]=c.box[2]-s[2]-i}}}}if(!d[3]||d[3][0]=="t"){if(typeof d[2]=="number"){s[1]=d[2]}else{if(typeof d[2]=="string"){s[1]=(parseInt(d[2],10)/100)*c.wh[1]}}}else{if(d[3][1]=="c"){var h;if(typeof d[2]=="number"){h=d[2]}else{h=(parseInt(d[2],10)/100)*c.box[3]}s[1]=(c.box[3]-s[3])/2+h}else{if(typeof d[2]=="number"){s[1]=c.box[3]-s[3]-d[2]}else{if(typeof d[2]=="string"){i=(parseInt(d[2],10)/100)*c.wh[1];s[1]=c.wh[1]-s[3]-i}}}}}s[0]=s[0]+c.box[0];s[1]=s[1]+c.box[1];return s};this.renderUpload=function(t,s,d){$canvas=s||this.canvas;function f(q,r){if(!t.box[2]||!t.box[3]){t.box[2]=r.width;t.box[3]=r.height}var v=q.get(0).getContext("2d");v.drawImage(r,t.box[0],t.box[1],t.box[2],t.box[3]);r.onload=null;r.onerror=null}function h(q,w,r){q.addClass("failureImage");var z=q.get(0).getContext("2d");z.font="32pt Arial";z.fillText("Image",35,50);z.fillText("not found",10,115)}function c(){h();m._convertCanvasToImg($(ctx.canvas),widgEl.find("img"),tmplVars)}function i(){var q=t.data||false;if(q&&q.substr(0,5)!="data:"){q=ajax.apiObjectUrl("img",t.data)}else{if(t.id){q=ajax.apiObjectUrl("img",t.id)}}return q||h()}if(d){f($canvas,d);return this.canvas}fluid.upload.get({id:t.data||t.id,callback:function(q,v){if(v.success){if(v.image){f.call(this,q,v.image)}else{if(v.imgData){var r=new Image();r.onload=f.bind(this,q,r);r.onerror=h.bind(this,q,r);r.src=v.imgData}}}else{var r=new Image();h.call(this,q,r)}}.bind(this,$canvas),priority:fluid.upload.priority.pageZoomedOut})};this.adjustWords=function(c){var f=[];for(var d=0;d<c.length;d++){if(c[d]!==""){f.push(c[d])}else{if(n.browser==="Firefox"){f[f.length-1]+=" "}}}return f};this.wrapText=function(h,K,F,M,Q,d){if(F[3]<0){return 0}var O=K.split(" ");var P="";var J="";var i=0;var c,H;var f;var L=" ";var N=F[1];if(isNaN(M)){M=13}O=this.adjustWords(O);if(K.match(/[\u3131-\uCB4C]/)){L="";O=K.split("")}for(var I=0;I<O.length;I++){c=P+O[I]+L;H=h.measureText(c).width;if(n.browser!=="Firefox"){H=H+Math.round(-0.285714286*parseFloat(d)+0.075)}if(H>F[2]&&O.length!==1){J=O[I]+L;if(n.browser!=="Firefox"&&O[I].indexOf("-")!==-1){var G=P+O[I].substring(0,O[I].indexOf("-")+1);if(h.measureText(G).width<=F[2]){P=G;J=O[I].substring(O[I].indexOf("-")+1)+L}}if(N+M*0.5>F[1]+F[3]){return i}f=h.measureText(P).width;if(n.browser!=="Firefox"){f=f+Math.round(-0.285714286*parseFloat(d)+0.075)}if(f>F[2]&&P.indexOf(" ")===P.length-1&&n.browser!=="Firefox"){J=L+J}if(Q&&Q[1]==="c"){h.fillText(P,F[0]+(F[2]/2)-(f/2),N)}else{if(Q&&Q[1]==="r"){h.fillText(P,F[0]+F[2]-f,N)}else{h.fillText(P,F[0],N)}}P=J;N+=M;i++}else{P=c}}if(N+M*0.5>F[1]+F[3]){return i}f=h.measureText(P).width;f=f+Math.round(-0.285714286*parseFloat(d)+0.075);if(Q&&Q[1]==="c"){h.fillText(P,F[0]+(F[2]/2)-(f/2),N)}else{if(Q&&Q[1]==="r"){h.fillText(P,F[0]+F[2]-f,N)}else{h.fillText(P,F[0],N)}}return i};this.renderText=function(T,U){var M=T.ts.replace(/"/g,"");if(!this.useOneCanvas){if(this.renderingMode==="singlepage"){return $('<div class="widgetText" style="'+M+';width: 100%;height:100%;">'+T.tc+"</div>")}else{return $('<div class="widgetText" style="'+M+";width:"+(T.box[2]+3)+"px;height:"+T.box[3]+"px; top:"+T.box[1]+"px; left:"+T.box[0]+'px;">'+T.tc+"</div>")}}else{var P=0;var V=T.tc.replace(/&nbsp/g," ");var ac=V.split("\n");var ad;var U=U||this.canvas;var aa=U.get(0).getContext("2d");var N=M.match(/font:[a-zA-Z0-9\s:\/]*;/);var ae=M.match(/[0-9]+px/);if(ae){ae=parseInt(ae[0],10)}if(N){N=N[0];N=N.replace("font:","");N=N.replace(";","")}else{var ab="normal";if(M.indexOf("font-style")!==-1){ab=M.substring(M.indexOf("font-style")+11,M.indexOf(";",M.indexOf("font-style"))).trim()}var X="normal";if(M.indexOf("font-variant")!==-1){X=M.substring(M.indexOf("font-variant")+13,M.indexOf(";",M.indexOf("font-variant"))).trim()}var R="normal";if(M.indexOf("font-weight")!==-1){R=M.substring(M.indexOf("font-weight")+12,M.indexOf(";",M.indexOf("font-weight"))).trim()}ae=M.substring(M.indexOf("font-size")+10,M.indexOf(";",M.indexOf("font-size"))).trim();var h=M.substring(M.indexOf("font-family")+12,M.indexOf(";",M.indexOf("font-family"))).trim();ad=M.substring(M.indexOf("line-height")+12,M.indexOf(";",M.indexOf("line-height"))).trim();N=ab+" "+X+" "+R+" "+ae+" "+h}var S=M.substring(M.indexOf("color")+6,M.indexOf(";",M.indexOf("color"))).trim();if(S.indexOf("rgb(")!==-1){S=k.rgb2hex(S)}var Z=M.indexOf(";",M.indexOf("text-align"))!==-1?M.substring(M.indexOf("text-align")+11,M.indexOf(";",M.indexOf("text-align"))).trim():M.substring(M.indexOf("text-align")+11).trim();var W="";if(M.indexOf("text-decoration")!==-1){W=M.substring(M.indexOf("text-decoration")+16,M.indexOf(";",M.indexOf("text-decoration"))).trim()}var f=0;if(M.indexOf("padding-top")!==-1){P=M.indexOf(";",M.indexOf("padding-top"));if(P!==-1){f=parseInt(M.substring(M.indexOf("padding-top")+12,P).trim(),10)}else{f=parseInt(M.substring(M.indexOf("padding-top")+12).trim(),10)}}var af=0;if(M.indexOf("margin-top")!==-1){P=M.indexOf(";",M.indexOf("margin-top"));if(P!==-1){af=parseInt(M.substring(M.indexOf("margin-top")+11,M.indexOf(";",M.indexOf("margin-top"))).trim(),10)}else{af=parseInt(M.substring(M.indexOf("margin-top")+11).trim(),10)}}aa.fillStyle=S;aa.font=N;aa.textBaseline="top";var i=0;var d=0;if(ad&&parseFloat(ad)){i=Math.round(-0.07*parseFloat(ae)+2.66);d=Math.round(0.5*(parseFloat(ad)-parseFloat(ae))-2.75);ad=parseFloat(ad)}else{if(N.indexOf("/")!==-1&&parseFloat(N.substring(N.indexOf("/")+1))){i=Math.round(-0.07*parseFloat(ae)+2.66);ad=parseFloat(N.substring(N.indexOf("/")+1))}else{ad=Math.round(1.14*parseFloat(ae))}}if(n.browser==="Firefox"){i=i+Math.round(0.148148148*parseFloat(ae)+0.5)}var Y=0;var c=[T.box[0],T.box[1]+i+d+f+af,T.box[2],T.box[3]];var Q=T.ca||"lt";if(Z==="center"){Q=Q[0]+"c"}else{if(Z==="right"){Q=Q[0]+"r"}else{if(Z==="left"){Q=Q[0]+"l"}}}if(ac.length==1){this.wrapText(aa,V,c,ad,Q,ae)}else{for(var O=0;O<ac.length;O++){Y=Y+this.wrapText(aa,ac[O],[c[0],c[1]+(O+Y)*ad,c[2],c[3]-(O+Y)*ad],ad,Q,ae)}}return U}};this.paintCanvas=function(G,L){var d=this;if(!this.useOneCanvas){L=$("<canvas>").attr({width:this.renderingMode==="singlepage"?G.box[2]:this.canvasSize[0],height:this.renderingMode==="singlepage"?G.box[3]:this.canvasSize[1]})}else{if(!L){L=this.canvas}}var I=L.get(0).getContext("2d");var d=this;var J={blur:function(){if(G.blur){if(d.renderBlur){var t=document.createElement("img"),r=m.renderBlurLayerImmediate.call(d,G.id),v=jQuery.extend([],G.box),u,q;if(!r){return false}if(v[0]<0){v[0]=0}if(v[1]<0){v[1]=0}if(v[2]>r.width){v[2]=r.width}if(v[3]>r.height){v[3]=r.height}var s=l.get(G.id,{returnModel:true});if(s){q=s.getPage().getBox();if(v[0]+v[2]>q[2]){v[2]=q[2]-v[0]}if(v[1]+v[3]>q[3]){v[3]=q[3]-v[1]}}I.drawImage(r,v[0],v[1],v[2],v[3],v[0],v[1],v[2],v[3])}}},background:function(){I.save();function s(){var C=(G.bgc)?G.bgc:["#CAD1D7","#C4CBD3"];var A=[5,2];var B="v";if(G.bgd){B=G.bgd[0];A=[G.bgd[1],G.bgd[2]]}I.fillStyle=C[1];I.fill();I.fillStyle=C[0];if(B=="v"){for(var z=A[0];z<f;){I.fillRect(z,0,A[1],h);z+=A[0]}}else{for(var z=A[0];z<h;){I.fillRect(0,z,f,A[1]);z+=A[0]}}}if(!f){f=0}if(!h){h=0}if(G.bg=="c"){I.fillStyle=G.bgc[0];I.fill()}else{if(G.bg=="s"){s()}else{if(G.bg=="l"){var v=d.useOneCanvas?G.box[0]:0;var t=d.useOneCanvas?G.box[1]:0;var u=d.useOneCanvas?G.box[1]+G.box[3]:G.box[3];g=I.createLinearGradient(v,t,v,u);J._gradient(g,I,G)}else{if(G.bg=="lrl"){g=I.createLinearGradient(G.box[0],G.box[1],G.box[0]+G.box[2],G.box[1]);J._gradient(g,I,G)}else{if(G.bg=="ld"){g=I.createLinearGradient(G.box[0],G.box[1],G.box[0]+G.box[2],G.box[1]+G.box[3]);J._gradient(g,I,G)}else{if(G.bg=="ld2"){g=I.createLinearGradient(G.box[0]+G.box[2],G.box[1],G.box[0],G.box[1]+G.box[3]);J._gradient(g,I,G)}else{if(G.bg=="r"){var w=G.box[3]/2;var q=G.box[0]+G.box[2]/2;var r=G.box[1]+w;g=I.createRadialGradient(q,r,0,q,r,w);J._gradient(g,I,G)}}}}}}}I.restore()},border:function(q,u,t,v){var r=0,s=0;q.lineWidth=(typeof R)==="number"?R:H;q.strokeStyle=u.b[1];q.stroke();q.save()},path:function(aw,E,z,B,D,aF,ax,ao,A){aw.beginPath();var w=Math.floor(ao/2);var aH=B+w;var aA=D+w;var ar=B+ax-w;var aE=D+aF-w;var aL=aE-aA;var r=ar-aH;var aI=["cloud","thumbsD","thumbsU"];if(A.sh&&A.sh[3]&&A.sh[2]){aH+=Math.floor(A.sh[3]-A.sh[2]/2);aA+=Math.floor(A.sh[3]-A.sh[2]/2);ar-=Math.floor(A.sh[3]+A.sh[2]/2);aE-=Math.floor(A.sh[3]+A.sh[2]/2)}if($.isArray(z)){for(var ay=0;ay<4;ay++){z[ay]=z[ay]||0}}else{z=[z,z,z,z]}if(E=="sq"){var au=Math.min((aE-aA)/2,(ar-aH)/2);z[0]=Math.min(z[0],au);z[1]=Math.min(z[1],au);z[2]=Math.min(z[2],au);z[3]=Math.min(z[3],au);aw.moveTo(aA+z[0],aH),aw.lineTo(aE-z[1],aH),aw.quadraticCurveTo(aE,aH,aE,aH+z[1]),aw.lineTo(aE,ar-z[2]),aw.quadraticCurveTo(aE,ar,aE-z[2],ar),aw.lineTo(aA+z[3],ar),aw.quadraticCurveTo(aA,ar,aA,ar-z[3]),aw.lineTo(aA,aH+z[0]),aw.quadraticCurveTo(aA,aH,aA+z[0],aH)}if(E=="arrU"){var u=(aE-aA)+(5/4);var az=(aA+aE)/2;var aF=aE-aA;aw.moveTo(az,aH+ao);aw.lineTo(aE-(ao/2),aH+u);aw.lineTo(az+aF*0.15,aH+u);aw.lineTo(az+aF*0.15,ar);aw.lineTo(az-aF*0.15,ar);aw.lineTo(az-aF*0.15,aH+u);aw.lineTo(aA+(ao/2),aH+u);aw.lineTo(az,aH+ao)}if(E=="arrD"){var u=(aE-aA)+(5/4);var az=(aA+aE)/2;var aF=aE-aA;var av=ar-aH;var s=(aE-aA)*1.5;if(av<=s){u=(ar-aH)/2}aw.moveTo(az,ar-ao);aw.lineTo(aE-(ao/2),ar-u);aw.lineTo(az+aF*0.15,ar-u);aw.lineTo(az+aF*0.15,aH);aw.lineTo(az-aF*0.15,aH);aw.lineTo(az-aF*0.15,ar-u);aw.lineTo(aA+(ao/2),ar-u);aw.lineTo((aA+aE)/2,ar)}if(E=="arrR"){var u=(ar-aH)+(5/4);var aB=(aH+ar)/2;var ax=ar-aH;var at=aE-aA;var v=(ar-aH)*1.5;if(at<=v){u=(aE-aA)/2}aw.moveTo(aE-ao,(aH+ar)/2);aw.lineTo(aE-u,ar-(ao/2));aw.lineTo(aE-u,aB+ax*0.15);aw.lineTo(aA,aB+ax*0.15);aw.lineTo(aA,aB-ax*0.15);aw.lineTo(aE-u,aB-ax*0.15);aw.lineTo(aE-u,aH+(ao/2));aw.lineTo(aE-ao,(aH+ar)/2)}if(E=="arrL"){var u=(ar-aH)+(5/4);var aB=(aH+ar)/2;var ax=ar-aH;var at=aE-aA;var v=(ar-aH)*1.5;if(at<=v){u=(aE-aA)/2}aw.moveTo(aA+ao,(aH+ar)/2);aw.lineTo(aA+u,ar-(ao/2));aw.lineTo(aA+u,aB+ax*0.15);aw.lineTo(aE,aB+ax*0.15);aw.lineTo(aE,aB-ax*0.15);aw.lineTo(aA+u,aB-ax*0.15);aw.lineTo(aA+u,aH+(ao/2));aw.lineTo(aA+ao,(aH+ar)/2)}if(E=="image"){aw.moveTo(aA,aH);aw.lineTo(aE,aH);aw.lineTo(aE,ar);aw.lineTo(aA,ar);aw.lineTo(aA,aH-Math.floor(ao/2));aw.moveTo(aA,aH);aw.lineTo(aE,ar);aw.moveTo(aE,aH);aw.lineTo(aA,ar)}else{if(E=="tri"){aw.moveTo(aA,aH);aw.lineTo(aE,aH);aw.lineTo(aE,ar);aw.lineTo(aA,aH)}else{if(E=="tri"){aw.moveTo(aA,aH);aw.lineTo(aE,aH);aw.lineTo(aE,ar);aw.lineTo(aA,aH)}else{if(E=="trR"){aw.moveTo(aA,aH);aw.lineTo(aE,aH);aw.lineTo(aA,ar);aw.lineTo(aA,aH)}else{if(E=="ttrL"){aw.moveTo(aE,aH);aw.lineTo(aE,ar);aw.lineTo(aA,ar);aw.lineTo(aE,aH)}else{if(E=="ttrR"){aw.moveTo(aA,aH);aw.lineTo(aE,ar);aw.lineTo(aA,ar);aw.lineTo(aA,aH)}else{if(E=="triU"){aw.moveTo((aA+aE)/2,aH);aw.lineTo(aE,ar);aw.lineTo(aA,ar);aw.lineTo((aA+aE)/2,aH)}else{if(E=="triD"){aw.moveTo(aA,aH);aw.lineTo(aE,aH);aw.lineTo((aA+aE)/2,ar);aw.lineTo(aA,aH)}else{if(E=="triR"){aw.moveTo(aA,aH);aw.lineTo(aE,(aH+ar)/2);aw.lineTo(aA,ar);aw.lineTo(aA,aH)}else{if(E=="triL"){aw.moveTo(aE,aH);aw.lineTo(aA,(aH+ar)/2);aw.lineTo(aE,ar);aw.lineTo(aE,aH)}else{if(E=="ribU"){aw.moveTo(aA,aH);aw.lineTo((aA+aE)/2,aH+(ar-aH)*0.25);aw.lineTo(aE,aH);aw.lineTo(aE,ar);aw.lineTo(aA,ar);aw.lineTo(aA,aH)}else{if(E=="ribD"){aw.moveTo(aA,aH);aw.lineTo(aE,aH);aw.lineTo(aE,ar);aw.lineTo((aA+aE)/2,aH+0.75*(ar-aH));aw.lineTo(aA,ar);aw.lineTo(aA,aH)}else{if(E=="flagR"){aw.moveTo(aA,aH);aw.lineTo(aE,aH);aw.lineTo(aA+(4/5)*aL,(aH+ar)/2);aw.lineTo(aE,ar);aw.lineTo(aA,ar);aw.lineTo(aA,aH)}else{if(E=="flagL"){aw.moveTo(aA,aH);aw.lineTo(aA+(1/5)*aL,(aH+ar)/2);aw.lineTo(aA,ar);aw.lineTo(aE,ar);aw.lineTo(aE,aH);aw.lineTo(aA,aH)}else{if(E=="houseU"){aw.moveTo((aA+aE)/2,aH);aw.lineTo(aE,aH+(3/7)*r);aw.lineTo(aE,ar);aw.lineTo(aA,ar);aw.lineTo(aA,aH+(3/7)*r);aw.lineTo((aA+aE)/2,aH)}else{if(E=="houseD"){aw.moveTo((aA+aE)/2,ar);aw.lineTo(aE,aH+(4/7)*r);aw.lineTo(aE,aH);aw.lineTo(aA,aH);aw.lineTo(aA,aH+(4/7)*r);aw.lineTo((aA+aE)/2,ar)}else{if(E=="oct"){aw.moveTo(aA+(21/72)*aL,aH);aw.lineTo(aA+(51/72)*aL,aH);aw.lineTo(aE,aH+(21/72)*r);aw.lineTo(aE,aH+(51/72)*r);aw.lineTo(aA+(51/72)*aL,ar);aw.lineTo(aA+(21/72)*aL,ar);aw.lineTo(aA,aH+(51/72)*r);aw.lineTo(aA,aH+(21/72)*r);aw.lineTo(aA+(21/72)*aL,aH)}else{if(E=="star"){var az=(aA+aE)/2;var aF=aE-aA;var ax=ar-aH;aw.moveTo(az,aH);aw.lineTo(aA+(33/54)*aF,aH+(39/102)*ax);aw.lineTo(aE,aH+(39/102)*aF);aw.lineTo(aA+(75/108)*aF,aH+(63/102)*ax);aw.lineTo(aA+(87/108)*aF,ar);aw.lineTo(az,aH+(39/51)*ax);aw.lineTo(aA+(21/108)*aF,ar);aw.lineTo(aA+(33/108)*aF,aH+(63/102)*ax);aw.lineTo(aA,aH+(39/102)*ax);aw.lineTo(aA+(21/54)*aF,aH+(39/102)*ax);aw.lineTo(az,aH)}else{if(E=="pgL"){aw.moveTo(aA,ar);aw.lineTo(aE,ar);aw.lineTo(aE,aH);aw.lineTo(aA+(aE-aA)/3,aH);aw.lineTo(aA,aH+(ar-aH)/4);aw.lineTo(aA,ar)}else{if(E=="pgR"){aw.moveTo(aE,ar);aw.lineTo(aA,ar);aw.lineTo(aA,aH);aw.lineTo(aA+(aE-aA)*0.66,aH);aw.lineTo(aE,aH+(ar-aH)*0.25);aw.lineTo(aE,ar)}else{if(E=="pointrL"){aw.moveTo(aA,aH);aw.lineTo(aE,aH);aw.lineTo(aA+(5/7)*aL,aH+(3/7)*r);aw.lineTo(aA+(5/7)*aL,ar);aw.lineTo(aA,aH)}else{if(E=="pointrR"){aw.moveTo(aA,aH);aw.lineTo(aE,aH);aw.lineTo(aA+(2/7)*aL,ar);aw.lineTo(aA+(2/7)*aL,aH+(3/7)*r);aw.lineTo(aA,aH)}else{if(E=="ldL"){aw.moveTo(aA,aH);aw.lineTo(aA+2,aH);aw.lineTo(aE,ar);aw.lineTo(aE-2,ar);aw.lineTo(aA,aH)}else{if(E=="ldR"){aw.moveTo(aE,aH);aw.lineTo(aE-2,aH);aw.lineTo(aA,ar);aw.lineTo(aA+2,ar);aw.lineTo(aE,aH)}else{if(E=="dropD"){aw.moveTo((aA+aE)/2,aH);aw.lineTo(aA+aL/6,(aH+ar)/2);aw.bezierCurveTo(aA-(aL*(1.5/6)),ar+(r/6.2),aE+(aL*(1.5/6)),ar+(r/6.2),aA+aL*(5/6),(aH+ar)/2);aw.lineTo((aA+aE)/2,aH)}else{if(E=="dropU"){aw.moveTo((aA+aE)/2,ar);aw.lineTo(aA+aL/6,(aH+ar)/2);aw.bezierCurveTo(aA-(aL*(1.5/6)),aH-(r/6.2),aE+(aL*(1.5/6)),aH-(r/6.2),aA+aL*(5/6),(aH+ar)/2);aw.lineTo((aA+aE)/2,ar)}else{if(E=="oval"){aw.moveTo(aA,(ar+aH)/2);aw.bezierCurveTo(aA+aL*(1/4),aH-(r/7),aA+aL*(3/4),aH-(r/7),aE,(ar+aH)/2);aw.bezierCurveTo(aA+aL*(3/4),ar+(r/7),aA+aL*(1/4),ar+(r/7),aA,(ar+aH)/2)}else{if(E=="cloud"){aw.moveTo(aA+aL*(1.5/9),ar);aw.bezierCurveTo(aA,ar,aA,aH+r*(7/11),aA+aL*(1.6/9),aH+r*(7/11));aw.bezierCurveTo(aA+aL/9,aH+r/3,aA+aL/3,aH+r/6.3,aA+aL*(4/9),aH+r/3.2);aw.bezierCurveTo(aA+aL*(4.5/9),aH,aA+aL*(7.4/9),aH,aA+aL*(7.3/9),(ar+aH)/2);aw.bezierCurveTo(aE,(ar+aH)/2,aE,ar,aA+aL*(7.7/9),ar);aw.lineTo(aA+aL*(1.5/9),ar)}else{if(E=="person"){aw.moveTo(aA,ar);aw.bezierCurveTo((aA+aE)/16,(aH+ar)*(11/14),(aA+aE)*(3/16),(aH+ar)*(10/14),(aA+aE)*(6/16),(ar+aH)*(9/14));aw.bezierCurveTo((aA+aE)*(2.5/16),(aH+ar)*(4/7),(aA+aE)*(2.5/16),aH,(aA+aE)/2,aH);aw.bezierCurveTo((aA+aE)*(13.5/16),aH,(aA+aE)*(13.5/16),(aH+ar)*(4/7),(aA+aE)*(10/16),(ar+aH)*(9/14));aw.bezierCurveTo((aA+aE)*(13/16),(aH+ar)*(10/14),(aA+aE)*(15/16),(aH+ar)*(11/14),aE,ar);aw.lineTo(aA,ar)}else{if(E=="thumbsU"){aw.moveTo(aA,aH+r*(16/17));aw.lineTo(aA,aH+r*(15/34));aw.bezierCurveTo(aA+aL*(2/15),aH+r*(7/17),aA+aL*(9/30),aH+r*(4/17),aA+aL/3,aH+r*(3/34));aw.bezierCurveTo(aA+aL*(5.2/15),aH,aA+aL*(9/15),aH,aA+aL*(8.5/15),aH+r*(2/17));aw.lineTo(aA+aL*(7/15),aH+r*(11/34));aw.bezierCurveTo(aA+aL*(9/15),aH+r*(13/34),aA+aL*(11/15),aH+r*(13/34),aA+aL*(12/15),aH+r*(13/34));aw.bezierCurveTo(aE,aH+r*(13/34),aE,aH+r*(19/34),aA+aL*(12/15),aH+r*(19/34));aw.bezierCurveTo(aA+aL*(14/15),aH+r*(19/34),aA+aL*(27/30),aH+r*(12/17),aA+aL*(23/30),aH+r*(12/17));aw.bezierCurveTo(aA+aL*(13/15),aH+r*(12/17),aA+aL*(25/30),aH+r*(29/34),aA+aL*(11/15),aH+r*(29/34));aw.bezierCurveTo(aA+aL*(25/30),aH+r*(29/34),aA+aL*(12/15),ar,aA+aL*(8.5/15),ar);aw.bezierCurveTo((aA+aE)/2,ar,aA+aL/5,ar,aA,aH+r*(16/17))}else{if(E=="thumbsD"){aw.moveTo(aA,aH+r/17);aw.lineTo(aA,aH+r*(19/34));aw.bezierCurveTo(aA+aL*(2/15),aH+r*(10/17),aA+aL*(9/30),aH+r*(13/17),aA+aL/3,aH+r*(31/34));aw.bezierCurveTo(aA+aL*(5.2/15),ar,aA+aL*(9/15),ar,aA+aL*(8.5/15),aH+r*(15/17));aw.lineTo(aA+aL*(7/15),aH+r*(23/34));aw.bezierCurveTo(aA+aL*(9/15),aH+r*(21/34),aA+aL*(11/15),aH+r*(21/34),aA+aL*(12/15),aH+r*(21/34));aw.bezierCurveTo(aE,aH+r*(21/34),aE,aH+r*(15/34),aA+aL*(12/15),aH+r*(15/34));aw.bezierCurveTo(aA+aL*(14/15),aH+r*(15/34),aA+aL*(27/30),aH+r*(5/17),aA+aL*(23/30),aH+r*(5/17));aw.bezierCurveTo(aA+aL*(13/15),aH+r*(5/17),aA+aL*(25/30),aH+r*(5/34),aA+aL*(11/15),aH+r*(5/34));aw.bezierCurveTo(aA+aL*(25/30),aH+r*(5/34),aA+aL*(12/15),aH,aA+aL*(8.5/15),aH);aw.bezierCurveTo(aA+aL/2,aH,aA+aL/5,aH,aA,aH+r/17)}else{if(E=="arcL"){var aF=aE-aA;var ax=ar-aH;var aG=(ax>=(aF*2))?aF:ax/2;aw.moveTo(aA+aG,aH);aw.arcTo(aA,aH,aA,aH+aG,aG);aw.arcTo(aA,aH+(2*aG),aA+aG,aH+(2*aG),aG);aw.lineTo(aA+aG,aH)}else{if(E=="arcR"){var aF=aE-aA;var ax=ar-aH;var aG=(ax>=(aF*2))?aF:ax/2;aw.moveTo(aA,aH);aw.arcTo(aA+aG,aH,aA+aG,aH+aG,aG);aw.arcTo(aA+aG,aH+(2*aG),aA,aH+(2*aG),aG);aw.lineTo(aA,aH)}else{if(E=="arcU"){var aF=aE-aA;var ax=ar-aH;var aG=(aF>=(ax*2))?ax:aF/2;aw.moveTo(aA,aH+aG);aw.arcTo(aA,aH,aA+aG,aH,aG);aw.arcTo(aA+(2*aG),aH,aA+(2*aG),aH+(2*aG),aG);aw.lineTo(aA,aH+aG)}else{if(E=="arcD"){var aF=aE-aA;var ax=ar-aH;var aG=(aF>=(ax*2))?ax:aF/2;aw.moveTo(aA,aH);aw.arcTo(aA,aH+aG,aA+aG,aH+aG,aG);aw.arcTo(aA+(2*aG),aH+aG,aA+(2*aG),aH,aG);aw.lineTo(aA,aH)}else{if(E=="folder"){var aF=aE-aA;var ax=ar-aH;aw.moveTo(aA+(3/8)*aF,aH+(2/15)*ax);aw.lineTo(aE-z[1],aH+(2/15)*ax);aw.quadraticCurveTo(aE,aH+(2/15)*ax,aE,(aH+(2/15)*ax)+z[1]);aw.lineTo(aE,ar-z[2]);aw.quadraticCurveTo(aE,ar,aE-z[2],ar);aw.lineTo(aA+z[3],ar);aw.quadraticCurveTo(aA,ar,aA,ar-z[3]);aw.lineTo(aA,aH+z[0]);aw.quadraticCurveTo(aA,aH,aA+z[0],aH);aw.lineTo(aA+(5/16)*aF,aH);aw.lineTo(aA+(3/8)*aF,aH+(2/15)*ax)}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}if(E=="speechRight"){aw.moveTo(aE-17,ar);aw.lineTo(aE-96,ar-13);aw.lineTo(aA,ar-13);aw.lineTo(aA,aH);aw.lineTo(aE,aH);aw.lineTo(aE,ar-13);aw.lineTo(aE-38,ar-13);aw.lineTo(aE-17,ar)}if(E=="speechLeft"){aw.moveTo(aA+17,ar);aw.lineTo(aA+96,ar-13);aw.lineTo(aE,ar-13);aw.lineTo(aE,aH);aw.lineTo(aA,aH);aw.lineTo(aA,ar-13);aw.lineTo(aA+38,ar-13);aw.lineTo(aA+17,ar)}else{if(E=="bubr"){right=D+aF-1;bottom=B+ax-2;tailSize=7;if(G.b){B=B+G.b[0]/2;D=D+G.b[0]/2;right=right-G.b[0]/2;bottom=bottom-G.b[0]/2}aw.moveTo(right-tailSize,bottom-7);aw.lineTo(right-tailSize,B+z[1]);aw.quadraticCurveTo(right-tailSize,B,right-z[1]-tailSize,B);aw.lineTo(D+z[0],B);aw.quadraticCurveTo(D,B,D,B+z[0]);aw.lineTo(D,bottom-z[3]);aw.quadraticCurveTo(D,bottom,D+z[3],bottom);aw.lineTo(right-19,bottom);aw.quadraticCurveTo(right-15,bottom-1,right-14,bottom-2);aw.quadraticCurveTo(right-7,bottom+1,right-1,bottom-2);aw.quadraticCurveTo(right-tailSize,bottom-3,right-tailSize,bottom-7)}else{if(E=="bubl"){right=D+aF-1;bottom=B+ax-2;tailSize=7;if(G.b){B=B+G.b[0]/2;D=D+G.b[0]/2;right=right-G.b[0]/2;bottom=bottom-G.b[0]/2}aw.moveTo(right,bottom-z[2]);aw.lineTo(right,B+z[1]);aw.quadraticCurveTo(right,B,right-z[1],B);aw.lineTo(D+z[0]+tailSize,B);aw.quadraticCurveTo(D+tailSize,B,D+tailSize,B+z[0]);aw.lineTo(D+tailSize,bottom-6);aw.quadraticCurveTo(D+4,bottom-1,D+1,bottom-2);aw.quadraticCurveTo(D+2,bottom+2,D+13,bottom-2);aw.quadraticCurveTo(D+15,bottom,D+19,bottom);aw.lineTo(right-z[2],bottom);aw.quadraticCurveTo(right,bottom,right,bottom-z[2])}else{if(E=="arrowL"||E=="arrowR"||E=="arrowU"||E=="arrowD"){var ap=2;if(A.aCurve){ap=A.aCurve}var t=12;if(A.aSize){t=A.aSize}if(E=="arrowL"){aw.moveTo(aA+t,aH);aw.lineTo(aE-z[1],aH);aw.quadraticCurveTo(aE,aH,aE,aH+z[1]);aw.lineTo(aE,ar-z[2]);aw.quadraticCurveTo(aE,ar,aE-z[2],ar);aw.lineTo(aA+t,ar);aw.bezierCurveTo(aA+t-ap,ar,aA,((ar+aH)/2)+ap,aA,(ar+aH)/2);aw.bezierCurveTo(aA,((ar+aH)/2)-ap,t-ap+aA,aH,aA+t,aH)}else{if(E=="arrowR"){aw.moveTo(aA+z[0],aH);aw.lineTo(aE-t,aH);aw.bezierCurveTo(aE-t+ap,aH,aE,((aH+ar)/2)-ap,aE,(aH+ar)/2);aw.bezierCurveTo(aE,((aH+ar)/2)+ap,aE-t+ap,ar,aE-t,ar);aw.lineTo(aA+z[3],ar);aw.quadraticCurveTo(aA,ar,aA,ar-z[3]);aw.lineTo(aA,aH+z[0]);aw.quadraticCurveTo(aA,aH,aA+z[0],aH)}else{if(E=="arrowD"){var aq=(A.aW)?A.aW:aq;var aD=(aA+aE)/2;var aC=aq/2;aw.moveTo(aA+z[0],aH);aw.lineTo(aE-z[1],aH);aw.quadraticCurveTo(aE,aH,aE,aH+z[1]);aw.lineTo(aE,ar-t-z[2]);aw.quadraticCurveTo(aE,ar-t,aE-z[2],ar-t);aw.lineTo(aD+aC,ar-t);aw.lineTo(aD,ar);aw.lineTo(aD-aC,ar-t);aw.lineTo(aA+z[3],ar-t);aw.quadraticCurveTo(aA,ar-t,aA,ar-t-z[3]);aw.lineTo(aA,aH+z[0]);aw.quadraticCurveTo(aA,aH,aA+z[0],aH)}else{if(E=="arrowU"){var aq=(A.aW)?A.aW:20;var aD=(aA+aE)/2;var aC=aq/2;aw.moveTo(aA+z[0],aH+t);aw.lineTo(aD-aC,aH+t);aw.lineTo(aD,aH);aw.lineTo(aD+aC,aH+t);aw.lineTo(aE-z[1],aH+t);aw.quadraticCurveTo(aE,aH+t,aE,aH+t+z[1]);aw.lineTo(aE,ar-z[2]);aw.quadraticCurveTo(aE,ar,aE-z[2],ar);aw.lineTo(aA+z[2],ar);aw.quadraticCurveTo(aA,ar,aA,ar-z[3]);aw.lineTo(aA,aH+t+z[0]);aw.quadraticCurveTo(aA,aH+t,aA+z[3],aH+t)}}}}}else{if(E=="c"){var aJ=aF/2,aK=ax/2,C=Math.min(aJ,aK),q=Math.min(ao|0,C),aG=C-q/2;R=q;aw.arc(D+aJ,B+aK,aG,0,Math.PI*2,true)}}}}}aw.closePath()},_gradient:function(s,q,v){var w=["#ffffff","#000000"];var t=[0,1];if(v.bgc&&v.bgd){w=v.bgc;t=v.bgd}for(var u=0;u<w.length&&u<t.length;u++){try{s.addColorStop(t[u],w[u])}catch(r){}}q.fillStyle=s;q.fill()},_glaze:function(u,w){var q=5,t=d.useOneCanvas?2+w.box[1]:2,z=d.useOneCanvas?10+w.box[0]:10,A=w.box[2]-27,r=10,B=0,s=7;if(w.s=="bubl"){z+=s}J.path(u,"sq",q,t,z,A,r,B,w);var v=u.createLinearGradient(0,t+r,0,t);v.addColorStop(0,"rgba(231, 231, 231, 0.2)");v.addColorStop(0.59,"rgba(240, 240, 240, 0.25)");v.addColorStop(1,"rgba(249, 249, 249, 0.3)");u.fillStyle=v;u.fill();u.restore()},_shadow:function(q,r){q.shadowColor=r.sh[0];q.shadowOffsetX=r.sh[1];q.shadowOffsetY=r.sh[2];q.shadowBlur=r.sh[3]},_effect:function(u,C){var Z=C.fx;for(var B=0;B<Z.length;B++){var z=Z[B];if(z[0]=="dots"){var q=z[1];var w=z[2];var r=z[3];u.fillStyle=z[4];var X=C.box[2];var Y=C.box[3];var t=q+w;var A=q+r;var s=parseInt(X/t)+1;var v=parseInt(Y/A)+1;var D=0;for(var E=0;E<v;E++){D=(D)?0:q;for(var W=0;W<s;W++){u.beginPath();u.arc((W*t)+D,(E*A),q/2,0,2*Math.PI);u.closePath();u.fill()}}}}},_setImage:function(q,s){try{q.drawImage(q.canvas,0,0)}catch(r){}}};var N=this.renderingMode==="singlepage"?0:G.box[0];var F=this.renderingMode==="singlepage"?0:G.box[1];var f=G.box[2];var h=G.box[3];var H=0;var O=0;var c=G.b;var R=null;if(c){H=c[0];O=c.length>3?c.slice(2):c[2]}var P=G.s?G.s:"sq";I.save();if(!this.skipImages&&l.get(G.id)){J.blur()}J.path(I,P,O,F,N,f,h,H,G);if(G.sh){J._shadow(I,G)}if(G.bg){J.background(I,G)}I.restore();if(c&&H>0){J.border(I,G,f,h)}if(G.glaze&&G.glaze=="y"){J._glaze(I,G)}if(G.fx&&G.fx.length>0){J._effect(I,G)}if(G.i){for(var M=0;M<G.i.length;M++){var K=G.i[M];var i=new Image();function Q(){var q=K[5];if(typeof(q)=="string"&&q.search("%")!=-1){q=(f*parseInt(q)/100)-K[3]/2}else{if(q<0){q=parseInt(f)+K[5]-K[3]}}var r=K[6];if(typeof(r)=="string"&&r.search("%")!=-1){r=(h*parseInt(r)/100)-K[4]/2}else{if(r<0){r=parseInt(h)+K[6]-K[4]}}if(d.imagesLoaded[K[0]]){I.drawImage(d.imagesLoaded[K[0]],K[1],K[2],G.box[2],G.box[3],q+N,r+F,G.box[2],G.box[3])}else{i.onload=function(){try{I.drawImage(i,K[1],K[2],G.box[2],G.box[3],q+N,r+F,G.box[2],G.box[3]);if(I.canvas.hasOwnProperty("onchange")){I.canvas.onchange()}}catch(s){}};i.src=K[0]}}$(i).ready(Q)}}else{}if(!this.useCanvas){L=this.canvasToImg(L)}return L};this.canvasToImg=function(c){var d=c.get(0).toDataURL("image/png");return $('<img src="'+d+'">')};this.renderOne=function(d,f,r){var h={$rendition:{},childWidgets:[]};if(!d.box){d.box=this.calculateBox(d,f,r)}if(fluid.widget.isShapeWidget(d)){h.$shapeRendition=this.paintCanvas(d)}if(fluid.widget.isUploadWidget(d)){}if(fluid.widget.isTextWidget(d)){h.$textRendition=this.renderText(d)}if(fluid.widget.hasChildWidgets(d)){var i=fluid.wdgProvider.getChildWidgets(d,true);for(var c=0;c<i.length;c++){h.childWidgets.push(this.renderOne(i[c],d,d.ad[c]))}}if(fluid.widget.hasSegments(d)){h.segments=this.renderSegments(d)}if(!h.childWidgets.length){delete h.childWidgets}return h};this.renderSegments=function(c){var h=[];var d=[];for(var f=0;f<c.sc;f++){if(c.segments&&c.segments.length){h.push({wdgObj:l.get(c.segments[f].id),box:[]})}else{h.push({wdgObj:fluid.wdgProvider.getById(c.seg[f%c.seg.length]),box:[]})}}for(f=0;f<h.length;f++){if(h[f].wdgObj.wh){h[f].wdgObj.tlwh=[0,0,h[f].wdgObj.wh[0],h[f].wdgObj.wh[1]]}if(h[f].wdgObj.tlwh&&typeof(h[f].wdgObj.tlwh[2])==="number"){h[f].box[2]=h[f].wdgObj.tlwh[2]}else{if(h[f].wdgObj.tlwh){if(h[f].wdgObj.tlwh&&h[f].wdgObj.tlwh[2]==="a"){h[f].box[2]=c.box[2]/c.sc}else{if(h[f].wdgObj.tlwh[2].indexOf("%")!==-1){h[f].box[2]=(parseFloat(h[f].wdgObj.tlwh[2])/100)*c.box[2]}}}}if(h[f].wdgObj.tlwh&&typeof(h[f].wdgObj.tlwh[3])==="number"){h[f].box[3]=h[f].wdgObj.tlwh[3]}else{if(h[f].wdgObj.tlwh){if(h[f].wdgObj.tlwh&&h[f].wdgObj.tlwh[3]==="a"){h[f].box[3]=c.box[3]/c.sc}else{if(h[f].wdgObj.tlwh[3].indexOf("%")!==-1){h[f].box[3]=(parseFloat(h[f].wdgObj.tlwh[3])/100)*c.box[3]}}}}}if(c.sl=="h"){if(c.sa=="tl"||!c.sa){for(f=0;f<h.length;f++){h[f].box[0]=(f*(c.box[2]/c.sc));h[f].box[1]=0+c.sp[1]}}else{if(c.sa=="d"){for(f=0;f<h.length;f++){h[f].box[0]=(f*(c.box[2]/c.sc))+Math.max(c.box[2]/c.sc-h[f].box[2],0)/2;h[f].box[1]=(c.box?c.box[1]:0)+c.sp[1]}}}}else{for(f=0;f<h.length;f++){h[f].box[0]=c.box?c.box[0]:0;h[f].box[1]=(c.box?c.box[1]:0)+(f*h[f].box[3])}}for(f=0;f<h.length;f++){if(f===0&&h[f].wdgObj.bts){h[f].wdgObj.b=h[f].wdgObj.bts}else{if(f===h.length-1&&h[f].wdgObj.bbs){h[f].wdgObj.b=h[f].wdgObj.bbs}else{if(h[f].wdgObj.bms&&c.sl==="v"){h[f].wdgObj.b=h[f].wdgObj.bms}}}if(f===0&&h[f].wdgObj.bls){h[f].wdgObj.b=h[f].wdgObj.bls}else{if(f===h.length-1&&h[f].wdgObj.brs){h[f].wdgObj.b=h[f].wdgObj.brs}else{if(h[f].wdgObj.bms&&c.sl==="h"){h[f].wdgObj.b=h[f].wdgObj.bms}}}h[f].wdgObj.box=h[f].box;d.push(this.renderOne(h[f].wdgObj))}return d};this.renderRecursive=function(c,f){var h={};if(c.length){var d=[];for(var i=0;i<c.length;i++){this.generateCanvas(c[i].originId);h=this.renderOne(c[i],f);d.push(h)}}else{this.generateCanvas(c.originId);h=this.renderOne(c,f)}return d||h};this.onPageRenderFinish=function(s){this.renderingQueue[s]=null;if(this.afterPageRendered){var f=this.canvases[s].get(0).toDataURL("image/png");this.afterPageRendered(s,f,1,false)}else{var i=[];var t=fluid.main.project.id;var f=this.canvases[s].get(0).toDataURL("image/jpeg",0.5);var h=$("#"+s+"canvas.page-preview");var c=l.get(s);var d=l.get(s,{returnModel:true});if(!d){return}d.set({imgData:f});if(fluid.main.project.useLocalDb){i.push({id:s,data:f,project:t})}requestAnimationFrame(function(){if(!l.get(s)||!l.get(s).widgets||l.get(s).widgets.length===0){return}var r=$('<img class="page-preview" src="'+f+'">');var q=new Image();q.src=f;r.insertAfter(h);setTimeout(function(){h.remove()}.bind(h),650);q.onload=function(){var w=$("#scaled-"+s);var z=fluid.zoom.getAllPagesParams().newScale;w.get(0).innerHTML="";$("#scaled-"+s).append(q);w.css({top:c.y*z,left:c.x*z,width:c.width*z,height:c.height*z})}.bind(this)}.bind(this));if(fluid.main.project.useLocalDb){dbStorage.set("rastPages",i)}}};this.onRenderFinish=function(){if(typeof window.callPhantom==="function"){$("#canvas").css({top:(-this.cropping.y+15)+"px",left:(-this.cropping.x+15)+"px"});window.callPhantom({event:"finishedrendering",cropping:this.cropping})}else{if(!this.afterPageRendered){var c=[];var d=fluid.main.project.id;$("canvas.page-preview").each(function(){var h=$(this).parents(".screen").attr("id");var i=l.get(h);if(!i||!i.widgets||!i.widgets.length){return}var f=$(this).get(0).toDataURL("image/jpeg",0.5);var r=l.get(h,{returnModel:true});r.set({imgData:f});requestAnimationFrame(function(){var q=$('<img class="page-preview" src="'+f+'">');q.insertAfter($(this));setTimeout(function(){$(this).remove()}.bind(this),500)}.bind(this))})}}};this.countRemainingLoads=function(c){var h=0;if(c){for(var f in this.imagesToLoad[c]){h++}for(var f in this.uploadsToLoad[c]){h++}return h}else{for(var c in this.imagesToLoad){if(this.imagesToLoad.hasOwnProperty(c)){for(var d in this.imagesToLoad[c]){if(this.imagesToLoad[c].hasOwnProperty(d)){h++}}}}for(var c in this.uploadsToLoad){if(this.uploadsToLoad.hasOwnProperty(c)){for(var d in this.uploadsToLoad[c]){if(this.uploadsToLoad[c].hasOwnProperty(d)){h++}}}}return h}};this.onImgLoadErr=function(u,f,v){if(!v.src||v.src.indexOf("data/img")!==-1){if(this.imagesToLoad[u][f]){delete this.imagesToLoad[u][f]}if(this.uploadsToLoad[u][f]){delete this.uploadsToLoad[u][f]}var i=this.countRemainingLoads(u);if(i===0){for(var t=0;t<this.renderingQueue[u].length;t++){var c=this.renderingQueue[u][t];if(fluid.widget.isShapeWidget(c)){this.paintCanvas(c,this.canvases[u])}if(fluid.widget.isUploadWidget(c)){this.renderUpload(c,this.canvases[u],this.imagesLoaded[c.data])}if(fluid.widget.isTextWidget(c)){this.renderText(c,this.canvases[u])}}if(this.countRemainingLoads()===0){this.onRenderFinish()}}var d=this.countRemainingLoads();fluid.main.fire("image.loaded",{step:d,countdown:true});if(d==0){fluid.main.fire("images.loaded");this.onPageRenderFinish(u)}return}var h=new Image();h.onload=this.onImgLoad.bind(this,u,f);h.onerror=this.onImgLoadErr.bind(this,u,f);h.src="data/img/"+f};this.onImgLoad=function(i,w,c){this.imagesLoaded[w]=c;if(this.imagesToLoad[i][w]){delete this.imagesToLoad[i][w]}if(this.uploadsToLoad[i][w]){delete this.uploadsToLoad[i][w]}var h=this.countRemainingLoads(i);if(h===0){for(var d=0;d<this.renderingQueue[i].length;d++){var f=this.renderingQueue[i][d];if(fluid.widget.isShapeWidget(f)){this.paintCanvas(f,this.canvases[i])}if(fluid.widget.isUploadWidget(f)){this.renderUpload(f,this.canvases[i],this.imagesLoaded[f.data])}if(fluid.widget.isTextWidget(f)){this.renderText(f,this.canvases[i])}}this.onPageRenderFinish(i);if(this.countRemainingLoads()===0){this.onRenderFinish()}}var B=fluid.main.uploads&&fluid.main.uploads.get(w);var A=fluid.main.project;if(B&&w.indexOf("i_")===0&&window.uploadsCache&&!window.uploadsCache[w]){if(!fluid.main.project.uploadCanvas||k.isTaintedCanvas(A.uploadCanvas)){A.uploadCanvas=document.createElement("canvas")}A.uploadCanvas.width=c.naturalWidth;A.uploadCanvas.height=c.naturalHeight;A.uploadCanvasCtx=A.uploadCanvas.getContext("2d");A.uploadCanvasCtx.drawImage(evt.target,0,0);var v=A.uploadCanvas.toDataURL("image/png");if(B&&v){B.set({imgData:v})}}var z=this.countRemainingLoads();fluid.main.fire("image.loaded",{step:z,countdown:true});if(z==0){fluid.main.fire("images.loaded")}};this.pageRenderOne=function(r){var f={$rendition:{}};if(!this.skipImages){var c=this.countRemainingLoads()==0;if(!this.imagesToLoad[this.pageId]){this.imagesToLoad[this.pageId]={}}if(!this.uploadsToLoad[this.pageId]){this.uploadsToLoad[this.pageId]={}}var i=false;if(r.i&&!this.imagesToLoad[this.pageId][r.i[0][0]]){i=true}if(r.upload==="y"&&!this.uploadsToLoad[this.pageId][r.data]){i=true}if(i||this.renderingQueue[this.pageId].length>0){if(r.i&&!this.imagesToLoad[this.pageId][r.i[0][0]]){var d=new Image();this.imagesToLoad[this.pageId][r.i[0][0]]=true;d.onload=this.onImgLoad.bind(this,this.pageId,r.i[0][0],d);d.onerror=this.onImgLoadErr.bind(this,this.pageId,r.i[0][0],d);d.src=r.i[0][0];if(c){fluid.main.fire("images.loading")}}else{if(r.upload==="y"&&!this.uploadsToLoad[this.pageId][r.data]){var h=l.get(r.data);this.uploadsToLoad[this.pageId][r.data]=r.id;if(window.uploadsCache&&window.uploadsCache[r.data]){d.src=uploadsCache[r.data]}else{fluid.upload.get({id:r.data,callback:function(I,D,C){if(C.success){var G=new Image();G.onload=this.onImgLoad.bind(this,I,D,G);G.onerror=this.onImgLoadErr.bind(this,I,D,G);var F=atob(C.imgData.split(";base64,")[1]);var E=new Array(F.length);for(var H=0;H<F.length;H++){E[H]=F.charCodeAt(H)}var J=new Uint8Array(E);var q=new Blob([J],{type:"image/png"});G.src=URL.createObjectURL(q);if(c){fluid.main.fire("images.loading")}}else{var G=new Image();this.onImgLoadErr.call(this,I,D,G)}}.bind(this,this.pageId,r.data),priority:fluid.upload.priority.pageZoomedOut})}}}this.renderingQueue[this.pageId].push(r);f.$shapeRendition=this.canvas;return f}}if(fluid.widget.isShapeWidget(r)||r.segments){f.$shapeRendition=this.paintCanvas(r)}if(!this.skipImages&&fluid.widget.isUploadWidget(r)){f.$shapeRendition=this.renderUpload(r)}if(fluid.widget.isTextWidget(r)){f.$textRendition=this.renderText(r)}return f};this.calculatePageBox=function(d,c){return l.get(c,{returnModel:true}).getBox()};this.exceedsPage=function(c,d){if(c.box==undefined){return false}if(c.box[0]<0||c.box[1]<0){return true}if(c.box[0]+c.box[2]>d.width){return true}if(c.box[1]+c.box[3]>d.height){return true}return false};this.renderPage=function(c,d,s){if(this.renderingQueue[c.id]&&this.renditions[c.id]){return this.renditions[c.id]}else{this.renderingQueue[c.id]=[]}if(this.finishTimeout){clearTimeout(this.finishTimeout);delete this.finishTimeout}var h={};var t=[];var i=[];for(var f in c.widgets){c.widgets[f].id=f;c.widgets[f].box=this.calculatePageBox(c,f);if(!s){if(this.useOneCanvas&&this.exceedsPage(c.widgets[f],c)){i.push(f)}}}this.setCropping(c);this.generateCanvas(c.id);this.pageId=c.id;h=this.pageRenderOne({st:"b",ca:"tl",bg:"c",bgc:["#ffffff"],box:[0,0,this.canvasSize[0],this.canvasSize[1]],wg:[1],id:"dummy-bg-"+(new Date().getTime())});t.push(h);for(var f in c.widgets){if(c.widgets[f].st&&c.widgets[f].st==="b"){h=this.pageRenderOne(c.widgets[f]);h.id=f;h.lockTo=c.widgets[f].lockTo;h.box=c.widgets[f].box;t.push(h)}}for(var f in c.widgets){if((!c.widgets[f].st||c.widgets[f].st!=="b")&&!(d&&c.widgets[f].dm==="t")){h=this.pageRenderOne(c.widgets[f]);h.id=f;h.lockTo=c.widgets[f].lockTo;h.box=c.widgets[f].box;t.push(h)}}if(this.countRemainingLoads(c.id)===0){this.onPageRenderFinish(c.id)}if(this.countRemainingLoads()===0){this.finishTimeout=setTimeout(this.onRenderFinish.bind(this),200)}this.renditions[c.id]=t;return t};this.preparePage=function(f){var c=$.extend({id:f},l.get(f));c.widgets=c.widgets.reduce(function(h,i){h[i]=$.extend({},l.get(i));h[i].id=i;return h},{});for(var d in c.widgets){c.widgets[d].box=this.calculatePageBox(c,d)}return c},this.renderWdg=function(f,s){var d;var h=[0,0];s=$.extend({},s);s.widgets={};this.renderingQueue[f]=[];this.pageId=f;for(var c=0;s.ad&&c<s.ad.length;c++){d=s.ad[c][0];var t={wh:[widgets.summary[d].wh[0],widgets.summary[d].wh[1]]};(t.wh[0]=="a")&&(t.wh[0]="100%");(t.wh[1]=="a")&&(t.wh[1]="100%");t.tlwh=[s.ad[c][2],s.ad[c][1],t.wh[0],t.wh[1]];s.widgets[d]={id:d,box:this.calculateBox(t)};s.widgets[d]=$.extend(s.widgets[d],widgets.summary[d]);delete s.widgets[d].blur;h[0]=Math.max(h[0],s.widgets[d].box[0]+s.widgets[d].box[2]);h[1]=Math.max(h[1],s.widgets[d].box[1]+s.widgets[d].box[3])}var i=Math.max(h[0],h[1]);this.generateCanvas(f,{width:i,height:i});for(var c=0;s.ad&&c<s.ad.length;c++){this.renderSubWdg(s.widgets[s.ad[c][0]])}if(this.countRemainingLoads(f)===0){this.onPageRenderFinish(f)}},this.renderSubWdg=function(c){this.pageRenderOne(c);if(c.ad&&c.ad.length){var h,d;for(var f=0;f<c.ad.length;f++){h=c.ad[f][0];d=$.extend({},widgets.summary[h]);d.id=h;d.box=this.calculateBox(d,c,c.ad[f]);d.blur=false;this.renderSubWdg(d)}}else{if(c.sc){this.renderSegments(c)}}};this.renderWidgetsBelow=function(i,f,c){f=f||this.preparePage(this.pageId);var v=0,z=l.get(f.id).widgets,h=z.length,w=this.ctx;for(;v<h;v++){if(z[v]===i){break}var B=f.widgets[z[v]];if(!B.dm){if((fluid.widget.isUploadWidget(B)||B.i)&&c){var d=document.getElementById(z[v]),A=d?(d.querySelector("img")||d.querySelector("canvas")):null;if(A){w.drawImage(A,B.box[0],B.box[1],B.box[2],B.box[3])}}else{this.pageRenderOne(B)}}}if(this.countRemainingLoads(f.id)===0){this.onPageRenderFinish(f.id)}if(this.countRemainingLoads()===0){this.finishTimeout=setTimeout(this.onRenderFinish.bind(this),200)}};this.onProjectUnloaded=function(c){if(!this.canceledPreview){this.canceledPreview=[]}this.canceledPreview.push(c)};this.renderProjectPreview=function(W,S){W=$.extend({},W);if(this.currentProjectId&&W[this.currentProjectId]){return}this.previewSize={width:205,height:160};var h=$("<canvas></canvas>");var X=h.get(0).getContext("2d");this.canvas=h;var R=$('<canvas class="project-preview" width="'+this.previewSize.width+'" height="'+this.previewSize.height+'"></canvas>').css({position:"relative"});var T=R.get(0).getContext("2d");var V;var L;var ad={};var i={};for(var Z in W){if(W.hasOwnProperty(Z)){if(Z.indexOf("w_")===0||(Z.indexOf("w")===0&&Z.length==33)){i[Z]=$.extend({},W[Z])}else{if(Z.indexOf("x_")===0||(Z.indexOf("x")===0&&Z.length==33)){ad[Z]=$.extend({},W[Z])}else{if(Z.indexOf("p_")===0||(Z.indexOf("p")===0&&Z.length==33)){V=$.extend({},W[Z]);L=Z}}}}}this.lastProjectId=L;this.currentProjectId=L;var N=V.pages;if(!N){S.call(this,L,R);this.currentProjectId=null;return}var ac;var f={x:V.canvasWidth,y:V.canvasHeight,x2:0,y2:0};for(var P=0;P<N.length;P++){ac=ad[N[P]];if(!ac){continue}if(ac.x<f.x){f.x=ac.x}if(ac.y<f.y){f.y=ac.y}if(ac.x+ac.width>f.x2){f.x2=ac.x+ac.width}if(ac.y+ac.height>f.y2){f.y2=ac.y+ac.height}}var d={x:this.previewSize.width/(f.x2-f.x),y:this.previewSize.height/(f.y2-f.y)};d.x=Math.min(d.x,d.y);d.y=Math.min(d.x,d.y);this.skipImages=true;var aa=[];for(var P=0;P<N.length;P++){if(!ad[N[P]]){continue}var ac=$.extend({},ad[N[P]]);aa.push(ac);if(ac.widgets&&ac.widgets.length>0){var M={};for(var Q=0;Q<ac.widgets.length;Q++){M[ac.widgets[Q]]=i[ac.widgets[Q]]}}ac.widgets=ac.widgets.length>0?M:[];ac.id=N[P];this.canvasSize=[ac.width||320,ac.height||480];if(!this.widgetsCache){this.widgetsCache={}}if(!this.pagesCache){this.pagesCache={}}for(var Z in ac.widgets){if(ac.widgets.hasOwnProperty(Z)&&ac.widgets[Z]){ac.widgets[Z].id=Z;ac.widgets[Z].box=this.calculatePageBox(ac,Z);this.widgetsCache[Z]=ac.id}}this.pagesCache[ac.id]=ac}var ab=$.extend({},V.links);var U;var O;var c;for(var P=0;P<ab.linkDest.length;P++){if(!this.pagesCache||!this.pagesCache[ab.linkDest[P]]){continue}U=this.widgetsCache[ab.linkOrigin[P]];if(U===undefined){continue}O={x:this.pagesCache[U].x+this.pagesCache[U].width*0.5,y:this.pagesCache[U].y+this.pagesCache[U].height*0.5};O.x=(O.x-f.x)*d.x;O.y=(O.y-f.y)*d.y;c={x:this.pagesCache[ab.linkDest[P]].x+this.pagesCache[ab.linkDest[P]].width*0.5,y:this.pagesCache[ab.linkDest[P]].y+this.pagesCache[ab.linkDest[P]].height*0.5};c.x=(c.x-f.x)*d.x;c.y=(c.y-f.y)*d.y;T.beginPath();T.strokeStyle="#009ecc";T.moveTo(O.x,O.y);T.lineTo(c.x,c.y);T.stroke()}function Y(t){ac=aa[t];h.attr({width:ac.width,height:ac.height});X.fillStyle="#ffffff";X.fillRect(0,0,ac.width,ac.height);this.canvasSize=[ac.width||320,ac.height||480];for(var r in ac.widgets){if(ac.widgets.hasOwnProperty(r)&&ac.widgets[r]){ac.widgets[r].id=r;ac.widgets[r].box=this.calculatePageBox(ac,r)}}T.fillStyle="#ffffff";T.fillRect((ac.x-f.x)*d.x,(ac.y-f.y)*d.y,ac.width*d.x,ac.height*d.y);var q=l.get(aa[t].id,{returnModel:true});var s=q?q.get("imgData"):null;if(!q||!s){for(var r in ac.widgets){if(ac.widgets.hasOwnProperty(r)&&ac.widgets[r]){if(ac.widgets[r].st&&ac.widgets[r].st==="b"){this.pageRenderOne(ac.widgets[r])}}}for(var r in ac.widgets){if(ac.widgets.hasOwnProperty(r)&&ac.widgets[r]){if(!ac.widgets[r].st||ac.widgets[r].st!=="b"){if(!q||!q.getBox()){page.calculateWdgPositions(ac.id)}this.pageRenderOne(ac.widgets[r])}}}}var u=new Image();if(!q||!s){u.src=h.get(0).toDataURL("image/jpeg")}else{u.src=s}u.onload=(function(z,B,v,w,C,A){T.drawImage(z,B,v,w,C);if(this.canceledPreview&&this.canceledPreview.indexOf(L)!==-1){var D=this.canceledPreview.indexOf(L);this.canceledPreview[D]=null}else{if(t<aa.length-1){setTimeout(Y.bind(this,t+1),100)}else{fluid.main.fire("thumbnailReady",L,R.get(0));S.call(this,L,R);this.currentProjectId=null}}}).bind(this,u,(ac.x-f.x)*d.x,(ac.y-f.y)*d.y,ac.width*d.x,ac.height*d.y,ac.id)}if(aa.length>0){setTimeout(Y.bind(this,0),200)}else{S.call(this,L,R);this.currentProjectId=null}return R};this.flattenRenditions=function(c){if(c.length){var f=[];for(var d=0;d<c.length;d++){f.push(this.flattenRendition(c[d]))}return f}else{return[this.flattenRendition(c)]}};this.flattenRendition=function(c){var f=[];var h=c.childWidgets;var d=c.segments;f.push(c.$rendition);if(h&&h.length){for(var i=0;i<h.length;i++){f=f.concat(this.flattenRendition(h[i]))}}if(d&&d.length){for(i=0;i<d.length;i++){f=f.concat(this.flattenRendition(d[i]))}}return f}}},{"./StackBlur":1,"./browserdetect":2,"./class-storage":33,"./class-widget":37,"./fluid/modules/upload":63}],37:[function(p,n,j){var l=p("./class-storage");var k=p("./utils");var o=p("./functions");var m={editing:false,widgetOffset:null,locked:null,currSelection:null,useCanvas:false,get:function(a){var b;if(typeof widgets!=="undefined"){b=widgets.summary&&widgets.summary[a]&&$.extend(true,{id:a},widgets.summary[a])}if(b==undefined){b=l.get(a)}return b||false},set:function(b,d){var c=l.get(d,{getAll:true});if(!c){return false}for(var a in b){c[a]=b[a]}l.set(d,c)},getSubTextElements:function(f){var b,c,a=[],d;d=f.id;b=l.get(d,{returnModel:true}).getSubTextElements();b.forEach(function(h){a.push(h.id)});c=$("#"+a.join(", #"));return c},getSegmentRoots:function(a){var b=[],c,d;$(a).each(function(){c=l.get(this.id,{returnModel:true});d=c.getSegmentRoot();if(d){b.push(d.id)}});b=$("#"+b.join(", #"));return b},getLockTos:function(a){var c=fluid.main.project.widgets.getRoots(a);var b=Array.prototype.reduce.call(c,function(f,d){_.forEach(document.querySelectorAll('[data-lockto="'+d.id+'"]'),function(h){if(f.indexOf(h)===-1){f.push(h)}});return f},[]);return $(b)},getSelectedOnly:function(a){function c(d){a.each(function(){if($(this).attr("data-segment")==$(this).attr("id")){if($(this).attr("data-lockto")==d){b=b.add($(this))}else{return}}})}var b=$([]);a.each(function(){if($(this).hasClass("ui-selected")){var d=m.get($(this).attr("id"));if(d.sc&&!d.bg){var f=$(this).attr("id");c(f)}else{b=b.add($(this))}}});return b},getDependentsCache:[],getDependents:function(c,f,b){var a=[],h,i=[];if(b&&m.getDependentsCache[c]){return m.getDependentsCache[c]}if(!b){m.getDependentsCache=[]}if(f){f.each(function(){i.push(l.get(this.id,{returnModel:true}))});f=i}else{f=l.get(c,{returnModel:true}).getLockTos()}for(var r=0,d=f.length;r<d;r++){if(f[r].get("of")===c){a.push(f[r].id)}}h=$("#"+a.join(", #"));m.getDependentsCache[c]=h;return h},resetCache:function(){m.getDependentsCache=[]},getAbsDimension:function(a,b){if(typeof a=="string"){if(a=="a"){return b||0}else{return(parseFloat(a||0)/100)*(b||0)}}else{return a}},getPagePos:function(t,c,h){if(!c){c={top:0,left:0}}var a=m.get(t),f=a.ca,d=(a.tlwh||a.dp).slice(),b=a.tlwh?a.tlwh.slice(2):m.wh.slice(),v=h.slice(),u=a.of&&a.of!=t;if(u){var i=m.getBoxSize(a.of);v[0]=m.getAbsDimension(i.width,h[0]);v[1]=m.getAbsDimension(i.height,h[1])}d[0]=m.getAbsDimension(d[0],v[1]);d[1]=m.getAbsDimension(d[1],v[0]);b[0]=m.getAbsDimension(b[0],v[0]);b[1]=m.getAbsDimension(b[1],v[1]);if(f[0]=="b"){d[0]=v[1]-d[0]-b[1]}else{if(f[0]=="c"){d[0]=v[1]/2+d[0]-b[1]/2}}if(f[1]=="r"){d[1]=v[0]-d[1]-b[0]}else{if(f[1]=="c"){d[1]=v[0]/2+d[1]-b[0]/2}}c.top+=d[0];c.left+=d[1];if(u){m.getPagePos(a.of,c,h)}return c},getBoxSize:function(b){var c={};var d=m.get(b),a=[d.tlwh[2],d.tlwh[3]]||d.wh;c.width=a[0];c.height=a[1];return c},saveTempFile:function(a,b){l.setTempItem(a+"_file",b)},getTempFile:function(a){return l.get(a+"_file")},removeTempFile:function(a){l.remove(a+"_file")},verticalAlign:function(i){var d=i.find(".widgetText");if(d.length==0){return}var v=parseInt(i.css("height"));var a=d.css("font-size");var u=d.css("font-family");d.contents().wrapAll("<span></span>");var f=d.find("span").eq(0);f.css("font-size",a);f.css("font-family",u);var h=parseFloat(f.css("height"));f.contents().eq(0).unwrap();var b=(parseFloat(d.css("top"))/v)*100;var t=(v-h)*b;t=(t<=0)?0:t;d.css("padding-top",t+"px");o.updateTLWH();var c=m.get(i.attr("id"));c.ts=d.attr("style");if(c.id){m.set(c,c.id)}},autoWidth:function(b,a){var d=[b.tlwh[2],b.tlwh[3]];var c=a!="library"?k.getActivePage().find(".widgetHolder").width():320;var c=a!="library"?k.getActivePage().find(".widgetHolder").width():320;if(c==null&&d[0]=="a"){d[0]=320}else{if(d[0]=="a"){d[0]=c}}return d},addUploads:function(){var a=fluid.main.uploads.models;a.forEach(function(b){widgets.summary[b.id]=b.attributes})},_redraw:function(h,a,b){if(a.segment){var i=m.get(a.lockTo);var d=m._setupSegments(i);m._updateSegments(i,d,b)}var c=$(".screen.active").attr("id");var f=m._setTMPLVars(h.attr("id"),a,[0,0,parseInt(fluid.main.project.pages.get(c).get("width")),parseInt(fluid.main.project.pages.get(c).get("height"))]);m._drawCanvasOrImage(h,f)},hasOwnColorProperties:function(a){if(typeof a=="string"){a=m.get(a)}return !a.srps&&Boolean(a.bg||a.bgc)},serialize:function(a){function b(f,h){m.getDependents(f).each(function(){var i=$(this).attr("id");h[i]=l.get(i);b(i,h)})}function c(f){var h=_.clone(l.get(f));if(!h){return}var i={id:f};h.insertAfterId=$("#"+f).prev().attr("id");i[f]=h;l.set(f,h);if($("#"+f).prev().length==0){i[f].insertAfterId="first"}b(f,i);return i}var d;if($.isArray(a)){d=$.map(a,function(f){return c(f)})}else{d=c(a)}return JSON.stringify(d)},deserialize:function(a,f,h,b){function c(E){var z=E.id;var B=E[z];var C=$("#"+f);var F=C.find(".widgetHolder");var A=[0,0,F.outerWidth(),F.outerHeight()];var i=B.insertAfterId;m._save(z,B,C);m._draw(z,F,A,false,false,i);var D=h&&l.get(h);if(D&&D.seg&&"segment" in B&&B.segment==z){m._insertSegmentObj(D,z,B,b)}i=z;delete E.id;delete E[z];for(z in E){B=E[z];if(B){m._save(z,B,C);m._draw(z,F,A,false,false,i);i=z}}}if(a){var d=JSON.parse(a);if(d){if($.isArray(d)){$.each(d,function(r,i){c(i)})}else{c(d)}}}},checkIntegrity:function(a,c){var b=m.get(a);if(!b){return true}if(b.name){var d={blackSearch:"widget201010120",tablerowsliderlongblank:"widget201010120",pROGRESSBAR:"widget893",iconStatusBarDark:"widget730",iconStatusBarLight:"widget729",iconStatusBarTrans:"widget731",webLoading:"widget615",webUrlEntry:"widget613",webShortcuts:" widget614",barmapbottomwithtext:"widget910",iPHONEMENUSDARK1:"widget917",rOWCONTENTX1SELECTED:"widget926",spinner:"widget308",dIALINGPAD:"widget908",mEDIAPLAYER:"widget3071",buttonbackandnext:"widget919",switchonwithtext:"widget309",iconLibrary:"widget137",iconAdd:"widget127",iconNext:"widget133",iconRemove:"widget135",sortAlpha:"widget788",iconsorthandles:"widget789",iconAttach:"widget128",iconBack:"widget129",iconForward:"widget130",iconForward1:"widget1301293847",iconInfo:"widget131","'iconTick":"widget136",iconTick1:"widget1342343236",iconWorking:"widget132"};if(d[b.name]){m.replace(a,d[b.name])}}if(!b.tlwh){m.fixTLWH(a,b,c)}return true},load:function(i,h,b){var v=$("#"+i).find(".widgetHolder");var u=[0,0,v.outerWidth(),v.outerHeight()];if(b==true){var c=$("#"+i).find(".fixedWidgetHolderFront");var d=v}for(var f=0;f<h.length;f++){if(b==true){var w=m.get(h[f]);v=d;var a=false;if(w.st=="f"){a=k.findPositionOnScreen($([]),h[f],b);if(a==true){v=c}}}m._draw(h[f],v,u,false,false,h[f].insertAfterId)}},fixTLWH:function(f,i,b){if(!i.wh){return false}var c=i.top.toString();var a=i.left.toString();if(c.indexOf("%")>-1){c=c.substring(0,c.indexOf("%")+1)}if(a.indexOf("%")>-1){a=a.substring(0,a.indexOf("%")+1)}if((i.lockTo!=f)&&(c.indexOf("%")==-1)){var d=m.get(i.lockTo);var h=(!d||isNaN(d.tlwh[0]))?0:d.tlwh[0];c=i.top-h}if((i.lockTo!=f)&&(a.indexOf("%")==-1)){var d=m.get(i.lockTo);var h=(!d||isNaN(d.tlwh[1]))?0:d.tlwh[1];a=i.left-h}if(c.toString().indexOf("%")==-1){c=parseFloat(c)}if(a.toString().indexOf("%")==-1){a=parseFloat(a)}if((i.wh[0]).toString().indexOf("%")==-1){i.wh[0]=parseFloat(i.wh[0])}if((i.wh[1]).toString().indexOf("%")==-1){i.wh[1]=parseFloat(i.wh[1])}if(i.st!="b"){var r=[c,a,i.wh[0],i.wh[1]];i.tlwh=r}i.ca="tl";delete i.top;delete i.left;delete i.wh;delete i.id;delete i.title;delete i.dp;delete i.x;l.set(f,i)},getBlurBox:function(h,t,d){var f,v,b,a;a=l.get(h,{returnModel:true});if(a&&a.getPage){b=a.getPage().getBox()}else{var c=l.get(t);b=[0,0,c.width,c.height]}if(a&&a.getBox){v=a.getBox().slice(0)}else{if(h.indexOf("helper-")===0){v=[0,0,b[2],b[3]]}else{v=[0,0,1,1]}}var u=d*2;v[0]-=d;v[1]-=d;v[2]+=u;v[3]+=u;f=v;for(var i=0;i<2;i++){if(v[i]<0){f[i]=0;f[i+2]=f[i+2]+f[i]}}for(var i=2;i<=3;i++){if(v[i-2]+v[i]>b[i]){f[i]=b[i]-f[i-2]}}return f},renderBlurLayer:function(c,f,A,C){f=f||l.get(c,{returnModel:true}).getPage().id;var D=l.get(f),i=document.createElement("canvas"),a=i.getContext("2d"),w=(w=c.match(/^helper-(.+)/))&&w[1],b=(w?widgets.summary[w].blur:m.get(c).blur),B=m.getBlurBox(c,f,b);if(B[2]<=0||B[3]<=0){return null}var h=B[0]+B[2],d=B[1]+B[3],z=new fluid.wdgRenderer(h,d);D=z.preparePage(f);i.width=h;i.height=d;z.renderBlur=false;z.useOneCanvas=true;z.pageId=f;z.renderingQueue[f]=[];z.generateCanvas(f);z.ctx.fillStyle="white";z.ctx.fillRect(0,0,z.canvasSize[0],z.canvasSize[1]);z.afterPageRendered=function(r,q){a.drawImage(z.canvas[0],0,0);k.blur.canvasRGB(i,B[0],B[1],B[2],B[3],b);if(A){try{return A(i.toDataURL(0,0))}catch(s){return C?C(s):s}}};z.renderWidgetsBelow(c,D,!A);a.drawImage(z.canvas[0],0,0);k.blur.canvasRGB(i,B[0],B[1],B[2],B[3],b);return i.toDataURL()},renderBlurLayerImmediate:function(i,b){b=b||l.get(i,{returnModel:true}).getPage().id;var c=l.get(b),d=document.createElement("canvas"),a,f=(f=i.match(/^helper-(.+)/))&&f[1],h=(f?widgets.summary[f].blur:m.get(i).blur);d.width=c.width;d.height=c.height;a=m.getBlurBox(i,b,h);if(a[2]<=0||a[3]<=0){return null}if(this.canvases[b]){k.blur.canvasRGB(d,a[0],a[1],a[2],a[3],h,this.canvases[b].get(0))}else{k.blur.canvasRGB(d,a[0],a[1],a[2],a[3],h)}return d},setBlurBG:function(f,c,d){var b=m.blurLayers[f.id];if(b){var a=m.blurOffsets[f.id];if(!a){a=m.blurOffsets[f.id]={left:0,top:0}}if(typeof c!=="number"){c=0;d=0;a.left=parseInt(f.style.left,10);a.top=parseInt(f.style.top,10)}f.style.backgroundImage="url("+b+")";f.style.backgroundPosition=-(a.left+c)+"px "+-(a.top+d)+"px";f.style.backgroundRepeat="no-repeat"}else{f.style.backgroundImage="none"}},blurLayers:{},blurOffsets:{}};fluid.main.on("uploaddone",function(b,a){m.removeTempFile(a)});n.exports=m},{"./class-storage":33,"./functions":64,"./utils":69}],38:[function(i,n,j){var k=i("./class-widget");k=i("./class-widgetNewAdd");var m=i("./class-link");var l=i("./class-page");k.hover=function(a){if(fluid.main.project.isReadOnly()){return false}if(!fluid.zoom.isEditMode()){return true}if(a.type==="mouseover"){k.hoverIn.call(this,a)}else{k.hoverOut.call(this,a)}};k.hoverOut=function(a){clearTimeout(k.hoverTimeout);if(k.$linksToFade){k.$linksToFade.fadeIn(100)}$(".link").removeClass("front")};k.hoverIn=function(a){k.hoverTimeout=setTimeout(k.fadeUnrelatedLinks.bind(this,a),500)};k.fadeUnrelatedLinks=function(b){var c=$(this).attr("id");var a=m.from(c);if(!a){return}var d=$(".link");k.$linksToFade=d.filter(function(){if(this.id===a){return false}else{return true}});k.$linksToFade.fadeOut(100);$("#"+a).addClass("front")};k.click=function(a){if(fluid.main.project.isReadOnly()){fluid.main.fire("showAlertEditInactive");return false}var c=$(".pageWidget textarea");if(c.length===0){fluid.main.fire("widgetclicked",a)}if($(a.target).hasClass("dragging")){return}if(!$("#canvas").data("zooming")){if(fluid.zoom.getCtx()==="project"){return false}var b=$(this);if(c.length>0&&c.closest(".pageWidget").attr("id")!=b.attr("id")){k._stopEditingText()}l.hideOptionsMenu();if($("#fluidDropdown").is(":visible")){contextMenu.place();fluidMenu.hide()}}return false};k.addDefault=function(h,a,d){var c=$("#"+d);var b;if(c.length==1){var f=c.find(".widgetHolder");b=k.add(a,false,h,f)}return b}},{"./class-link":16,"./class-page":18,"./class-widget":37,"./class-widgetNewAdd":40}],39:[function(j,i,h){var f={allGroups:{Android:{widget15180:"Map",widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget2033:"Solid",widget2026:"Diagonal Gradient",widget2027:"Diagonal Gradient",widget545:"Radial Gradient",widget570:"Linear Gradient",widget2031:"Solid",widget952:"Status",widget1597:"Wi-Fi Active",widget1602:"Bluetooth",widget1612:"Battery Full",widget951:"Status",widget58055:"Header Sub",widget59116:"Browser Top",widget5960:"Header",widget9460:"Search",widget970:"Search",widget9884:"Line Diagonal",widget9885:"Line Diagonal",widget11013:"Line Vertical",widget11012:"Line Horizontal",widget9886:"Triangle",widget9887:"Triangle",widget9888:"Triangle",widget9889:"Triangle",widget9890:"Triangle",widget9891:"Triangle",widget9892:"Triangle",widget9893:"Triangle",widget9894:"Circle",widget989510:"Semi Circle-Left",widget989610:"Semi Circle-Right",widget989710:"Semi Circle-Up",widget989810:"Semi Circle-Down",widget9899:"Square",widget9900:"Rounded Square",widget9901:"Rounded Rectangle High",widget9902:"Rounded Rectangle Wide",widget99030:"Octagon",widget990300:"Up Arrow",widget990301:"Down Arrow",widget990302:"Left Arrow",widget990303:"Right Arrow",widget9020:"Table View White",widget972:"Checkbox",widget967:"Radio On",widget966:"Radio Off",widget962:"Add",widget964:"Add Active",widget963:"Remove",widget973:"Checkbox Active",widget9324234020:"Table View Black",widget52200:"Status Menu",widget153423430:"Alert Button",widget15730:"Context Menu",widget959:"Menu",widget154323730:"Radio Menu",widget15634353430:"Panel",widget9331:"Quick Action Bar",widget778:"Phone",widget775:"Contacts",widget771:"Web",widget776:"Gmail",widget947:"Open",widget770:"Clock",widget772:"Calculator",widget773:"Calendar",widget774:"Camera",widget777:"Message",widget948:"Closed",widget784:"Keyboard Alphabetical",widget930:"Keyboard Numeric",widget700915:"Keyboard Landscape",widget78500:"Alert Dialog",widget961:"Alert",widget9330:"Tab Layout",widget1598:"GPS Active",widget1601:"USB",widget1599:"Lock",widget712:"Main Menu Group",widget982:"Add",widget990:"Photos",widget1500:"Search",widget992:"Information",widget996:"Settings",widget548:"Main Menu Single",widget1501:"Share",widget940001:"4x1 Widget Portrait",widget9011:"1x1 Widget Portrait",widget90100:"2x2 Widget Portrait",widget159000:"3x3 Widget Portrait",widget843545970:"Location",widget565:"Blip",widget1005110:"SMS Bubble Left",widget1005120:"SMS Bubble Right",widget520:"Divider H1",widget521:"Divider V1",widget15212178:"Scrollbar",widget5710:"Button Active Gradient",widget5720:"Button Selected Gradient",widget5730:"Button Gradient",widget5430:"Button Active Flat",widget5440:"Button Selected Flat",widget5470:"Button Flat",widget5770:"Button Cancel",widget5780:"Button Confirm",widget5540:"Button",widget100040:"Multisegment",widget582:"Button Keypad",widget5620:"Text Field",widget9540:"Dropdown",widget950:"Picker",widget94112:"Slider",widget94111:"Progress Bar",widget958:"Back/Next",widget16280:"Switch On",widget8240:"Switch Off",widget974:"Checkbox Selected",widget969:"Add Selected",widget965:"Remove Active",widget968:"Remove Selected",widget975:"Close",widget976:"Close On",widget977:"1X",widget978:"Fullscreen",widget13082653500:"Dropdown Control",widget956:"Zoom Controls",widget971:"Down",widget979:"Favourite",widget983:"Phone",widget984:"Camera",widget985:"Close",widget986:"Compass",widget987:"Delete",widget988:"Route",widget989:"Edit",widget991:"Help",widget993:"Maps",widget994:"Location",widget995:"Menu",widget997:"Refresh",widget998:"Save",widget999:"Send",widget1502:"Upload",widget1503:"Show",widget1504:"Zoom",widget10070:"Row Icon 1",widget10071:"Row Icon 2",widget10072:"Row Icon 3",widget10073:"Row Icon 4",widget10074:"Row Icon 5",widget10075:"Row Icon 6",widget10076:"Row Icon 7",widget10077:"Row Icon 8",widget10078:"Row Icon 9",widget10079:"Row Icon 10",widget10080:"Row Icon 11",widget10081:"Row Icon 12",widget10082:"Row Icon 13",widget10083:"Row Icon 14",widget10084:"Row Icon 15",widget10085:"Row Icon 16",widget10086:"Row Icon 17",widget10087:"Row Icon 18",widget10088:"Row Icon 19",widget10089:"Row Icon 20",widget779:"Images",widget780:"Youtube",widget781:"Postcards",widget782:"Music",widget783:"Settings",widget960:"Time",widget1600:"Alert",widget1603:"Missed Call",widget1604:"Voicemail",widget1605:"New SMS or MMS",widget1606:"New Email",widget1607:"New IM",widget1608:"Vibrate On",widget1609:"Call In Progress",widget1610:"Call On Hold",widget1611:"Call Forwarding",widget1613:"Charging",widget1101010613:"Download Android",widget5340:"H1",widget5350:"H2",widget16260:"H3",widget7020:"Regular",widget5400:"Text Block",widget14320:"Link",widget93270:"Pill Menu"},"Android-4.4":{widget10123401109:"Light Gradient",widget10123401105:"Holo Light Gradient",widget10123401108:"Messaging Blue",widget1308560:"Yellow",widget1308530:"Green",widget1308520:"Blue",widget1308550:"Purple",widget1308540:"Red",widget10123401106:"Dark Gradient",widget10123401107:"Holo Dark Gradient",widget101234004:"Status Bar",widget130890:"Status Bar",widget10123661104:"Navigation Bar",widget10123661106:"Navigation Bar Active",widget10123661107:"Navigation Bar Toast",widget10123661108:"Navigation Bar Toast",widget10123401104:"Main Action Bar Black",widget8235:"previous item light",widget92141:"Split Action Bar Top Black",widget92142:"Split Action Bar Bottom Black",widget9213:"Main Action Bar Grey",widget8236:"previous item dark",widget92151:"Split Action Bar Top Grey",widget92152:"Split Action Bar Bottom Grey",widget921660:"Contextual Action Bar Dark",widget8222:"accept light",widget8421:"select all light",widget8389:"cut light",widget8387:"copy light",widget921670:"Contextual Action Bar Dark",widget921610:"Contextual Split Action Bar Top",widget92162:"Contextual Split Action Bar Bottom",widget921650:"Contextual Action Bar Light",widget8223:"accept dark",widget8422:"select all dark",widget8390:"cut dark",widget8388:"copy dark",widget921680:"Contextual Action Bar Selected",widget921630:"Contextual Split Action Bar Top",widget92164:"Contextual Split Action Bar Bottom",widget92580:"Scrollable Tab",widget94230:"Search Bar Google",widget8285:"microphone light",widget922600:"Single Line List Dark",widget8435:"chat light",widget8436:"chat dark",widget130893:"avatar light 48 X 48px",widget130894:"avatar dark 48 X 48px",widget130895:"avatar holo dark 48 X 48px",widget9223:"avatar dark 62 X 62px",widget92210:"Single Line List Light",widget9222:"avatar light 62 X 62px",widget92270:"Double Line List Dark",widget92280:"Double Line List Light",widget9224:"avatar light 81 X 81px",widget130891:"avatar light 81 X 81px",widget130892:"avatar dark 81 X 81px",widget130896:"avatar holo dark 65 X 65px",widget9225:"avatar dark 81 X 81px",widget922900:"Triple Line List Dark",widget92300:"Triple Line List Light",widget2918800220:"Checkbox Checked",widget29188003:"Checkbox Unchecked",widget8361:"important light",widget8362:"important dark",widget92170:"Action Bar Spinner Dark",widget92180:"Action Bar Spinner Light",widget941801:"Notification Widget",widget102340040:"Tab Bar",widget1023140040:"Tab Bar Selected",widget1102340040:"Tab Bar Black",widget110234001140:"Tab Bar Blue",widget13083901:"Tab Bar Dark",widget13084401:"Tab Bar Light",widget13084402:"Tab Bar Transparent",widget130839:"Tab Bar Holo Dark Highlighted",widget130844:"Tab Bar Holo Light Highlighted",widget1308441:"Tab Bar Highlighted",widget92600:"Toast Notification",widget130829:"Toast popup",widget71343332425:"Keyboard Alphabetical",widget713432425:"Keyboard Numeric",widget713432426:"Keyboard Alphabetical Landscape",widget9247:"Text Selection Handle Blue",widget92310:"Time Picker",widget850420:"Picker Holo Dark",widget92320:"Date Picker",widget92610:"Alert Dialog",widget9292:"states warning light",widget94240:"Player",widget8468:"fast-forward light",widget134234320060:"Speech Bubble left",widget7342343420:"Speech Bubble right",widget130834:"Tile",widget130835:"Category Heading",widget130858:"Clock Light",widget130884:"Clock Dark",widget130859:"Timer Light",widget130885:"Timer Dark",widget130862:"Clock Round",widget9904:"Line Diagonal",widget9905:"Line Diagonal",widget11015:"Line Vertical",widget11014:"Line Horizontal",widget9906:"Triangle",widget9907:"Triangle",widget9908:"Triangle",widget9909:"Triangle",widget9910:"Triangle",widget9911:"Triangle",widget9912:"Triangle",widget9913:"Triangle",widget9914:"Circle",widget991510:"Semi Circle-Left",widget991610:"Semi Circle-Right",widget991710:"Semi Circle-Up",widget991810:"Semi Circle-Down",widget9919:"Square",widget9920:"Rounded Square",widget9921:"Rounded Rectangle High",widget9922:"Rounded Rectangle Wide",widget99230:"Octagon",widget992300:"Up Arrow",widget9923010:"Down Arrow",widget9923020:"Left Arrow",widget992303:"Right Arrow",widget5032420:"Button Normal Light",widget50312420:"Button Focused Light",widget503124210:"Button Pressed Light",widget503124220:"Button Focused Disabled Light",widget503124230:"Button Disabled Light",widget4032420:"Button Normal Dark",widget40312420:"Button Focussed Dark",widget403124210:"Button Pressed Dark",widget403124220:"Button Focused Disabled Dark",widget403124230:"Button Disabled Dark",widget9425:"Button Gradient",widget3023415160:" Micro ",widget3023415170:" Small ",widget3023415180:" Medium ",widget3023415190:" Large ",widget302341513120:" Text Block Black ",widget302345122:"+",widget122340016:"___",widget92330:"Textfield Activated",widget92340:"Textfield Normal",widget92350:"Textfield Disabled",widget9421:"Textbox",widget13082653501:"Dropdown Control",widget92370:"Spinner Normal Holo Light",widget92420:"Spinner Normal Holo Dark",widget92380:"Spinner Focused Holo Light",widget92410:"Spinner Focused Holo Dark",widget9243:"Spinner Pressed Holo Light",widget9245:"Spinner Pressed Holo Dark",widget9244:"Spinner Disabled Focused Holo Light",widget9246:"Spinner Disabled Focused Holo Dark",widget92390:"Spinner Disabled Holo Light",widget92400:"Spinner Disabled Holo Dark",widget92480:"Text Message Holo Dark",widget8447:"send light",widget92490:"Text Message Holo Light",widget8448:"send dark",widget92690:"Hamburger Menu",widget920800:"Quickscroll Left Selected",widget920900:"Quickscroll Left Unselected",widget92100:"Quickscroll Right Selected",widget92110:"Quickscroll Right Unselected",widget9100:"Picker Holo Light",widget188005:"Seek Bar Disabled Light",widget188004:"Seek Bar Pressed Light",widget1188004:"Seek Bar Focused Light",widget1199004:"Seek Bar Normal Light",widget6188005:"Seek Bar Disabled Dark",widget6188004:"Seek Bar Pressed Dark",widget61188004:"Seek Bar Focused Dark",widget61199004:"Seek Bar Normal Dark",widget9236:"Indeterminate Progress Bar",widget3988005:"Progress Bar Light",widget29188004:"Progress Bar Dark",widget9204:"Progress Spinner Micro",widget9205:"Progress Spinner Small",widget9206:"Progress Spinner Medium",widget9207:"Progress Spinner Large",widget85061:"Blip Dark",widget85062:"Blip Light",widget86000:"Switch Inactive Holo Light",widget86010:"Switch Active Holo Light",widget86020:"Switch Inactive Holo Dark",widget86030:"Switch Active Holo Dark",widget94190:"ON Switch",widget94200:"OFF Switch",widget8496:"Radio Button Off Transparent",widget8499:"Radio Button Transparent",widget85054:"Radio Button Off",widget8497:"Radio Button Off",widget8500:"Radio Button Off",widget85055:"Radio Button Off",widget85051:"Radio Button Off",widget85052:"Radio Button Off",widget85053:"Radio Button Off",widget8498:"Radio Button Off",widget85059:"Radio Button On",widget8506:"Radio Button On",widget85056:"Radio Button On",widget85057:"Radio Button On",widget85058:"Radio Button On",widget291880024:"Checkbox Unchecked",widget2918800231:"Checkbox Unchecked",widget291880023:"Checkbox Checked",widget291880021:"Checkbox Checked",widget291880022:"Checkbox Checked",widget29188007:"Checkbox Checked",widget2918800214:"Checkbox Checked",widget2918800217:"Checkbox Checked",widget2918800218:"Checkbox Checked",widget2918800219:"Checkbox Checked",widget9256:"Map Marker",widget143010:"Location Disclosure Marker",widget82351:"next item dark",widget9257:"Text Selection Handle",widget9201:"Text Selection Point",widget92030:"Text Insertion Point",widget1308310:"Counter Bottom",widget130831:"Counter Top",widget8226:"cancel light",widget8227:"cancel dark",widget8224:"back navigation light",widget8225:"back navigation dark",widget8232:"forward light",widget8233:"forward dark",widget8228:"collapse light",widget8229:"collapse dark",widget8230:"expand light",widget8231:"expand dark",widget8234:"next item light",widget8237:"refresh item light",widget8238:"refresh item dark",widget8243:"access alarm light",widget8244:"access alarm dark",widget8245:"access battery light",widget8246:"access battery dark",widget8247:"access brightness light",widget8248:"access brightness dark",widget8255:"access call light",widget8256:"access call dark",widget8261:"dial pad light",widget8262:"dial pad dark",widget8263:"end call light",widget8264:"end call dark",widget8295:"phone volume light",widget8296:"phone volume dark",widget8319:"volume mute light",widget8320:"volume mute dark",widget8321:"volume on light",widget8322:"volume on dark",widget8323:"airplane mode light",widget8324:"airplane mode dark",widget8325:"airplane mode light",widget8326:"airplane mode dark",widget8265:"bluetooth light",widget8266:"bluetooth dark",widget8267:"bluetooth connected light",widget8268:"bluetooth connected dark",widget8269:"bluetooth searching light",widget8270:"bluetooth searching dark",widget8277:"location found light",widget8278:"location found dark",widget8279:"location off light",widget8280:"location off dark",widget8281:"location searching light",widget8282:"location searching dark",widget8283:"mic mute light",widget8284:"mic mute dark",widget8286:"microphone dark",widget8287:"network cell light",widget8288:"network cell dark",widget8303:"SD storage light",widget8304:"SD storage  dark",widget8315:"usb light",widget8316:"usb dark",widget8327:"error light",widget8328:"error dark",widget9293:"states warning dark",widget8345:"about light",widget8346:"about dark",widget8347:"help light",widget8348:"help dark",widget8349:"search light",widget8350:"search dark",widget8351:"settings light",widget8352:"settings dark",widget8357:"favorite light",widget8358:"favorite dark",widget8359:"half-important light",widget8360:"half-important dark",widget8363:"not important light",widget8364:"not important dark",widget8371:"labels light",widget8372:"labels dark",widget8373:"label new light",widget8374:"label new dark",widget8377:"grid light",widget8378:"grid dark",widget8379:"list light",widget8380:"list dark",widget8381:"attach content light",widget8382:"attach content dark",widget8383:"new attachment light",widget8384:"new attachment content dark",widget8385:"backspace light",widget8386:"backspace dark",widget8411:"paste light",widget8412:"paste dark",widget8391:"discard light",widget8392:"discard dark",widget8393:"edit light",widget8394:"edit dark",widget8423:"split light",widget8424:"split dark",widget8425:"undo light",widget8426:"undo dark",widget8443:"reply all light",widget8444:"reply all dark",widget8445:"reply light",widget8446:"reply dark",widget8449:"share light",widget8450:"share dark",widget8409:"new content light",widget8410:"new content dark",widget8459:"rotate left light",widget8460:"rotate left dark",widget8461:"rotate right light",widget8462:"rotate right dark",widget8417:"remove light",widget8418:"remove dark",widget8419:"save light",widget8420:"save dark",widget8433:"cc-bcc light",widget8434:"cc-bcc dark",widget8439:"group light",widget8440:"group dark",widget8451:"map light",widget8452:"map dark",widget8453:"place light",widget8454:"place dark",widget8455:"web site light",widget8456:"web site dark",widget8464:"add to queue light",widget8465:"add to queue dark",widget8466:"av-download light",widget8467:"av-download dark",widget8469:"fast-forward dark",widget8472:"av-offline light",widget8473:"av-offline dark",widget8474:"av-next light",widget8475:"av-next dark",widget8476:"pause light",widget8477:"pause dark",widget8479:"play dark",widget8484:"replay light",widget8485:"replay dark",widget15180:"Map",widget2031:"Solid",widget2033:"Solid",widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget8478:"play light"},"Android-Tablet":{widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget10123401109:"Light Gradient",widget10123401105:"Holo Light Gradient",widget10123401108:"Messaging Blue",widget1308560:"Yellow",widget1308530:"Green",widget1308520:"Blue",widget1308550:"Purple",widget1308540:"Red",widget10123401106:"Dark Gradient",widget10123401107:"Holo Dark Gradient",widget8235:"previous item light",widget8236:"previous item dark",widget8222:"accept light",widget8421:"select all light",widget8389:"cut light",widget8387:"copy light",widget8223:"accept dark",widget8422:"select all dark",widget8390:"cut dark",widget8388:"copy dark",widget94230:"Search Bar Google",widget8285:"microphone light",widget8435:"chat light",widget8436:"chat dark",widget130893:"avatar light 48 X 48px",widget130894:"avatar dark 48 X 48px",widget130895:"avatar holo dark 48 X 48px",widget9223:"avatar dark 62 X 62px",widget9222:"avatar light 62 X 62px",widget9224:"avatar light 81 X 81px",widget130891:"avatar light 81 X 81px",widget130892:"avatar dark 81 X 81px",widget130896:"avatar holo dark 65 X 65px",widget9225:"avatar dark 81 X 81px",widget941700:"Double Line List Dark",widget29188003:"Checkbox Unchecked",widget9417600:"Triple Line List Dark",widget94150:"Multiline List Light",widget8361:"important light",widget941600:"Dropdown List Dark",widget94140:"Multiline List Light",widget8362:"important dark",widget92170:"Action Bar Spinner Dark",widget92180:"Action Bar Spinner Light",widget94080:"Status Menu",widget941800:"Settings Layout",widget941801:"Notification Widget",widget102340040:"Tab Bar",widget1023140040:"Tab Bar Selected",widget1102340040:"Tab Bar Black",widget110234001140:"Tab Bar Blue",widget13083901:"Tab Bar Dark",widget13084401:"Tab Bar Light",widget13084402:"Tab Bar Transparent",widget130839:"Tab Bar Holo Dark Highlighted",widget130844:"Tab Bar Holo Light Highlighted",widget1308441:"Tab Bar Highlighted",widget92600:"Toast Notification",widget130829:"Toast popup",widget9404:"Keyboard Landscape",widget9405:"Keyboard Portrait",widget850420:"Picker Holo Dark",widget92610:"Alert Dialog",widget9292:"states warning light",widget94240:"Player",widget134234320060:"Speech Bubble left",widget7342343420:"Speech Bubble right",widget130834:"Tile",widget130835:"Category Heading",widget130858:"Clock Light",widget130884:"Clock Dark",widget130859:"Timer Light",widget130885:"Timer Dark",widget130862:"Clock Round",widget9904:"Line Diagonal",widget9905:"Line Diagonal",widget11015:"Line Vertical",widget11014:"Line Horizontal",widget9906:"Triangle",widget9907:"Triangle",widget9908:"Triangle",widget9909:"Triangle",widget9910:"Triangle",widget9911:"Triangle",widget9912:"Triangle",widget9913:"Triangle",widget9914:"Circle",widget991510:"Semi Circle-Left",widget991610:"Semi Circle-Right",widget991710:"Semi Circle-Up",widget991810:"Semi Circle-Down",widget9919:"Square",widget9920:"Rounded Square",widget9921:"Rounded Rectangle High",widget9922:"Rounded Rectangle Wide",widget99230:"Octagon",widget992300:"Up Arrow",widget9923010:"Down Arrow",widget9923020:"Left Arrow",widget992303:"Right Arrow",widget5032420:"Button Normal Light",widget50312420:"Button Focused Light",widget503124210:"Button Pressed Light",widget503124220:"Button Focused Disabled Light",widget503124230:"Button Disabled Light",widget4032420:"Button Normal Dark",widget40312420:"Button Focussed Dark",widget403124210:"Button Pressed Dark",widget403124220:"Button Focused Disabled Dark",widget403124230:"Button Disabled Dark",widget9425:"Button Gradient",widget3023415160:" Micro ",widget3023415170:" Small ",widget3023415180:" Medium ",widget3023415190:" Large ",widget302341513120:" Text Block Black ",widget92330:"Textfield Activated",widget92340:"Textfield Normal",widget92350:"Textfield Disabled",widget9421:"Textbox",widget92370:"Spinner Normal Holo Light",widget92420:"Spinner Normal Holo Dark",widget92380:"Spinner Focused Holo Light",widget92410:"Spinner Focused Holo Dark",widget9243:"Spinner Pressed Holo Light",widget9245:"Spinner Pressed Holo Dark",widget9244:"Spinner Disabled Focused Holo Light",widget92390:"Spinner Disabled Holo Light",widget92400:"Spinner Disabled Holo Dark",widget92480:"Text Message Holo Dark",widget8447:"send light",widget92490:"Text Message Holo Light",widget8448:"send dark",widget92690:"Hamburger Menu",widget920800:"Quickscroll Left Selected",widget920900:"Quickscroll Left Unselected",widget92100:"Quickscroll Right Selected",widget92110:"Quickscroll Right Unselected",widget9100:"Picker Holo Light",widget188005:"Seek Bar Disabled Light",widget188004:"Seek Bar Pressed Light",widget1188004:"Seek Bar Focused Light",widget1199004:"Seek Bar Normal Light",widget6188005:"Seek Bar Disabled Dark",widget6188004:"Seek Bar Pressed Dark",widget61188004:"Seek Bar Focused Dark",widget61199004:"Seek Bar Normal Dark",widget9236:"Indeterminate Progress Bar",widget3988005:"Progress Bar Light",widget29188004:"Progress Bar Dark",widget9204:"Progress Spinner Micro",widget9205:"Progress Spinner Small",widget9206:"Progress Spinner Medium",widget9207:"Progress Spinner Large",widget85061:"Blip Dark",widget85062:"Blip Light",widget86000:"Switch Inactive Holo Light",widget86010:"Switch Active Holo Light",widget86020:"Switch Inactive Holo Dark",widget86030:"Switch Active Holo Dark",widget94190:"ON Switch",widget94200:"OFF Switch",widget8496:"Radio Button Off Transparent",widget8499:"Radio Button Transparent",widget85054:"Radio Button Off",widget8497:"Radio Button Off",widget8500:"Radio Button Off",widget85055:"Radio Button Off",widget85051:"Radio Button Off",widget85052:"Radio Button Off",widget85053:"Radio Button Off",widget8498:"Radio Button Off",widget85059:"Radio Button On",widget8506:"Radio Button On",widget85056:"Radio Button On",widget85057:"Radio Button On",widget85058:"Radio Button On",widget291880024:"Checkbox Unchecked",widget2918800231:"Checkbox Unchecked",widget291880023:"Checkbox Checked",widget291880021:"Checkbox Checked",widget291880022:"Checkbox Checked",widget29188007:"Checkbox Checked",widget9256:"Map Marker",widget143010:"Location Disclosure Marker",widget82351:"next item dark",widget9257:"Text Selection Handle",widget9201:"Text Selection Point",widget92030:"Text Insertion Point",widget1308310:"Counter Bottom",widget130831:"Counter Top",widget8226:"cancel light",widget8227:"cancel dark",widget8224:"back navigation light",widget8225:"back navigation dark",widget8232:"forward light",widget8233:"forward dark",widget8228:"collapse light",widget8229:"collapse dark",widget8230:"expand light",widget8231:"expand dark",widget8234:"next item light",widget8237:"refresh item light",widget8238:"refresh item dark",widget8243:"access alarm light",widget8244:"access alarm dark",widget8245:"access battery light",widget8246:"access battery dark",widget8247:"access brightness light",widget8248:"access brightness dark",widget8255:"access call light",widget8256:"access call dark",widget8261:"dial pad light",widget8262:"dial pad dark",widget8263:"end call light",widget8264:"end call dark",widget8295:"phone volume light",widget8296:"phone volume dark",widget8319:"volume mute light",widget8320:"volume mute dark",widget8321:"volume on light",widget8322:"volume on dark",widget8323:"airplane mode light",widget8324:"airplane mode dark",widget8325:"airplane mode light",widget8326:"airplane mode dark",widget8265:"bluetooth light",widget8266:"bluetooth dark",widget8267:"bluetooth connected light",widget8268:"bluetooth connected dark",widget8269:"bluetooth searching light",widget8270:"bluetooth searching dark",widget8277:"location found light",widget8278:"location found dark",widget8279:"location off light",widget8280:"location off dark",widget8281:"location searching light",widget8282:"location searching dark",widget8283:"mic mute light",widget8284:"mic mute dark",widget8286:"microphone dark",widget8287:"network cell light",widget8288:"network cell dark",widget8303:"SD storage light",widget8304:"SD storage  dark",widget8315:"usb light",widget8316:"usb dark",widget8327:"error light",widget8328:"error dark",widget9293:"states warning dark",widget8345:"about light",widget8346:"about dark",widget8347:"help light",widget8348:"help dark",widget8349:"search light",widget8350:"search dark",widget8351:"settings light",widget8352:"settings dark",widget8357:"favorite light",widget8358:"favorite dark",widget8359:"half-important light",widget8360:"half-important dark",widget8363:"not important light",widget8364:"not important dark",widget8371:"labels light",widget8372:"labels dark",widget8373:"label new light",widget8374:"label new dark",widget8377:"grid light",widget8378:"grid dark",widget8379:"list light",widget8380:"list dark",widget8381:"attach content light",widget8382:"attach content dark",widget8383:"new attachment light",widget8384:"new attachment content dark",widget8385:"backspace light",widget8386:"backspace dark",widget8411:"paste light",widget8412:"paste dark",widget8391:"discard light",widget8392:"discard dark",widget8393:"edit light",widget8394:"edit dark",widget8423:"split light",widget8424:"split dark",widget8425:"undo light",widget8426:"undo dark",widget8443:"reply all light",widget8444:"reply all dark",widget8445:"reply light",widget8446:"reply dark",widget8449:"share light",widget8450:"share dark",widget8409:"new content light",widget8410:"new content dark",widget8459:"rotate left light",widget8460:"rotate left dark",widget8461:"rotate right light",widget8462:"rotate right dark",widget8417:"remove light",widget8418:"remove dark",widget8419:"save light",widget8420:"save dark",widget8433:"cc-bcc light",widget8434:"cc-bcc dark",widget8439:"group light",widget8440:"group dark",widget8451:"map light",widget8452:"map dark",widget8453:"place light",widget8454:"place dark",widget8455:"web site light",widget8456:"web site dark",widget8472:"av-offline light",widget8473:"av-offline dark",widget8484:"replay light",widget8485:"replay dark",widget9400:"Status Bar",widget9410:"Main Action Bar Black",widget9411:"Main Action Bar Grey",widget94120:"Contextual Action Bar Dark",widget94130:"Contextual Action Bar Light",widget94010:"Browser Bar",widget9402:"Saved Tab Bar",widget94030:"Tab Bar",widget94060:"Item Selection Bar",widget94070:"Map Search Bar",widget9409:"Text Selection Bar"},"Android-Wear":{widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget1687779991:"Line Diagonal",widget1687779992:"Line Diagonal",widget1687779993:"Line Vertical",widget1687779994:"Line Horizontal",widget1687779995:"Triangle",widget1687779996:"Triangle",widget1687779997:"Triangle",widget1687779998:"Triangle",widget16877799990:"Triangle",widget16877799991:"Triangle",widget16877799992:"Triangle",widget16877799993:"Triangle",widget16877799994:"Circle",widget16877799995:"Semi Circle Left",widget16877799996:"Semi Circle Right",widget16877799997:"Semi Circle Up",widget16877799998:"Semi Circle Down",widget16877799999:"Square",widget168777999990:"Rounded Square",widget168777999991:"Rounded Rectangle High",widget168777999992:"Rounded Rectangle Wide",widget168777999993:"Octagon",widget168777999994:"Up Arrow",widget168777999995:"Down Arrow",widget168777999996:"Left Arrow",widget168777999997:"Right Arrow",widget43867346096496820155584875894173:"Status bar",widget03545715863591144693865376437327:"Selected note",widget69039807241395180496424094659825:"Unselected note",widget87667876907769113467920757128790:"Multi line list card",widget05970235493575108147976966402885:"Weather layout small",widget26240334709589278157855880465045:"Weather layout expanded",widget23645229339496687415922734690566:"Notification list",widget74439526832923315680196298099131:"Toast",widget68751440196048739197757041880722:"Message layout",widget31755620485697843134732084473792:"Speech input",widget64440211840363833995408860310391:"Speech layout row",widget69585186782697510831619135936726:"SMS alert",widget51881529859792313842860502222301:"SMS message list",widget49521614291571814171467374793466:"Flight alert layout",widget09323399217894251420520397528983:"Check in layout",widget40434186605021573081746850307227:"Reply layout",widget74754474624136963624898478343017:"Navigate layout",widget27438720774141741840430260016637:"Archive layout",widget16789838814123554824721123912992:"Notes layout",widget03178264605891129212049809620272:"Notes card",widget17613154484723557449273378079708:"Expander button",widget756397763064880252789066288560:"Transparent button",widget57452859439512267922996879442452:"Transparent status button",widget71614636563417329242461593538059:"Check in control",widget82591882823862177358749381866000:"Reply control",widget64383256625030556900102660831760:"Navigate control",widget52617654428994344797388563635998:"Archive control",widget825918828238621773587493818660:"Notification control",widget56105902624874114598487830517570:"Google control inactive",widget59327658584777734016987364049492:"Google control active",widget39149701933563294759562916011933:"Action note selected",widget79474576548336054259839923479102:"Action note unselected",widget78687976346475432274031123648906:"Selected action",widget14197682144636600552869029558880:"Unselected action",widget2652404873995297610216205099:"Page indicator",widget26524043080873995297610216205099:"Page indicator",widget1576194808344301088625107473:"Page indicator",widget15761948083443010886251074739062:"Page indicator",widget45498325828550918958241547462380:"Page indicator",widget90062017758150643221733652792603:"Message notification",widget75639776306488025278906628856033:"Message heading",widget36866207480688815038222363579019:"Message small alert",widget05481323868439663119528280674231:"Message small light",widget11022833330589540323646977634744:"Message popup dark large",widget87307562951124566965496758439433:"Message popup light large",widget32931506974818331957635899955922:"Message popup dark",widget10566455955018010570099211336912:"Message popup light",widget91318305387821329821645283601738:"Message small dark",widget48643041421873402541155873772668:"Message small light",widget42139781166793074590618599015795:"Edit large dark",widget50490959178402349637862433401329:"Edit large light",widget81957796723757025537984196114683:"Edit small dark",widget79565343062505200744687390602908:"Edit small light",widget19532102089150029534230436713861:"Scroll up dark",widget35242050878519122672992537737183:"Scroll up light",widget76017569756625406818741276485357:"Scroll down dark",widget70698414364213442580985781569604:"Scroll down light",widget78604068312616462655079315931184:"Expand small dark",widget94790310514388060731246160351684:"Expand small light",widget50538327108880647051825142446475:"Speech bubble dark",widget16535364638885352901666822641040:"Speech bubble small light",widget44989310503732357069395643347960:"Message popup dark",widget62353038509681344009616853296052:"Message popup light",widget54575432597203265646412533908699:"Medium text dark",widget06007650501261157999293839668400:"Large text dark",widget82002943818872302229297380425187:"Small text dark",widget50889494870044162961601461781974:"Paragraph text dark",widget07986992876986417490868029869477:"Hourglass dark",widget10428937180616900843264056447252:"Hourglass large light",widget68802241431243967652179071692733:"Hourglass small dark",widget33424577395906540844586968670965:"Hourglass small light",widget96689296451204130433234187174198:"Question mark dark",widget84134454257378998362015922948221:"Question mark light",widget30382534899076619187731559412029:"Question mark small dark",widget47506166781872952602015456866890:"Question mark large light",widget06834694082388443814454698512995:"Cycling dark",widget96708635448263931163441869116837:"Bike light",widget94778023384143624745545160325983:"Train dark",widget26773088651231931318345631564543:"Train light",widget60324652061101885803314189948923:"Walking dark",widget60761473395688495467051876670486:"Walking light",widget07672521943679831218675434152493:"Car dark",widget50316200849029648213546010131196:"Car light",widget51337687332092828951352206114337:"Car small dark",widget13981817995879436802006157016053:"Car small light",widget65795078929506875260685004861156:"Google search dark",widget50267039790055338823687808211204:"Google light",widget58547832078931818597569088590661:"Google small dark",widget98274893235128561904035533991116:"Google small light",widget83545599268345626779281154334865:"Umbrella dark",widget32494113173260844703012648087216:"Umbrella light",widget52467695787702487523861402818049:"Reminder dark",widget70824129145358231118444684488697:"Reminder light",widget39340554529308999826713780187969:"Reminder small dark",widget20623866095211769044909904686049:"Reminder light",widget51824374687000811049619459773385:"Alarm large dark",widget97348379525074837091093028765731:"Alarm large light",widget44363500709999378679535550754085:"Alarm dark",widget79524969487043562807150441893974:"Alarm large light",widget31184748197775210813072442524388:"Alarm small dark",widget24767586200220012883387418574230:"Alarm light",widget61762255227434657001125096995258:"Charts large dark",widget99330133630639063167949077396173:"Charts large light",widget48058215274011072468366679443553:"Play dark",widget06663193654139194430910804911342:"Play large light",widget95010775015475753037922618253597:"Play small dark",widget41242340695905291551798813470197:"Play small light",widget82033967067041082112635367035197:"Zoom dark",widget69697312961684277387316195324022:"Zoom in large light",widget38252718450488371449109480930590:"Compass dark",widget47190893190629869955125950135600:"Compass light",widget25827430937336224917186345576711:"Compass small dark",widget22701421176622788058386179801827:"Compass small light",widget18354382835746960000282343838686:"Compass dark",widget25202220129063408506404024893571:"Compass light",widget03692770740791512915784385829558:"Smartphone dark",widget51484555097455756018077511711928:"Smartphone light",widget05928550542433278666891628358199:"Cancel smartphone dark",widget56945681159948615223376310719804:"Cancel smartphone light",widget29695601266364603323534488881843:"Archive dark",widget98226007116887513825820140643290:"Archive light",widget26942046209386946878875447604514:"Reply dark",widget93023996068714496700499782032696:"Reply light",widget92366697172697679945525552881025:"Mail large dark",widget56468416966978522622894256331596:"Mail large light",widget29893426487423033061267946440893:"Mail small dark",widget31546806415887005363844440633588:"Mail small light",widget45983343104519505414866843472101:"Gmail",widget89575246856383328289247396450264:"Headphones small dark",widget62441043993082299374277469554165:"Headphones small light",widget76332041784179415911357608072973:"Wind large dark",widget71378830255771180588593084231654:"Wind large light",widget50011768310150781218957554733738:"Wind medium dark",widget92397378358572969002530101659309:"Wind medium light",widget16720408706486363209945129621512:"Wind small dark",widget44502470000865960985411426732008:"Wind small light",widget42775688030038788910194638658845:"Phone small",widget79032833285875322069120519279322:"Phone up large dark",widget56939917222520779092721213092161:"Phone up large light",widget42187609362209231805345382292962:"Phone up dark",widget16215843794262588681666837144459:"Phone up light",widget86349081007713740264595060948587:"Hang up dark",widget70313293337202075699865417777516:"Phone down light",widget61008977224964893929699265218700:"Phone down",widget89019727866124679559293858340016:"List dark",widget58067173602134272676816164043514:"List light",widget10067947021679870308634771099446:"Airplane large dark",widget34289150890776683684597961667834:"Airplane large light",widget92177607652410219926673676328438:"Airplane control",widget01359452225365584909212665907861:"Fast forward small dark",widget00394042070673324437102939634218:"Fast forward large light",widget44698547671606821060629684660237:"Pause small dark",widget98603858985050142689104121050155:"Pause small light",widget79261571466416487268891226990712:"Rewind small dark",widget52963977516149482217881733452792:"Rewind small light",widget88794567211234129825574999166265:"Night",widget05802205856435412854987889777888:"Night small",widget87529105880143497285760374077957:"Moon",widget86733396680238682871279903208584:"Moon small",widget35750094824050535262890794610407:"Moon night",widget23313255034793136311594683653509:"Snow large",widget89397189872279012998064664603493:"Snow medium",widget21654323434951283463893340666938:"Snow small",widget92337757290641906981208919319739:"Snowing",widget93549543064033832272362868462191:"Light snow large",widget88950359653881542996234749075639:"Light snow small",widget32746586905481522103331261313316:"Sunny spells large",widget49508937039565244870594374071411:"Sunny spells",widget39712757590379707255336648323256:"Sunny spells small",widget14262342928679517422282504232906:"Cloudy",widget52523891623734644373017909660059:"Cloudy",widget11908463635249991749601439714467:"Raining",widget92607151478558476597890079869634:"Raining small",widget31795844157772696283192392041619:"Heavy rain small",widget82648947687387260927461162064853:"Heavy rain small",widget50507217645252127709240576166106:"Rain large",widget98090340004018575715000762440936:"Rain small",widget06199490303644175216894236339755:"Rain heavy",widget51696678665142386385068267154610:"Sleet large",widget86421323451581863268218369193317:"Sleet small",widget50026024684830142304833210908144:"Thunder large",widget21229623295354389538971772576861:"Fog large",widget52920527012714981217545774082625:"Fog large",widget20647537885939058098840633365829:"Fog small",widget58712012637077827203914781426623:"Fog small",widget36123895325596620840246697088149:"Sun",widget32041701296349643240885357125420:"Sun large",widget82205424141142717104817833839661:"Sun small",widget80681916529845056291231281271454:"Lightning",widget88160012765299245183601326276839:"Changeable weather",widget10123401105999:"Light Gradient",widget1308540999:"Red",widget40134104439690508968127520:"Photo-Clouds",widget77674030825355840504741385:"Photo-Man",widget77674030825355840504741:"Photo-Hotel",widget65418638150818566698501079:"Photo-Landscape",widget65418638150818566698501:"Photo-San Francisco",widget40134104439690508968127:"Photo-Woman",widget10123401107999:"Dark Gradient",widget4013410443969968127520:"Map",widget68891243363522855761572829415623:"Weather Card",widget46871152961758118339975465968962:"Map Card",widget82321789041753929741223634646072:"Check In Card",widget59629315677407263962447050039286:"Message Notifications Card",widget63887294416870290175567734530529:"SMS Card",widget36021963266061118213343204395004:"Notifications Card"},Desktop:{widget2033:"Solid",widget1555:"Pale Grey",widget1554:"Prototype",widget15151:"Pale Blue",widget1515:"Fluid Blue",widget2031:"Solid",widget1577:"Tab Bar",widget9303:"Tab Bar Highlighted",widget1559:"Toolbar",widget1616:"Disclosure",widget301:"Table View",widget13082722:"Dropdown Menu Tab Expander",widget13082709:"Pullout Tab",widget13082710:"Pullout Menu",widget13082711:"Pullout Menu Tab",widget13082708:"Pullout Tab",widget1023010:"Text Area",widget1534264:"Alert Dialog",widget23111503:"Button",widget511211202:"Button active",widget9823:"Media Player",widget1430:"Tooltip Green",widget1575:"Detail Disclosure",widget8:"Popover",widget9:"Accordion Menu",widget9325:"Horizontal Browser Scrollbar",widget13082712:"Scrollbar",widget9326:"Vertical Browser Scrollbar",widget1587:"Divider Horizontal",widget1586:"Divider Vertical",widget13082705:"Horizontal Expander",widget13082707:"Vertical Expander",widget502:"Button",widget1543:"HTML Button",widget1584:"HTML Button",widget1621:"Button",widget10000:"Multisegment Button",widget576:"Radio Off",widget51176:"Radio On",widget594:"Checkbox Off",widget51194:"Checkbox On",widget51195:"Hamburger Menu",widget1536:"Text Box",widget15361:"Password Entry Field",widget1537:"Search",widget9328:"Dropdown Menu Closed",widget9329:"Dropdown Menu Opened",widget9332:"Date Picker",widget834:"Slider",widget13082704:"Control Slider",widget83411:"Progress Bar",widget1533375:"Remove",widget9317:"Close",widget5112398:"Add",widget9315:"Subtract",widget13082700:"Minus",widget13082701:"Plus",widget93159:"Equals",widget51122398:"Back",widget51121398:"Forward",widget13082689:"Back",widget13082690:"Forward",widget9824:"Page List",widget982500:"Item List Simple",widget1526:"Small",widget934:"Large",widget931125:"Gigantic",widget1528:"Block Text",widget932000:"Link List",widget1576:"Inactive Text",widget93190:"Bulleted List",widget9320001:"Breadcrumb",widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget15770:"Charm Bar",widget130826790:"Tab Layout Bar",widget15779:"Tab Bar",widget13082715:"Application Bar",widget13082714:"Explorer Bar",widget13082716:"Explorer bar",widget13082713:"Dropdown Bar",widget13082719:"Browser Tab Bar",widget13082677:"Application Bar",widget13082683:"Status Bar Windows",widget13082681:"Status Bar",widget13082678:"Explorer Window",widget130826550:"Toolbox",widget13082723:"Alert Dialog",widget13082726:"Input Form",widget13082727:"Explorer Navigation Button",widget13082728:"Back Button",widget13082729:"Next button",widget1308265401:"Tooltip",widget13082684:"Alert Layout",widget13082686:"Minimize Button",widget13082687:"Increase Window Size",widget13082685:"Close Button",widget13082693:"Close Button",widget13082694:"Maximize",widget13082695:"Minimize Button",widget13082688:"Window Expander",widget13082706:"Files List",widget13082691:"Folder",widget13082692:"Opened Folder",widget13082696:"Counter",widget13082697:"Warning sign",widget13082698:"Warning Sign",widget13082699:"Help",widget13082702:"Label",widget13082703:"Tab Window",widget13082654:"Line Diagonal",widget13082655:"Line Diagonal",widget13082656:"Line Vertical",widget13082657:"Line Horizontal",widget13082658:"Triangle",widget13082659:"Triangle",widget13082660:"Triangle",widget13082661:"Triangle",widget13082662:"Triangle",widget13082663:"Triangle",widget13082664:"Triangle",widget13082665:"Triangle",widget13082666:"Circle",widget13082667:"Semi Circle-Left",widget13082668:"Semi Circle-Right",widget13082669:"Semi Circle-Up",widget13082670:"Semi Circle-Down",widget13082671:"Square",widget13082672:"Rounded Square",widget13082673:"Rounded Rectangle High",widget13082674:"Rounded Rectangle Wide",widget13082675:"Octagon",widget130826740:"Up Arrow",widget130826741:"Down Arrow",widget130826742:"Left Arrow",widget130826743:"Right Arrow",widget1308267520:"Page Left Facing",widget1308267530:"Page Right Facing",widget1308267510:"Star",widget1308267560:"Ribbon Up",widget1308267570:"Ribbon Down",widget130826750:"Flag Left",widget130826754:"Pointer Left Facing",widget130826755:"Pointer Right Facing",widget1308267580:"Home",widget130826759:"Oval",widget130826751:"Flag Right",widget130826756:"Cloud",widget130826757:"Drop",widget130826758:"Drop",widget130826752:"Thumbs Up",widget130826753:"Thumbs Down"},"Galaxy-Gear":{widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget81403822479455858105160:"Orange",widget53421104439690508968127520:"Pattern Red",widget53241104439690508968127:"Pattern Green",widget5341210443969968127520:"Pattern Blue",widget35241030825355840504741385:"Pattern Purple",widget8140382247945585810516198:"Brown",widget8140382247945585810516199:"Dark Grey",widget8140382247945585810516:"Black",widget16877799:"Line Diagonal",widget168777990:"Line Diagonal",widget168777991:"Line Vertical",widget168777992:"Line Horizontal",widget168777993:"Triangle",widget168777994:"Triangle",widget168777995:"Triangle",widget168777996:"Triangle",widget16877799977886:"Triangle",widget1687779997978789:"Triangle",widget1687779998168778:"Triangle",widget1687771168778078987:"Triangle",widget16877721687789890:"Circle",widget16877731687784324343:"Semi Circle Left",widget1687774168778123987423:"Semi Circle Right",widget1687774168778435987245807:"Semi Circle Up",widget16877751687783273123:"Semi Circle Down",widget16877761687787876698:"Square",widget168777816877897969696:"Rounded Square",widget1687779168778536634653:"Rounded Rectangle High",widget16877816877814141:"Rounded Rectangle Wide",widget1687131313131313:"Octagon",widget1687999999999999:"Up Arrow",widget1687888888888888:"Down Arrow",widget16877666666666:"Left Arrow",widget1687779555555555:"Right Arrow",widget53936093529887921256714068398074:"Status bar battery",widget90803400930210964074907361497297:"Action bar generic",widget68631060444085315850470863242339:"Action bar exercise mode",widget94678886647088706947144160875004:"Action bar with message",widget66771512946632168466199921627568:"Contextual bar",widget92688829935426492131775619538548:"Single line list",widget59952139265156245878872761089792:"Single line list pressed",widget85241731617231719425813379426288:"Single line list highlighted",widget36268834363365501372372693738201:"Single line list disabled pressed",widget35880187210168739283952480446386:"Single line list disabled",widget85876114705495842483020993044818:"Single line list radio unchecked",widget75215125391485082803652814463611:"Single line list radio checked",widget91664551245291297944519710152872:"Single line list unchecked",widget10582086429821082285826459729745:"Single line list checked",widget97997925654106724503824052999529:"Double line list",widget23877072023904480862899740399260:"Double line list pressed",widget03885954393321593208299252945706:"Double line list highlighted",widget74550749411147315898590931333926:"Double line list pressed inactive",widget19903426836686952679756719425567:"Double line list inactive",widget74761625914313501996919790724989:"Double line list settings",widget60663086879975776634696126379701:"Triple line list",widget75619307820555309731813483509814:"List line highlighted",widget68397667048155434722866921322653:"Sound control",widget36039177615186166102540277004734:"Notifications control",widget37542553026334762465260930814062:"Wallpapers control",widget18858383615385002339697745306965:"Clock control",widget50996066938382465746568167164751:"Subtitle header",widget21164912884511450273494841019421:"Popout",widget52312780334402179338989522043281:"Header generic",widget13189639673227104840210317588136:"Text layout",widget29585294857532621858746856583586:"Scrollbar",widget36384644771206357935492916509267:"Page indicator",widget71879102812273981816862624113672:"Alarm alert card",widget93037626471629632192572042349047:"Cancel alert",widget21122631352377972559240682132925:"Alarm remove",widget03307075753781245771062848524154:"Weather card",widget07961236612196465598804193142258:"Messaging card",widget23619199192634481201184769256339:"Missed call layout",widget60414574909773719260676602131206:"Contacts card",widget58981213232742945906817097195233:"Downloading card",widget98792902920784889420443968675749:"voice message",widget33787387963492710754246254678728:"Volume controller",widget337873879634927107542462546787:"Settings controller",widget03222661621686331117342926230880:"Speech bubble",widget82708760560830083074835501429606:"Notifications card",widget47883332575021535796474215177507:"Contacts card",widget47272661684790191166462615849967:"Logs card",widget66095498306364818918301405371736:"Apps card",widget28073620175215646138529042588128:"Pedometer card",widget15165954592514608206537987999359:"Gallery card",widget93755512928193339006307807163017:"S voice",widget93755512928193339006307807163:"Voice memo",widget64837255922176316380357822354259:"Settings card",widget32904657761601243701516032575070:"Camera card",widget23669751440290929123962362894449:"Calendar card",widget19640770317347445248806046271023:"Find my device card",widget65225650057439924806412164944270:"Music player card",widget40796202484683725075262522957582:"Dialer card",widget15563101975745180841151719960851:"Locked screen card",widget05251292457768767572417601107829:"Button light",widget99220146400147396302979495254679:"Button light highlighted",widget64032396126650625471699710222225:"Button disabled",widget02168868728761558835026180488335:"Button light 50%",widget01901471752596421369873333490729:"2 line button",widget07619780409074449549467195829859:"Button light pressed",widget79705528879275858290641464804395:"Button inactive pressed",widget75965951406237683047713952599890:"Button dark",widget02930418096213720088328136303175:"Button dark 50%",widget31152426357583269562501079772781:"Button rounded",widget18565012620940483457011627852014:"Checkbox inactive",widget185650126209404834570116278520:"Checkbox active",widget72620034477796861345187837781236:"Checkmark",widget41980113106545405408957948052288:"Radio button off",widget419801131065454054089579480522:"Radio button on",widget01219840689933782005858752319776:"Cancel alarm inactive",widget82219560576951654641595752587740:"Cancel alarm active",widget38351876740536597442476867208338:"Exit alarm button",widget08066175459251029573652524642337:"Horizontal scroller",widget48627032950682883986281435872183:"Progress bar",widget96583181061354290560418573112222:"Spinner",widget99710454877348710597637852343850:"OFF switch",widget09365096805151052551009538789092:"ON switch",widget94929840242291608809804522474708:"Close unselected",widget06635159380522329905431034441655:"Close selected",widget61029640524813647524387618641807:"Menu",widget51491838993869491544767960755085:"Name list header",widget05073818380894117535925790524409:"Time picker",widget76825856771529726999050151327748:"Date picker",widget87633313284764478151448862679348:"Calendar small",widget04747135483556434488230424046724:"Calendar large",widget32039825244986138584345012586595:"Dialer control",widget19115107387358215058582195994868:"Dialer large",widget16557785896954418306586902820802:"Minus sign",widget73913177758793090528694081570015:"Plus sign",widget57715667068334440841884841205191:"Home button",widget97088895870600700399951491705793:"Home button",widget28145747819602129854079892106456:"Home button layout",widget14494065720937820565683326906435:"Google search control",widget07955255214073454743686016395845:"Counter",widget25857893889371724401987657621455:"Question mark",widget30012327669931280006946013734728:"Sort control",widget79150305802678194740654049419402:"Volume button",widget77239251351147125758562521291786:"Settings button",widget50573374869715897603677326991227:"Share control",widget69393683070809279591888505428557:"Sync phone control",widget48291073308624905258041234774159:"Empty trash control",widget62357640608441307018300227575129:"Sync device control",widget54594920891522224020914838814004:"Send message control",widget73197027937911281062672334686933:"Sync phone control",widget23806048429756481317450133891565:"Hang up control",widget20021516826072855789073642524737:"Menu control template",widget27002409863489394615077329982491:"Pedometer control small",widget16273276485356195132998401474730:"Pedometer control medium",widget52053348622737303609276781801953:"Settings control small",widget95602600130163403508980294970132:"Music player control",widget70761975835041895619670135476474:"Music player control medium",widget00778724984814946437188200474903:"Music player large",widget79412527250622819932447690413112:"Media controller medium",widget86856530074690586907043588653170:"Voice control",widget09715003440317763583411308605384:"Voice control talking",widget76724373561812702407531568822085:"Micro text",widget66261258378912311120932060330012:"Small text",widget16490189661957142847133339064868:"Medium text",widget98269243081558085732522491085253:"Large text",widget01452368824837314995326756573546:"Paragraph text",widget30847149518903777275679319168395:"Bluetooth",widget59337315108013489786003480056778:"Battery",widget89825526171499671177465529527249:"Missed call",widget81989640750240300625542646668313:"Hang up",widget83824641804780766358597689731910:"Transfer call",widget22779632878183335722122357972776:"Notification selected",widget32532419640797666503773128018087:"Notification small",widget79258040548830173747886299424223:"Notifications large",widget16011072917795309600243285121502:"Contacts",widget12815936896142228535580413342085:"Contacts medium",widget76837008777584984487666333141226:"Contacts large",widget00801037434374787798558110356513:"Logs small",widget88190459705499373500084850155914:"Logs large",widget89896636116238871132504156111901:"Apps small",widget98205397850207597951339405584698:"Apps large",widget66093508011849490839558595841583:"Pedometer small",widget77160257169574900737801046645645:"Pedometer medium",widget45050815242202460467459408648425:"Pedometer large",widget23256066360166142815302313985605:"Gallery active",widget35366152113738130404737521697775:"Gallery small",widget90523879992744796394054383924479:"Gallery large",widget89007886732030359657641574936017:"Voice small",widget95333748425373179138441283704422:"Voice large",widget92075476103402167926255859494917:"Settings selected",widget38925607413128017693536719183451:"Settings 61 X 61px",widget24775504793130366289997752870380:"Settings 91 X 91px",widget70513149248611719797760448585240:"Settings large 171 X 171px",widget40870878470554436722903358506447:"System settings",widget70181127749647356395309499244287:"Camera small",widget04079858090275148275119853736619:"Camera medium",widget55922873320721559200378272509487:"Camera large",widget10138558087193497024851405993455:"Music small",widget70788289048279393625528737742490:"Music medium",widget05825718168030447497547965265993:"Music large",widget33193166368417225868338711862118:"Increase volume",widget86986755252535528239502904494993:"Microphone",widget85754258304327606419482756938412:"Microphone",widget71607443992587045356080922511240:"Device",widget30392463841373947760044187094021:"Find my device small",widget56463919540469687933441964772758:"Find my device medium",widget16516165217338626013340839892277:"Find my device large",widget41997866986999096658718629271678:"Find galaxy gear device",widget70911572799725731117138628642820:"Voice memo small",widget77502550716572277488968175611684:"Voice memo large",widget88614236739607584379242056483811:"Walk",widget35221183933394757678554192833904:"Walk large",widget56567079444315152571446743205186:"Running small",widget03566479346242836681583213286250:"Running",widget30893379099868800964995004016128:"Walking",widget93011683154992804121656841884578:"Cycling",widget83297829860175613958030112396847:"Hiking",widget73768419648668274965365644759090:"Arrows left",widget43583258396767862213192056436866:"Arrows right",widget10950152734649990740908741515794:"Arrows left",widget25357569200357691857552561642519:"Arrows right",widget83143982542214351142689541340786:"Snapchat 41 X 41px",widget15157788590384062543671175696522:"Snapchat 46 X 46px",widget96219304380313980253369296462719:"Snapchat 91 X 91px",widget95727790359876149869945889853640:"Snapchat large 171 X 171px",widget06541278845394899522354512649700:"Controls small",widget28380741501731386421605976912842:"Sleep",widget72502636674175005013349229647987:"Weather small",widget50532138869827300896148198625562:"Weather medium",widget10441332124028273526513089349167:"Weather large",widget31675603862350132505847914705790:"Share",widget10895939224671764430930241940345:"Bin small",widget12909102371022011449486422445224:"Bin large",widget34269386639346484319609918536269:"Transfer files inactive",widget45362481421790933311362218299290:"Mail small",widget12871387238260230098858179888866:"Mail",widget53576742175386831787212702326697:"Send mail",widget28362737071138260610601853383272:"Google",widget82122255760973097113528297479549:"Alarm clock small",widget01059746096621400105633978391144:"Alarm clock large",widget51199386683863714474567523987252:"Back",widget60806490601631718512432192085826:"Clock inactive",widget94487008476915484825744203365746:"Clock active",widget36781865991428666456879026287472:"Question mark",widget28351990952486874905820442454291:"Controls",widget534211044329405089687520:"Home Screen Card",widget24145213299571625149805105776374:"Apps Card",widget70901642735412183236854974706570:"Notifications Card",widget19882608941711413090179460606476:"Phone Card",widget12304549725680501856451712887038:"Snapchat Card",widget40162162306128246708136749189819:"Activities Card"},"Google-Glass":{widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget13082653503:"White",widget97099835216430594155494096:"Photo-Woman",widget78564250230883318038606907:"Photo-Man",widget71896510344149128941474637:"Photo-Landscape",widget13082653502:"Black",widget13082653531:"Plain List",widget13082653536:"List With Subheadings",widget13082653547:"List With Bullets",widget13082653533:"Table Row Top",widget130826535312:"Plain list row bottom",widget13082653534:"Table Row Main",widget13082653537:"Table Row Status",widget130826535360:"List line subheading top",widget130826535362:"List row subheading bottom",widget13082653542:"Table Row Highlighted",widget13082653543:"Table Row Blue",widget13082653544:"Table Row Red",widget130826535470:"Bulleted list segment top",widget130826535472:"Bulleted list segment bottom",widget13082653545:"Table Row Green",widget13082653546:"Table Row Yellow",widget13082653535:"Table Row Bottom",widget13082653530:"Tint",widget13082653538:"Bullet Blue",widget13082653635:"Secondary menu",widget13082653636:"Title menu",widget13082653539:"Bullet Red",widget13082653540:"Bullet Green",widget13082653541:"Bullet Yellow",widget13082653548:"action button light small",widget130826535491:"hover button dark small",widget130826535501:"action button light large",widget130826535511:"hover button dark large",widget13082653637:"Clock",widget13082653639:"Progress Bar",widget13082653640:"Scrollbar",widget13082653641:"Vertical Scrollbar",widget13082653606:"search",widget13082653609:"star",widget13082653614:"unstar",widget13082653622:"warning",widget13082653621:"warning large",widget13082653643:"Frame Top Left",widget13082653644:"Frame Top Right",widget13082653645:"Frame Bottom Right",widget13082653646:"Frame Bottom Left",widget13082653572:"forward",widget13082653582:"music move to front",widget13082653581:"music move to end",widget13082653586:"music previous",widget13082653583:"music next",widget13082653584:"music pause",widget13082653585:"music play",widget13082653650:"Voice Control Widget",widget13082653624:"Primary Text Large Light",widget13082653626:"Primary Text Small Light",widget13082653628:"Secondary Text Light",widget13082653629:"Large Paragraph Light",widget13082653634:"Block Text",widget13082653549:"add person",widget13082653550:"angle",widget13082653551:"archive",widget13082653552:"arrow left",widget13082653553:"arrow right",widget13082653554:"attachment",widget13082653555:"beamed note",widget13082653556:"bed",widget13082653557:"bike",widget13082653558:"bluetooth",widget13082653559:"bus",widget13082653560:"calendar",widget13082653561:"camera",widget13082653562:"compass",widget13082653563:"computer",widget13082653564:"delete",widget13082653565:"directions",widget13082653566:"document",widget13082653567:"done",widget13082653568:"done",widget13082653569:"drive",widget13082653570:"eighth note",widget13082653571:"email",widget13082653573:"game",widget13082653574:"gear",widget13082653575:"help",widget13082653576:"location",widget13082653577:"message",widget13082653578:"microphone off",widget13082653579:"microphone on",widget13082653580:"mobile phone",widget13082653587:"no",widget13082653588:"note",widget13082653589:"pen",widget13082653590:"people",widget13082653591:"person",widget13082653592:"phone",widget13082653593:"phone hang",widget13082653594:"phone in",widget13082653595:"phone out",widget13082653596:"photo",widget13082653597:"placeholder attachment",widget13082653598:"placeholder photo",widget13082653599:"placeholder video",widget13082653600:"plus",widget13082653601:"question",widget13082653602:"read aloud",widget13082653603:"reply",widget13082653604:"reply all",widget13082653605:"run",widget13082653607:"select link",widget13082653608:"share",widget13082653610:"storefront",widget13082653611:"sync",widget13082653612:"timer",widget13082653613:"transit",widget13082653615:"video",widget13082653616:"video off",widget13082653617:"volume full",widget13082653618:"volume half",widget13082653619:"volume muted",widget13082653620:"walk",widget13082653623:"world",widget13082653510:"Line Horizontal",widget13082653511:"Line Vertical",widget13082653508:"Line Diagonal",widget13082653509:"Line Diagonal",widget13082653512:"Triangle",widget13082653513:"Triangle",widget13082653514:"Triangle",widget13082653515:"Triangle",widget13082653516:"Triangle",widget13082653517:"Triangle",widget13082653518:"Triangle",widget13082653519:"Triangle",widget13082653520:"Circle",widget13082653521:"Semi Circle Left",widget13082653522:"Semi Circle Right",widget13082653523:"Semi Circle Up",widget13082653524:"Semi Circle Down",widget13082653525:"Square",widget13082653526:"Rounded Square",widget13082653527:"Rounded Rectangle High",widget13082653528:"Rounded Rectangle Wide",widget13082653529:"Octagon",widget44272104771624824809376662116113:"Share Card",widget68894937464226855445424893044626:"Delete Card",widget03854423276558589325893940179722:"Read Card",widget23450449076317083402341430108865:"Reading List Card",widget05506083716678307301657821147966:"Directions Card",widget66753039311445378342940682589156:"Unpin Card",widget84028207195708019284795652512516:"Close Card",widget64636356115066168307442495433048:"Facebook Card",widget67510079468395648917025561439116:"Google Plus Card",widget24552924216523896658740358031583:"Archive Card",widget38911575373338124092558181705:"Ok Glass Card",widget03621794135928232117072691311165:"Facebook Card",widget97864898272505975906279776129808:"Share Card",widget12850797396732392632863520174026:"Google Plus Card",widget79548867881683944518705779475295:"Message Card",widget43561462225790107506604438535773:"Bundling Card",widget38911575373759038124092558181705:"Ok Glass Card",widget37922518963290256372607935394712:"News Card",widget38184267414611039256672294424120:"Photo Card",widget03175333386800306932848545357435:"Twitter Card",widget89274595408493585291867627322631:"Save",widget96152810990262207029141292658880:"Pin",widget49457579054589573421014045239013:"Close",widget98964666991282848317762348694224:"Facebook",widget86518637657283192942988365321487:"Google",widget64711195093446481977628604975000:"Twitter",widget07595395791660203079762315569988:"Twitter Small"},iOS7:{widget15180:"Map",widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget13082653454:"White",widget13082649710:"Yellow",widget13082649740:"Green",widget13082653440:"Blue",widget13082649700:"Pink",widget13082653450:"Grey",widget13082653452:"Grass",widget13082653453:"Mountains",widget13082653455:"Dark Blue",widget13082653451:"Space",widget120703:"Status Bar Dark",widget12064:"Battery Light",widget120713:"Status Bar Light",widget12063:"Battery Dark",widget120720:"Status Bar Transparent",widget121670:"Status Bar No Background",widget120733:"Navigation Bar Dark",widget12052:"Back Large",widget120745:"Navigation Bar Light",widget1207430:"Scroll Navigation Bar Dark",widget12049:"Up",widget12050:"Down",widget1207440:"Scroll Navigation Bar Light",widget120771:"Tab Bar",widget1308264945:"List",widget1308264949:"Location",widget1308265003:"Search",widget1308264902:"Download",widget120780:"Toolbar Dark",widget12047:"Information",widget12032:"Action",widget12027:"Profile",widget12033:"Bookmark",widget12034:"Copy",widget12043:"Add",widget120790:"Toolbar Light",widget120811:"Custom Bar",widget120823:"Progress Bar",widget1308264887:"Compose",widget120834:"Search Bar Dark",widget12035:"Search",widget120840:"Search Bar Light",widget121820:"Location Search",widget1308265001:"Route",widget121812:"Map Bar",widget1208530:"Scope Bar",widget120866:"Photo Bar",widget1308265038:"iCloud",widget1308264853:"Albums",widget120876:"List View Blank",widget12087:"List View",widget12055:"Forward Medium",widget1208730:"List Row with Expander",widget12058:"Row Order",widget1208750:"List Row with Checkmark",widget12059:"Checkmark",widget1208780:"List Row with Switches",widget12118:"Switch Control On",widget120880:"List menu divider",widget120882:"List header large",widget120884:"List header Two Row",widget12133:"Text Block Dark",widget1208850:"Text View",widget12131:"Regular Dark",widget13082653457:"Safari Tabs",widget13082653462:"Popout",widget1206501:"Keyboard Alphanumeric",widget1206601:"Keyboard Alphabetic",widget1206701:"Keyboard Characters",widget13082653464:"Keyboard Landscape",widget120897:"Alert",widget1209003:"Sign In Alert",widget1209030:"Sign In Field",widget12039:"Cursor",widget130826534601:"Alert Dialog Rounded",widget12091:"Action Sheet",widget120910:"Action Button",widget120913:"Action Button",widget121840:"Translucent Tint",widget121841:"Dark Tint",widget120937:"Dropdown Picker",widget1209423:"Date Picker",widget1209512:"Scroll View Layout",widget12022:"Scroll Down",widget12107:"Flashlight",widget1308264919:"Flashlight",widget12108:"Timer",widget1308265020:"Timer Selected",widget12109:"Calculator",widget1308264871:"Calculator",widget12110:"Camera",widget1308264875:"Camera",widget12012:"Air play Small",widget12021:"Select Device",widget12019:"Brightness Down",widget12020:"Brightness Up",widget120955:"Play",widget120956:"Fast Forward",widget120957:"Fast Backwards",widget120958:"Player Slider",widget120959:"Progress Bar Dark",widget12017:"Volume Down",widget12018:"Volume Up",widget12111:"Airplane Mode",widget1308264848:"Airplane Selected",widget121121:"Wifi Off",widget12011:"Wireless Selected",widget121131:"Bluetooth Off",widget12010:"Bluetooth",widget12114:"Sleep Mode",widget1308264900:"Do Not Disturb Selected",widget121151:"Rotate Screen Off",widget12013:"Lock Rotation",widget12096:"Keypad",widget12045:"Close Toolbar",widget120960:"Keypad Button",widget1209600:"Keypad Button Pressed",widget12097:"Activity Layout",widget12000:"Air play",widget12004:"Chat",widget12001:"Mail",widget12002:"Twitter",widget12003:"Facebook",widget12143:"Bookmark",widget12006:"Bookmark Selected",widget12144:"Add to Reading List",widget12007:"View",widget12105:"Add to Home Screen",widget12008:"Add Deselected",widget12106:"Copy",widget12009:"Copy Deselected",widget121423:"Scope Layout Large",widget12175000:"Speech Bubble Left",widget12176:"Speech Bubble Right",widget12140:"Horizontal Scrollbar",widget12141:"Vertical Scrollbar",widget12145:"Line Diagonal",widget12146:"Line Diagonal",widget12147:"Line Vertical",widget12148:"Line Horizontal",widget12149:"Triangle",widget12150:"Triangle",widget12151:"Triangle",widget12152:"Triangle",widget12153:"Triangle",widget12154:"Triangle",widget12155:"Triangle",widget12156:"Triangle",widget12157:"Circle",widget12158:"Semi Circle-Left",widget12159:"Semi Circle-Right",widget12160:"Semi Circle-Up",widget12161:"Semi Circle-Down",widget12162:"Square",widget12163:"Rounded Square",widget12164:"Rounded Rectangle High",widget12165:"Rounded Rectangle Wide",widget12166:"Octagon",widget121660:"Up Arrow",widget121661:"Down Arrow",widget121662:"Left Arrow",widget121663:"Right Arrow",widget1209740:"Activity Button",widget120982:"Stepper Control",widget12046:"Add",widget12177:"App Button",widget12178:"Counter",widget12135:"Generic Button",widget1209050:"Text Field Small",widget13082653458:"Search Field",widget13082653459:"Search Field",widget13082653461:"Search Field",widget12036:"Close",widget12117:"Slider Control",widget121171:"Progress Bar",widget121181:"Switch Control Off",widget1308264844:"Add Selected",widget1308264845:"Add",widget12044:"Add to list",widget12042:"Locked",widget1308264896:"Delete Selected",widget1308264897:"Delete",widget12040:"Radio Button",widget1308264991:"Refresh",widget1308265002:"Search Selected_x",widget121797:"Copy",widget121800:"Paste",widget12023:"Sort Alpha",widget1308264954:"Menu Selected",widget1308264955:"Menu",widget12016:"Close Button",widget1308264860:"Close Toolbar",widget1308264861:"Close Toolbar",widget1308264994:"Reply Selected",widget1308264995:"Reply",widget120220:"Scroll Up",widget120221:"Keep position",widget12053:"Back Light",widget12054:"Forward Large",widget12031:"Forward Minor",widget12056:"Forward Small",widget12048:"Next",widget1308264936:"Info Selected",widget1308264937:"Info",widget1308264883:"Checkmark",widget12041:"Checkmark",widget1308264881:"Check",widget1308264882:"Checkmark Selected",widget12037:"Page",widget12136:"Favorite",widget12137:"Indent",widget12138:"Indent",widget12139:"Label",widget12051:"Stop",widget1308265012:"Stop Selected",widget1308265013:"Stop",widget12112:"Wifi On",widget1308265035:"Wireless",widget12113:"Bluetooth On",widget1308264863:"Bluetooth Selected",widget12115:"Rotate Screen On",widget1308264950:"Lock Rotation Selected",widget1308264959:"Siri",widget12123:"Heading 1 Dark",widget12125:"Heading 2 Dark",widget12127:"Heading 3 Dark",widget12061:"Bars Dark",widget12062:"Bars Light",widget1308264847:"Air Play",widget1308264849:"Airplane",widget12028:"Apps",widget1308265032:"Voicemail Selected",widget1308265033:"Voicemail",widget12029:"Voicemail Inactive",widget1308264884:"Clock Selected",widget1308264885:"Clock",widget12026:"Clock Inactive",widget1308265010:"Sound Selected",widget1308265011:"Sound",widget12015:"Apps",widget12024:"Undefined",widget12025:"Favorite",widget1308264842:"Action Selected",widget1308264843:"Action",widget1308264850:"Alarm Selected",widget1308264851:"Alarm",widget1308264852:"Albums Selected",widget1308264854:"Alert Selected",widget1308264855:"Alert",widget1308264856:"Archive Selected",widget1308264857:"Archive",widget1308264859:"Artists",widget1308264864:"Bookmarks Selected",widget1308264865:"Bookmarks",widget1308264866:"Brightness Selected",widget1308264867:"Brightness",widget1308264868:"Brush Selected",widget1308264869:"Brush",widget1308264872:"Calendar Selected",widget1308264873:"Calendar",widget1308264876:"Card Selected",widget1308264877:"Card",widget1308264878:"Change Camera Selected",widget1308264879:"Change Camera",widget1308264888:"Composes Selected",widget1308264889:"Composes",widget1308264890:"Contacts Selected",widget1308264891:"Contacts",widget1308264893:"Control Center",widget1308264895:"Crop",widget1308264898:"Dice Selected",widget1308264899:"Dice",widget1308264901:"Do Not Disturb",widget1308264903:"Downloads Selected",widget1308264904:"Draft Selected",widget1308264905:"Draft",widget1308264906:"Enhance Selected",widget1308264907:"Enhance",widget1308264908:"Face Time Selected",widget1308264909:"Face Time",widget1308264910:"Faces Selected",widget1308264911:"Faces",widget1308264912:"Favorites Selected",widget1308264913:"Favorites",widget1308264915:"Featured",widget1308264916:"Flag Selected",widget1308264917:"Flag",widget1308264920:"Folder Selected",widget1308264921:"Folder",widget1308264922:"Games Selected",widget1308264923:"Games",widget1308264925:"Genius",widget1308264926:"Genre Selected",widget1308264927:"Genre",widget1308264928:"Heart Selected",widget1308264929:"Heart",widget1308264930:"Help Selected",widget1308264931:"Help",widget1308264932:"Inbox Selected",widget1308264933:"Inbox",widget1308264934:"Inboxes Selected",widget1308264935:"Inboxes",widget1308264939:"Invert",widget1308264940:"Junk Selected",widget1308264941:"Junk",widget1308264942:"Keypad Selected",widget1308264943:"Keypad",widget1308264946:"Locate Selected",widget1308264947:"Locate",widget1308264948:"Location Selected",widget1308264960:"More Selected",widget1308264961:"More",widget1308264962:"Movies Selected",widget1308264963:"Movies",widget1308264964:"Music Albums Selected",widget1308264965:"Music Albums",widget1308264967:"Music Note",widget1308264968:"New Playlists Selected",widget1308264969:"New Playlists",widget1308264983:"Playlists",widget1308264972:"Pause Selected",widget1308264973:"Pause",widget1308264975:"Personal Hotspot",widget1308264976:"Phone Selected",widget1308264977:"Phone",widget1308264978:"Photos Selected",widget1308264979:"Photos",widget1308264980:"Play Selected",widget1308264981:"Play",widget1308264985:"Podcast",widget1308264987:"Privacy",widget1308264988:"Purchase Selected",widget1308264989:"Purchase",widget1308264993:"Remove Red Eye",widget1308264997:"Requests",widget1308264998:"Rotate Selected",widget1308264999:"Rotate",widget1308265005:"Sent",widget1308265007:"Settings",widget1308265008:"Shared Selected",widget1308265009:"Shared",widget1308265014:"TVShows Selected",widget1308265015:"TVShows",widget1308265016:"Tabs Selected",widget1308265017:"Tabs",widget1308265018:"Tag Selected",widget1308265019:"Tag",widget1308265021:"Timer",widget1308265022:"Tones Selected",widget1308265023:"Tones",widget1308265024:"Top Charts Selected",widget1308265025:"Top Charts",widget1308265026:"Trash Selected",widget1308265027:"Trash",widget1308265028:"Turns Selected",widget1308265029:"Turns",widget1308265030:"Video clip selected",widget1308265031:"Video clip",widget1308265037:"World",widget1308265039:"iCloud Selected",widget1308265041:"iTunes Radio",widget12005:"Small Twitter",widget1308264956:"Messages Selected",widget1308264957:"Messages",widget1308264952:"Mail Selected",widget1308264953:"Mail",widget12014:"Mail small"},iOS8:{widget00887174755031534539971269:"White",widget74177409771577529742657606:"Rainbow",widget01078890181728727927811060:"Grey",widget02768353490643490357384724:"Mountains",widget16591959993392871581553383:"Dark Blue",widget28396916938997105949967766:"Wave",widget57284648600835782033265982:"Line Diagonal",widget55599947572768545762609680:"Line Diagonal",widget93873873389316902945232552:"Line Vertical",widget89094444478506034056031909:"Line Horizontal",widget27215911341625631326220566:"Triangle",widget69076971344650420447198386:"Triangle",widget18856788801060595473918061:"Triangle",widget94356562029123651798385095:"Triangle",widget99945565550039235771619403:"Triangle",widget43165635814131199073076872:"Triangle",widget06340756827613763092247878:"Triangle",widget57606072315860380104011468:"Triangle",widget44433772937633717842444820:"Circle",widget63115767444713657522966783:"Semi Circle Left",widget66270867701701122074207870:"Semi Circle Right",widget72176364187128807174758180:"Semi Circle Up",widget93161692925950712728649856:"Semi Circle Down",widget60067408597436388403939113:"Square",widget03017551010585671755266061:"Rounded Square",widget73383067495846339112841559:"Rounded Rectangle High",widget99526726523815944432651574:"Rounded Rectangle Wide",widget70288313621828427514830950:"Octagon",widget702883136218284275148309500:"Up Arrow",widget702883136218284275148309501:"Down Arrow",widget702883136218284275148309502:"Left Arrow",widget702883136218284275148309503:"Right Arrow",widget07334488921301965729004561:"Status Bar Dark",widget33351848916919929227740351:"Status Bar Light",widget03851460397543949028287709:"Status Bar Transparent",widget34509207155364228969407089:"Status Bar No Background",widget53046710531926977237606868:"Navigation Bar Dark",widget49577004330005657202740726:"Navigation Bar Light",widget43251797298123034106868368:"Scroll Navigation Bar Dark",widget11889058679671933331613706:"Scroll Navigation Bar Light",widget31760751674565976040135736:"Tab Bar",widget11926052851492814414014407:"Toolbar Dark",widget78001736661129098025650330:"Toolbar Light",widget86842288748387638261770441:"Custom Bar",widget82819242404073916104357623011320:"Camera Bar Active",widget22523449554399502932515715916249:"Camera Bar Inactive",widget72755441637123168378180127627795:"Option Bar",widget10691886898776926025283925:"Search Bar Dark",widget04510179511546243968882019974132:"Search Bar Light",widget85982837567943465319403481849397:"Search Bar",widget13201389331579068746285725:"Map Bar",widget94489473704778960262906894:"Scope Bar",widget58524824419992808991974142:"Photo Bar",widget0092625128189931397733276560:"Health Bar",widget89933849463459490171802056281729:"Health App Bar",widget50501480713907974978099931:"Home Screen",widget13371480713907974978099931:"Home Screen",widget64206868852874749847813337:"List View Blank",widget91030735423120271437354923:"List View",widget7846458623027810618555071787:"List Row Centered",widget26362075505281222758507016663:"Health App List",widget81027103275307922387806628386987:"List Tab",widget9103073542312027143735492330:"List Row with Expander",widget9103073542312027143735492350:"List Row with Checkmark",widget9103073542312027143735492380:"List Row with Switches",widget09306880420863168545551106303097:"List Row Large",widget60832481785142972638779582:"List menu divider",widget06675953171091221110923544:"List header large",widget22137291018872741535648849:"List header Two Row",widget82884743720788207714009631626737:"List line",widget13271471048746676783549493216070:"List line",widget35931385541425584300691449361816:"Two line list transparent",widget82404109497450603858306483:"Text View",widget43942123401677409966469501:"Predictive Text",widget20720751205976897726645364:"Popout",widget85274310339419067426941260:"Keyboard Alphanumeric",widget85274310339067426941260:"Keyboard Alphanumeric Dark",widget10862962900862754067966924:"Keyboard Alphabetic",widget8580906310339067426941260:"Keyboard Alphabetic Dark",widget48102213424273022399809715:"Keyboard Characters",widget01999940629509832632645250:"Keyboard Landscape",widget40061240749764513640921193:"Alert",widget99837364686191570270470922:"Sign In Alert",widget88709718611604194535551628:"Translucent Tint",widget45145710224399936047998302:"Dark Tint",widget61043367828755109276960208:"Dropdown Picker",widget47236126429202151896389813:"Date Picker",widget62695408384851862678283687:"Media Player Layout Portrait",widget80810621699168501398068711:"Keypad Portrait",widget38577893970653480880378749370523:"Dialer Card",widget41066688361752237948877837:"Scope Layout Large",widget80597277715443157768706536356865:"Calories",widget00926251281899313977088533276560:"Heart rate",widget20401837883334352543222619057959:"Sleep",widget84062305098603189754894768:"Health App Layout Portrait",widget00232229474478830784660985528428:"Health App",widget00232229474471130784660985528428:"Health App 2",widget84069355505098603189754894768:"Map Layout Portrait",widget84069355000505098603189754894768:"Map Layout",widget28219484292230421537806753257994:"Settings Layout Portrait",widget61865652943589556496455432755527:"Media Messages Layout Portrait",widget06056991410149183778867775551868:"Messages Card",widget30611197187291216213551491865878:"SMS Message",widget18522280724236244505394629072835:"Messages Card",widget69529784789748627505587397958009:"Calendar Layout",widget47975845041581888595349200480479:"App Screen Layout",widget27161962453158524623339202:"Activity Layout",widget2712453158524623339202:"Activity Layout",widget06666499126159055042702850903627:"Speech recording",widget22909352218000567265554175:"Speech Bubble Left",widget62852346913473493233476111:"Speech Bubble Right",widget38894179378789681818359438:"Action Button",widget74198702819376751199331818:"Action Button",widget808106216991685013980687110:"Keypad Button",widget8081062169916850139806871100:"Keypad Button Pressed",widget5036475890531006121693674574358:"Stepper Control",widget50364758905310061216930297:"Stepper Control",widget05990422180926472567464654:"Generic Button",widget80946696637697437079719112739943:"Translucent Button",widget54434385669821063931173468280969:"Share Button",widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget67318639089138909908738788:"Back Large",widget38627960409250121354597220:"Up",widget54233666537369382644551036:"Down",widget76344768263179011217489994:"Information",widget43507621249448195203833274:"Add",widget23291851942535381881274892:"Search",widget89936325563584985271510758:"Forward Medium",widget39368188626677716171628917:"Row Order",widget36927862718883034501867237:"Checkmark",widget71384807328469085234374782:"Switch Control On",widget53913532003397216405016497:"Sign In Field",widget13104928688054360575854231:"Cursor",widget12260112413288479965019861:"Scroll Down",widget38998603372190208196568636:"Flashlight",widget13267763598639080102030446:"Timer",widget85186841711872120494593748:"Calculator",widget63978042819570976438341007:"Camera",widget59602208477385813458335990:"Play",widget71026886083725417396106964:"Fast Forward",widget33910777865004298133165059:"Fast Backwards",widget06702351773989836885765073:"Player Slider",widget96548154886093767099677703:"Progress Bar Dark",widget93027533517084475750730748:"Airplane Mode",widget25679043216892264361530922:"Wifi Off",widget27970462369497860231784386:"Bluetooth Off",widget26807062486874183395589655:"Sleep Mode",widget55313750080756997671630964:"Rotate Screen Off",widget57907380680394243293015432:"Close Toolbar",widget33152214752860920879812039:"Add Deselected",widget87734334931453017853877498:"Add",widget59233019134761129532758107:"Counter",widget68939660564735077852511625:"Text Field Small",widget87767675006530104279385136:"Search Field",widget48642399215330179261878181:"Search Field",widget83354969513923199800318983:"Search Field",widget09367740223258463002766195:"Close",widget52713535278123546948696647:"Slider Control",widget527135352781235469486966471:"Progress Bar",widget713848073284690852343747821:"Switch Control Off",widget68120699442692171124809810:"Add to list",widget18013061725957105393206053:"Locked",widget00839617447185883211923123:"Radio Button",widget56919382694094199083373357:"Refresh",widget89949504820298514841585430:"Copy",widget33223536066534009990599206:"Paste",widget1102424623859889091992839750:"Sort Alpha",widget71251759024325061490035218:"Menu Selected",widget69728203274659973926091503:"Menu",widget36244271043101960470558990:"Close Toolbar",widget80650362711568002001274428:"Close Toolbar",widget122601124132884799650198610:"Scroll Up",widget122601124132884799650198611:"Keep position",widget63829738697779489002871623:"Back Light",widget54351612045624958797128066:"Forward Large",widget03574664317120304772044093:"Forward Minor",widget43433004018266028192060981:"Forward Small",widget50778203001937010502984132:"Next",widget78020317409299218918070527:"Page",widget40892522612916860082263092:"Favorite",widget48320644475183794698832557:"Indent",widget71444817009359841373731645:"Indent",widget37410735211585220609498616:"Label",widget73333796749568686960998177:"Stop",widget48188556035818380644766733:"Wifi On",widget45181544891281186344516473:"Bluetooth On",widget69660003880423849946899115:"Rotate Screen On",widget81575150852825676332110378258877:"Close",widget34037142530065868906774848611741:"Controller bottom",widget98569939283788214743150672852392:"Controller right",widget18349758845320349061904323477026:"Up",widget21259936419420693937508289689995:"Avatar",widget08539224623970376065251817:"Text Block Dark",widget14366877647284844908016614:"Regular Dark",widget38053659186017771663935804:"Heading 1 Dark",widget25170812610022007087051614:"Heading 2 Dark",widget01615169974189299914183756:"Heading 3 Dark",widget34857827277951544446448569467207:"Speech bubble left",widget41080325648485362481525708267826:"Speech bubble",widget72722168178374409804859853:"Battery Light",widget79875937799585672196487835:"Battery Dark",widget13295360640603942507240065:"Location",widget13295360640603907240065:"Location",widget68872871938373377550542508:"Action",widget86843898814359649876142588:"Profile",widget27711324545114955886707099:"Bookmark",widget57389715215230765285686233:"Copy",widget56077483856743981832755880:"Route",widget14624240738898124310547144:"Flashlight",widget72562224848347947076052296624826:"Add active",widget32666509912747524055326743155268:"Alarm active",widget01432955781949826532513711055736:"Stopper active",widget13607142560569660179555680242881:"Keypad active",widget56736903051936731877599893372575:"Archive active",widget14629967053615245454269634109343:"Bin active",widget58429778304899304236882573173437:"Bookmark active",widget50243837054788138233016314124930:"Calculator active",widget11462286945451570930453333894996:"Camera active",widget57576984409183807040271677696497:"Checkmark active",widget10405761933287402242051213757245:"Clock active",widget12623286321885230112335076895495:"Settings active",widget76602239341097293167397117056844:"Compass active",widget18088593239444972878579539219430:"Copy active",widget98518420014414955204779277452745:"Delete active",widget90553068728045984591857923623027:"Download active",widget10948828207747641001687482435924:"Eye active",widget08314375418661945613972578324732:"Favorites activate",widget65997562506151265728404093209804:"Flag active",widget62689654721202656626500950194123:"Folder active",widget23729806535579250060031130284937:"Albums active",widget77250807296521019870941013026703:"ICloud active",widget42310421750878724822226031852490:"Inbox active",widget00028075662395142199844748033727:"Information active",widget80563272428368869409157594585903:"List active",widget13292030541537274954053554395511:"Location active",widget30197503551517181402745874387345:"Mail active",widget36659717163565682152042909992476:"Microphone active",widget82795959812317323166112592859065:"Compose active",widget74040181667809658741278670312410:"Page active",widget89289847922067140968892738292437:"Picture active",widget41317133097004840680946782298565:"Pointer active",widget04581491921474909766151291231604:"Profile active",widget53892120615379620537092022837799:"Question active",widget42211028690935006472368508421126:"Recycle active",widget68913419951393693928581598611153:"Reply active",widget93323940297342724398391863120264:"Search active",widget18082567109929936609875084067921:"Timer active",widget64699363836532308497956268752786:"World active",widget14385933938868503605483169349761:"Add",widget04726383620367313629690932361102:"Alarm",widget42393029334668854590206821143459:"Stopper",widget77877535074243944332682419442993:"Keypad",widget93735311598101470403016549888677:"Archive",widget95942255817437949914251287308003:"Bin",widget57563805293313718695006801709247:"Bookmark",widget01261194320700857156728925670334:"Calculator",widget48900321474486591941909690098773:"Camera",widget70016130436989869761351648119877:"Camera",widget86018259763514802688569156658935:"Checkmark",widget73379121984861575146142721279775:"Clock",widget60739597437580818985547040345166:"Settings",widget13087173105883640838746543367083:"Compass",widget35292930595585121895781306027159:"Copy",widget59324349046805236016828515067921:"Download",widget44936459426112991355698245824481:"Eye",widget93490704665739413223330534305272:"Favorite",widget77175476557401852177004755612679:"Flag",widget59273722357319691919514703398010:"Folder",widget44439462305869076113977589703354:"Albums",widget17145041058883880341657503089520:"iCloud",widget73989315342873848357959715918455:"Inbox",widget53075141755891065305845099110804:"Information",widget85126277195898832260245968805527:"List",widget44942307089047894393250131472456:"Locate",widget75282609074878345855500111267889:"Location pin",widget07835061420821976025920745349550:"Mail",widget64384221166617074404550859564975:"Microphone",widget46038689925178240686917797242360:"Compose",widget73198774364722877445835702556761:"Page",widget00415272960491540053083353200593:"Pictures",widget75866676595721674381705000252893:"Profile",widget99880260997962795839432070953221:"Question mark",widget38247577371774175982149651625941:"Recycle bin",widget75472797250148934543175964124832:"Remove",widget08163185395932522786311201271838:"Reply",widget49987899216008092101513229900620:"Search",widget38374659034609130866010793971462:"Timer",widget47646355031677623705142284251704:"World",widget73004012659263821429925975110724:"Photo-Woman 1",widget79360364191869614384599719799416:"Photo-Woman 2",widget60550382301276566060836976778494:"Photo-Man 1",widget21877695299355343289748513039161:"Photo-Man 2",widget55544951903382633951007914670104:"Add call",widget14045472422006852273982689950937:"Close button highlighted",widget87916313076826109432281078186580:"Close small white",widget89038275963949889417939010819187:"Contacts",widget21954645600254840452764721878352:"Copy",widget40426623995047392418978476214807:"Expand",widget54501821311130730805176166401889:"Face time",widget86515170240925144554941671227646:"Fluid ui",widget58110475872828371058791481641395:"Google drive",widget78835190366643710434028960847583:"Hang up",widget19998258239540270330903675748829:"Keyboard",widget75028900522121148520174209260151:"Media speech",widget73517753142116571916915676557331:"Microphone",widget31308591490176997601464488853181:"Microphone selected",widget08605590470394532124109125907847:"Mute",widget47859541589306611795656818295368:"Pinterest",widget32137806244794380554082731320255:"Play",widget79109651992578728687434509956562:"Print",widget67138069058945272382351468934167:"Profile",widget73139198366207555958413586599962:"Screen",widget39363816952006854644485779850487:"Search",widget44686400193131504028561468940260:"Speaker",widget91827384447099642756183324:"Timer Selected",widget49409283631375402493983181:"Calculator",widget95180741475078844766025902:"Camera",widget74197100361530346301106195:"Air play Small",widget95382761441400909775933425:"Select Device",widget50381524770074138116397709:"Brightness Down",widget35960025224123790379955784:"Brightness Up",widget08116081182595696363643572:"Volume Down",widget91301481324900351689024633:"Volume Up",widget68511020588972719136358394:"Airplane Selected",widget94506832302423497243657238:"Wireless Selected",widget55357059913817733082767723:"Bluetooth",widget65930074162093619658502578:"Do Not Disturb Selected",widget87574830534728905254207406:"Lock Rotation",widget88820787280168651420897519:"Air play",widget06255435595429915026058557:"Chat",widget06255435595429026058557:"Chat Small",widget45726327134255471473844249:"Mail",widget01140691525303181956712466:"Twitter",widget02441304224467973905212050:"Facebook",widget90256041301703099168257513:"Wireless",widget35180553036149102026329783:"Bluetooth Selected",widget13897809683623579992687697:"Lock Rotation Selected",widget25830860215869214669631496:"Bars Dark",widget90540643117761968458657769:"Bars Light",widget71126314439848132086361381:"Air Play",widget30041770190890434491366391:"Airplane",widget73334162505991110644175766:"Sound Selected",widget26106199646575659755549369:"Sound",widget35601485729179828055107852:"Apps",widget74317630252640151886849061:"Undefined",widget67244650221918990574243006:"Favorite",widget02991480210793239273198846:"Small Twitter",widget96672765897140854482244354:"Mail small",widget26078114378714651150628097827516:"Dashboard",widget11001261908591765360947896044603:"Dashboard active",widget49104688046325371554560063435084:"Health data",widget58050534841216984538292440132556:"Health data active",widget54916335537796798335528106934023:"Medical ID",widget15871150633525454003059542718651:"Medical id active",widget97648341824167639547932377537718:"Sources",widget94520287096510202996900253191808:"Sources active",widget33341666368798055578957559221510:"Activity",widget67241709057903512991233370874652:"Blood pressure",widget20830800154036413137365758191481:"Blood sugar",widget85636672481020326144724594259565:"Bloodwork",widget37997698356504809237194415325324:"Heart rate",widget14125808357846206939081958832052:"Hydration",widget12330222782655004024123636781299:"Nutrition",widget18232847903392816616800912022797:"Oxygen",widget11180367674649666689209899169496:"Respiratory rate",widget91954829390416487092318791507610:"Sleep",widget72939259771696373592927974833072:"Weight",widget20969067385167826822656340403522:"Health Bar",widget42697975250821444603362898775535:"Emergency card",widget42540978452248962862594574575074:"Diagnostics",widget698789876621869489370444311633:"Measurements ",widget69878341406621869489370444311633:"Fitness",widget25270408378654255353034792923756:"Lab results",widget04171078405157318363691451430899:"All health",widget71422681707349910237645381209518:"Me",widget81430462373282866370880105783934:"Medication",widget03016333684959696548955696725900:"Nutrition",widget42431799902706512165125350297660:"Sleep",widget53631753305761401059963837271041:"Vitals"},"iOS8-tablet":{widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget00887174755031534539971269:"White",widget01078890181728727927811060:"Grey",widget28396133738913375949967766:"Cliffs",widget16591959993392871581553383:"Dark Blue",widget28396916938913375949967766:"Wave",widget57284648600835782033265982:"Line Diagonal",widget55599947572768545762609680:"Line Diagonal",widget93873873389316902945232552:"Line Vertical",widget89094444478506034056031909:"Line Horizontal",widget27215911341625631326220566:"Triangle",widget69076971344650420447198386:"Triangle",widget18856788801060595473918061:"Triangle",widget94356562029123651798385095:"Triangle",widget99945565550039235771619403:"Triangle",widget43165635814131199073076872:"Triangle",widget06340756827613763092247878:"Triangle",widget57606072315860380104011468:"Triangle",widget44433772937633717842444820:"Circle",widget63115767444713657522966783:"Semi Circle Left",widget66270867701701122074207870:"Semi Circle Right",widget72176364187128807174758180:"Semi Circle Up",widget93161692925950712728649856:"Semi Circle Down",widget60067408597436388403939113:"Square",widget03017551010585671755266061:"Rounded Square",widget73383067495846339112841559:"Rounded Rectangle High",widget99526726523815944432651574:"Rounded Rectangle Wide",widget70288313621828427514830950:"Octagon",widget702883136218284275148309500:"Up Arrow",widget702883136218284275148309501:"Down Arrow",widget702883136218284275148309502:"Left Arrow",widget702883136218284275148309503:"Right Arrow",widget07334488921301965729004561:"Status Bar Dark",widget33351848916919929227740351:"Status Bar Light",widget03851460397543949028287709:"Status Bar Transparent",widget34509207155364228969407089:"Status Bar No Background",widget53046710531926977237606868:"Navigation Bar Dark",widget49577004330005657202740726:"Navigation Bar Light",widget43251797298123034106868368:"Scroll Navigation Bar Dark",widget31760751674565976040135736:"Tab Bar",widget51245391654553387825352082:"Safari Bar",widget13377689891811595829347929:"Map Bar",widget93988340984630040709686288:"Map Search Bar Top",widget49652074130375130469878593:"Map Directions Bar",widget11926052851492814414014407:"Toolbar Dark",widget78001736661129098025650330:"Toolbar Light",widget86842288748387638261770441:"Custom Bar",widget10691886898776926025283925:"Search Bar Dark",widget85982837567943465319403481849397:"Search Bar",widget58524824419992808991974142:"Photo Bar",widget72755441637123168378180127627795:"Option Bar",widget82819242404073916104357623011320:"Message Bar Active",widget22523449554399502932515715916249:"Message Bar Inactive",widget70402863098688062581152849:"Title Bar",widget13372863098688062581152849:"Title Bar Advanced",widget62362401245105154978215886:"Split Menu Bar",widget91097689891811595829347929:"Bottom Tab Bar",widget40498054940564430688305030610496:"Media Player Bar",widget73113415155036894573668058199206:"Siri Tab",widget5639435860295753856120800056:"Calendar Bar",widget814532659138563956670400900:"Map",widget49162871037597887580386945480702:"Home Screen",widget64206868852874749847813337:"List View Blank",widget32372792070819454538727349:"List View",widget7846458623027810618555071787:"List Row Centered",widget9103073542312027143735492330:"List Row with Expander",widget9103073542312027143735492350:"List Row with Checkmark",widget9103073542312027143735492380:"List Row with Switches",widget09306880420863168545551106303097:"List Row Large",widget60832481785142972638779582:"List menu divider",widget06675953171091221110923544:"List header large",widget22137291018872741535648849:"List header Two Row",widget82884743720788207714009631626737:"List line",widget81027103275307922387806628386987:"List Tab",widget13271471048746676783549493216070:"List line",widget35931385541425584300691449361816:"Two line list transparent",widget82404109497450603858306483:"Text View",widget43942123401677409966469501:"Predictive Text",widget13379940629133732632645250:"Keyboard Portrait Dark",widget13379940629509832632645250:"Keyboard Portrait Light",widget85213370339419013376941260:"Keyboard Alphanumeric Dark Landscape",widget85274310339419013376941260:"Keyboard Alphanumeric Light Landscape",widget40061240749764513640921193:"Alert",widget99837364686191570270470922:"Sign In Alert",widget88709718611604194535551628:"Translucent Tint",widget45145710224399936047998302:"Dark Tint",widget61043367828755109276960208:"Dropdown Picker",widget47236126429202151896389813:"Date Picker",widget00233114773751641907524781613906:"Air Drop Layout",widget38577893970653480880378749370523:"Dialer Card",widget0762173263230098291418847:"Calendar Layout",widget00962796312160420448323368299188:"Calendar Settings",widget41066688361752237948877837:"Scope Layout Large",widget36053750855210884981394456:"Scope Layout Calendar",widget22909352218000567265554175:"Speech Bubble Left",widget62852346913473493233476111:"Speech Bubble Right",widget34857827277951544446448569467207:"Speech Bubble Left",widget41080325648485362481525708267826:"Speech Bubble Right",widget75028900522121148520174209260151:"Media Speech",widget05918102376785611589277356:"Map Layout",widget28219484292230421537806753257994:"Settings Layout Portrait",widget30611197187291216213551491865878:"SMS Message",widget4797544581888595349200480479:"App Screen Layout",widget4797513371888595349200480479:"Split Screen Layout",widget18522280724236244505394629072835:"Messages Card",widget85616128707205460574641667862252:"Alarm Card",widget37770199985785364808060537289487:"Popover Vertical",widget95665499674737975451476657484780:"Popover Vertical",widget92872437180353572166588729121160:"Popover Vertical",widget44822932351645452669973927349471:"Popover Horizontal",widget55862993097279963749295993203502:"Settings Layout",widget98571069098947993857088038816780:"AirDrop Layout",widget47937321510956435208409863826705:"Video Player Layout",widget00782783667199530820697954572946:"Text Messages Card",widget38894179378789681818359438:"Action Button",widget74198702819376751199331818:"Action Button",widget01216264174200415995116608:"Calendar Button",widget24048789185714518059366229:"Calendar Stepper Control",widget5036475890531006121693674574358:"Stepper Control",widget50364758905310061216930297:"Stepper Control",widget05990422180926472567464654:"Generic Button",widget80946696637697437079719112739943:"Translucent Button",widget67318639089138909908738788:"Back Large",widget38627960409250121354597220:"Up",widget54233666537369382644551036:"Down",widget76344768263179011217489994:"Information",widget43507621249448195203833274:"Add",widget23291851942535381881274892:"Search",widget89936325563584985271510758:"Forward Medium",widget39368188626677716171628917:"Row Order",widget36927862718883034501867237:"Checkmark",widget71384807328469085234374782:"Switch Control On",widget53913532003397216405016497:"Sign In Field",widget13104928688054360575854231:"Cursor",widget12260112413288479965019861:"Scroll Down",widget38998603372190208196568636:"Flashlight",widget13267763598639080102030446:"Timer",widget85186841711872120494593748:"Calculator",widget63978042819570976438341007:"Camera",widget59602208477385813458335990:"Play",widget71026886083725417396106964:"Fast Forward",widget33910777865004298133165059:"Fast Backwards",widget06702351773989836885765073:"Player Slider",widget96548154886093767099677703:"Progress Bar Dark",widget93027533517084475750730748:"Airplane Mode",widget25679043216892264361530922:"Wifi Off",widget27970462369497860231784386:"Bluetooth Off",widget26807062486874183395589655:"Sleep Mode",widget55313750080756997671630964:"Rotate Screen Off",widget57907380680394243293015432:"Close Toolbar",widget33152214752860920879812039:"Add Deselected",widget87734334931453017853877498:"Add",widget59233019134761129532758107:"Counter",widget68939660564735077852511625:"Text Field Small",widget87767675006530104279385136:"Search Field",widget48642399215330179261878181:"Search Field",widget83354969513923199800318983:"Search Field",widget09367740223258463002766195:"Close",widget52713535278123546948696647:"Slider Control",widget527135352781235469486966471:"Progress Bar",widget713848073284690852343747821:"Switch Control Off",widget68120699442692171124809810:"Add to list",widget18013061725957105393206053:"Locked",widget00839617447185883211923123:"Radio Button",widget56919382694094199083373357:"Refresh",widget89949504820298514841585430:"Copy",widget33223536066534009990599206:"Paste",widget1102424623859889091992839750:"Sort Alpha",widget71251759024325061490035218:"Menu Selected",widget69728203274659973926091503:"Menu",widget36244271043101960470558990:"Close Toolbar",widget80650362711568002001274428:"Close Toolbar",widget122601124132884799650198610:"Scroll Up",widget122601124132884799650198611:"Keep position",widget63829738697779489002871623:"Back Light",widget54351612045624958797128066:"Forward Large",widget03574664317120304772044093:"Forward Minor",widget43433004018266028192060981:"Forward Small",widget50778203001937010502984132:"Next",widget78020317409299218918070527:"Page",widget40892522612916860082263092:"Favorite",widget48320644475183794698832557:"Indent",widget71444817009359841373731645:"Indent",widget37410735211585220609498616:"Label",widget73333796749568686960998177:"Stop",widget48188556035818380644766733:"Wifi On",widget45181544891281186344516473:"Bluetooth On",widget69660003880423849946899115:"Rotate Screen On",widget81575150852825676332110378258877:"Close",widget34037142530065868906774848611741:"Controller bottom",widget98569939283788214743150672852392:"Controller right",widget18349758845320349061904323477026:"Up",widget21259936419420693937508289689995:"Avatar",widget14045472422006852273982689950937:"Close button highlighted",widget87916313076826109432281078186580:"Close small white",widget08539224623970376065251817:"Text Block Dark",widget14366877647284844908016614:"Regular Dark",widget38053659186017771663935804:"Heading 1 Dark",widget25170812610022007087051614:"Heading 2 Dark",widget01615169974189299914183756:"Heading 3 Dark",widget72722168178374409804859853:"Battery Light",widget79875937799585672196487835:"Battery Dark",widget13295360640603942507240065:"Location",widget13295360640603907240065:"Location",widget68872871938373377550542508:"Action",widget86843898814359649876142588:"Profile",widget27711324545114955886707099:"Bookmark",widget57389715215230765285686233:"Copy",widget56077483856743981832755880:"Route",widget14624240738898124310547144:"Flashlight",widget72562224848347947076052296624826:"Add active",widget32666509912747524055326743155268:"Alarm active",widget01432955781949826532513711055736:"Stopper active",widget13607142560569660179555680242881:"Keypad active",widget56736903051936731877599893372575:"Archive active",widget14629967053615245454269634109343:"Bin active",widget58429778304899304236882573173437:"Bookmark active",widget50243837054788138233016314124930:"Calculator active",widget11462286945451570930453333894996:"Camera active",widget57576984409183807040271677696497:"Checkmark active",widget10405761933287402242051213757245:"Clock active",widget12623286321885230112335076895495:"Settings active",widget76602239341097293167397117056844:"Compass active",widget18088593239444972878579539219430:"Copy active",widget98518420014414955204779277452745:"Delete active",widget90553068728045984591857923623027:"Download active",widget10948828207747641001687482435924:"Eye active",widget08314375418661945613972578324732:"Favorites activate",widget65997562506151265728404093209804:"Flag active",widget62689654721202656626500950194123:"Folder active",widget23729806535579250060031130284937:"Albums active",widget77250807296521019870941013026703:"ICloud active",widget42310421750878724822226031852490:"Inbox active",widget00028075662395142199844748033727:"Information active",widget80563272428368869409157594585903:"List active",widget13292030541537274954053554395511:"Location active",widget30197503551517181402745874387345:"Mail active",widget36659717163565682152042909992476:"Microphone active",widget82795959812317323166112592859065:"Compose active",widget74040181667809658741278670312410:"Page active",widget89289847922067140968892738292437:"Picture active",widget41317133097004840680946782298565:"Pointer active",widget04581491921474909766151291231604:"Profile active",widget53892120615379620537092022837799:"Question active",widget42211028690935006472368508421126:"Recycle active",widget68913419951393693928581598611153:"Reply active",widget93323940297342724398391863120264:"Search active",widget18082567109929936609875084067921:"Timer active",widget64699363836532308497956268752786:"World active",widget14385933938868503605483169349761:"Add",widget04726383620367313629690932361102:"Alarm",widget42393029334668854590206821143459:"Stopper",widget77877535074243944332682419442993:"Keypad",widget93735311598101470403016549888677:"Archive",widget95942255817437949914251287308003:"Bin",widget57563805293313718695006801709247:"Bookmark",widget01261194320700857156728925670334:"Calculator",widget48900321474486591941909690098773:"Camera",widget70016130436989869761351648119877:"Camera",widget86018259763514802688569156658935:"Checkmark",widget73379121984861575146142721279775:"Clock",widget60739597437580818985547040345166:"Settings",widget13087173105883640838746543367083:"Compass",widget35292930595585121895781306027159:"Copy",widget59324349046805236016828515067921:"Download",widget44936459426112991355698245824481:"Eye",widget93490704665739413223330534305272:"Favorite",widget77175476557401852177004755612679:"Flag",widget59273722357319691919514703398010:"Folder",widget44439462305869076113977589703354:"Albums",widget17145041058883880341657503089520:"iCloud",widget73989315342873848357959715918455:"Inbox",widget53075141755891065305845099110804:"Information",widget85126277195898832260245968805527:"List",widget44942307089047894393250131472456:"Locate",widget75282609074878345855500111267889:"Location pin",widget07835061420821976025920745349550:"Mail",widget64384221166617074404550859564975:"Microphone",widget46038689925178240686917797242360:"Compose",widget73198774364722877445835702556761:"Page",widget00415272960491540053083353200593:"Pictures",widget75866676595721674381705000252893:"Profile",widget99880260997962795839432070953221:"Question mark",widget38247577371774175982149651625941:"Recycle bin",widget75472797250148934543175964124832:"Remove",widget08163185395932522786311201271838:"Reply",widget49987899216008092101513229900620:"Search",widget38374659034609130866010793971462:"Timer",widget47646355031677623705142284251704:"World",widget73004012659263821429925975110724:"Photo-Woman 1",widget79360364191869614384599719799416:"Photo-Woman 2",widget60550382301276566060836976778494:"Photo-Man 1",widget21877695299355343289748513039161:"Photo-Man 2",widget55544951903382633951007914670104:"Add call",widget89038275963949889417939010819187:"Contacts",widget21954645600254840452764721878352:"Copy",widget40426623995047392418978476214807:"Expand",widget54501821311130730805176166401889:"Face time",widget86515170240925144554941671227646:"Fluid ui",widget58110475872828371058791481641395:"Google Drive",widget78835190366643710434028960847583:"Hang up",widget19998258239540270330903675748829:"Keyboard",widget73517753142116571916915676557331:"Microphone",widget31308591490176997601464488853181:"Microphone selected",widget08605590470394532124109125907847:"Mute",widget47859541589306611795656818295368:"Pinterest",widget32137806244794380554082731320255:"Play",widget79109651992578728687434509956562:"Print",widget67138069058945272382351468934167:"Profile",widget73139198366207555958413586599962:"Screen",widget39363816952006854644485779850487:"Search",widget44686400193131504028561468940260:"Speaker",widget91827384447099642756183324:"Timer Selected",widget49409283631375402493983181:"Calculator",widget95180741475078844766025902:"Camera",widget74197100361530346301106195:"Air play Small",widget95382761441400909775933425:"Select Device",widget50381524770074138116397709:"Brightness Down",widget35960025224123790379955784:"Brightness Up",widget08116081182595696363643572:"Volume Down",widget91301481324900351689024633:"Volume Up",widget68511020588972719136358394:"Airplane Selected",widget94506832302423497243657238:"Wireless Selected",widget55357059913817733082767723:"Bluetooth",widget65930074162093619658502578:"Do Not Disturb Selected",widget87574830534728905254207406:"Lock Rotation",widget88820787280168651420897519:"Air play",widget06255435595429915026058557:"Chat",widget06255435595429026058557:"Chat Small",widget45726327134255471473844249:"Mail",widget01140691525303181956712466:"Twitter",widget02441304224467973905212050:"Facebook",widget90256041301703099168257513:"Wireless",widget35180553036149102026329783:"Bluetooth Selected",widget13897809683623579992687697:"Lock Rotation Selected",widget25830860215869214669631496:"Bars Dark",widget90540643117761968458657769:"Bars Light",widget71126314439848132086361381:"Air Play",widget30041770190890434491366391:"Airplane",widget73334162505991110644175766:"Sound Selected",widget26106199646575659755549369:"Sound",widget35601485729179828055107852:"Apps",widget74317630252640151886849061:"Undefined",widget67244650221918990574243006:"Favorite",widget02991480210793239273198846:"Small Twitter",widget96672765897140854482244354:"Mail small",widget26078114378714651150628097827516:"Dashboard",widget11001261908591765360947896044603:"Dashboard active",widget49104688046325371554560063435084:"Health data",widget58050534841216984538292440132556:"Health data active",widget54916335537796798335528106934023:"Medical ID",widget15871150633525454003059542718651:"Medical id active",widget97648341824167639547932377537718:"Sources",widget94520287096510202996900253191808:"Sources active",widget33341666368798055578957559221510:"Activity",widget67241709057903512991233370874652:"Blood pressure",widget20830800154036413137365758191481:"Blood sugar",widget85636672481020326144724594259565:"Bloodwork",widget37997698356504809237194415325324:"Heart rate",widget14125808357846206939081958832052:"Hydration",widget12330222782655004024123636781299:"Nutrition",widget18232847903392816616800912022797:"Oxygen",widget11180367674649666689209899169496:"Respiratory rate",widget91954829390416487092318791507610:"Sleep",widget72939259771696373592927974833072:"Weight",widget20969067385167826822656340403522:"Health bar",widget42697975250821444603362898775535:"Emergency card",widget42540978452248962862594574575074:"Diagnostics",widget698789876621869489370444311633:"Measurements",widget69878341406621869489370444311633:"Fitness",widget25270408378654255353034792923756:"Lab results",widget04171078405157318363691451430899:"All health",widget71422681707349910237645381209518:"Me",widget81430462373282866370880105783934:"Medication",widget03016333684959696548955696725900:"Nutrition",widget42431799902706512165125350297660:"Sleep",widget53631753305761401059963837271041:"Vitals",widget74197133761530346301106195:"Air play Small Dark",widget90931614859726365050948574514808:"Island",widget30689475604686433231949052922394:"Backup",widget46769365581823452187571307710372:"Calendar",widget11728021719082119820573913696185:"Cloud",widget81213388487412395488378317052211:"Contacts",widget11014997252536960729522238367188:"Facetime",widget85281261644106268375009376318495:"Find_my_ipad",widget41146982660623151152785519591879:"Info",widget85167239622983794117878179412266:"Key",widget40569096943586192498590535806388:"Map",widget41674901922198916137409113842787:"Message",widget16776644203018719800044894348112:"Notes",widget39161735538925012982304736689398:"Photos",widget27422193924711924101121907522184:"Reminder",widget58729667248427511999291545296608:"Safari",widget82786903063986755539080488090415:"Siri",widget11131894675208979718189955011944:"Transport"},iPad:{widget130:"Disclosure",widget136:"Checkmark Blue",widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget2:"Solid",widget1112:"Diagonal Gradient",widget14:"Radial Gradient",widget546:"Linear Gradient",widget1:"Solid",widget131313133048:"Network Strength Blue",widget3050:"Wi-fi",widget3055:"Using Batt",widget7300:"Status Black",widget3056:"Network Strength Blue",widget3057:"Wi-fi",widget3061:"Charge Batt",widget7310:"Status Transparent",widget3060:"Full Batt",widget999950:"Navigation Bar",widget999951:"Back",widget88879:"Split View Portrait",widget845:"Refresh",widget888190:"Split View Landscape",widget6040:"Navigation Bar Blue",widget735:"Back",widget606:"Navigation Bar Black",widget763:"Back",widget6050:"Navigation Bar Grey",widget7490:"Navigation Bar Transparent",widget607:"Tab Bar",widget806:"Featured",widget792:"Featured",widget798:"Bookmarks",widget794:"Search",widget808:"More",widget20170:"Toolbar",widget6051:"Safari Browser Bar",widget874:"Inactive",widget873:"Inactive",widget852:"Page",widget849:"Bookmarks",widget836:"Add",widget2035:"Search",widget2025:"Small",widget2023:"Small",widget890:"Close",widget33605:"Search Bar Grey",widget616:"Search Bar",widget875:"Cursor",widget750:"Search Field",widget766:"Send",widget837:"Compose",widget841:"Refresh",widget854:"Back",widget855:"Next",widget844:"Location",widget851:"Action",widget856:"Back",widget857:"Next",widget840:"Trash",widget746:"Category Header",widget9864:"Line Diagonal",widget9865:"Line Diagonal",widget11009:"Line Vertical",widget11001:"Line Horizontal",widget9866:"Triangle",widget9867:"Triangle",widget9868:"Triangle",widget9869:"Triangle",widget9870:"Triangle",widget9871:"Triangle",widget9872:"Triangle",widget9873:"Triangle",widget9874:"Circle",widget987510:"Semi Circle-Left",widget987610:"Semi Circle-Right",widget987710:"Semi Circle-Up",widget987810:"Semi Circle-Down",widget9879:"Square",widget9880:"Rounded Square",widget9881:"Rounded Rectangle High",widget9882:"Rounded Rectangle Wide",widget98830:"Octagon",widget988300:"Up Arrow",widget992301:"Down Arrow",widget992302:"Left Arrow",widget988303:"Right Arrow",widget4001:"Table Group",widget14001:"Table Group",widget10006:"Table View",widget392901:"Table View",widget733:"Table View Plastic",widget71933:"Table View Alternating",widget926111:"Selected Row Table",widget1342343236:"Checkmark White",widget10010:"Text Area",widget927:"Rounded Rectangle Button x2",widget928:"Rounded Rectangle Button x3",widget70112015:"Keyboard Landscape",widget70112016:"Keyboard Portrait",widget724:"Alert Message Dialog",widget722:"Decline",widget723:"Confirm",widget915:"Alert Message Dialog Tint",widget3115:"Message Dialog",widget756:"Large Yellow",widget726:"Large Grey",widget727:"Large Black",widget308:"Date Picker",widget916:"Time Picker",widget3110:"Timer Picker",widget3130:"Dropdown Popover",widget238088:"Action Popover",widget725:"Large Red",widget7771:"Item Properties Popover",widget302:"Page Indicator",widget3112:"Item Properties Popover",widget3119:"Text Size Popover",widget3126:"Item List Popover",widget2024:"Small",widget999924:"Done Button",widget312219:"Multisegment Popover",widget789:"Row Order",widget906:"Map Pin",widget913:"Blip",widget742:"Speech Bubble Left",widget1006:"Speech Bubble Right",widget7422:"Siri Speech Bubble Left",widget7423:"Siri Speech Bubble Right",widget2022:"Ad",widget659411:"Image",widget152124178:"Scrollbar",widget757:"Large Green",widget999942:"Red Button Medium",widget999943:"Green Button Medium",widget999944:"Blue Button Medium",widget999953:"Button Grey Medium",widget999933:"Small Button Disabled",widget999954:"Small Button Disabled",widget762:"Back",widget999931:"Back Button Extended",widget999952:"Back Button Extended",widget99950:"Segmented Control Grey Small",widget999934:"Segmented Control Black",widget8889:"Segmented Control Double",widget99937:"Segmented Control Grey",widget1001110:"Segmented Control",widget100112:"Segmented Control",widget999912:"Add button",widget919:"Back/Next Button",widget9994:"Stepper Grey",widget999935:"Stepper Black",widget9999233:"Up Button",widget9999232:"Down Button",widget999923:"Left Button",widget9999231:"Right Button",widget719:"Icon Button",widget720:"Icon Button",widget721:"Icon Button",widget1592:"Page Curl",widget1593:"Page Curl",widget1594:"Page Curl",widget740:"Text Field",widget741:"Text Field",widget999911:"Search Field",widget751:"Search Field",widget2019:"Password Entry Field",widget310105:"Slider",widget31220105:"Range Slider",widget893:"Progress Bar",widget309:"Switch ON (iOS4)",widget786:"Switch OFF (iOS4)",widget310109:"Switch ON (iOS5)",widget310107:"Switch Active (iOS5)",widget310108:"Switch OFF (iOS5)",widget895:"Dropdown Inactive",widget896:"Dropdown Active",widget903:"Email",widget137:"Bookmarks",widget127:"Row Insert",widget892:"Contact Add",widget133:"Detail Disclosure",widget135:"Locked",widget891:"Unlocked",widget889:"Select",widget885:"Deselect",widget743:"Radio",widget887:"Radio On",widget744:"Checkbox",widget888:"Checkbox",widget755:"Copy",widget753:"Copy",widget897:"Location Detail Disclosure Button",widget788:"Sort Alpha",widget904:"Text Copy",widget907:"Text Copy 2",widget128:"Attach",widget129:"Reply",widget1301293847:"Disclosure",widget131:"Info",widget2036:"Page Indicator",widget738:"Thread Count",widget739:"Thread Count",widget747:"Mark Read",widget748:"Mark Read",widget132:"Working",widget736:"Badge",widget737:"Badge",widget8861:"Siri icon large",widget30511111:"Lock",widget305212323132:"Bluetooth",widget3053:"Full Batt",widget3054:"Charge Batt",widget3058:"Lock ",widget3059:"Bluetooth",widget3062:"Using Batt",widget10050:"Microphone",widget10051:"Services",widget10052:"Tablet",widget10053:"Location",widget10054:"Favourites",widget10055:"Compass",widget10056:"Call",widget10057:"Music",widget10058:"Games",widget10059:"Contacts",widget10060:"Phone",widget10061:"Achievements",widget10062:"Record",widget10063:"Chat",widget10064:"Loop",widget10065:"Credit Card",widget10066:"Monitor",widget10067:"Camera",widget10068:"Images",widget10069:"Presentation",widget838:"Camera",widget839:"Camera",widget842:"Info",widget843:"Reply",widget846:"Route",widget847:"Search",widget848:"Bookmarks",widget850:"Organize",widget853:"Page",widget858:"Previous",widget859:"Forward",widget860:"Details",widget861:"Content",widget862:"Up",widget863:"Down",widget864:"Up",widget865:"Down",widget866:"Rewind",widget867:"Play",widget868:"Pause",widget869:"Stop",widget870:"FastForward",widget871:"Inactive",widget872:"Inactive",widget876:"Silent",widget877:"Alarm",widget878:"Audio Off",widget879:"Audio On",widget880:"Audio On",widget881:"Audio Off",widget884:"Profile",widget791:"Featured",widget793:"Search",widget795:"Downloads",widget796:"Downloads",widget797:"Bookmarks",widget799:"Contacts",widget800:"Contacts",widget801:"Favourite",widget802:"Favourite",widget803:"Recent",widget804:"Recent",widget805:"Featured",widget807:"More",widget809:"History",widget810:"History",widget813:"Settings Launcher",widget818:"Youtube Launcher",widget819:"Safari Launcher",widget820:"Phone Launcher",widget822:"Notes Launcher",widget823:"Camera Launcher",widget825:"Email Launcher",widget826:"iPod Launcher",widget827:"Maps Launcher",widget829:"Games Launcher",widget830:"Facebook Launcher",widget831:"Contacts Launcher",widget832:"AppStore Launcher",widget814:"Blank App Launcher",widget835:"Calculator Launcher",widget886:"Installing App",widget411:"H1",widget414:"H2",widget1622:"H3",widget415:"Regular",widget703:"Text Block",widget761:"Subtitle",widget1625:"Link"},iPhone:{widget130:"Disclosure",widget136:"Checkmark Blue",widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget2:"Solid",widget6:"Pinstripe",widget1112:"Diagonal Gradient",widget546:"Linear Gradient",widget14:"Radial Gradient",widget1:"Solid",widget7290:"Status Grey",widget131313133048:"Network Strength Blue",widget3050:"Wi-fi",widget3055:"Using Batt",widget7300:"Status Black",widget3056:"Network Strength Blue",widget3057:"Wi-fi",widget3061:"Charge Batt",widget7310:"Status Transparent",widget3060:"Full Batt",widget845:"Refresh",widget6040:"Navigation Bar Blue",widget735:"Back",widget606:"Navigation Bar Black",widget763:"Back",widget6050:"Navigation Bar Grey",widget7490:"Navigation Bar Transparent",widget607:"Tab Bar",widget806:"Featured",widget792:"Featured",widget798:"Bookmarks",widget794:"Search",widget808:"More",widget20170:"Toolbar",widget874:"Inactive",widget873:"Inactive",widget852:"Page",widget849:"Bookmarks",widget836:"Add",widget2035:"Search",widget6434534534505:"Keyboard Bar",widget2025:"Small",widget2023:"Small",widget336040:"Search Bar Blue",widget890:"Close",widget33605:"Search Bar Grey",widget616:"Search Bar",widget875:"Cursor",widget201010120:"Map Search Bar",widget2018:"Message",widget750:"Search Field",widget766:"Send",widget6150:"Progress Bar Sending",widget837:"Compose",widget841:"Refresh",widget61333:"Safari Top Bar",widget7520:"URL Display",widget20200:"Google Bar",widget614:"Safari Bar",widget854:"Back",widget855:"Next",widget910:"Map Actions Toolbar",widget844:"Location",widget911:"Scope Bar",widget917:"Photo Toolbar",widget851:"Action",widget856:"Back",widget857:"Next",widget840:"Trash",widget746:"Category Header",widget9864:"Line Diagonal",widget9865:"Line Diagonal",widget11009:"Line Vertical",widget11001:"Line Horizontal",widget9866:"Triangle",widget9867:"Triangle",widget9868:"Triangle",widget9869:"Triangle",widget9870:"Triangle",widget9871:"Triangle",widget9872:"Triangle",widget9873:"Triangle",widget9874:"Circle",widget987510:"Semi Circle-Left",widget987610:"Semi Circle-Right",widget987710:"Semi Circle-Up",widget987810:"Semi Circle-Down",widget9879:"Square",widget9880:"Rounded Square",widget9881:"Rounded Rectangle High",widget9882:"Rounded Rectangle Wide",widget98830:"Octagon",widget988300:"Up Arrow",widget992301:"Down Arrow",widget992302:"Left Arrow",widget988303:"Right Arrow",widget4001:"Table Group",widget14001:"Table Group",widget10006:"Table View",widget392901:"Table View",widget733:"Table View Plastic",widget71933:"Table View Alternating",widget926111:"Selected Row Table",widget1342343236:"Checkmark White",widget10010:"Text Area",widget927:"Rounded Rectangle Button x2",widget928:"Rounded Rectangle Button x3",widget811:"Keyboard Numeric Portrait",widget715:"Keyboard Alphabetical Portrait",widget70015:"Keyboard Landscape",widget724:"Alert Message Dialog",widget722:"Decline",widget723:"Confirm",widget915:"Alert Message Dialog Tint",widget530:"Action Sheet",widget756:"Large Yellow",widget726:"Large Grey",widget727:"Large Black",widget322110:"Dropdown Picker",widget308:"Date Picker",widget916:"Time Picker",widget3110:"Timer Picker",widget725:"Large Red",widget302:"Page Indicator",widget2024:"Small",widget908:"Keypad",widget3071:"Player Actions",widget9251:"Player Top",widget812:"Calendar",widget93051:"Notification Center",widget789:"Row Order",widget769:"Map",widget906:"Map Pin",widget913:"Blip",widget742:"Speech Bubble Left",widget1006:"Speech Bubble Right",widget7422:"Siri Speech Bubble Left",widget7423:"Siri Speech Bubble Right",widget2022:"Ad",widget659411:"Image",widget152124178:"Scrollbar",widget216:"Medium",widget217:"Medium",widget219:"Medium",widget222:"Medium",widget223:"Medium",widget225:"Medium",widget757:"Large Green",widget921:"key",widget762:"Back",widget764:"Forward",widget765:"Forward",widget2011:"Forward",widget716:"HTML Button",widget1001110:"Segmented Control",widget100112:"Segmented Control",widget719:"Icon Button",widget720:"Icon Button",widget721:"Icon Button",widget1592:"Page Curl",widget1593:"Page Curl",widget1594:"Page Curl",widget740:"Text Field",widget741:"Text Field",widget999911:"Search Field",widget751:"Search Field",widget2019:"Password Entry Field",widget310105:"Slider",widget31220105:"Range Slider",widget893:"Progress Bar",widget309:"Switch ON (iOS4)",widget786:"Switch OFF (iOS4)",widget310109:"Switch ON (iOS5)",widget310107:"Switch Active (iOS5)",widget310108:"Switch OFF (iOS5)",widget895:"Dropdown Inactive",widget896:"Dropdown Active",widget903:"Email",widget137:"Bookmarks",widget127:"Row Insert",widget892:"Contact Add",widget133:"Detail Disclosure",widget135:"Locked",widget891:"Unlocked",widget889:"Select",widget885:"Deselect",widget743:"Radio",widget887:"Radio On",widget744:"Checkbox",widget888:"Checkbox",widget755:"Copy",widget753:"Copy",widget897:"Location Detail Disclosure Button",widget788:"Sort Alpha",widget904:"Text Copy",widget907:"Text Copy 2",widget128:"Attach",widget129:"Reply",widget1301293847:"Disclosure",widget131:"Info",widget2036:"Page Indicator",widget738:"Thread Count",widget739:"Thread Count",widget747:"Mark Read",widget748:"Mark Read",widget132:"Working",widget736:"Badge",widget737:"Badge",widget8862:"Siri icon small",widget30511111:"Lock",widget305212323132:"Bluetooth",widget3053:"Full Batt",widget3054:"Charge Batt",widget3058:"Lock ",widget3059:"Bluetooth",widget3062:"Using Batt",widget10050:"Microphone",widget10051:"Services",widget10052:"Tablet",widget10053:"Location",widget10054:"Favourites",widget10055:"Compass",widget10056:"Call",widget10057:"Music",widget10058:"Games",widget10059:"Contacts",widget10060:"Phone",widget10061:"Achievements",widget10062:"Record",widget10063:"Chat",widget10064:"Loop",widget10065:"Credit Card",widget10066:"Monitor",widget10067:"Camera",widget10068:"Images",widget10069:"Presentation",widget838:"Camera",widget839:"Camera",widget842:"Info",widget843:"Reply",widget846:"Route",widget847:"Search",widget848:"Bookmarks",widget850:"Organize",widget853:"Page",widget858:"Previous",widget859:"Forward",widget860:"Details",widget861:"Content",widget862:"Up",widget863:"Down",widget864:"Up",widget865:"Down",widget866:"Rewind",widget867:"Play",widget868:"Pause",widget869:"Stop",widget870:"FastForward",widget871:"Inactive",widget872:"Inactive",widget876:"Silent",widget877:"Alarm",widget878:"Audio Off",widget879:"Audio On",widget880:"Audio On",widget881:"Audio Off",widget884:"Profile",widget791:"Featured",widget793:"Search",widget795:"Downloads",widget796:"Downloads",widget797:"Bookmarks",widget799:"Contacts",widget800:"Contacts",widget801:"Favourite",widget802:"Favourite",widget803:"Recent",widget804:"Recent",widget805:"Featured",widget807:"More",widget809:"History",widget810:"History",widget813:"Settings Launcher",widget818:"Youtube Launcher",widget819:"Safari Launcher",widget820:"Phone Launcher",widget822:"Notes Launcher",widget823:"Camera Launcher",widget825:"Email Launcher",widget826:"iPod Launcher",widget827:"Maps Launcher",widget829:"Games Launcher",widget830:"Facebook Launcher",widget831:"Contacts Launcher",widget832:"AppStore Launcher",widget814:"Blank App Launcher",widget835:"Calculator Launcher",widget886:"Installing App",widget411:"H1",widget414:"H2",widget1622:"H3",widget415:"Regular",widget703:"Text Block",widget761:"Subtitle",widget1625:"Link"},Pebble:{widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget1689999991:"Line Diagonal",widget1689999992:"Line Diagonal",widget1689999993:"Line Vertical",widget1689999994:"Line Horizontal",widget1689999995:"Triangle",widget1689999996:"Triangle",widget1689999997:"Triangle",widget1689999998:"Triangle",widget16899999990:"Triangle",widget16899999991:"Triangle",widget16899999992:"Triangle",widget16899999993:"Triangle",widget16899999994:"Circle",widget16899999995:"Semi Circle Left",widget16899999996:"Semi Circle Right",widget16899999997:"Semi Circle Up",widget16899999998:"Semi Circle Down",widget16899999999:"Square",widget168999999990:"Rounded Square",widget168999999993:"Octagon",widget168999999994:"Up Arrow",widget168999999995:"Down Arrow",widget168999999996:"Left Arrow",widget168999999997:"Right Arrow",widget20310606060606:"White",widget20310404040404:"Black",widget75600859963835909383696152055770:"Status bar with title",widget81403822479455858105160716026103:"Status bar with date",widget29114449115366260024996437512943:"Status bar with battery",widget62626042105398018465563044040106:"Media Player Bar",widget97588104488124092311357870739480:"Sidebar",widget92260098989898:"Single Line List",widget50552696058449325247624619344279:"List row large",widget80585147009288009450561298657158:"List row medium",widget86750149187106535883349597699953:"Single line list row",widget09579459912804555742183167246534:"Single line list selected",widget40203929885250564362170152026633:"Double line list",widget90386151337226192192762127200866:"Double line list selected",widget99502787392470044197499919481561:"List line",widget67635595680614215616902724545980:"List line selected",widget43628913967217939566618013511388:"Alert",widget04141966057661734961509275693574:"Toast",widget30813558646531495719336455149045:"Tile",widget49563240057425920465067329251302:"Tile selected",widget42357869198170134632213849044101:"Twitter widget",widget23801160897222722551016104987120:"Volume widget",widget45897266847383767559559081002625:"Calendar widget",widget79266849046671190600440996587092:"Calendar layout",widget37312223552052198139172948515842:"Date display",widget94615233764074826343832207119469:"Start Screen Title Card Portrait",widget55828557874952591141642744260009:"Intro screen",widget35739942852834190271931776215486:"Status screen",widget29392712136834625151338436733597:"Diary layout portrait",widget82428862039296225904706291298426:"Music player portrait",widget20221831977479839165536996987600:"Counter dark",widget91824008224902132344331224585106:"Counter",widget52826608508213275226450806720956:"Split counter layout",widget91712310884011894877939816495719:"Speedometer large",widget30565284579494431596638904132342:"Speedometer",widget18459621884013052276508835829901:"Large display layout",widget16652817064943438515914422836490:"Start Screen Title",widget63695377072524210800943242229783:"Button small",widget12316703772727229780748026368810:"Button Pressed",widget1231670377272722978074802:"Button round dark",widget1231670377272722978:"Button round light",widget30203361442279973759065274405742:"Progress indicator",widget150912011942549:"Forward control tiny dark",widget150912011942550:"Forward control tiny light",widget89147583446706126352464876814998:"Calendar dark",widget80220979260271859540820815824241:"Calendar light",widget08650890604119029363281079807922:"Set calendar dark",widget87987852720701324323556706497353:"Set calendar light",widget15091201194253:"Calendar control small dark",widget150912011942530:"Calendar control small light",widget28119006177588905301950368996925:"Chat dark",widget22985521109862801960429487015992:"Chat light",widget82531589524959157149851472203369:"Check dark",widget93410949662966932195610758110622:"Check light",widget46844105650410341306710807277711:"Checkmark dark",widget27180807539110286836022094619026:"Checkmark light",widget88708448483966320667444778394660:"Close dark",widget58719017889514730486686882567482:"Close light",widget64402372456581256376320850503002:"Cut dark",widget48321785302255420496080475680923:"Cut light",widget41651271154987487897010375481177:"Lock dark",widget49269800493042400012192085533429:"Lock light",widget48908274115307309371332635452360:"Unlock dark",widget77076710528460330836125123572311:"Unlock light",widget08049518394516813916473896301675:"Unlocked dark small",widget69319991661929851009165696086012:"Locked dark",widget86430830436213155467564511566600:"Locked light",widget90048361903021110129423102449225:"Microphone dark",widget83354236006333958449402585531366:"Microphone light",widget14275324010630819793532317823115:"Mute microphone dark",widget20598502189780717791511110170477:"Mute microphone light",widget18852650537384099904552794851118:"Power dark",widget36037053153393814882114390394205:"Power light",widget48086962980831459537637162102995:"Zoom dark",widget49028128440555161198206627529051:"Zoom light",widget38175966316671792975265391995979:"Zoom out dark",widget38257385439603030447505488511604:"Zoom out light",widget43832080272232207601458581059886:"Toolbox small dark",widget71599771053458959812900647482817:"Toolbox small light",widget13070789434005386956157216887798:"Minus sign ",widget46058991369573951921161846849301:"Plus sign ",widget15352836622724660747813607841510:"Small text dark",widget34111840880346960966806267311521:"Medium text dark",widget99792781169597068820906665640295:"Large text dark",widget01317620906086822059025615241634:"Paragraph text dark",widget22725218415388524713416831378306:"Heading text medium dark",widget31873832954386353550687202404301:"Heading text large dark",widget98362419417965099867105376159263:"Charged dark",widget12791397205878552286204663024290:"Charged light",widget150912011942545:"Battery control tiny dark",widget150912011942546:"Battery control tiny light",widget98858233719829524578028794201601:"Battery empty small dark",widget61094861020069712124793128417086:"Battery empty small light",widget67471800143731488087749216857449:"Battery full small dark",widget85282684869467562537658551865284:"Battery full small light",widget57212013804655663383411431942076:"Battery small dark",widget56150654759686246360185339617959:"Battery small light",widget69722818412426882164440650252312:"Increase volume dark",widget81325717699823175623243362994845:"Increase volume light",widget14782476406716767361663261758614:"Add volume dark",widget47604918299980591380468101008947:"Add volume light",widget42777649541543101288326329255922:"Reduce volume dark",widget23192637298989045645260989627121:"Reduce volume light",widget43782166021324990167379138705602:"Decrease volume dark",widget99374602682729832341839841217741:"Decrease volume light",widget26390806874482042224678028134707:"Volume max dark",widget74528708506623657639047743039758:"Volume max light",widget150912011942533:"Volume control small dark",widget150912011942534:"Volume control small light",widget36541424585924130170351954584855:"Volume mute dark",widget26613168101332656536928487352025:"Volume mute light",widget67776072290051332790689159778988:"Volume up dark",widget51652659572771256409231295950955:"Volume up light",widget150912011942547:"Volume control tiny dark",widget150912011942548:"Volume control tiny light",widget09393010586055810395682311899374:"Alarm dark",widget54252536839507951861317285031648:"Alarm light",widget72172315502122580846062103599235:"Back navigate dark",widget51065963391648789313032177372890:"Back navigate light",widget99774854556546366964230274326950:"Bell dark",widget997748545565463669642302743269500:"Bell light",widget378379749867781159292405684349220:"Bell dark small",widget13669043623656587464846089248903:"Bell light small",widget98847953892013033571003159235113:"Bin dark",widget90998868617110274108068413895727:"Bin light",widget64667468268199022438655078477142:"Box dark",widget19468847242955278598664289056490:"Box light",widget59190499868186688741037938835662:"Bus dark",widget89238508761335351078520114184173:"Bus light",widget42334512873771353439861335865637:"Camera dark",widget70875548218434098512022195954484:"Camera light",widget81619528935574785291310956662843:"Car dark",widget61427481020640922119757430460588:"Car light",widget150912011942540:"Chat control small dark",widget1509120119425400:"Chat control small light",widget16180401679585633620622082009816:"Clock dark",widget43050977778559213741686861727182:"Clock light",widget01958507893740369415333668499974:"Cloudy dark",widget12937546823270274304023429062106:"Cloudy light",widget35707011485183339389557957668412:"Compass dark",widget16762761877740258375773943883861:"Compass light",widget49955449150268943169419406619035:"Connect dark",widget04957583365394160594250831934519:"Connect light",widget71286296866075262482723731641158:"Cycling dark",widget67504653386085171544324239068273:"Cycling light",widget32811989525116291248862259380885:"Dots dark portrait",widget89093501372817964763934063494672:"Dots light portrait",widget01995282702594776374519653882986:"Down dark",widget24112307199571216175877736782112:"Down light",widget73575387518876479448435598445889:"Email dark",widget45400372679881926216765892283768:"Email light",widget150912011942539:"Mail control small dark",widget1509120119425390:"Mail control small light",widget48811997050781026841278599374463:"Email small dark",widget95514915353377526649897324678428:"Email small light",widget65300502891898122932528737447069:"Facebook dark",widget95880471619064354513232398354037:"Facebook light",widget21468622612734882320519987316728:"Fast forward dark",widget86666585808252329099279057222106:"Fast forward light",widget78531016895385588033875039910926:"Film dark",widget02105976894837397387415076638904:"Film light",widget70895860900126845524857353757667:"Forward navigate dark",widget23198012845164932681257254072305:"Forward navigate light",widget38443832422169844301036759747603:"Hang up dark",widget89770368985675847301135861654024:"Hang up light",widget10224223415508968251481849550186:"Phone down dark",widget53788810368130248979781909178592:"Phone down light",widget25626717624753839133004686839717:"Phone up dark",widget53119225045552675791114138810565:"Phone up light",widget19522795403853919868084265286455:"No call small dark",widget39298013787183296727727741599268:"No call small light",widget23826597523622936346299167772002:"Phone small dark",widget20178516297982024818799547147548:"Phone small light",widget150912011942541:"Phone control small dark",widget150912011942542:"Phone control small light",widget50551703768164448643557630915255:"Favorites dark",widget70195425480985679032172561288139:"Favorites light",widget68708861154806435106509418209854:"Hiking dark",widget24112819021260417842118664364300:"Hiking light",widget68299369132755600074134510613641:"Huge clock dark portrait",widget76024594814460828763172403594837:"Huge clock light portrait",widget58612346666602214908813173586930:"Information dark",widget586123466666022149088131735869300:"Information light",widget88778955574960431267659887234591:"Information dark small",widget68513135733192536675525374662124:"Information light small",widget75113148474170119001239808658034:"Large clock dark",widget89610399337040419316006730382192:"Large clock light",widget00515714059205892271309387557056:"Moon dark",widget40499876323109138187289220492385:"Moon light",widget150912011942535:"Sleep control small dark",widget150912011942536:"Sleep control small light",widget80641543133786569496771281314833:"Music dark",widget30083321330978863322604525410232:"Music light",widget21572014367385305417418884400007:"On dark",widget96554913004859243015201774495774:"On light",widget42525523557248481665041187127383:"Pause dark",widget65406467683000675283234437667438:"Pause light",widget49761829392318058909630146946808:"Plane dark",widget29875009149810248970223599207271:"Plane light",widget97688469408280931012851282984367:"Planet dark",widget51669424781955241122629507161902:"Planet light",widget46903706956107726176742628706010:"Profile dark",widget29223213243717340675510980617970:"Profile light",widget28076925950221600602861362824183:"Questionmark dark",widget02212871753502972497587508052260:"Questionmark light",widget71519515330721122843818559189130:"Recycle dark",widget13645370100113625516614233874577:"Recycle light",widget17080931659329716192257778947929:"Rss dark",widget93690943288268132137388814782272:"Rss light",widget45878783325768960541881521434327:"Refresh dark",widget76544439323203232138793813657239:"Refresh light",widget01974835936983279930665550610439:"Ribbon dark",widget40631728810288499387982828000989:"Ribbon light",widget05386670193850457110723980985758:"Rollerskating dark",widget14185640270080933361450533932632:"Rollerskating light",widget81084861046070718128863301834880:"Running dark",widget80426284382251110437958667908928:"Running light",widget75932240606722855201234499630703:"Save dark",widget38187380485656221413564520766828:"Save light",widget38645728342781907577802537581728:"Set tiles dark",widget28297226351548640554260053742503:"Set tiles light",widget63802545610961970280351629710086:"Settings dark",widget26704655712457474323559414957141:"Settings light",widget73500117645468983849372357143693:"Settings opened dark",widget32580741356423878156259330476077:"Settings opened light",widget47545074430392031498282653215721:"Share dark",widget39871427539280126768541734273962:"Share light",widget36178151117102156425073442770769:"Skating dark",widget92847036827565433185812355096056:"Skating light",widget59520322902019509152737616082398:"Skiing dark",widget46016694921904342941433065920136:"Skiing light",widget91394571172024109440904308873749:"Snowboard dark",widget84085969289835818648966773527702:"Snowboard light",widget02379344003254344962226099097036:"Snowy dark",widget82782200085743068323567737586698:"Snowy light",widget51077143482481155671360004457576:"Spinner dark",widget80299933056904394523237175480091:"Spinner light",widget01579128063228290303347794763543:"Sun cloud dark",widget92679828345281010032994517090841:"Sun cloud light",widget26731929144153603525673054077019:"Sunshine dark",widget02146130235664136250512496681350:"Sunshine light",widget09007532958604674659962513071138:"Swimming dark",widget78028739810610437173213339663453:"Swimming light",widget58517666757039581710193720255857:"Teams dark",widget83196272434876601420401870250435:"Teams light",widget16387768533634199970081761354444:"Thunder dark",widget32523294368834769754309890954114:"Thunder light",widget53898958011015211132195977692324:"Tools dark",widget59586295779993937387814433452462:"Tools light",widget43073504968619702280648112725276:"Train dark",widget87875146136195585784367884549765:"Train light",widget38591747708301371469742582291061:"Twitter dark",widget06224839041104850199080179057616:"Twitter light",widget150912011942531:"Twitter control small dark",widget150912011942532:"Twitter control small light",widget85498913125956389500572096045709:"Vibrate dark",widget64412256827804816649693348438874:"Vibrate light",widget04711036429793582186475421590656:"Walking dark",widget57971839441100975967000890906676:"Walking light",widget77927759656857853247003435830766:"Wind dark",widget62721036923893427986188264642091:"Wind light",widget36003592410935751926592530845605:"Wind forward dark",widget52295974818833438645531941366111:"Wind forward light",widget42852985732054103928627361202147:"World dark",widget10183416733282365145174410889288:"World light",widget150912011942537:"Brightness control small dark",widget150912011942538:"Brightness control small light",widget19260003640132271471748101866815:"Bluetooth small dark",widget97620036525064840440193766455875:"Bluetooth small light",widget74565625084477257052155876151142:"Fast forward small dark",widget67048848194098982393562710513232:"Fast forward small light",widget70454174264291790858267189761708:"Forward small dark",widget53012300874727262507982265018089:"Forward small light",widget08557976887465421154366523958891:"Favorites dark small",widget085579768874654211543665239588910:"Favorites light small",widget53682402382234438094635323212803:"Home small dark",widget02323172503312239016114363677353:"Mute small dark",widget60930346000005950867361331446589:"Mute small light",widget44206097139571093498241187512601:"Mute volume small dark",widget14331682269640712386903645124601:"Mute volume small light",widget92256219087753064089995024036833:"Stop small dark",widget79464367200287141166204556239627:"Stop small light",widget778562232104439690508968127520:"Map",widget8493628443969968127520:"Stripe",widget79245955670272504670501666990894:"System Card",widget04697701113662266305184237229773:"Status Card",widget65790241036603674513788606522071:"SMS Card",widget09214845276834300305040814754451:"Music Card",widget12701256077076802920096944287425:"Maps Card",widget65042678278765625514287639165408:"Speedometer Card",widget54303116319833974061777069:"Play Button",widget54303116319833974061777069169976:"Stop Button",widget543031163198339740617770691699:"Fast Forward Button",widget08049518394516813916473896301:"Unlocked light small",widget53682402382234438094635323212:"Home small light"},"Windows-8":{widget93332:"Light",widget98190:"Windows Orange Light",widget98140:"Windows Orange",widget98150:"Windows Green",widget98210:"Windows Green Dark",widget98160:"Windows Blue",widget98220:"Windows Blue Medium",widget98130:"Windows Purple",widget98170:"Windows Green Dark",widget98180:"Windows Blue Dark",widget93333:"Dark",widget9812:"Status bar",widget90426:"Roaming",widget90420:"Signal Strength",widget90424:"Battery Charging",widget90748:"Application Bar",widget97460:"Snap View Application Bar",widget9747:"Application Bar Icon",widget9749:"Taskbar",widget90454:"Zoom",widget90453:"Share",widget90452:"Start",widget90455:"Link",widget90456:"Settings",widget9334:"Header Dark",widget9336:"Subheader Dark",widget9338:"Small Subheader Dark",widget93423:"Links Dark",widget934221:"Block Text Dark",widget9347:"Push Button Rest Light",widget9345:"Push Button Rest Dark",widget9346:"Push Button Rest Default",widget9348:"Push Button Finger Down Light",widget93481:"Push Button Finger Down Dark",widget9349:"Push Button Disabled Light",widget9350:"Push Button Disabled Dark",widget97520:"Tile 2x1 Maroon",widget97530:"Tile 2x1 Orange",widget97500:"Tile 2x1 Blue",widget97540:"Tile 2x1 Purple Dark",widget97510:"Tile 2x1 Purple",widget97560:"Tile 1x1 Green",widget97550:"Tile 1x1 Blue",widget97570:"Tile 1x1 Purple",widget9351:"Tile Layout Light",widget9764:"Image Overlay Landing Checked",widget9765:"Image Overlay Landing",widget9352:"Context Menu",widget90415:"Item Picker Menu",widget90413:"Search Layout Dark",widget90414:"Search Field",widget90457:"Computer",widget90458:"Settings small",widget90459:"Files",widget90460:"Pin",widget9382:"Tooltip",widget9396:"Message Bar",widget9397:"Message Dialog",widget90416:"App Dialog",widget9450:"Flyouts",widget94511:"Back",widget90405:"Command Button Light",widget90408:"Command Button Light",widget90407:"Command Button Active",widget90406:"Command Button Dark",widget9452:"Flipper",widget9745:"Snap View Separator",widget9767:"Clock",widget90418:"Network",widget90417:"Battery",widget9762:"Player Active",widget9758:"Play Active",widget9763:"Player Inactive",widget9760:"Player Inactive",widget9761:"Volume Inactive",widget9789:"Toast Layout",widget9860:"Speech Bubble Left",widget9861:"Speech Bubble Right",widget9924:"Line Diagonal",widget9925:"Line Diagonal",widget11017:"Line Vertical",widget11016:"Line Horizontal",widget9926:"Triangle",widget9927:"Triangle",widget9928:"Triangle",widget9929:"Triangle",widget9930:"Triangle",widget9931:"Triangle",widget9932:"Triangle",widget9933:"Triangle",widget9934:"Circle",widget993510:"Semi Circle-Left",widget993610:"Semi Circle-Right",widget993710:"Semi Circle-Up",widget993810:"Semi Circle-Down",widget9939:"Square",widget9940:"Rounded Square",widget9941:"Rounded Rectangle High",widget9942:"Rounded Rectangle Wide",widget99430:"Octagon",widget994300:"Up Arrow",widget994301:"Down Arrow",widget994302:"Left Arrow",widget994303:"Right Arrow",widget9391:"Text Field Rest State Light",widget9392:"Text Field Rest State Dark",widget9389:"Edit Box Pressed",widget9395:"Edit Box Cleared",widget9393:"Edit Box Disabled Light",widget9394:"Edit Box Disabled Dark",widget90412:"Password Box Pressed Light",widget90409:"Password Box Pressed Dark",widget90410:"Password Box Focus State",widget90411:"Password Box Revealed",widget9811:"Dropdown Menu Rest State Light",widget9768:"Keyboard Landscape",widget97682:"Keyboard Handwriting",widget97681:"Keyboard Portrait",widget9399:"Time Picker Light",widget90401:"Date Picker Light",widget90403:"Picker Light",widget90400:"Time Picker Dark",widget90402:"Date Picker Dark",widget90404:"Picker Dark",widget9360:"Slider Rest State Light",widget9362:"Slider Disabled Light",widget9364:"Slider Pressed Light",widget9366:"Slider Loading Light",widget9368:"Slider Loading Vertical Light",widget9361:"Slider Rest State Dark",widget9363:"Slider Disabled Dark",widget9365:"Slider Pressed Dark",widget9367:"Slider Loading Dark",widget9369:"Slider Loading Vertical Dark",widget9383:"Determinate Bar",widget9384:"Indeterminate Bar",widget9385:"Indeterminate Ring Bar Large",widget9386:"Indeterminate Ring Bar Small",widget9370:"WiFi Rest ON Light",widget9376:"WiFi Rest OFF Light",widget9372:"WiFi Pressed ON Light",widget9377:"WiFi Pressed OFF Light",widget9374:"WiFi Inactive ON Light",widget9380:"WiFi Inactive OFF Light",widget9371:"WiFi Rest ON Dark",widget9378:"WiFi Rest OFF Dark",widget9373:"WiFi Pressed ON Dark",widget9379:"WiFi Pressed OFF Dark",widget9375:"WiFi Inactive ON Dark",widget9381:"WiFi Inactive OFF Dark",widget9790:"Toggle Rest State On Light",widget9791:"Toggle Finger Down On Light",widget9792:"Toggle Disabled State Off Light/Dark",widget9793:"Toggle Rest State On Dark",widget9794:"Toggle Finger Down On Dark",widget9795:"Toggle Disabled State On Dark",widget9353:"Radio Rest Light Unchecked",widget9354:"Radio Rest Light Checked",widget93546:"Radio Finger Down Light Unchecked",widget93548:"Radio Finger Down Light Checked",widget93554:"Radio Disabled Light Unchecked",widget935541:"Radio Disabled Light Checked",widget9356:"Radio Keyboard Focus Unchecked Light",widget9358:"Radio Keyboard Focus Checked Light",widget93531:"Radio Rest Dark Unchecked",widget93542:"Radio Rest Dark Checked",widget93547:"Radio Finger Down Dark Unchecked",widget93550:"Radio Finger Down Dark Checked",widget93552:"Radio Finger Up Dark Checked",widget93555:"Radio Disabled Dark Unchecked",widget935551:"Radio Disabled Dark Checked",widget9357:"Radio Keyboard Focus Unchecked Dark",widget9359:"Radio Keyboard Focus Checked Dark",widget9453:"Rating rest state",widget9454:"Rating rest state rated",widget9455:"Rating pressed state",widget9456:"Rating small",widget9796:"Text Selector",widget9803:"Arrow Left Light",widget9804:"Arrow Right Light",widget98050:"Arrow Up Light",widget98060:"Arrow Down Light",widget9807:"Arrow Left Dark",widget9808:"Arrow Right Dark",widget98090:"Arrow Up Dark",widget98100:"Arrow Down Dark",widget9799:"Arrow Left Inactive",widget9800:"Arrow Right Inactive",widget98010:"Arrow Up Inactive",widget98020:"Arrow Down Inactive",widget9766:"Scrollbar",widget90419:"Network Type",widget90421:"Bluetooth",widget90422:"Alarm",widget90423:"Call",widget90425:"Upload",widget90427:"Signal Full",widget90428:"Signal",widget90429:"Signal",widget90430:"Signal",widget9769:"Add Light",widget90431:"Add Dark",widget9770:"Subtract Light",widget90438:"Subtract Dark",widget9771:"Close Light",widget90432:"Close Dark",widget9772:"Warning Light",widget90433:"Warning Dark",widget9773:"Delete Light",widget90434:"Delete Dark",widget9774:"Photos Light",widget90435:"Photos Dark",widget9775:"Add Favorite Light",widget90436:"Add Favorite Dark",widget9776:"Delete Favorite Light",widget90444:"Delete Favorite Dark",widget9777:"Extend Light",widget90437:"Extend Dark",widget9778:"Refresh Light",widget90439:"Refresh Dark",widget9779:"Back Light",widget90440:"Back Dark",widget9780:"Forwards Light",widget90443:"Forwards Dark",widget9781:"Save Light",widget90441:"Save Dark",widget9782:"Mail Light",widget90442:"Mail Dark",widget9783:"Download Light",widget90445:"Download Dark",widget9784:"Upload Light",widget90448:"Upload Dark",widget9785:"Settings Light",widget90446:"Settings Dark",widget9786:"Write Light",widget90447:"Write Dark",widget9787:"Check Mark Light",widget90449:"Check Mark Dark",widget9788:"Files Light",widget90451:"Files Dark",widget9797:"Close icon light",widget9798:"Close icon dark",widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget9759:"Volume Active"},Wireframe:{widget2032:"Light",widget1555:"Pale Grey",widget1554:"Prototype",widget15151:"Pale Blue",widget1515:"Fluid Blue",widget2034:"Dark",widget1577:"Tab Bar",widget9303:"Tab Bar Highlighted",widget1559:"Toolbar",widget1616:"Disclosure",widget301:"Table View",widget1023010:"Text Area",widget1534264:"Alert Dialog",widget23111503:"Button",widget511211202:"Button active",widget9823:"Media Player",widget1430:"Tooltip Green",widget1434:"Tooltip Blue",widget1575:"Detail Disclosure",widget8:"Popover",widget9:"Accordion Menu",widget9325:"Horizontal Browser Scrollbar",widget9326:"Vertical Browser Scrollbar",widget1587:"Divider Horizontal",widget1586:"Divider Vertical",widget93180:"Image",widget502:"Button",widget1543:"HTML Button",widget1584:"HTML Button",widget1621:"Button",widget10000:"Multisegment Button",widget576:"Radio Off",widget51176:"Radio On",widget594:"Checkbox Off",widget51194:"Checkbox On",widget51195:"Hamburger Menu",widget1536:"Text Box",widget15361:"Password Entry Field",widget1537:"Search",widget9328:"Dropdown Menu Closed",widget9329:"Dropdown Menu Opened",widget9332:"Date Picker",widget834:"Slider",widget83411:"Progress Bar",widget1533375:"Remove",widget9317:"Close",widget5112398:"Add",widget9315:"Subtract",widget51122398:"Back",widget51121398:"Forward",widget1533225:"Counter",widget9824:"Page List",widget982500:"Item List Simple",widget1511226:"Tiny",widget936:"Medium",widget931124:"Huge",widget1528:"Block Text",widget1574:"Link Text",widget1576:"Inactive Text",widget93190:"Bulleted List",widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle",widget1122557:"Status Bar",widget1557:"Status Bar",widget1551:"Navigation Bar",widget1426:"Back",widget1550:"Header Bar",widget8134111:"Search Bar",widget9301:"Browser Bar",widget9302:"Search Bar",widget9304:"Progress Bar",widget9312:"Button Bar Multisegment ",widget9837:"Line Diagonal",widget9838:"Line Diagonal",widget11019:"Line Vertical",widget11018:"Line Horizontal",widget98260:"Triangle",widget98270:"Triangle",widget224:"Triangle",widget98320:"Triangle",widget98280:"Triangle",widget98290:"Triangle",widget98300:"Triangle",widget98310:"Triangle",widget200:"Circle",widget98350103:"Arc Left",widget98360102:"Arc Right",widget98330106:"Arc Up",widget98340107:"Arc Down",widget168:"Square",widget16403:"Square Rounded",widget16203:"Rectangle High",widget16103:"Rectangle Wide",widget98390:"Octagon",widget93210:"Up Arrow",widget93220:"Down Arrow",widget93230:"Left Arrow",widget93240:"Right Arrow",widget10002:"Table View",widget100021:"Table View Grouped",widget1563:"Notification Panel Dark",widget1564:"Notification Panel Light",widget16501:"Keyboard Dark",widget17501:"Keyboard Light",widget1423234:"Map Annotation",widget1005:"Speech Bubble Left",widget1618:"Speech Bubble Right",widget1578:"Scrollbar",widget511211112202:"Button bold orange",widget511211112112202:"Button bold dark",widget1541121123:"Accept",widget151111223:"Decline",widget1522:"Next",widget23502:"Button",widget23503:"Button",widget164324234324:"Switch On",widget16434324:"Switch Off",widget82214:"Switch On",widget162218:"Switch Off",widget92150:"Picker",widget8900:"Picker Minimal",widget8901:"Picker Customizable",widget83432424:"Slider Android",widget11251127:"Alpha Sort",widget1544:"Email Button",widget9842:"Page Left Facing",widget9843:"Page Right Facing",widget9841:"Star",widget9846:"Ribbon Up",widget9847:"Ribbon Down",widget9840:"Folder",widget9844:"Pointer Left Facing",widget9845:"Pointer Right Facing",widget9848:"Home",widget9849:"Down Arrow",widget9850:"Flag Left",widget9851:"Flag Right",widget9856:"Cloud",widget9859:"Oval",widget9857:"Drop",widget9858:"Drop",widget9862:"Thumbs Up",widget9863:"Thumbs Down"},"Apple-Watch":{widget0493663313133704980459179:"Black",widget0493663313140104980459179:"Butterfly",widget049366331314010498045917:"City",widget04936633131401049804591:"Mountains",widget04936633131401049804591794:"Line Horizontal",widget97192342528218333905889002:"Line Vertical",widget42673800190066711923084100:"Line Diagonal",widget94296354443757829739055083:"Line Diagonal",widget26471097285468238058593001:"Triangle",widget37572137782371659165660317:"Triangle",widget98982830498397882411880989:"Triangle",widget13664732274646110142581449:"Triangle",widget55956052445697683588571875:"Triangle",widget78128241799403285844607028:"Triangle",widget32528735636489899155988039:"Triangle",widget68696590705844053086521868:"Triangle",widget96032653572763411766349420:"Circle",widget94104633862489746150699215:"Semi Circle Left",widget86295570655103538483158445:"Semi Circle Right",widget75238082068042741309107808:"Semi Circle Up",widget24613444402531876196817403:"Semi Circle Down",widget35464821211766429661944429:"Square",widget85898848953447248441556519:"Rounded Square",widget00282748188406906282930105:"Rounded Rectangle High",widget54960793907140317868016667:"Rounded Rectangle Wide",widget65272068033305600139655110:"Octagon",widget18835134028638077136209967535782:"Status Bar Simple",widget69380560553903717353857231487884:"Status Bar",widget08568441318148302154646301626629:"Status Bar",widget77360541976302727904160393841735:"Status Bar Weather",widget87418751688392521088951468351428:"Options Bar",widget90779630418666679738795314177899:"Status Bar Date",widget34735957996535322353483447885097:"Status Bar Location",widget357671337036476118395404056893:"Contacts Bar",widget74965889168444657076198230007710:"Status Bar Stand",widget51606627563882570118328986644790:"Status Bar Move",widget13482287823686598932079130231197:"Status Bar Exercise",widget49255017382647149214804350607756:"All apps in one",widget07019078488037597362741107096103:"Double Line List",widget41934016082093862162538050347273:"Single Line List",widget49553210003853963655901299775709:"Memo Tab",widget42546379155291869949892427750247:"Memo Tab",widget887013378611604194535551628:"Translucent Tint",widget63422112544094188694516831045288:"Locked Screen",widget58307556633366859833954932905509:"Locked Screen",widget41111969413168283545131648100265:"Notifications Screen",widget41586977783714565524327157934786:"Icon watch 1",widget30476427147806279394908536855940:"Map large",widget75731311561997931685847846619959:"Map small",widget32705775029760704422174482213560:"Timer Card",widget38534262037847967097644682445468:"Messages Card",widget00897205537434578279966212348142:"Calendar Card",widget53468704814357338761248494562946:"Apps Card",widget89655762210641794825338377657713:"Chats Card",widget30131614109461627158555507521760:"SMS Card",widget30848387887531478035344309327802:"Locations Card",widget35767137503647611836295404056893:"Messages Card",widget61225115350861088266869479751664:"Notification Call Card",widget28856988922088674995970481488197:"Notification Call Card",widget67082664509866401885198772137500:"Travel Card",widget90234126049094805273565221390390:"Maps Card",widget24359107297929248469229646390270:"Contacts Card",widget09332400366094691351030222172743:"Calendar Notifications Card",widget17363352167599600721164543752335:"Organizer Card",widget02025842193126197135950805810502:"List Card",widget95510055256782687406583422674449:"Siri Card",widget46804464983020190827404605578165:"Weather Card",widget77824626081730770460755408550101:"Media Player Card",widget15869186144811007497366091952708:"AirPlay Card",widget60742944559613491913400249951501:"Fitness App",widget90817106851178896101273351497171:"Fitness Activity Layout",widget26585932588190164493499607934239:"Fitness Activity Layout",widget31083928532066763691590573786222:"Fitness Activity Layout",widget42287181851575942996271665974702:"Fitness Activity Layout",widget55671349578856161241772493202408:"Fitness Card List",widget09048253764732190358840603137197:"Fitness Card List",widget85758268020463567107505168014297:"Fitness Card Blue",widget70188615059129366706121513477366:"Fitness Card Yellow",widget82137683491412247953693522293087:"Fitness Card Red",widget91196564248958438391783212862731:"Speech Bubble With Heading",widget16828566647211070956090140041380:"Speech Bubble",widget29736653794858773503237676591761:"Speech Bubble",widget2973660379485877350321337591761:"Speech Bubble Media",widget86193681350390072937843040867314:"Button Dark",widget21187149201589389038690810447655:"Button Light",widget40200664739117950392775639930274:"Start Button",widget66475989816948153873279797281536:"Reset Button",widget99509462288504822313936897063569:"Emoticon Button",widget54046025484574730260229611965686:"Microphone Button",widget88851079495717608556024499398835:"Button Blue",widget71035540752950041714331698343081:"Button Yellow",widget78216702711980410311934520684298:"Button Red",widget705913372222711140481757590:"Small Text",widget13372589737882391360046689:"Medium Text",widget13373659186017771663935804:"Large Text",widget13373800190066711923084100:"Text Block Dark",widget35737865576755506671201717170544:"Page Indicator",widget133765576755506671201717170544:"Page Indicator",widget57989623076087553831452840801921:"Page Indicator",widget66132520091157811981727654541478:"Page Indicator",widget35397937906622069246845513612992:"Page Indicator",widget29859791920580716411188703362866:"Hang Up",widget69917719714150949702439569251183:"Pick Up Phone",widget41870641929947576321023321495709:"Shuffle Control",widget21252943791064245883162723281916:"Repeat Control",widget01234481398342280109736106295568:"Source Control",widget15428846775980346384851443188524:"AirPlay",widget18635049431564676254455529271987:"Rewind",widget62379422826889476040946620119796:"Fast Forward",widget62531828724405591780303447952121:"Pause Button",widget23307678863835297375546108342291:"Scrollbar",widget55916670768779924495301994671730:"Reduce",widget06857703282212391916538833881861:"Increase",widget53381446583537315368170276165023:"Icon minus",widget533814465835373153681702761023:"Icon minus small",widget27178007123915043503989952264769:"Icon plus",widget271780071239150435039899522647:"Icon plus small",widget21544406740698769169575904220008:"Volume Control",widget73051894942439152130277219705473:"Progress Bar",widget51200388973462757741993062856295:"Icon speak",widget42438879690242021336653262075109:"Icon next",widget70190606770215719018202510801658:"Icon call",widget89924083442552692453197627377109:"Icon call small",widget17493860200718440002295385168362:"Icon end call",widget10670933668582470015342645987060:"Call large",widget98603146283575698494277967115297:"Call small",widget75166497800493174651782401019958:"Earth blue",widget94648797643532513387242591157736:"Fitness large",widget26155850264587810810411081127317:"Fitness medium",widget89184610965190630245812833694693:"Fitness small",widget35778747127740618215617464909458:"Fluid large",widget27984698668988759459185398993452:"Fluid medium",widget44296051133239274906750379135889:"Fluid small",widget37682914275910430768761639251821:"Icon airplay",widget88909550577434236040982456140770:"Icon repeat",widget00183625959709026989530867478940:"Icon shuffle",widget61229927947132480498129490669088:"Icon source",widget36173043422694608239477405468631:"Icon emoticon",widget75034524804281789212261366703039:"Icon flower",widget91201054765422705653035294342394:"Icon message small",widget85816273314087842322180331700798:"Icon microphone",widget20276291030833360661676824928268:"Icon mute",widget60042942713382468656021107154231:"photo-man",widget41961190105225997019255712020036:"photo-woman",widget66484908633758871572609696345634:"photo-man1",widget87206355933466574962873037802040:"photo-woman2",widget57610670948203739063456005139004:"photo-woman-large",widget56941008039787675336909642349242:"Icon siri",widget53441663189841208784896677881383:"Icon cirles",widget25155668835564597088073778989878:"Icon heart",widget52965052815229078958600517034511:"Icon stopwatch blue",widget48684080495013931664502328786436:"Icon stopwatch small",widget02659758581239982851311828190217:"Icon susnset",widget77373870802611405379031242758508:"Icon watch 2",widget35371306483082390210578965564784:"Icon watch white",widget65768040106798463929657441099579:"Icon weather",widget87488696299430277756007056642142:"Mail large",widget08540452978436442321636697312943:"Mail medium",widget25216557303806557920011270121635:"Mail small",widget45247429434183342072206725880185:"Message large",widget25683949646447220503852218072743:"Message medium",widget39031037218783416057054625529600:"Message small",widget83010625916878594093886844189044:"Music large",widget35909119649632477734905684552449:"Music medium",widget67911716332956872329410392608595:"Music small",widget54922856035351520094322766062026:"Photos large",widget80390752170231464114724186474772:"Photos medium",widget76787264327036183440426531451369:"Photos small",widget62558326461948852139882009631520:"Play large",widget58750078911621677422138890235700:"Play medium",widget42270955475619991817083095406094:"Play small",widget69311337386293226532226969838001:"Settings large",widget55692236429295259534789496176312:"Settings medium",widget83334226813062178338340437138307:"Settings small",widget02460178764021776212634378542172:"Stopwatch large",widget04350306755910411553045136469162:"Stopwatch medium",widget87566266351619713416854939334911:"Stopwatch small",widget67350492095715034643022623539934:"Watch 1 large",widget45254547589571636837046359484116:"Watch 2 large",widget27014986513811136641170748854547:"Weather large",widget54645228534189629477151198083021:"Weather medium",widget66503705265752784807681942982137:"Weather small",widget67109693514662926728561250223688:"Web large",widget52407858751605514237432662002455:"Web medium",widget18368502434909644766459714064059:"Web small",widget59029220278755592584652140698515:"Running large",widget36894802950396294430494271805506:"Running medium",widget36509945021572700951995102332804:"Running small",widget30066202857398659606301368670251:"Icons exercise large",widget05661654945845310460088968006011:"Icons exercise small",widget82884138853059183928026927084426:"Icons fitness",widget29322455090612188911727504040507:"Icons medium",widget86531844161815823044186941197807:"Icons small",widget96029207089890502263529387623424:"Icons move  arge",widget73366726362510701489470284480729:"Icons move small",widget10205309473690490727183378029909:"Icons stand large",widget92922148134351029243201843056156:"Icons stand small",widget586:"Square",widget587:"Triangle",widget588:"Circle",widget589:"Square",widget590:"Triangle",widget591:"Circle"},"Android-5":{}},createOrder:function(a){var o=[];var n=["Desktop","Wireframe","Android","Android-5","Android-4.4","Android-Tablet","iOS7","iOS8","iOS8-tablet","iPhone","iPad","Windows-8","Pebble","Android-Wear","Galaxy-Gear","Google-Glass","Apple-Watch"];if(n.indexOf(a)>-1){var c=$.extend({},true,f.allGroups[a]);for(var d in c){var b=""+d+"";o.push(b)}}return o}};i.exports=f},{}],40:[function(r,q,k){var m=r("./class-storage");var l=r("./utils");var o=r("./class-page");var n=r("./class-group");var p=r("./class-widget");p.add=function(i,f,d,b,c){var h=$(b).closest(".screen");var a=d;return p._add(a,h,i)};p._add=function(B,G,c,H){if(fluid.main.project.isReadOnly()){return false}fluid.main.fire("beforewidgetadd",G.attr("id"));m.cacheStart();p._stopEditingText();p.resetSelection();var C=false;var j=G.find(".widgetHolder");var f=[0,0,j.width(),j.height()];var H=(H)?H:false;var D=false;var b=false;var h=p._createSaveAndDraw(B,C,G,H,j,f,D,b);var F=$.isArray(h);m.commitCache();var i,a,d=G.attr("id");if(F){for(var E=0;E<h.length;E++){p.renderAbove(d,h[E])}i=$("#"+h.join(",#"));a=n.create(i);F=Boolean(a)}else{p.renderAbove(d,h);i=$("#"+h)}if(c){if(F){n.select(i)}else{fluid.selection.select(h,{zooming:"onlyWhenInvisible"})}}return h};p.renderAbove=function(b,d){var f=m.get(b).widgets;var c=false;for(var a=0;a<f.length;a++){if(c&&m.get(f[a]).blur){o.drawDetailed(b,"init",{restoreSelection:$(".pageWidget.ui-selected").attr("id")});return}if(f[a]===d){c=true}}};p._createSaveAndDraw=function(a,f,P,M,G,K,F,N){var c,O=typeof a=="string"?p.get(a):a;if(!O){return false}if(O.st=="g"){var H=O.ad;c=[];for(var h=0,J=H.length;h<J;h++){var j=H[h],L=j[0],i=p.get(L);if($("#libraryWidgetDragging").length>0){i.tlwh=p._getRelativeTLWH(L,i,P,M);i.tlwh[0]+=j[2];i.tlwh[1]+=j[1]}c.push(p._createSaveAndDraw(i,f,P,null,G,K,F,N))}}else{c=l.guid("w");var I=$.extend(true,{},O);I.lockTo=(f)?f:c;I.tlwh=I.tlwh||p._getRelativeTLWH(c,I,P,M);var b=I.ca||(M&&M[2]);I.ca=(b)?b:"tl";if(F){I.of=F}if(N===true){N=c;I.segmentRoot=F}if(N){I.segment=N}p._removeUnnecesaryProps(I);if((I.upload)&&(!I.data)){I.data=a}p._save(c,I,P);o.calculateWdgPositions(P.attr("id"));var d=p._draw(c,G,K);P[0].querySelector(".page-preview")&&o.drawDetailed(P[0].id,"init");if(I.seg&&I.sc){I.segmentRoot=c;p._dropSegments(c,I,P,G,d.absTLWH)}if(I.ad){p._dropAds(c,I,P,G,K,N)}}return c};p._dropSegments=function(c,b,w,j,v){var i=p._setupSegments(b,v);b.segments=[];var z=i.segments.length;for(var d=0;d<z;d++){var a=i.segments[d];var f=true;var h=p._createSaveAndDraw(a.wObj,b.lockTo,w,a.pos,j,v,c,f);b.segments.push({id:h,widget:a.wId})}m.get(c,{returnModel:true}).set(b);p._updateSegments(b,i)};p._dropAds=function(c,b,a,j,u,h){for(var f in b.ad){var v=b.ad[f];var i=v[3]||"tl";var d=[v[2],v[1],i];p._createSaveAndDraw(v[0],b.lockTo,a,d,j,u,c,h)}b=_.omit(b,["ad"]);m.set(c,b)};p._getRelativeTLWH=function(D,F,h,c){if(typeof F.st!=="undefined"&&F.st=="b"){return[0,0,"a","a"]}var i=0;var C=0;if(F.wh||F.tlwh){i=F.tlwh?F.tlwh[2]:F.wh[0];C=F.tlwh?F.tlwh[3]:F.wh[1]}if(F.upload==="y"){var a=m.get(h[0].id),b=l.getFitSize({object:{width:i,height:C},frame:{width:a.width,height:a.height}});i=b.width;C=b.height}if(c){return[c[0],c[1],i,C]}var A=$("#libraryWidgetDragging");if(A.length>0){var j=$("#libraryWidgetDragging").position();var B=fluid.zoom.getCurrentScale();var d=$(h).offset();return[((j.top-d.top)/B+8),((j.left-d.left)/B+8),i,C]}if(D==F.lockTo){function E(s,t,u){if(typeof s==="string"){s=u*parseFloat(s,10)/100}return(s+t>u)}var f=(F.dp)?F.dp:[0,0];if(E(f[0],C,h.height())){f[0]=h.height()-F.wh[1]}if(E(f[1],i,h.width())){f[1]=h.width()-F.wh[0]}return[f[0],f[1],i,C]}return[0,0,i,C]};p._removeUnnecesaryProps=function(a){delete a.title;delete a.g;delete a.t;delete a.dp;delete a.x;delete a.id;delete a.wh};p.addToPage=function(b,c){var a=m.get(b,{getAll:true});if(c&&c.st&&c.st==="b"){a.widgets.unshift(c)}else{a.widgets.push(c)}m.set(b,a)};p._save=function(a,b,c){p.addToPage(c.attr("id"),a,b);m.set(a,b);if(typeof b.st!=="undefined"&&b.st=="b"&&c.find(".backgroundWidget").length>0){p.del(c.find(".backgroundWidget"))}};q.exports=p},{"./class-group":13,"./class-page":18,"./class-storage":33,"./class-widget":37,"./utils":69}],41:[function(q,p,r){var n=q("./class-widgetNewSegments");var o=q("./browserdetect");var m=q("./class-storage");var l=q("./utils");n._drawFromRoot=function(f,i,D,a,H){a=a||n.get(f);if(a.st=="g"){var G=a.ad;for(var J=0,c=G.length;J<c;J++){var I=G[J],L=I[0],b=n.get(L);n._drawFromRoot(L,i,D,b,[I[2],I[1],I[3]])}}else{var j=n._draw(f,i,D,a,H);if(a.seg&&a.sc){var E=n._setupSegments(a,D);for(var h=0,c=E.segments.length;h<c;h++){var d=E.segments[h];var F=[d.pos[0],d.pos[1],D[2],D[3]];n._drawFromRoot(d.wId,i,F,d.wObj,[j.absTLWH[0],j.absTLWH[1]])}}if(!(a.ad&&a.ad.length)){return j}for(var h=0,c=a.ad.length;h<c;h++){var L=(j.ad[h])[0];var K=(j.ad[h])[3]||"tl";var H=[(j.ad[h])[2],(j.ad[h])[1],K];var b=false;n._drawFromRoot(L,i,j.absTLWH,b,H)}}return j};n._draw=function(d,a,b,c,f,i){var c=c||n.get(d);if(!c){return false}var j=n._setTMPLVars(d,c,b,f);if(j.isHelperWidget&&j.upload&&j.upload==="y"){j.data=d}var h=$("#tmplWidget2").tmpl(j);n._drawCanvasOrImage(h,j);if(a){if(c.st=="b"){a.prepend(h)}else{if(i){if(i==="first"){a.prepend(h)}else{h.insertAfter($("#"+i))}}else{a.append(h)}}}return j};n.adjustHandlesScale=function(){var f=fluid.zoom.getCurrentScale();var d=Math.round(12/f),a=Math.round(8/f),i=Math.round(8/f),b=Math.round(7/f),h=Math.round(1/f),c=$(".ui-selected .ui-resizable-handle");h=Math.max(h,1);requestAnimationFrame(function(){c.filter(".ui-resizable-n").css({top:-a,height:d});c.filter(".ui-resizable-s").css({bottom:-a,height:d});c.filter(".ui-resizable-e").css({right:-a,width:d});c.filter(".ui-resizable-w").css({left:-a,width:d});c.filter(".ui-resizable-ne").css({top:-b,right:-b,width:i,height:i,"outline-width":h});c.filter(".ui-resizable-nw").css({top:-b,left:-b,width:i,height:i,"outline-width":h});c.filter(".ui-resizable-se").css({bottom:-b,right:-b,width:i,height:i,"outline-width":h});c.filter(".ui-resizable-sw").css({bottom:-b,left:-b,width:i,height:i,"outline-width":h});c.show()})};n._setTMPLVarsCache=[];n._setTMPLVars=function(h,a,c,A,i){if(i&&n._setTMPLVarsCache[h]){return n._setTMPLVarsCache[h]}if(!i){n._setTMPLVarsCache=[]}var d=$.extend(true,{},a);d.id=h;d.useCanvas=n.useCanvas;d.includeCanvasOrImage=(((d.b||d.bg)&&!d.srps)||d.upload||d.i)?true:false;d.isRootwidget=(h==d.lockTo)?true:false;d.isSegmentRoot=Boolean(d.seg&&d.sc);d.isLibaryWidget=(d.lockTo!=undefined)?true:false;d.of=(d.of)?d.of:d.lockTo;d.isText=(a.ts||a.tc)?true:false;d.isBackgroundWidget=(a.st=="b")?true:false;d.isStaticWidgetForeground=(a.st=="f")?true:false;if(a.ts){var b=a.ts.match(/width:\s*100\%;\s*height:\s*100%;\s*white-space:\s*pre-wrap/g);if(b&&b.length){d.addWH=false}else{d.addWH=true}var w;var B="";if(d.ts.indexOf("font-size")!==-1){w=d.ts.substring(a.ts.indexOf("font-size")+10,d.ts.indexOf(";",d.ts.indexOf("font-size"))).trim();w=parseFloat(w)}else{var f=d.ts.match(/font:[^;]*;/g);if(f.length){var z=f[0].match(/[0-9]*px/g);if(z.length){w=parseFloat(z[0])}if(z.length&&z.length>1){B=z[1]}}}if(B===""&&d.ts.indexOf("line-height")!==-1){B=d.ts.substring(d.ts.indexOf("line-height")+12,d.ts.indexOf(";",d.ts.indexOf("line-height"))).trim()}if(w&&B.indexOf("normal")!==-1){if(d.ts.indexOf("line-height")!==-1){d.ts=d.ts.replace(/line-height:\s*normal/g,"line-height: "+Math.round(w*1.14)+"px")}else{d.ts=d.ts.replace(/[0-9]*px\/[0-9]px/g,w+"px/"+Math.round(w*1.14)+"px")}}else{if(w&&B===""){d.ts=d.ts+"; line-height: "+Math.round(w*1.14)+"px;"}}}if(!d.tlwh){var j=d.wh||[c[2],c[3]];d.tlwh=[0,0,j[0],j[1]]}d.ca=(A)?A[2]||"tl":d.ca||"tl";d.absTLWH=n._getAbsTLWH(h,d,c,A);if(i){n._setTMPLVarsCache[h]=d}return d};n._getAbsTLWH=function(d,h,I,R){function O(t,s){var u=parseFloat(t);return Math.round(u*s/100)}if(!h.of||d==h.of){var j=$.extend([],I)}else{var j=$.extend([],I);var Q=n.get(h.of);if(Q){j=n._getAbsTLWH(h.of,Q,I,false)}}var L,N;var T=Boolean(h.segment&&Q&&Q.sp);var c=T?Q.sp[0]+Q.sp[3]:0;var a=T?Q.sp[1]+Q.sp[2]:0;if(!h.tlwh){h.tlwh=[0,0,h.wh[0],h.wh[1]]}if((h.seg||h.segments)&&(h.tlwh[2]=="a"||h.tlwh[3]=="a")){var P=n._getSegmentRootTLWH(d,h);L=P[2];N=P[3]}else{var L=(h.tlwh[2]==="a")?"100%":h.tlwh[2];var N=(h.tlwh[3]==="a")?"100%":h.tlwh[3]}L=(typeof(L)==="string")?O(L,j[2]-c):L;N=(typeof(N)==="string")?O(N,j[3]-a):N;var f=(R)?R[0]:h.tlwh[0];var S=(R)?R[1]:h.tlwh[1];var K=(typeof(f)==="string")?O(f,j[3]-a):f;var M=(typeof(S)==="string")?O(S,j[2]-c):S;var b=h.ca||"tl";try{var i=(b[0]=="b")?j[3]-N-K:K;var H=(b[1]=="r")?j[2]-L-M:M}catch(J){var i=0;var H=0}i=(b[0]=="c")?K+j[3]/2-N/2:i;H=(b[1]=="c")?M+j[2]/2-L/2:H;i+=j[0];H+=j[1];return[Math.round(i),Math.round(H),Math.round(L),Math.round(N)]};n._drawCanvasOrImage=function(d,a){if(!a.includeCanvasOrImage){return false}var b={width:a.absTLWH[2],height:a.absTLWH[3]};var f=$("<canvas>").attr(b);var c=f[0].getContext("2d");n._paintCanvas(d,c,a);return true};n.getImageData=function(d,b){var a=m.get(d);var c=d||false;if(c&&c.substr(0,5)!="data:"){if(b&&(!a||!a.storage||a.storage=="cloud")){c=imgCloudUrl+d+".png"}else{c=k("img",d)}}else{if(tmplVars.id){if(b&&(!a||!a.storage||a.storage=="cloud")){c=imgCloudUrl+tmplVars.id+".png"}else{c=k("img",tmplVars.id)}}}return c};n._drawPreviewImageUpload=function(a,c){a.get(0).innerHTML='<img class="preview-upload-image">';$imgEl=a.find("img");$imgEl.get(0).onerror=function(){if(this.src.indexOf("/data/img")===-1){this.onerror=function(){};this.src=n.getImageData(c.data,false)}};if(location.origin==="file://"||location.origin==="null"){var b="";switch(c.type){case"image/svg+xml":b=".svg";break;default:b=".png";break}$imgEl.get(0).src="img/"+c.data+b}else{$imgEl.get(0).src=n.getImageData(c.data,true)}};n._drawImageUpload=function(w,f){var i={width:f.absTLWH[2],height:f.absTLWH[3]};var h=w.find("canvas");var d=h.size()>0?h:$("<canvas/>");d.attr(i);var v=d[0].getContext("2d");function b(C,t,u,D){if(!t.tlwh[2]||!t.tlwh[3]){t.tlwh[2]=this.width;t.tlwh[3]=this.height;C.css({width:t.tlwh[2],height:t.tlwh[3]});$(u.canvas).attr({width:t.tlwh[2],height:t.tlwh[3]});n.scale(C.closest(".widgetParts"),t)}if(D){var s=new Image();s.src=D;s.onload=function(){u.drawImage(s,0,0,t.tlwh[2],t.tlwh[3])}}else{u.drawImage(this,0,0,t.tlwh[2],t.tlwh[3])}}function z(s,t){if(this.src.indexOf("/data/img")===-1){var u=new Image();u.src=a(false);u.onload=b;img=u;u.onerror=function(){$(v.canvas).addClass("failureImage");v.font="32pt Arial";v.fillText("Image",35,50);v.fillText("not found",10,115)}}else{$(v.canvas).addClass("failureImage");v.font="32pt Arial";v.fillText("Image",35,50);v.fillText("not found",10,115)}this.onerror=null}function j(){if(this.src.indexOf("/data/img")===-1){delete this.crossOrigin;this.removeAttribute("crossorigin");this.src=a(false)}else{z.apply(this,arguments);n._convertCanvasToImg($(v.canvas),w.find("img"),f)}this.onerror=null}function a(s){var u=m.get(f.data);var t=f.data||false;if(t&&t.substr(0,5)!="data:"){if(s&&(!u||!u.storage||u.storage=="cloud")){t=imgCloudUrl+f.data+".png"}else{t=k("img",f.data)}}else{if(f.id){if(s&&(!u||!u.storage||u.storage=="cloud")){t=imgCloudUrl+f.id+".png"}else{t=k("img",f.id)}}}return t||z()}if((h.length||w.find("img"))&&f.simpleUploadResize){return}var c=w.find("img").get(0);fluid.upload.get({id:f.data||f.id,image:c,callback:function(s,B,t,u){if(s.find("img").length===0&&u.imgData){b.call(u.image,s,B,t,u.imgData)}}.bind(this,w,f,v),priority:fluid.upload.priority.pageZoomedIn});return};n._convertCanvasToImg=function(d,a,b){function c(){var f=d[0].toDataURL("image/png");if(f!="data:,"){a.attr("src",f)}}c()};n._paintCanvas=function(c,I,h){var i={blur:function(){if(h.blur&&!((o.browser==="Chrome"||o.browser==="Safari")&&document.domain==="")){var s=c[0],w,v;if(window.g_preview||!m.get(h.id).getPage){w=m.get(window.g_preview||fluid.main.project.get("id")).pages;for(var u=0,z=w.length;u<z;u++){var t=w[u];if(m.get(t).widgets.indexOf(h.id)!==-1){v=t;break}}v=v||document.querySelector(".canvasObject.active").id}else{v=m.get(h.id,{returnModel:true}).getPage().id}n.renderBlurLayer(s.id,v,function(A){n.blurLayers[s.id]=A;n.setBlurBG(s)});if(n.blurLayers[s.id]){n.setBlurBG(s)}}},background:function(){I.save();function s(){var w=(h.bgc)?h.bgc:["#CAD1D7","#C4CBD3"];var u=[5,2];var v="v";if(h.bgd){v=h.bgd[0];u=[h.bgd[1],h.bgd[2]]}I.fillStyle=w[1];I.fill();I.fillStyle=w[0];if(v=="v"){for(var t=u[0];t<D;){I.fillRect(t,0,u[1],d);t+=u[0]}}else{for(var t=u[0];t<d;){I.fillRect(0,t,D,u[1]);t+=u[0]}}}if(!D){D=0}if(!d){d=0}if(h.bg=="c"){I.fillStyle=h.bgc[0];I.fill()}else{if(h.bg=="s"){s()}else{if(h.bg=="l"){g=I.createLinearGradient(0,0,0,d);i._gradient(g,I,h)}else{if(h.bg=="lrl"){g=I.createLinearGradient(0,0,D,0);i._gradient(g,I,h)}else{if(h.bg=="ld"){g=I.createLinearGradient(0,0,D,d);i._gradient(g,I,h)}else{if(h.bg=="ld2"){g=I.createLinearGradient(D,0,0,d);i._gradient(g,I,h)}else{if(h.bg=="r"){g=I.createRadialGradient(D/2,d/2,0,D/2,d/2,d/2);i._gradient(g,I,h)}}}}}}}I.restore()},border:function(s,w,v,z){var t=0,u=0;s.lineWidth=(typeof J)==="number"?J:E;s.strokeStyle=w.b[1];s.stroke();s.save()},path:function(aF,at,B,ay,aE,aS,aO,aG,au){aF.beginPath();var aR=ay+Math.floor(aG/2);var aJ=aE+Math.floor(aG/2);var aC=ay+aO-Math.floor(aG/2);var aN=aE+aS-Math.floor(aG/2);if(au.sh&&au.sh[3]&&au.sh[2]){aR+=Math.floor(au.sh[3]-au.sh[2]/2);aJ+=Math.floor(au.sh[3]-au.sh[2]/2);aC-=Math.floor(au.sh[3]+au.sh[2]/2);aN-=Math.floor(au.sh[3]+au.sh[2]/2)}if($.isArray(B)){for(var aH=0;aH<4;aH++){B[aH]=B[aH]||0}}else{B=[B,B,B,B]}if(at=="sq"){var aD=Math.min((aN-aJ)/2,(aC-aR)/2);B[0]=Math.min(B[0],aD);B[1]=Math.min(B[1],aD);B[2]=Math.min(B[2],aD);B[3]=Math.min(B[3],aD);aF.moveTo(aJ+B[0],aR),aF.lineTo(aN-B[1],aR),aF.quadraticCurveTo(aN,aR,aN,aR+B[1]),aF.lineTo(aN,aC-B[2]),aF.quadraticCurveTo(aN,aC,aN-B[2],aC),aF.lineTo(aJ+B[3],aC),aF.quadraticCurveTo(aJ,aC,aJ,aC-B[3]),aF.lineTo(aJ,aR+B[0]),aF.quadraticCurveTo(aJ,aR,aJ+B[0],aR)}if(at=="arrU"){var w=(aN-aJ)+(5/4);aM=aC-aR,u=(aN-aJ)*1.5;if(aM<=u){w=(aC-aR)/2}var aU=[l.Vector((aJ+aN)/2,aR+aG),l.Vector(aN-(aG/2),aR+w),l.Vector((aJ+aN)*0.65,aR+w),l.Vector((aJ+aN)*0.65,aC),l.Vector((aJ+aN)*0.35,aC),l.Vector((aJ+aN)*0.35,aR+w),l.Vector(aJ+(aG/2),aR+w)];l.drawVectors(aF,aU,B)}if(at=="arrD"){var w=(aN-aJ)+(5/4);var aM=aC-aR;var u=(aN-aJ)*1.5;if(aM<=u){w=(aC-aR)/2}var aU=[l.Vector((aJ+aN)/2,aC-aG),l.Vector(aN-(aG/2),aC-w),l.Vector((aJ+aN)*0.65,aC-w),l.Vector((aJ+aN)*0.65,aR),l.Vector((aJ+aN)*0.35,aR),l.Vector((aJ+aN)*0.35,aC-w),l.Vector(aJ+(aG/2),aC-w),l.Vector((aJ+aN)/2,aC)];l.drawVectors(aF,aU,B)}if(at=="arrR"){var w=(aC-aR)+(5/4);var aK=aN-aJ;var z=(aC-aR)*1.5;if(aK<=z){w=(aN-aJ)/2}var aU=[l.Vector(aN-aG,(aR+aC)/2),l.Vector(aN-w,aC-(aG/2)),l.Vector(aN-w,(aR+aC)*0.65),l.Vector(aJ,(aR+aC)*0.65),l.Vector(aJ,(aR+aC)*0.35),l.Vector(aN-w,(aR+aC)*0.35),l.Vector(aN-w,aR+(aG/2)),l.Vector(aN-aG,(aR+aC)/2)];l.drawVectors(aF,aU,B)}if(at=="arrL"){var w=(aC-aR)+(5/4);var aK=aN-aJ;var z=(aC-aR)*1.5;if(aK<=z){w=(aN-aJ)/2}var aU=[l.Vector(aJ+aG,(aR+aC)/2),l.Vector(aJ+w,aC-(aG/2)),l.Vector(aJ+w,(aR+aC)*0.65),l.Vector(aN,(aR+aC)*0.65),l.Vector(aN,(aR+aC)*0.35),l.Vector(aJ+w,(aR+aC)*0.35),l.Vector(aJ+w,aR+(aG/2)),l.Vector(aJ+aG,(aR+aC)/2)];l.drawVectors(aF,aU,B)}if(at=="image"){aF.moveTo(aJ,aR);aF.lineTo(aN,aR);aF.lineTo(aN,aC);aF.lineTo(aJ,aC);aF.lineTo(aJ,aR);aF.moveTo(aJ,aR);aF.lineTo(aJ+1,aR);aF.lineTo(aN,aC-1);aF.lineTo(aN,aC);aF.lineTo(aN-1,aC);aF.lineTo(aJ,aR-1);aF.lineTo(aJ,aR);aF.moveTo(aN-1,aR);aF.lineTo(aN,aR);aF.lineTo(aN,aR-1);aF.lineTo(aJ+1,aC);aF.lineTo(aJ,aC);aF.lineTo(aJ,aC-1);aF.lineTo(aN-1,aR)}else{if(at=="tri"){var aU=[l.Vector(aJ,aR),l.Vector(aN,aR),l.Vector(aN,aC)];l.drawVectors(aF,aU,B)}else{if(at=="trR"){var aU=[l.Vector(aJ,aR),l.Vector(aN,aR),l.Vector(aJ,aC)];l.drawVectors(aF,aU,B)}else{if(at=="ttrL"){var aU=[l.Vector(aN,aR),l.Vector(aN,aC),l.Vector(aJ,aC)];l.drawVectors(aF,aU,B)}else{if(at=="ttrR"){var aU=[l.Vector(aJ,aR),l.Vector(aN,aC),l.Vector(aJ,aC)];l.drawVectors(aF,aU,B)}else{if(at=="triU"){var aU=[l.Vector((aJ+aN)/2,aR),l.Vector(aN,aC),l.Vector(aJ,aC)];l.drawVectors(aF,aU,B)}else{if(at=="triD"){var aU=[l.Vector(aJ,aR),l.Vector(aN,aR),l.Vector((aJ+aN)/2,aC)];l.drawVectors(aF,aU,B)}else{if(at=="triR"){var aU=[l.Vector(aJ,aR),l.Vector(aN,(aR+aC)/2),l.Vector(aJ,aC)];l.drawVectors(aF,aU,B)}else{if(at=="triL"){var aU=[l.Vector(aN,aR),l.Vector(aJ,(aR+aC)/2),l.Vector(aN,aC)];l.drawVectors(aF,aU,B)}else{if(at=="ribU"){aF.moveTo(aJ,aR);aF.lineTo((aJ+aN)/2,(aR+aC)/4);aF.lineTo(aN,aR);aF.lineTo(aN,aC);aF.lineTo(aJ,aC);aF.lineTo(aJ,aR)}else{if(at=="ribD"){aF.moveTo(aJ,aR);aF.lineTo(aN,aR);aF.lineTo(aN,aC);aF.lineTo((aJ+aN)/2,(3/4)*(aR+aC));aF.lineTo(aJ,aC);aF.lineTo(aJ,aR)}else{if(at=="flagR"){aF.moveTo(aJ,aR);aF.lineTo(aN,aR);aF.lineTo((4/5)*(aJ+aN),(aR+aC)/2);aF.lineTo(aN,aC);aF.lineTo(aJ,aC);aF.lineTo(aJ,aR)}else{if(at=="flagL"){aF.moveTo(aJ,aR);aF.lineTo((1/5)*(aJ+aN),(aR+aC)/2);aF.lineTo(aJ,aC);aF.lineTo(aN,aC);aF.lineTo(aN,aR);aF.lineTo(aJ,aR)}else{if(at=="houseU"){var aU=[l.Vector(aN,(3/7)*(aR+aC)),l.Vector(aN,aC),l.Vector(aJ,aC),l.Vector(aJ,(3/7)*(aR+aC)),l.Vector((aJ+aN)/2,aR)];l.drawVectors(aF,aU,B)}else{if(at=="houseD"){var aU=[l.Vector((aJ+aN)/2,aC),l.Vector(aN,(4/7)*(aR+aC)),l.Vector(aN,aR),l.Vector(aJ,aR),l.Vector(aJ,(4/7)*(aR+aC))];l.drawVectors(aF,aU,B)}else{if(at=="oct"){var ax=21/72,aA=51/72,C=aJ+aN,ar=aR+aC,aU=[l.Vector(ax*C,aR),l.Vector(aA*C,aR),l.Vector(aN,ax*ar),l.Vector(aN,aA*ar),l.Vector(aA*C,aC),l.Vector(ax*C,aC),l.Vector(aJ,aA*ar),l.Vector(aJ,ax*ar)];l.drawVectors(aF,aU,B)}else{if(at=="star"){var aU=[l.Vector((aJ+aN)/2,aR),l.Vector((33/54)*(aJ+aN),(39/102)*(aC+aR)),l.Vector(aN,(39/102)*(aC+aR)),l.Vector((75/108)*(aJ+aN),(63/102)*(aC+aR)),l.Vector((87/108)*(aJ+aN),aC),l.Vector((aJ+aN)/2,(39/51)*(aC+aR)),l.Vector((21/108)*(aJ+aN),aC),l.Vector((33/108)*(aJ+aN),(63/102)*(aC+aR)),l.Vector(aJ,(39/102)*(aC+aR)),l.Vector((21/54)*(aJ+aN),(39/102)*(aC+aR))];l.drawVectors(aF,aU,B)}else{if(at=="pgL"){var aU=[l.Vector(aJ,aC),l.Vector(aN,aC),l.Vector(aN,aR),l.Vector((aJ+aN)/3,aR),l.Vector(aJ,(aR+aC)/4)];l.drawVectors(aF,aU,B)}else{if(at=="pgR"){var aU=[l.Vector(aN,aC),l.Vector(aJ,aC),l.Vector(aJ,aR),l.Vector((2/3)*(aJ+aN),aR),l.Vector(aN,(aR+aC)/4)];l.drawVectors(aF,aU,B)}else{if(at=="pointrL"){var aU=[l.Vector(aJ,aR),l.Vector(aN,aR),l.Vector((5/7)*(aJ+aN),(3/7)*(aR+aC)),l.Vector((5/7)*(aJ+aN),aC),l.Vector(aJ,aR)];l.drawVectors(aF,aU,B)}else{if(at=="pointrR"){var aU=[l.Vector(aJ,aR),l.Vector(aN,aR),l.Vector((2/7)*(aJ+aN),aC),l.Vector((2/7)*(aJ+aN),(3/7)*(aR+aC)),l.Vector(aJ,aR)];l.drawVectors(aF,aU,B)}else{if(at=="ldL"){aF.moveTo(aJ,aR);aF.lineTo(aJ+2,aR);aF.lineTo(aN,aC);aF.lineTo(aN-2,aC);aF.lineTo(aJ,aR)}else{if(at=="ldR"){aF.moveTo(aN,aR);aF.lineTo(aN-2,aR);aF.lineTo(aJ,aC);aF.lineTo(aJ+2,aC);aF.lineTo(aN,aR)}else{if(at=="dropD"){aF.moveTo((aJ+aN)/2,aR);aF.lineTo((aJ+aN)/6,(aR+aC)/2);aF.bezierCurveTo(aJ-((aJ+aN)*(1.5/6)),aC+((aC+aR)/6.2),aN+((aJ+aN)*(1.5/6)),aC+((aC+aR)/6.2),(aJ+aN)*(5/6),(aR+aC)/2);aF.lineTo((aJ+aN)/2,aR)}else{if(at=="dropU"){aF.moveTo((aJ+aN)/2,aC);aF.lineTo((aJ+aN)/6,(aR+aC)/2);aF.bezierCurveTo(aJ-((aJ+aN)*(1.5/6)),aR-((aC+aR)/6.2),aN+((aJ+aN)*(1.5/6)),aR-((aC+aR)/6.2),(aJ+aN)*(5/6),(aR+aC)/2);aF.lineTo((aJ+aN)/2,aC)}else{if(at=="oval"){aF.moveTo(aJ,(aC+aR)/2);aF.bezierCurveTo((aJ+aN)*(1/4),aR-((aC+aR)/7),(aJ+aN)*(3/4),aR-((aC+aR)/7),aN,(aC+aR)/2);aF.bezierCurveTo((aJ+aN)*(3/4),aC+((aC+aR)/7),(aJ+aN)*(1/4),aC+((aC+aR)/7),aJ,(aC+aR)/2)}else{if(at=="cloud"){aF.moveTo((aJ+aN)*(1.5/9),aC);aF.bezierCurveTo(aJ,aC,aJ,(aR+aC)*(7/11),(aJ+aN)*(1.6/9),(aC+aR)*(7/11));aF.bezierCurveTo((aJ+aN)/9,(aC+aR)/3,(aJ+aN)/3,(aC+aR)/6.3,(aJ+aN)*(4/9),(aC+aR)/3.2);aF.bezierCurveTo((aJ+aN)*(4.5/9),aR,(aJ+aN)*(7.4/9),aR,(aJ+aN)*(7.3/9),(aC+aR)/2);aF.bezierCurveTo(aN,(aC+aR)/2,aN,aC,(aJ+aN)*(7.7/9),aC);aF.lineTo((aJ+aN)*(1.5/9),aC)}else{if(at=="person"){aF.moveTo(aJ,aC);aF.bezierCurveTo((aJ+aN)/16,(aR+aC)*(11/14),(aJ+aN)*(3/16),(aR+aC)*(10/14),(aJ+aN)*(6/16),(aC+aR)*(9/14));aF.bezierCurveTo((aJ+aN)*(2.5/16),(aR+aC)*(4/7),(aJ+aN)*(2.5/16),aR,(aJ+aN)/2,aR);aF.bezierCurveTo((aJ+aN)*(13.5/16),aR,(aJ+aN)*(13.5/16),(aR+aC)*(4/7),(aJ+aN)*(10/16),(aC+aR)*(9/14));aF.bezierCurveTo((aJ+aN)*(13/16),(aR+aC)*(10/14),(aJ+aN)*(15/16),(aR+aC)*(11/14),aN,aC);aF.lineTo(aJ,aC)}else{if(at=="thumbsU"){aF.moveTo(aJ,(aR+aC)*(16/17));aF.lineTo(aJ,(aR+aC)*(15/34));aF.bezierCurveTo((aJ+aN)*(2/15),(aR+aC)*(7/17),(aJ+aN)*(9/30),(aR+aC)*(4/17),(aJ+aN)/3,(aC+aR)*(3/34));aF.bezierCurveTo((aJ+aN)*(5.2/15),aR,(aJ+aN)*(9/15),aR,(aJ+aN)*(8.5/15),(aR+aC)*(2/17));aF.lineTo((aJ+aN)*(7/15),(aR+aC)*(11/34));aF.bezierCurveTo((aJ+aN)*(9/15),(aR+aC)*(13/34),(aJ+aN)*(11/15),(aR+aC)*(13/34),(aJ+aN)*(12/15),(aR+aC)*(13/34));aF.bezierCurveTo(aN,(aR+aC)*(13/34),aN,(aR+aC)*(19/34),(aJ+aN)*(12/15),(aR+aC)*(19/34));aF.bezierCurveTo((aJ+aN)*(14/15),(aR+aC)*(19/34),(aJ+aN)*(27/30),(aR+aC)*(12/17),(aJ+aN)*(23/30),(aR+aC)*(12/17));aF.bezierCurveTo((aJ+aN)*(13/15),(aR+aC)*(12/17),(aJ+aN)*(25/30),(aR+aC)*(29/34),(aJ+aN)*(11/15),(aR+aC)*(29/34));aF.bezierCurveTo((aJ+aN)*(25/30),(aR+aC)*(29/34),(aJ+aN)*(12/15),aC,(aJ+aN)*(8.5/15),aC);aF.bezierCurveTo((aJ+aN)/2,aC,(aJ+aN)/5,aC,aJ,(aR+aC)*(16/17))}else{if(at=="thumbsD"){aF.moveTo(aJ,(aR+aC)/17);aF.lineTo(aJ,(aR+aC)*(19/34));aF.bezierCurveTo((aJ+aN)*(2/15),(aR+aC)*(10/17),(aJ+aN)*(9/30),(aR+aC)*(13/17),(aJ+aN)/3,(aC+aR)*(31/34));aF.bezierCurveTo((aJ+aN)*(5.2/15),aC,(aJ+aN)*(9/15),aC,(aJ+aN)*(8.5/15),(aR+aC)*(15/17));aF.lineTo((aJ+aN)*(7/15),(aR+aC)*(23/34));aF.bezierCurveTo((aJ+aN)*(9/15),(aR+aC)*(21/34),(aJ+aN)*(11/15),(aR+aC)*(21/34),(aJ+aN)*(12/15),(aR+aC)*(21/34));aF.bezierCurveTo(aN,(aR+aC)*(21/34),aN,(aR+aC)*(15/34),(aJ+aN)*(12/15),(aR+aC)*(15/34));aF.bezierCurveTo((aJ+aN)*(14/15),(aR+aC)*(15/34),(aJ+aN)*(27/30),(aR+aC)*(5/17),(aJ+aN)*(23/30),(aR+aC)*(5/17));aF.bezierCurveTo((aJ+aN)*(13/15),(aR+aC)*(5/17),(aJ+aN)*(25/30),(aR+aC)*(5/34),(aJ+aN)*(11/15),(aR+aC)*(5/34));aF.bezierCurveTo((aJ+aN)*(25/30),(aR+aC)*(5/34),(aJ+aN)*(12/15),aR,(aJ+aN)*(8.5/15),aR);aF.bezierCurveTo((aJ+aN)/2,aR,(aJ+aN)/5,aR,aJ,(aR+aC)/17)}else{if(at=="arcL"){var aS=aN-aJ;var aO=aC-aR;var aP=(aO>=(aS*2))?aS:aO/2;aF.moveTo(aJ+aP,aR);aF.arcTo(aJ,aR,aJ,aR+aP,aP);aF.arcTo(aJ,aR+(2*aP),aJ+aP,aR+(2*aP),aP);aF.lineTo(aJ+aP,aR)}else{if(at=="arcR"){var aS=aN-aJ;var aO=aC-aR;var aP=(aO>=(aS*2))?aS:aO/2;aF.moveTo(aJ,aR);aF.arcTo(aJ+aP,aR,aJ+aP,aR+aP,aP);aF.arcTo(aJ+aP,aR+(2*aP),aJ,aR+(2*aP),aP);aF.lineTo(aJ,aR)}else{if(at=="arcU"){var aS=aN-aJ;var aO=aC-aR;var aP=(aS>=(aO*2))?aO:aS/2;aF.moveTo(aJ,aR+aP);aF.arcTo(aJ,aR,aJ+aP,aR,aP);aF.arcTo(aJ+(2*aP),aR,aJ+(2*aP),aR+(2*aP),aP);aF.lineTo(aJ,aR+aP)}else{if(at=="arcD"){var aS=aN-aJ;var aO=aC-aR;var aP=(aS>=(aO*2))?aO:aS/2;aF.moveTo(aJ,aR);aF.arcTo(aJ,aR+aP,aJ+aP,aR+aP,aP);aF.arcTo(aJ+(2*aP),aR+aP,aJ+(2*aP),aR,aP);aF.lineTo(aJ,aR)}else{if(at=="folder"){var aW=B[0],aS=aN-aR,aO=aC-aR,A={x:(3/8)*(aN+aJ),y:(2/15)*(aR+aC)},aw={x:(5/16)*(aN+aJ),y:aR},s={x:aw.x+(A.x-aw.x)/2,y:aR+(A.y-aR)/2},az=Math.sqrt(s.x*s.x+s.y*s.y);B[1]=Math.min(aW,(aS-A.x)/2,aO/2);B[2]=Math.min(aW,(aC-A.y)/2,(A.x-aR)/2);B[4]=Math.min(aW,aO/2,(aw.x-aJ)/2),B[1]=B[4]=Math.min(B[1],B[4]);B[3]=Math.min(B[4],B[2]);B[0]=Math.min(aW,az,B[4]);B[5]=B[0];aF.moveTo(A.x+B[0],A.y);aF.lineTo(aN-B[1],A.y);aF.quadraticCurveTo(aN,A.y,aN,A.y+B[1]);aF.lineTo(aN,aC-B[2]);aF.quadraticCurveTo(aN,aC,aN-B[2],aC);aF.lineTo(aJ+B[3],aC);aF.quadraticCurveTo(aJ,aC,aJ,aC-B[3]);aF.lineTo(aJ,aR+B[4]);aF.quadraticCurveTo(aJ,aR,aJ+B[4],aR);aF.lineTo(aw.x-B[5],aw.y);aF.quadraticCurveTo(aw.x,aw.y,s.x,s.y);aF.quadraticCurveTo(A.x,A.y,A.x+B[0],A.y)}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}if(at=="speechRight"){aF.moveTo(aN-17,aC);aF.lineTo(aN-96,aC-13);aF.lineTo(aJ,aC-13);aF.lineTo(aJ,aR);aF.lineTo(aN,aR);aF.lineTo(aN,aC-13);aF.lineTo(aN-38,aC-13);aF.lineTo(aN-17,aC)}if(at=="speechLeft"){aF.moveTo(aJ+17,aC);aF.lineTo(aJ+96,aC-13);aF.lineTo(aN,aC-13);aF.lineTo(aN,aR);aF.lineTo(aJ,aR);aF.lineTo(aJ,aC-13);aF.lineTo(aJ+38,aC-13);aF.lineTo(aJ+17,aC)}else{if(at=="bubr"){right=aS-1;bottom=aO-2;tailSize=7;if(au.b){ay=ay+au.b[0]/2;aE=aE+au.b[0]/2;right=right-au.b[0]/2;bottom=bottom-au.b[0]/2}aF.moveTo(right-tailSize,bottom-7);aF.lineTo(right-tailSize,ay+B[1]);aF.quadraticCurveTo(right-tailSize,ay,right-B[1]-tailSize,ay);aF.lineTo(aE+B[0],ay);aF.quadraticCurveTo(aE,ay,aE,ay+B[0]);aF.lineTo(aE,bottom-B[3]);aF.quadraticCurveTo(aE,bottom,aE+B[3],bottom);aF.lineTo(right-19,bottom);aF.quadraticCurveTo(right-15,bottom-1,right-14,bottom-2);aF.quadraticCurveTo(right-7,bottom+1,right-1,bottom-2);aF.quadraticCurveTo(right-tailSize,bottom-3,right-tailSize,bottom-7)}else{if(at=="bubl"){right=aS-1;bottom=aO-2;tailSize=7;if(au.b){ay=ay+au.b[0]/2;aE=aE+au.b[0]/2;right=right-au.b[0]/2;bottom=bottom-au.b[0]/2}aF.moveTo(right,bottom-B[2]);aF.lineTo(right,ay+B[1]);aF.quadraticCurveTo(right,ay,right-B[1],ay);aF.lineTo(aE+B[0]+tailSize,ay);aF.quadraticCurveTo(aE+tailSize,ay,aE+tailSize,ay+B[0]);aF.lineTo(aE+tailSize,bottom-6);aF.quadraticCurveTo(aE+4,bottom-1,aE+1,bottom-2);aF.quadraticCurveTo(aE+2,bottom+2,aE+13,bottom-2);aF.quadraticCurveTo(aE+15,bottom,aE+19,bottom);aF.lineTo(right-B[2],bottom);aF.quadraticCurveTo(right,bottom,right,bottom-B[2])}else{if(at=="arrowL"||at=="arrowR"||at=="arrowU"||at=="arrowD"){var av=2;if(au.aCurve){av=au.aCurve}var v=12;if(au.aSize){v=au.aSize}if(at=="arrowL"){aF.moveTo(aJ+v,aR);aF.lineTo(aN-B[1],aR);aF.quadraticCurveTo(aN,aR,aN,aR+B[1]);aF.lineTo(aN,aC-B[2]);aF.quadraticCurveTo(aN,aC,aN-B[2],aC);aF.lineTo(aJ+v,aC);aF.bezierCurveTo(aJ+v-av,aC,aJ,((aC+aR)/2)+av,aJ,(aC+aR)/2);aF.bezierCurveTo(aJ,((aC+aR)/2)-av,v-av,aR,aJ+v,aR)}else{if(at=="arrowR"){aF.moveTo(aJ+B[0],aR);aF.lineTo(aN-v,aR);aF.bezierCurveTo(aN-v+av,aR,aN,((aR+aC)/2)-av,aN,(aR+aC)/2);aF.bezierCurveTo(aN,((aR+aC)/2)+av,aN-v+av,aC,aN-v,aC);aF.lineTo(aJ+B[3],aC);aF.quadraticCurveTo(aJ,aC,aJ,aC-B[3]);aF.lineTo(aJ,aR+B[0]);aF.quadraticCurveTo(aJ,aR,aJ+B[0],aR)}else{if(at=="arrowD"){var aI=(au.aW)?au.aW:aI;var aQ=(aJ+aN)/2;var aL=aI/2;aF.moveTo(aJ+B[0],aR);aF.lineTo(aN-B[1],aR);aF.quadraticCurveTo(aN,aR,aN,aR+B[1]);aF.lineTo(aN,aC-v-B[2]);aF.quadraticCurveTo(aN,aC-v,aN-B[2],aC-v);aF.lineTo(aQ+aL,aC-v);aF.lineTo(aQ,aC);aF.lineTo(aQ-aL,aC-v);aF.lineTo(aJ+B[3],aC-v);aF.quadraticCurveTo(aJ,aC-v,aJ,aC-v-B[3]);aF.lineTo(aJ,aR+B[0]);aF.quadraticCurveTo(aJ,aR,aJ+B[0],aR)}else{if(at=="arrowU"){var aI=(au.aW)?au.aW:20;var aQ=(aJ+aN)/2;var aL=aI/2;aF.moveTo(aJ+B[0],aR+v);aF.lineTo(aQ-aL,aR+v);aF.lineTo(aQ,aR);aF.lineTo(aQ+aL,aR+v);aF.lineTo(aN-B[1],aR+v);aF.quadraticCurveTo(aN,aR+v,aN,aR+v+B[1]);aF.lineTo(aN,aC-B[2]);aF.quadraticCurveTo(aN,aC,aN-B[2],aC);aF.lineTo(aJ+B[2],aC);aF.quadraticCurveTo(aJ,aC,aJ,aC-B[3]);aF.lineTo(aJ,aR+v+B[0]);aF.quadraticCurveTo(aJ,aR+v,aJ+B[3],aR+v)}}}}}else{if(at=="c"){var aT=aS/2,aV=aO/2,aB=Math.min(aT,aV),t=Math.min(aG|0,aB),aP=aB-t/2;if(aP<0){aP=0}J=t;aF.arc(aT,aV,aP,0,Math.PI*2,true)}}}}}aF.closePath()},_gradient:function(u,s,w){var A=["#ffffff","#000000"];var v=[0,1];if(w.bgc&&w.bgd){A=w.bgc;v=w.bgd}for(var z=0;z<A.length&&z<v.length;z++){try{u.addColorStop(v[z],A[z])}catch(t){}}s.fillStyle=u;s.fill()},_glaze:function(z,C){var t=5,w=2,B=10,N=C.absTLWH[2]-27,u=10,s=0,v=7;if(C.s=="bubl"){B+=v}i.path(z,"sq",t,w,B,N,u,s,C);var A=z.createLinearGradient(0,w+u,0,w);A.addColorStop(0,"rgba(231, 231, 231, 0.2)");A.addColorStop(0.59,"rgba(240, 240, 240, 0.25)");A.addColorStop(1,"rgba(249, 249, 249, 0.3)");z.fillStyle=A;z.fill();z.restore()},_shadow:function(s,t){s.shadowColor=t.sh[0];s.shadowOffsetX=t.sh[1];s.shadowOffsetY=t.sh[2];s.shadowBlur=t.sh[3]},_effect:function(z,ab){var s=ab.fx;for(var V=0;V<s.length;V++){var C=s[V];if(C[0]=="dots"){var t=C[1];var B=C[2];var u=C[3];z.fillStyle=C[4];var Z=ab.absTLWH[2];var aa=ab.absTLWH[3];var w=t+B;var U=t+u;var v=parseInt(Z/w)+1;var A=parseInt(aa/U)+1;var W=0;for(var X=0;X<A;X++){W=(W)?0:t;for(var Y=0;Y<v;Y++){z.beginPath();z.arc((Y*w)+W,(X*U),t/2,0,2*Math.PI);z.closePath();z.fill()}}}}},_setImage:function(u,s,w){try{if(w.useCanvas){var B={width:w.absTLWH[2],height:w.absTLWH[3]};var A=u.find("canvas").attr(B);var v=A[0].getContext("2d");v.drawImage(s.canvas,0,0)}else{var z=u.find("img");n._convertCanvasToImg($(s.canvas),z,w)}}catch(t){}}};if(!c[0].classList.contains("ui-resizable-resizing")){i.blur()}if(typeof h.upload==="string"&&h.upload=="y"){if(window.g_preview){n._drawPreviewImageUpload(c,h)}else{n._drawImageUpload(c,h)}return}var G=0,f=0;var D=h.absTLWH[2];var d=h.absTLWH[3];var E=0;var j=0;var b=h.b;var J=null;if(b){E=b[0];j=b.length>3?b.slice(2):b[2]}var K=h.s?h.s:"sq";I.save();i.path(I,K,j,G,f,D,d,E,h);if(h.sh){i._shadow(I,h)}if(h.bg){i.background(I,h)}I.restore();if(b&&E>0){i.border(I,h,D,d)}if(h.glaze&&h.glaze=="y"){i._glaze(I,h)}if(h.fx&&h.fx.length>0){i._effect(I,h)}if(h.i){for(var L=0;L<h.i.length;L++){var H=h.i[L];var a=new Image();function F(){var s=H[5];if(typeof(s)=="string"&&s.search("%")!=-1){s=(D*parseInt(s)/100)-H[3]/2}else{if(s<0){s=parseInt(D)+H[5]-H[3]}}var t=H[6];if(typeof(t)=="string"&&t.search("%")!=-1){t=(d*parseInt(t)/100)-H[4]/2}else{if(t<0){t=parseInt(d)+H[6]-H[4]}}a.onload=function(){try{I.drawImage(a,H[1],H[2],H[3],H[4],s+f,t+G,H[3],H[4]);i._setImage(c,I,h);if(I.canvas.hasOwnProperty("onchange")){I.canvas.onchange()}}catch(u){}};a.src=H[0]}$(a).ready(F)}}else{i._setImage(c,I,h)}};n.scale=function(d,c){var a=10;var f;if(c.ls){f=c.ls}else{if(typeof c.wh==="undefined"){f=66/80}else{if(c.wh[0]=="a"||c.wh[1]=="a"){f=66/320}else{if(c.wh[0]=="100%"||c.wh[1]=="100%"){f=66/320}else{if(typeof(c.wh[0])==="string"||typeof(c.wh[1])==="string"){var h=parseInt(c.wh[0])/640;var b=parseInt(c.wh[1])/640;f=Math.max(h,b)}else{f=Math.min(1,66/c.wh[0],66/c.wh[1])}}}}}if(f<1){$(d).css({"-webkit-transform":"scale("+f+")","-moz-transform":"scale("+f+")"})}};p.exports=n;function k(b,a){var c="data/"+b+(a?"/"+a:"");return c}},{"./browserdetect":2,"./class-storage":33,"./class-widgetNewSegments":43,"./utils":69}],42:[function(j,o,k){var p=j("./functions");var l=j("./class-storage");var m=j("./class-group");var n=j("./class-widget");n.libraryDrag=function(a,b){n._libraryDrag(a,b,this)};n.libraryDragStart=function(a,b){fluid.main.fire("librarywdgdragstart")};n.dragWidgetCreate=function(a,b){n._dragCreate(a,b,this)};n.dragWidgetStart=function(a,b){if(fluid.main.project.isReadOnly()){return false}n._dragStart(a,b,this);n.posScaleHelperInit(this)};n.dragWidget=function(a,b){n._drag(a,b,this)};n.dragWidgetStop=function(a,b){if(fluid.main.project.isReadOnly()){return false}n._dragStop(a,b,this)};n._dragSelection=null;n._originalDragPos=null;n._topDiff=null;n._leftDiff=null;n._dragCreate=function(a,c,b){if(!fluid.zoom.isEditMode()){$(b).draggable("disable")}};n.posScaleHelperInit=function(h,b){var d=-35;if(b){var a=$(h)}else{if(n._moveMultiSelection==true){var a=$("#multiSelBox")}else{if($(h).hasClass("rootWidget")){var a=$(h)}else{var c=$(h).attr("data-lockTo");var a=$("#"+c)}}}var f=$("#tmplPosHelper").tmpl().appendTo(a);f.css({"-webkit-transform":"scale("+(1/fluid.zoom.getCurrentScale())+")","-moz-transform":"scale("+(1/fluid.zoom.getCurrentScale())+")"})};n.posScaleHelperDrag=function(b,a){if(b){$("#TLindicator").show();return}if(a){var c=-35;$("#WHindicator").show()}};n.getRootsForDrag=function(b){n._activeGroup=false;var c=fluid.main.project.get("widgetGroups");var d=fluid.main.project.widgets.getRoots(b);if(c){var a=m.createSelArray(d,c);if(a.length==1&&a[0].charAt(0)=="g"){n._activeGroup=a[0]}d.each(function(){var f=$(this).attr("id");for(var i in c){var v=c[i];var h=v.indexOf(f);if(h>-1){for(var u=0;u<v.length;u++){var t=$("#"+v[u]);d=d.add(t)}}}})}return d};n._moveMultiSelection=null;n._dragStart=function(f,i,h){var h=$(h);var b=l.get(h.attr("id"),{returnModel:true});if(b.get("blur")){b.clearBox()}var d=b.getBox();h.addClass("dragging");n.draggingFromId=h.parents(".screen").attr("id");n._originalDragPos={top:d[1]*fluid.zoom.getCurrentScale(),left:d[0]*fluid.zoom.getCurrentScale()};n._dragStartSelection=fluid.selection.getSelectedIds();h.parents(".screen").addClass("dragging-wdg-from");if(h.hasClass("ui-selected")||$("#"+h.attr("data-lockto")).hasClass("ui-selected")){h=h.add($(".ui-selected"))}var c=n.getRootsForDrag(h);n._moveMultiSelection=(c.length>1)?true:null;var a=c.map(function(){return this.id}).get();fluid.selection.select(a,{noContextMenu:true});fluid.main.fire("widgetdragstart",{$dragEl:h,ui:i,originalDragPos:n._originalDragPos,activeGroup:n._activeGroup});$("#canvasLinks").hide();n._dragSelection=$([]);$(c).not(".backgroundWidget").each(function(){var r=$('[data-lockto="'+$(this).attr("data-lockto")+'"]');n._dragSelection=n._dragSelection.add(r)});n._dragSelection.each(function(){var s=$(this);var t={top:parseInt(s.css("top")),left:parseInt(s.css("left"))};s.data("offset",t);s.addClass("ui-draggable-dragging");s.resizable("option","disabled",true)})};n.lastTime=null;n._drag=function(b,A,a){a=$(a);var B=a.data().draggable?a.data().draggable.position.top/fluid.zoom.getCurrentScale():parseInt(a.css("top"),10);var d=a.data().draggable?a.data().draggable.position.left/fluid.zoom.getCurrentScale():parseInt(a.css("left"),10);fluid.main.fire("widgetdragging",{$dragEl:a,top:B,left:d});function z(){var q=$(this).data("offset");$(this).css({top:q.top+f/fluid.zoom.getCurrentScale()+"px",left:q.left+c/fluid.zoom.getCurrentScale()+"px"})}var f=(A.position.top-n._originalDragPos.top);var c=(A.position.left-n._originalDragPos.left);var h=(n._dragSelection).not(a);$.each(h,z);p.updateTLWH();var v=true;n.posScaleHelperDrag(v);p.intersectTrash(a,b);var w=document.querySelectorAll(".pageWidget.ui-selected"),i=((i=document.querySelector(".canvasObject.active"))&&i.id);_.forEach(w,function(r){var q=r.id;if(l.get(q).blur){n.blurLayers[q]=n.blurLayers[q]||n.renderBlurLayer(q,i.id);n.setBlurBG(r,A.position.left-A.originalPosition.left,A.position.top-A.originalPosition.top)}})};n._dragStop=function(i,f,h){fluid.main.fire("beforewidgetdragstop");if(p.intersectTrash(h,i)){n.del(".ui-selected");$("#trash").removeClass("droppableStyle");n._dragSelection=null;return}function c(){var q=$(this);q.removeClass("rememberSelected");(n._moveMultiSelection==true)?q.resizable("option","disabled",true):q.resizable("option","disabled",false)}var d=fluid.selection.getSelectedEls();var a=fluid.selection.getSelectionModel().getRoots().getElements();var b=p.getHoverPageParams(i).pageId?p.getHoverPageParams(i).pageId:n.draggingFromId;var s=0,t=0;if(b!==n.draggingFromId){s=fluid.main.project.pages.get(b).get("x")-fluid.main.project.pages.get(n.draggingFromId).get("x");t=fluid.main.project.pages.get(b).get("y")-fluid.main.project.pages.get(n.draggingFromId).get("y")}$("#"+n.draggingFromId).removeClass("dragging-wdg-from");fluid.command.create("move",{id:fluid.selection.getSelectionModel().getRoots().getIds(),fromPage:n.draggingFromId,toPage:b,posFixX:s,posFixY:t,clientX:i.clientX,clientY:i.clientY}).dispatchTo("fluid.controllers.widget");m.select(a);n.draggingFromId=null;n._dragSelection.removeClass("ui-draggable-dragging");if(n._dragStartSelection.length){$.each(n._dragSelection,c)}$("#widgPosDragHelper").remove();fluid.main.fire("afterwidgetdragstop",{dragStartSelection:n._dragStartSelection});$("#canvasLinks").fadeIn(200);n._dragSelection=null;setTimeout(function(){$(h).removeClass("dragging")},100)};n._savePosition=function(a){function b(c,i){var h=$(i).attr("id");var f=n.get(h);var d=$.extend([],f.tlwh);d[0]=parseInt($(i).css("top"));d[1]=parseInt($(i).css("left"));n.set({tlwh:d},h)}$.each(a,b)};n._libraryDrag=function(b,d,c){c=$(c);var a=0.9/(fluid.zoom.getCurrentScale()*fluid.zoom.getCurrentScale());c.data().draggable.position.top+=-3+a;c.data().draggable.position.left+=-3+a;if(c.parents("#uploadTabs").length==1||c.hasClass("userWidget")){p.intersectTrash($(d.helper),b)}};n.onWidgetAdded=function(a,c,b){var d=p.getHoverPageParams(a);if(d){fluid.command.create("create",{widgetId:$(c.helper[0]).attr("data-widget-id")||c.helper[0].id,pageId:d.pageId,offsetX:d.offsetX,offsetY:d.offsetY}).dispatchTo("fluid.controllers.widget");fluid.main.fire("uiWidgetAdded")}};n.moveTo=function(a,c){var b=n.get(a);n._moveBy(a,b,[c[0]-b.tlwh[0],c[1]-b.tlwh[1]])};n._moveBy=function(a,b,d,c){$('[data-lockto="'+a+'"]').css({top:"+="+d[0],left:"+="+d[1]});fluid.main.fire("widgetmoved",$("#"+a).parent(".screen"),a);if(!(c&&c.debounce)){b.tlwh[0]+=d[0];b.tlwh[1]+=d[1];n.set({tlwh:b.tlwh.splice(0)},a)}else{if(!n.adjustWdgPosDebounced){n.adjustWdgPosDebounced=_.debounce(n.adjustWdgPos,500)}n.adjustWdgPosDebounced(a)}};n.adjustWdgPos=function(a){var d=fluid.selection.getSelectionModel().getRoots().getElements(),c=[],b=[];d.each(function(){var h=$(this),f;f=n.get(h.attr("id"));b.push([parseInt(h.css("top")),parseInt(h.css("left"))]);c.push([f.tlwh[0],f.tlwh[1]])});fluid.command.create("move",{id:fluid.selection.getSelectionModel().getRoots().getIds(),fromPage:l.get(a,{returnModel:true}).getPage().id,toPage:l.get(a,{returnModel:true}).getPage().id,fromPos:c,toPos:b,skipViewAdjustment:true}).dispatchTo("fluid.controllers.widget")};n.nudge=function(a){return n._nudge(a)};n._nudge=function(i){var b=i.keyCode;var f=(i.shiftKey||i.ctrlKey)?10:1;l.cacheStart();var h=fluid.selection.getSelectionModel().filter(function(r){if(r.get("st")==="b"){return false}return true});var c=new fluid.Widgets();c.add(h);var a=c.getElements();var d=c.getRoots().getElements();if(a.children("textarea").length>0){return false}d.each(function(){var s=$(this).attr("id");var t=[0,0];switch(b){case"left":case 37:t[1]=-f;break;case"up":case 38:t[0]=-f;break;case"right":case 39:t[1]=+f;break;case"down":case 40:t[0]=+f;break}n._moveBy(s,n.get(s),t,{debounce:true})});p.updateTLWH()}},{"./class-group":13,"./class-storage":33,"./class-widget":37,"./functions":64}],43:[function(n,m,i){var l=n("./class-widget");var k=n("./class-storage");var j=n("./utils");l._setupSegments=function(f,t,b,a){var d=[];var f=$.extend(true,{},f);f.sc=f.sc||1;f.sl=f.sl||"h";f.sa=f.sa||"tl";f.sp=f.sp||[0,0,0,0];var u=l._enumSegments(f,b);var z=f.tlwh||f.wh;var h=(f.sl=="h"?2:3)-(f.tlwh?0:2);if(typeof z[h]=="string"){if(!t){var v=f.of?$("#"+f.of):$("#canvasPages .active .widgetHolder");t=[0,0,v.width(),v.height()]}var w=f.sl=="h"?t[2]:t[3];if(z[h]=="a"&&u.autoSizeSegments.length>0){z[h]=w}else{var c=j.fromPercentString(z[h],w);if(!isNaN(c)){z[h]=c}}}u.rootTlwh=z;l._setSegmentTLWH(f,u);return u};l._enumSegments=function(O,J){function T(o,r,s){if(!r||!(r.tlwh||r.wh)){return}var p={wId:o,wObj:r};if(!s||J===undefined){f.push(p)}else{f.splice(J,0,p);J++}var q=r.tlwh?r.tlwh[V]:r.wh[V-2];if(r.autoSize||typeof q==="string"){r.autoSize=true;Q.push(p)}else{h+=q}}var f=[];var Q=[];var h=0;var V=O.sl=="h"?2:3;if(O.segments&&O.segments.length>0){if(O.segments.length>0&&O.segments[0].hasOwnProperty("id")){var W=0;var X={};for(var d=0,c=O.segments.length;d<c;d++){var b=l.get(O.segments[d].id);if(b){var K=O.segments[d].widget;T(K,b);W++;if(X[K]){X[K]++}else{X[K]=1}}}for(var S=W;S<O.sc;S++){var a=Number.MAX_VALUE;var N;for(var M=0;M<O.seg.length;M++){var I=O.seg[M];var L=X[I]||0;if(L<a){a=L;N=I}}var U=l.get(N);T(N,U,true)}}else{for(var d=0,c=O.segments.length;d<c;d++){var I=O.segments[d].originalID;var U=l.get(I);if(!U){U=l.get(O.segments[d].widget)}else{U.id=O.segments[d].widget}T(O.segments[d].widget,U)}}}else{var H=O.seg.length;for(var M=0,P=0;M<O.sc;M++,P=M%H){var I=O.seg[P];var R=l.get(I);T(I,R)}}return{segments:f,autoSizeSegments:Q,totalSize:h}};l._setSegmentTLWH=function(a,F){var H=a.segmentRoot||a.id;var B=a.tlwh||[0,0,a.wh[0],a.wh[1]];var L=a.sl=="h"?1:0;var c=a.sl=="h"?2:3;var b=[a.sp[1]||0,a.sp[0]||0];var C=a.sp[2+L]||0;var D=B[c]-b[L]-C-F.totalSize;if(F.autoSizeSegments.length>0){var J=Math.floor(D/F.autoSizeSegments.length);var K=D-(J*F.autoSizeSegments.length);for(var I=0;I<F.autoSizeSegments.length;I++,K--){var f=F.autoSizeSegments[I].wObj;var d=J+Number(K>0);F.totalSize+=d;if(f.tlwh){f.tlwh[c]=d}else{f.wh[c-2]=d}f.of=f.of||H}}if(B[c]=="a"||F.autoSize){F.autoSize=true;B[c]=F.totalSize+b[L]+C}var h=0;var E=0;if(!F.autoSize){switch(a.sa){case"br":b[L]=B[c]-C-F.totalSize;break;case"c":b[L]+=D>>1;break;case"d":h=Math.floor(D/(a.sc+1));E=D-(h*(a.sc+1));break}}for(var I=0;I<F.segments.length;I++,E--){b[L]+=h+Number(E>0);F.segments[I].pos=[b[0],b[1]];var f=F.segments[I].wObj;var G=f.tlwh||[0,0,f.wh[0],f.wh[1]];b[L]+=G[c];f.of=f.of||H}if(F.autoSize){F.rootTlwh=B;if(a.tlwh){a.tlwh[c]=B[c]}else{a.wh[c-2]=B[c]}}};l._updateSegments=function(U,ae,f){var Q=ae.segments;var aa=$("#"+U.segmentRoot);for(var Y=0;Y<Q.length;Y++){var ak=l._setSegmentBorder(U,Q,Y);var d=Q[Y];var O=U.segments[Y].id;if(O&&(O.substr(0,2)=="w_"||(O.substr(0,1)=="w"&&O.length==33))){var ad={left:parseInt(aa.get(0).style.left,10),top:parseInt(aa.get(0).style.top,10)};var T=l.get(O);var aj=$("#"+O);var S={left:parseInt(aj.get(0).style.left,10),top:parseInt(aj.get(0).style.top,10)};var h=d.pos[1]+ad.left-S.left;var Z=d.pos[0]+ad.top-S.top;var W=h!=0||Z!=0;var af={tlwh:$.merge([],T.tlwh)};var X=typeof af.tlwh[2]=="string"||typeof af.tlwh[3]=="string";var b=false;var P=objTlwh=[0,0,aa.width(),aa.height()];if(U.lockTo!=U.segmentRoot){var ac=k.get(U.segmentRoot,{returnModel:true}).getPage().id;var ag=$("#"+ac);P=[0,0,ag.width(),ag.height()]}var R=l._setTMPLVars(O,d.wObj,P);var ah=$("canvas, img",aj);f=f||{};var al=f.redraw=="all"||(f.redraw=="seg"&&f.segId==O);if(W){aj.css({left:S.left+h+"px",top:S.top+Z+"px"});af.tlwh[0]=d.pos[0];af.tlwh[1]=d.pos[1]}if(X){b=R.absTLWH[2]!=ah.width()||R.absTLWH[3]!=ah.height()}else{var c=[ah.width(),ah.height()];b=c[0]!=af.tlwh[2]||c[1]!=af.tlwh[3]}if(b||al){function V(p,o,q){o.add(p).add($("textarea, .widgetText",o)).css({width:q[2]+"px",height:q[3]+"px"});p.attr({width:q[2],height:q[3]})}if(f.redraw=="img"&&ah.length&&ah.get(0).tagName=="CANVAS"){if(!ah.data("replacing")){ah.data("replacing",true);var a=new Image();a.src=ah.get(0).toDataURL("image/png");a.onload=(function(p,q,o,r){return function(){if(p.data("cancelReplace")){p.data({replacing:false,cancelReplace:false})}else{$(q).data("origCanvas",p);p.data("replacing",false).replaceWith(q);var s=l._setTMPLVars(o,r.wObj,[0,0,aa.width(),aa.height()]);V($(q),$("#"+o),s.absTLWH)}}})(ah,a,O,d)}}else{V(ah,aj,R.absTLWH)}}if(ak){af.b=$.merge([],d.wObj.b)}if(f.redraw!="none"&&f.redraw!="img"&&(ak||b||al)){if(ah.data("replacing")){ah.data("cancelReplace",true)}else{var ai=ah.data("origCanvas");if(ai){ah.replaceWith(ai).data("origCanvas",null);ai.attr({width:R.absTLWH[2],height:R.absTLWH[3]}).css({width:R.absTLWH[2]+"px",height:R.absTLWH[3]+"px"})}}l._drawCanvasOrImage(aj,R)}l.set(af,O);var ab=$('#canvasPages [data-segment="'+O+'"]').not(aj);l._updateDependents(O,P,ab)}}l.set({tlwh:U.tlwh,sc:Q.length,segments:U.segments},U.segmentRoot);l._updateSegmentRoot(U.segmentRoot,U,ae);if(U.ca!="tl"){var P=U.tlwh;if(U.lockTo!=U.segmentRoot){var ag=$("#"+k.get(U.segmentRoot,{returnModel:true}).getPage().id);P=[0,0,ag.width(),ag.height()]}l.resetCache();l._updateDependents(U.segmentRoot,P)}};l._updateSegmentRoot=function(a,b,s){var d=b.tlwh||[0,0,b.wh[0],b.wh[1]];var f=l._getSegmentRootTLWH(a,b,s);if(!j.arraysEqual(b.tlwh,f)||j.isPercentString(f[2])||j.isPercentString(f[3])){var t=$("#canvasPages .active .widgetHolder");var c=[0,0,t.width(),t.height()];var h=l._setTMPLVars(a,b,c);h.tlwh=$.merge([],f);var r=$("#"+a);r.css({top:h.absTLWH[0]+"px",left:h.absTLWH[1]+"px",width:f[2]+"px",height:f[3]+"px"});l._drawCanvasOrImage(r,h)}};l._getSegmentRootTLWH=function(h,a,f){var d;if(f&&f.rootTlwh){d=f.rootTlwh}else{var q=!a.sl||a.sl=="h";var b=q?2:3;d=$.merge([],a.tlwh);if(d[b]=="a"){f=l._enumSegments(a);var c=a.sp?a.sp[q?0:1]:0;var r=a.sp?a.sp[q?3:2]:0;d[b]=f.totalSize+c+r}}return d};l._setSegmentBorder=function(q,a,d){if(!a){a=q.segments||[]}if(a&&a.length>0){var f=a.length-1;var r=q.sl||"h";var h="bs";if(f>0){switch(d){case 0:h=r=="h"?"bls":"bts";break;case f:h=r=="h"?"brs":"bbs";break;default:h="bms";break}}}var c=a[d].wObj;if(!c.hasOwnProperty("bs")){c.bs=c.b}var b=c.b;c.b=$.merge([],c[h]||c.b||[]);return !j.arraysEqual(c.b,b||[])};l._isMultiSegment=function(a){if(a==""){return false}function b(c){var d=k.get(c),f=d&&d.seg;return f&&f.length>0}return b(a)||b($("#"+a).attr("data-segment-root"))};l._addSegment=function(){var a=[];var c=fluid.selection.getSelectionModel().map(function(d){return d.get("id")});var b=$("#"+c.join(", #"));b.each(function(){var B=$(this).attr("id");var E=$(this).attr("data-segment");var F=Boolean(E);if(F&&E!=B){B=E}var d=l.getSegmentRoots($(this));var J=d.attr("id");var h=l.get(J);var A;if(F){A=0;for(var f=h.segments.length;A<f;A++){if(h.segments[A].id==B){A++;break}}}if(h&&h.seg){var G=$("#canvasPages .active");var C=G.find(".widgetHolder");var H=[0,0,C.width(),C.height()];h.sc++;var D=l._setupSegments(h,null,A);if(typeof A=="undefined"){A=D.segments.length-1}var I=D.segments[A];var B=l._createSaveAndDraw(I.wObj,h.lockTo,G,I.pos,C,H,d.attr("id"),true);h.segments.splice(A,0,{id:B,widget:I.wId});l._updateSegments(h,D);a.push(B)}return false});fluid.selection.select(c);return a};l._insertSegmentObj=function(c,a,d,b){c.segments.splice(b,0,{id:a,widget:d.wId});c.sc++;l._updateSegments(c,l._setupSegments(c))};l._getLastSegment=function(b){var a=k.get(b);var c=a&&a.segments;if(c&&c.length>0){return c[c.length-1].id}return false};l.getSegmentsFromSelection=function(b){var a=$([]);$(b).each(function(){var c=$(this);var d=c.attr("data-segment");if(!d&&c.hasClass("segmentRootWidget")){var d=l._getLastSegment(c.attr("id"))}a=a.add($("#"+d))});return a};l._deleteSegment=function(c,a){function f(){var z=$(this);var h=z.attr("data-segment");var C=z.attr("data-segment-root");if(!h){return}var B=k.get(C);if(!B){return}var v=$.extend(true,{},k.get(C));var A=0;for(;A<v.segments.length;A++){if(v.segments[A].id==h){break}}l.remove(h);v.segments.splice(A,1);v.sc--;k.set(C,v);if(v.segments.length==0){l.del($("#"+C));contextMenu.hide();propInspector.resetPropInspector();return}var D=l._setupSegments(v,null,A,true);l._updateSegments(v,D);if($("#"+C).hasClass("ui-selected")){d.push(C)}else{var w=(A>0)?A-1:0;d.push(v.segments[w].id)}}var d=[];var b=a?$("#"+a):l.getSegmentsFromSelection(".ui-selected");b.each(f);fluid.selection.select(d);return false};l._getSegmentPosition=function(d){var b=$(d).attr("id");var c=k.get($(d).attr("data-segment-root"));var a=0;for(var f=c.segments.length;a<f;a++){if(c.segments[a].id==b){break}}return a};m.exports=l},{"./class-storage":33,"./class-widget":37,"./utils":69}],44:[function(t,v,r){var m=t("./lib/underscore");var q=[];var o=q.push;var n=q.slice;var s=q.splice;fluid.Collection=function(b,a){fluid.event.mixinTo(this);a||(a={});if(a.model){this.model=a.model}if(a.comparator!==void 0){this.comparator=a.comparator}this._reset();this.initialize.apply(this,arguments);if(b){this.reset(b,m.extend({silent:true},a))}this.afterInit.apply(this,arguments)};fluid.Collection.prototype.setOptions={add:true,remove:true,merge:false};fluid.Collection.prototype.addOptions={add:true,remove:false};fluid.Collection.prototype.afterInit=function(){};fluid.Collection.prototype.add=function(b,a){return this.set(b,m.extend({merge:false},a,this.addOptions))};fluid.Collection.prototype.set=function(k,M){M=m.defaults({},M,this.setOptions);if(M.parse){k=this.parse(k,M)}if(!m.isArray(k)){k=k?[k]:[]}var J,b,L,f,j,l;var I=M.at;var N=this.comparator&&(I==null)&&M.sort!==false;var H=m.isString(this.comparator)?this.comparator:null;var h=[],c=[],i={};var G=M.add,K=M.merge,d=M.remove;var a=!N&&G&&d?[]:false;for(J=0,b=k.length;J<b;J++){if(!(L=this._prepareModel(f=k[J],M))){continue}if(j=this.get(L)){if(d){i[j.cid]=true}if(K){f=f===L?L.attributes:M._attrs;j.set(f,M);if(N&&!l&&j.hasChanged(H)){l=true}}}else{if(G){h.push(L);L.on("all",this._onModelEvent,this);this._byId[L.cid]=L;if(L.id!=null){this._byId[L.id]=L}}}if(a){a.push(j||L)}delete M._attrs}if(d){for(J=0,b=this.length;J<b;++J){if(!i[(L=this.models[J]).cid]){c.push(L)}}if(c.length){this.remove(c,M)}}if(h.length||(a&&a.length)){if(N){l=true}this.length+=h.length;if(I!=null){s.apply(this.models,[I,0].concat(h))}else{if(a){this.models.length=0}o.apply(this.models,a||h)}}if(l){this.sort({silent:true})}if(M.silent){return this}for(J=0,b=h.length;J<b;J++){(L=h[J]).trigger("add",L,this,M)}if(l||(a&&a.length)){this.trigger("sort",this,M)}if(h.length||c.length){this.trigger("update",this,M)}return this};fluid.Collection.prototype.get=function(a){if(a==null){return void 0}return this._byId[a.id]||this._byId[a.cid]||this._byId[a]};fluid.Collection.prototype.reset=function(b,d){d||(d={});for(var c=0,a=this.models.length;c<a;c++){this._removeReference(this.models[c])}d.previousModels=this.models;this._reset();this.add(b,m.extend({silent:true},d));if(!d.silent){this.trigger("reset",this,d)}return this};fluid.Collection.prototype._reset=function(){this.length=0;this.models=[];this._byId={}};fluid.Collection.prototype._prepareModel=function(b,c){if(b instanceof fluid.Model){if(!b.collection){b.collection=this}return b}c||(c={});c.collection=this;var a=new this.model(b,c);if(!a.validationError){return a}this.trigger("invalid",this,b,c);return false};fluid.Collection.prototype._onModelEvent=function(c,d,b,a){if((c==="add"||c==="remove")&&b!==this){return}if(c==="destroy"){this.remove(d,a)}if(d&&c==="change:"+d.idAttribute){delete this._byId[d.previous(d.idAttribute)];if(d.id!=null){this._byId[d.id]=d}}this.trigger.apply(this,arguments)};fluid.Collection.prototype._removeReference=function(a){if(this===a.collection){delete a.collection}a.off("all",this._onModelEvent,this)};fluid.Collection.prototype.toJSON=function(b){var a={};this.forEach(function(c){a[c.attributes[c.idAttribute]]=c.toJSON(b)});return a};fluid.Collection.prototype.allToJSON=function(b){var a={};this.forEach(function(c){a[c.attributes[c.idAttribute]]=c.allToJSON(b)});return a};var u=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain"];m.each(u,function(a){fluid.Collection.prototype[a]=function(){var b=n.call(arguments);b.unshift(this.models);return m[a].apply(m,b)}});fluid.Collection.prototype.remove=function(b,d){b=m.isArray(b)?b.slice():[b];d||(d={});var c,a,f,h;for(c=0,a=b.length;c<a;c++){h=this.get(b[c]);if(!h){continue}delete this._byId[h.id];delete this._byId[h.cid];f=this.indexOf(h);this.models.splice(f,1);this.length--;if(!d.silent){d.index=f;h.trigger("remove",h,this,d)}this._removeReference(h);this.trigger("remove",h,this,d)}return this};fluid.Collection.prototype.where=function(a,b){if(m.isEmpty(a)){return b?void 0:[]}return this[b?"find":"filter"](function(d){for(var c in a){if(a[c]!==d.get(c)){return false}}return true})};fluid.Collection.prototype.at=function(a){if(a<0){a+=this.length}return this.models[a]};fluid.Collection.prototype.clone=function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})};var p=function(a,d){var f=this;var b;if(a&&m.has(a,"constructor")){b=a.constructor}else{b=function(){return f.apply(this,arguments)}}m.extend(b,f,d);var c=function(){this.constructor=b};c.prototype=f.prototype;b.prototype=new c;if(a){m.extend(b.prototype,a)}b.__super__=f.prototype;return b};fluid.Collection.extend=p;v.exports=fluid.Collection},{"./lib/underscore":54}],45:[function(d,h,f){fluid.command=fluid.command||{};fluid.command.history=fluid.command.history||{};fluid.command.helper=fluid.command.helper||{};(function(a){var k={};function c(j,i){return(j in k)&&k[j][i]||undefined}function b(i,j){this.name=i;this.context=$.isPlainObject(j)?j:{}}b.prototype.dispatchTo=function(n,i){if(typeof i=="undefined"){var j=c(n,this.name);i=j&&"revert" in j}l(n,this,"execute",i)};b.prototype.dispatchReverseTo=function(i){l(i,this,"revert",false)};function l(j,z,A,w){var v=c(j,z.name);if(!v){return}if(A in v){try{var D=v[A].call(v,z.context)}catch(i){if("message" in i){var B=(i.sourceURL||i.fileName)&&(" at "+(i.sourceURL||i.fileName))||"";var E=B&&(i.line||i.lineNumber)&&(":"+(i.line||i.lineNumber))||"";var F=i.stack&&("\nStack:\n\t"+i.stack.replace(/\n/g,"\n\t"));var C='"'+i.message+'"'+B+E+F}else{var C=$.isPlainObject(i)?JSON.stringify(i):i}throw new Error(j+":"+z.name+":"+A+": "+C)}if(D===false){a.history.remove()}}else{}if(w){a.history.add(z,j)}}a.create=function(i,j){return new b(i,j)};a.registerHandler=function(n,j,i){if(n&&j&&i){if($.isFunction(i)){i={execute:i}}if("execute" in i){(k[n]||(k[n]={}))[j]=i}}}})(fluid.command);(function(a){var p=100;var c=[{}];var b=1;var m=0;function n(j,i,k){this.command=j;this.receiverName=i;this.branchId=k;this.timestamp=new Date().getTime();this.user=fluid.main.account.get("id");this.synced=false}function o(){m++;return m}a.add=function(j,i){if(b<c.length){c.splice(b)}c.push(new n(j,i,m));if(c.length>p){c.shift();a.fire("")}else{b++}a.fire("add")};a.remove=function(){if(c.length>1){b--;c.splice(b,1)}};a.canUndo=function(){return b>2};a.undo=function(j){if(!a.canUndo()){return}var i=c[--b];i.command.dispatchReverseTo(i.receiverName);if(j!==false){a.fire("undo",a.currentPosition())}};a.canRedo=function(){return b<c.length};a.redo=function(j){if(!a.canRedo()){return}var i=c[b++];i.command.dispatchTo(i.receiverName,false);if(j!==false){a.fire("redo",a.currentPosition())}};a.switchBranch=function(k){k--;if(k>-1){var i=c[b-1];if("branches" in i&&k<i.branches.length){var j=c.splice(b);var l=i.branches.splice(k,1)[0];i.branches.unshift(j);$.merge(c,l);a.fire("branch.switch",l[0].branchId)}}};a.reset=function(){c=[{}];b=1;a.fire("reset")};a.length=function(){return c.length-1};a.currentPosition=function(){return b-c.length};fluid.event.mixinTo(a);a.traverse=function(z){var A=true;var w={point:c[0],branch:0,parentBranch:[],stop:function(){A=false}};var i=[];var v=c;var k=1;while(A){if(k<v.length){if(w.point&&"branches" in w.point){i.push({parent:v,pointIndex:k-1,branches:w.point.branches,branchIndex:0});w.parentBranch=v}w.point=v[k++];w.offset=1;if("next" in z){z.next.call(null,w)}}else{var j=true,B=false;w.offset=0;k--;while(j){if(k>0){w.point=v[--k];w.offset--}if(i.length==0){A=j=false;w.offset-=k-1;B=true}else{if(k==0||("branches" in w.point)){var l=i[i.length-1];if(!("branches" in w.point)){w.offset--}if(l.branchIndex<l.branches.length){v=l.branches[l.branchIndex++];w.branch=l.branchIndex;w.point=null;k=0;j=false}else{i.pop();v=l.parent;k=l.pointIndex}B=true}}if(B&&"back" in z){z.back.call(null,w);w.offset=0;B=false}}}}}})(fluid.command.history);(function(a){a.createEventHandler=function(j,c,b){return function(i){var l=$.extend({},b||{});l.event=i;fluid.command.create(c,l).dispatchTo(j)}}})(fluid.command.helper);h.exports=fluid.command},{}],46:[function(f,i,h){var j=f("./fluid.module");j.define("fluid.event",function(a){a.mixinTo=function(d){var c={};var n=typeof d=="object";function m(q,l){var q=q.split(/,\s*|\s+/);for(var r=0,k=q.length;r<k;r++){l.call(d,q[r])}}d.bind=d.on=function(l,p,k){m(l,function(o){var r=c[o]||(c[o]=[]);if(b(r,p)==-1){r.push({h:p,c:k||this,evtName:o})}});return this};d.unbind=d.off=function(l,k){m(l,function(r){var s=c[r];if(s){var t=b(s,k);if(t>-1){s.splice(t,1)}}});return this};d.trigger=d.fire=function(){var u,v=arguments[0],w=c[v],l=c.all;if(w){u=Array.prototype.slice.call(arguments,1);if(n){u.unshift(this)}for(var z=0,k=w.length;z<k;z++){var t=w[z];if(t&&t.h.apply(t.c,u)===false){return false}}if(n){u.shift()}}if(l){for(z=0,k=l.length;z<k;z++){var t=l[z];if(t.h.apply(t.c,arguments)===false){return false}}}return true}};function b(d,c){for(var m=0,n=d.length;m<n;m++){if(d[m].h===c){return m}}return -1}})},{"./fluid.module":50}],47:[function(f,i,h){var j=f("./fluid.module");j.define("fluid.i18n",function(d){var b=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function c(u,v){var q=u.toString();var t="";if(!v||q.length<v){for(var r=0,s=v-q.length;r<s;r++){t+="0"}}return t+q}function a(l){if(typeof l=="number"){return new Date(l)}else{return l||new Date(0)}}d.formatDate=function(o){o=a(o);var p=o.getDate()+" "+b[o.getMonth()];var n=o.getFullYear();if(n!=new Date().getFullYear()){p+=", "+n}return p};d.formatTime=function(l){l=a(l);return l.getHours()+":"+c(l.getMinutes(),2)};d.formatDateTime=function(l){l=a(l);return d.formatDate(l)+", "+d.formatTime(l)};d.formatDateTimeRelative=function(o){o=a(o);var q;var p=new Date();var r=Math.floor((p.getTime()-o.getTime())/1000);if(r<60){q="just now"}else{if(r<120){q="a minute ago"}else{if(r<600){q=Math.floor(r/60).toString()+" minutes ago"}else{if(p.getDate()==o.getDate()){q="at "+d.formatTime(o)}else{if(p.getDate()-1==o.getDate()){q="yesterday, "+d.formatTime(o)}else{if(r<604800){q=d.formatDateTime(o)}else{q=d.formatDate(o)}}}}}}return q}});i.exports=fluid.i18n},{"./fluid.module":50}],48:[function(h,k,i){var l=h("./fluid.module");var j=h("./fluid.event");l.define("fluid.main",function(a){fluid.event.mixinTo(a);a.listProjects=function(){if(!fluid.main.projects.length){console.info("no projects found...")}fluid.main.projects.each(function(d,f,b){var o=d.get("pages"),c=d.get("unloaded"),p=d.get("id");if(p===fluid.main.project.get("id")){console.info(f,d.get("id"),c?"unloaded":"loaded",(o&&o.length)?o.length:0,d.toJSON({getAll:true}),fluid.main.project==d)}else{console.log(f,d.get("id"),c?"unloaded":"loaded",(o&&o.length)?o.length:0,d.toJSON({getAll:true}))}})}});k.exports=fluid.main},{"./fluid.event":46,"./fluid.module":50}],49:[function(w,z,u){var p=w("./fluid.module");var n=w("./lib/underscore");var t=[];var r=t.push;var o=t.slice;var v=t.splice;fluid.Model=function(c,a){fluid.event.mixinTo(this);var b=c||{};a||(a={});this.cid=n.uniqueId("c");this.attributes={};if(a.collection){this.collection=a.collection}if(a.parse){b=this.parse(b,a)||{}}if(defaults=n.result(this,"defaults")){b=n.defaults({},b,defaults)}this.set(b,a);this.initialize.apply(this,arguments)};fluid.Model.prototype.idAttribute="id";fluid.Model.prototype.attrBlackList=[];fluid.Model.prototype.parse=function(a,b){return a};fluid.Model.prototype.toJSON=function(a){if(a&&a.getAll){return n.clone(this.attributes)}return n.omit(this.attributes,this.attrBlackList)};fluid.Model.prototype.allToJSON=function(a){return n.clone(this.attributes)};fluid.Model.prototype._validate=function(a,b){return true};fluid.Model.prototype.get=function(a){return this.attributes[a]},fluid.Model.prototype.set=function(l,i,d){var C,k,j,m,D,h,c,a;if(l==null){return this}if(typeof l==="object"){k=l;d=i}else{(k={})[l]=i}d||(d={});if(!this._validate(k,d)){return false}j=d.unset;D=d.silent;m=[];h=this._changing;this._changing=true;if(!h){this._previousAttributes=n.clone(this.attributes);this.changed={}}a=this.attributes,c=this._previousAttributes;if(this.idAttribute in k){this.id=k[this.idAttribute]}for(C in k){i=k[C];if(!n.isEqual(a[C],i)){m.push(C)}if(!n.isEqual(c[C],i)){this.changed[C]=i}else{delete this.changed[C]}j?delete a[C]:a[C]=i}if(!D){if(m.length){this._pending=true}for(var b=0,f=m.length;b<f;b++){this.trigger("change:"+m[b],this,a[m[b]],d)}}if(h){return this}if(!D){while(this._pending){this._pending=false;this.trigger("change",this,d)}}this._pending=false;this._changing=false;return this};fluid.Model.prototype.unset=function(b,a){return this.set(b,void 0,n.extend({},a,{unset:true}))};fluid.Model.prototype.hasChanged=function(a){if(a==null){return !n.isEmpty(this.changed)}return n.has(this.changed,a)};fluid.Model.prototype.changedAttributes=function(c){if(!c){return this.hasChanged()?n.clone(this.changed):false}var a,b=false;var d=this._changing?this._previousAttributes:this.attributes;for(var f in c){if(n.isEqual(d[f],(a=c[f]))){continue}(b||(b={}))[f]=a}return b};fluid.Model.prototype.previous=function(a){if(a==null||!this._previousAttributes){return null}return this._previousAttributes[a]};fluid.Model.prototype.previousAttributes=function(){return n.clone(this._previousAttributes)};var q=["keys","values","pairs","invert","pick","omit"];n.each(q,function(a){fluid.Model.prototype[a]=function(){var b=o.call(arguments);b.unshift(this.attributes);return n[a].apply(n,b)}});var s=function(f,c){var d=this;var a;if(f&&n.has(f,"constructor")){a=f.constructor}else{a=function(){return d.apply(this,arguments)}}n.extend(a,d,c);var b=function(){this.constructor=a};b.prototype=d.prototype;a.prototype=new b;if(f){n.extend(a.prototype,f)}a.__super__=d.prototype;return a};fluid.Model.extend=s;z.exports=fluid.Model;p.define("fluid.model",function(b){var d={storage:window.storage};var a="fluid.models";var c={};c.store=function(f){f=f||this.id;if(f){d.storage.set(f,this);this.trigger("change")}return this};c.fetch=function(f){f=f||this.id;var i=d.storage.get(f);if(i){for(var h in i){this[h]=i[h]}}return this};c.remove=function(f){f=f||this.id;d.storage.remove(f);return this};c.validate=function(){};fluid.event.mixinTo(c);b.define=function(f,h){if(!h){h=function(){}}h.prototype=c;p.define(a)[f]=h;h.fetch=function(i){return new h().fetch(i)};h.remove=function(i){h.prototype.remove.call(null,i)};fluid.event.mixinTo(h)}})},{"./fluid.module":50,"./lib/underscore":54}],50:[function(f,i,h){var j={};j.define=function(d,o,a){var r;if(d){var c=d.split(".");r=window;for(var p=0,q=c.length;p<q;p++){var b=c[p];r=r[b]||(r[b]={})}}if(o){o.call(a,r)}return r};j.resolve=function(c){var a;if(c){var b=c.split(".");a=window;for(var d=0,l=b.length;d<l;d++){a=a[b[d]];if(!a){break}}}return a};i.exports=j},{}],51:[function(h,k,i){var l=h("./fluid.module");var j=h("./lib/mustache");l.define("fluid.util",function(a){a.tpl=function(b,c){var d=this.tpl;if(d.templates[b]){return d.templates[b](c)}else{return"<!-- template not found -->"}};a.tpl.templates={};$('[type="text/x-underscore"]').each(function(d,c){var f=$(c);var b=f.html().trim();var o=f.attr("id");if(typeof o==="string"&&o.length){a.tpl.templates[o]=j.compile(b)}})})},{"./fluid.module":50,"./lib/mustache":53}],52:[function(f,i,h){var j=f("./fluid.module");j.define("fluid.util",function(a){a.debounce=function(c,d){var b;return function(){var m=new Date().getTime();var n;if(!b||m-b>d){n=c.apply(this,arguments);b=m}return n||false}};a.dataUrlToBlob=function(d,n){var b=atob(d.split(",")[1]),c=[];for(var o=0;o<b.length;o++){c.push(b.charCodeAt(o))}return new Blob([new Uint8Array(c)],n)};a.resizeImage=function(t,z,c,r,s,d,u){var v=document.createElement("canvas"),b=v.getContext("2d");v.width=z;v.height=c;if(typeof t==="string"){var w=document.createElement("img");w.src=t;t=w}if(t instanceof Element){if(typeof r==="number"&&typeof s==="number"){b.drawImage(t,r,s,d,u,0,0,z,c)}else{b.drawImage(t,0,0,z,c)}return v.toDataURL()}};a.getGravatarHash=function(b){return a.md5(b.toLowerCase().trim())};a.md5=function(m){function E(F,k){return(F<<k)|(F>>>(32-k))}function C(k,H){var G,Z,ae,F,I;ae=(k&2147483648);F=(H&2147483648);G=(k&1073741824);Z=(H&1073741824);I=(k&1073741823)+(H&1073741823);if(G&Z){return(I^2147483648^ae^F)}if(G|Z){if(I&1073741824){return(I^3221225472^ae^F)}else{return(I^1073741824^ae^F)}}else{return(I^ae^F)}}function l(k,F,G){return(k&F)|((~k)&G)}function d(k,F,G){return(k&G)|(F&(~G))}function c(k,F,G){return(k^F^G)}function ab(k,F,G){return(F^(k|(~G)))}function o(F,k,Z,ae,I,G,H){F=C(F,C(C(l(k,Z,ae),I),H));return C(E(F,G),k)}function T(F,k,Z,ae,I,G,H){F=C(F,C(C(d(k,Z,ae),I),H));return C(E(F,G),k)}function w(F,k,Z,ae,I,G,H){F=C(F,C(C(c(k,Z,ae),I),H));return C(E(F,G),k)}function n(F,k,Z,ae,I,G,H){F=C(F,C(C(ab(k,Z,ae),I),H));return C(E(F,G),k)}function S(F){var af;var k=F.length;var I=k+8;var ae=(I-(I%64))/64;var H=(ae+1)*16;var ag=Array(H-1);var Z=0;var G=0;while(G<k){af=(G-(G%4))/4;Z=(G%4)*8;ag[af]=(ag[af]|(F.charCodeAt(G)<<Z));G++}af=(G-(G%4))/4;Z=(G%4)*8;ag[af]=ag[af]|(128<<Z);ag[H-2]=k<<3;ag[H-1]=k>>>29;return ag}function u(I){var H="",F="",G,k;for(k=0;k<=3;k++){G=(I>>>(k*8))&255;F="0"+G.toString(16);H=H+F.substr(F.length-2,2)}return H}function B(G){G=G.replace(/rn/g,"n");var k="";for(var F=0;F<G.length;F++){var H=G.charCodeAt(F);if(H<128){k+=String.fromCharCode(H)}else{if((H>127)&&(H<2048)){k+=String.fromCharCode((H>>6)|192);k+=String.fromCharCode((H&63)|128)}else{k+=String.fromCharCode((H>>12)|224);k+=String.fromCharCode(((H>>6)&63)|128);k+=String.fromCharCode((H&63)|128)}}}return k}var v=Array();var O,V,z,p,U,ad,L,J,D;var R=7,P=12,M=17,K=22;var t=5,s=9,r=14,q=20;var ac=4,aa=11,Y=16,X=23;var A=6,b=10,Q=15,N=21;m=B(m);v=S(m);ad=1732584193;L=4023233417;J=2562383102;D=271733878;for(O=0;O<v.length;O+=16){V=ad;z=L;p=J;U=D;ad=o(ad,L,J,D,v[O+0],R,3614090360);D=o(D,ad,L,J,v[O+1],P,3905402710);J=o(J,D,ad,L,v[O+2],M,606105819);L=o(L,J,D,ad,v[O+3],K,3250441966);ad=o(ad,L,J,D,v[O+4],R,4118548399);D=o(D,ad,L,J,v[O+5],P,1200080426);J=o(J,D,ad,L,v[O+6],M,2821735955);L=o(L,J,D,ad,v[O+7],K,4249261313);ad=o(ad,L,J,D,v[O+8],R,1770035416);D=o(D,ad,L,J,v[O+9],P,2336552879);J=o(J,D,ad,L,v[O+10],M,4294925233);L=o(L,J,D,ad,v[O+11],K,2304563134);ad=o(ad,L,J,D,v[O+12],R,1804603682);D=o(D,ad,L,J,v[O+13],P,4254626195);J=o(J,D,ad,L,v[O+14],M,2792965006);L=o(L,J,D,ad,v[O+15],K,1236535329);ad=T(ad,L,J,D,v[O+1],t,4129170786);D=T(D,ad,L,J,v[O+6],s,3225465664);J=T(J,D,ad,L,v[O+11],r,643717713);L=T(L,J,D,ad,v[O+0],q,3921069994);ad=T(ad,L,J,D,v[O+5],t,3593408605);D=T(D,ad,L,J,v[O+10],s,38016083);J=T(J,D,ad,L,v[O+15],r,3634488961);L=T(L,J,D,ad,v[O+4],q,3889429448);ad=T(ad,L,J,D,v[O+9],t,568446438);D=T(D,ad,L,J,v[O+14],s,3275163606);J=T(J,D,ad,L,v[O+3],r,4107603335);L=T(L,J,D,ad,v[O+8],q,1163531501);ad=T(ad,L,J,D,v[O+13],t,2850285829);D=T(D,ad,L,J,v[O+2],s,4243563512);J=T(J,D,ad,L,v[O+7],r,1735328473);L=T(L,J,D,ad,v[O+12],q,2368359562);ad=w(ad,L,J,D,v[O+5],ac,4294588738);D=w(D,ad,L,J,v[O+8],aa,2272392833);J=w(J,D,ad,L,v[O+11],Y,1839030562);L=w(L,J,D,ad,v[O+14],X,4259657740);ad=w(ad,L,J,D,v[O+1],ac,2763975236);D=w(D,ad,L,J,v[O+4],aa,1272893353);J=w(J,D,ad,L,v[O+7],Y,4139469664);L=w(L,J,D,ad,v[O+10],X,3200236656);ad=w(ad,L,J,D,v[O+13],ac,681279174);D=w(D,ad,L,J,v[O+0],aa,3936430074);J=w(J,D,ad,L,v[O+3],Y,3572445317);L=w(L,J,D,ad,v[O+6],X,76029189);ad=w(ad,L,J,D,v[O+9],ac,3654602809);D=w(D,ad,L,J,v[O+12],aa,3873151461);J=w(J,D,ad,L,v[O+15],Y,530742520);L=w(L,J,D,ad,v[O+2],X,3299628645);ad=n(ad,L,J,D,v[O+0],A,4096336452);D=n(D,ad,L,J,v[O+7],b,1126891415);J=n(J,D,ad,L,v[O+14],Q,2878612391);L=n(L,J,D,ad,v[O+5],N,4237533241);ad=n(ad,L,J,D,v[O+12],A,1700485571);D=n(D,ad,L,J,v[O+3],b,2399980690);J=n(J,D,ad,L,v[O+10],Q,4293915773);L=n(L,J,D,ad,v[O+1],N,2240044497);ad=n(ad,L,J,D,v[O+8],A,1873313359);D=n(D,ad,L,J,v[O+15],b,4264355552);J=n(J,D,ad,L,v[O+6],Q,2734768916);L=n(L,J,D,ad,v[O+13],N,1309151649);ad=n(ad,L,J,D,v[O+4],A,4149444226);D=n(D,ad,L,J,v[O+11],b,3174756917);J=n(J,D,ad,L,v[O+2],Q,718787259);L=n(L,J,D,ad,v[O+9],N,3951481745);ad=C(ad,V);L=C(L,z);J=C(J,p);D=C(D,U)}var W=u(ad)+u(L)+u(J)+u(D);return W.toLowerCase()};a._=window._})},{"./fluid.module":50}],53:[function(f,i,h){var j=f("../fluid.module");
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
;j.define("fluid.util",function(a){(function(d,c){if(typeof h==="object"&&h){c(h)}else{var b={};c(b);if(typeof define==="function"&&define.amd){define(b)}else{d.Mustache=b}}}(a,function(ad){var Y=/\s*/;var N=/\s+/;var R=/\S/;var V=/\s*=/;var J=/\s*\}/;var P=/#|\^|\/|>|\{|&|=|!/;var X=RegExp.prototype.test;function Q(k,l){return X.call(k,l)}function W(k){return !Q(R,k)}var K=Object.prototype.toString;var O=Array.isArray||function(k){return K.call(k)==="[object Array]"};function ac(k){return typeof k==="function"}function Z(k){return k.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var aa={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function L(k){return String(k).replace(/[&<>"'\/]/g,function(l){return aa[l]})}function M(k){this.string=k;this.tail=k;this.pos=0}M.prototype.eos=function(){return this.tail===""};M.prototype.scan=function(k){var l=this.tail.match(k);if(l&&l.index===0){var m=l[0];this.tail=this.tail.substring(m.length);this.pos+=m.length;return m}return""};M.prototype.scanUntil=function(k){var l=this.tail.search(k),m;switch(l){case -1:m=this.tail;this.tail="";break;case 0:m="";break;default:m=this.tail.substring(0,l);this.tail=this.tail.substring(l)}this.pos+=m.length;return m};function T(l,k){this.view=l==null?{}:l;this.parent=k;this._cache={".":this.view}}T.make=function(k){return(k instanceof T)?k:new T(k)};T.prototype.push=function(k){return new T(k,this)};T.prototype.lookup=function(n){var k;if(n in this._cache){k=this._cache[n]}else{var l=this;while(l){if(n.indexOf(".")>0){k=l.view;var o=n.split("."),m=0;while(k!=null&&m<o.length){k=k[o[m++]]}}else{k=l.view[n]}if(k!=null){break}l=l.parent}this._cache[n]=k}if(ac(k)){k=k.call(this.view)}return k};function b(){this.clearCache()}b.prototype.clearCache=function(){this._cache={};this._partialCache={}};b.prototype.compile=function(l,n){var m=this._cache[l];if(!m){var k=ad.parse(l,n);m=this._cache[l]=this.compileTokens(k,l)}return m};b.prototype.compilePartial=function(m,k,n){var l=this.compile(k,n);this._partialCache[m]=l;return l};b.prototype.getPartial=function(k){if(!(k in this._partialCache)&&this._loadPartial){this.compilePartial(k,this._loadPartial(k))}return this._partialCache[k]};b.prototype.compileTokens=function(k,l){var m=this;return function(n,o){if(o){if(ac(o)){m._loadPartial=o}else{for(var p in o){m.compilePartial(p,o[p])}}}return d(k,m,T.make(n),l)}};b.prototype.render=function(k,m,l){return this.compile(k)(m,l)};function d(p,v,z,m){var s="";function w(A){return v.render(A,z)}var u,o,n;for(var r=0,q=p.length;r<q;++r){u=p[r];o=u[1];switch(u[0]){case"#":n=z.lookup(o);if(typeof n==="object"||typeof n==="string"){if(O(n)){for(var t=0,k=n.length;t<k;++t){s+=d(u[4],v,z.push(n[t]),m)}}else{if(n){s+=d(u[4],v,z.push(n),m)}}}else{if(ac(n)){var l=m==null?null:m.slice(u[3],u[5]);n=n.call(z.view,l,w);if(n!=null){s+=n}}else{if(n){s+=d(u[4],v,z,m)}}}break;case"^":n=z.lookup(o);if(!n||(O(n)&&n.length===0)){s+=d(u[4],v,z,m)}break;case">":n=v.getPartial(o);if(ac(n)){s+=n(z)}break;case"&":n=z.lookup(o);if(n!=null){s+=n}break;case"name":n=z.lookup(o);if(n!=null){s+=ad.escape(n)}break;case"text":s+=o;break}}return s}function c(p){var m=[];var q=m;var o=[];var k;for(var l=0,n=p.length;l<n;++l){k=p[l];switch(k[0]){case"#":case"^":o.push(k);q.push(k);q=k[4]=[];break;case"/":var r=o.pop();r[5]=k[2];q=o.length>0?o[o.length-1][4]:m;break;default:q.push(k)}}return m}function ab(o){var l=[];var p,m;for(var k=0,n=o.length;k<n;++k){p=o[k];if(p){if(p[0]==="text"&&m&&m[0]==="text"){m[1]+=p[1];m[3]=p[3]}else{m=p;l.push(p)}}}return l}function U(k){return[new RegExp(Z(k[0])+"\\s*"),new RegExp("\\s*"+Z(k[1]))]}function I(l,v){l=l||"";v=v||ad.tags;if(typeof v==="string"){v=v.split(N)}if(v.length!==2){throw new Error("Invalid tags: "+v.join(", "))}var r=U(v);var B=new M(l);var t=[];var u=[];var w=[];var k=false;var m=false;function n(){if(k&&!m){while(w.length){delete u[w.pop()]}}else{w=[]}k=false;m=false}var A,C,s,q,z,D;while(!B.eos()){A=B.pos;s=B.scanUntil(r[0]);if(s){for(var p=0,o=s.length;p<o;++p){q=s.charAt(p);if(W(q)){w.push(u.length)}else{m=true}u.push(["text",q,A,A+1]);A+=1;if(q=="\n"){n()}}}if(!B.scan(r[0])){break}k=true;C=B.scan(P)||"name";B.scan(Y);if(C==="="){s=B.scanUntil(V);B.scan(V);B.scanUntil(r[1])}else{if(C==="{"){s=B.scanUntil(new RegExp("\\s*"+Z("}"+v[1])));B.scan(J);B.scanUntil(r[1]);C="&"}else{s=B.scanUntil(r[1])}}if(!B.scan(r[1])){throw new Error("Unclosed tag at "+B.pos)}z=[C,s,A,B.pos];u.push(z);if(C==="#"||C==="^"){t.push(z)}else{if(C==="/"){D=t.pop();if(!D){throw new Error('Unopened section "'+s+'" at '+A)}if(D[1]!==s){throw new Error('Unclosed section "'+D[1]+'" at '+A)}}else{if(C==="name"||C==="{"||C==="&"){m=true}else{if(C==="="){v=s.split(N);if(v.length!==2){throw new Error("Invalid tags at "+A+": "+v.join(", "))}r=U(v)}}}}}D=t.pop();if(D){throw new Error('Unclosed section "'+D[1]+'" at '+B.pos)}return c(ab(u))}ad.name="mustache.js";ad.version="0.7.3";ad.tags=["{{","}}"];ad.Scanner=M;ad.Context=T;ad.Writer=b;ad.parse=I;ad.escape=L;var S=new b();ad.clearCache=function(){return S.clearCache()};ad.compile=function(k,l){return S.compile(k,l)};ad.compilePartial=function(l,k,m){return S.compilePartial(l,k,m)};ad.compileTokens=function(k,l){return S.compileTokens(k,l)};ad.render=function(k,m,l){return S.render(k,m,l)};ad.to_html=function(k,m,l,o){var n=ad.render(k,m,l);if(ac(o)){o(n)}else{return n}}}))})},{"../fluid.module":50}],54:[function(d,h,f){(function(){var N=this,ak=N._,ah={},q=Array.prototype,al=Object.prototype,w=Function.prototype,l=q.push,R=q.slice,o=q.concat,F=al.toString,s=al.hasOwnProperty,ai=q.forEach,T=q.map,v=q.reduce,am=q.reduceRight,p=q.filter,u=q.every,M=q.some,c=q.indexOf,n=q.lastIndexOf,b=Array.isArray,i=Object.keys,A=w.bind,a=function(z){return z instanceof a?z:this instanceof a?(this._wrapped=z,void 0):new a(z)};"undefined"!=typeof f?("undefined"!=typeof h&&h.exports&&(f=h.exports=a),f._=a):N._=a,a.VERSION="1.4.4";var j=a.each=a.forEach=function(z,G,C){if(null!=z){if(ai&&z.forEach===ai){z.forEach(G,C)}else{if(z.length===+z.length){for(var J=0,H=z.length;H>J;J++){if(G.call(C,z[J],J,z)===ah){return}}}else{for(var K in z){if(a.has(z,K)&&G.call(C,z[K],K,z)===ah){return}}}}}};a.map=a.collect=function(z,H,G){var C=[];return null==z?C:T&&z.map===T?z.map(H,G):(j(z,function(J,L,K){C[C.length]=H.call(G,J,L,K)}),C)};var O="Reduce of empty array with no initial value";a.reduce=a.foldl=a.inject=function(z,H,G,C){var J=arguments.length>2;if(null==z&&(z=[]),v&&z.reduce===v){return C&&(H=a.bind(H,C)),J?z.reduce(H,G):z.reduce(H)}if(j(z,function(K,L,P){J?G=H.call(C,G,K,L,P):(G=K,J=!0)}),!J){throw new TypeError(O)}return G},a.reduceRight=a.foldr=function(z,H,G,C){var K=arguments.length>2;if(null==z&&(z=[]),am&&z.reduceRight===am){return C&&(H=a.bind(H,C)),K?z.reduceRight(H,G):z.reduceRight(H)}var J=z.length;if(J!==+J){var L=a.keys(z);J=L.length}if(j(z,function(U,Q,P){Q=L?L[--J]:--J,K?G=H.call(C,G,z[Q],Q,P):(G=z[Q],K=!0)}),!K){throw new TypeError(O)}return G},a.find=a.detect=function(z,H,G){var C;return r(z,function(J,L,K){return H.call(G,J,L,K)?(C=J,!0):void 0}),C},a.filter=a.select=function(z,H,G){var C=[];return null==z?C:p&&z.filter===p?z.filter(H,G):(j(z,function(J,L,K){H.call(G,J,L,K)&&(C[C.length]=J)}),C)},a.reject=function(z,G,C){return a.filter(z,function(H,J,K){return !G.call(C,H,J,K)},C)},a.every=a.all=function(z,G,C){G||(G=a.identity);var H=!0;return null==z?H:u&&z.every===u?z.every(G,C):(j(z,function(J,K,L){return(H=H&&G.call(C,J,K,L))?void 0:ah}),!!H)};var r=a.some=a.any=function(z,G,C){G||(G=a.identity);var H=!1;return null==z?H:M&&z.some===M?z.some(G,C):(j(z,function(J,K,L){return H||(H=G.call(C,J,K,L))?ah:void 0}),!!H)};a.contains=a.include=function(z,C){return null==z?!1:c&&z.indexOf===c?z.indexOf(C)!=-1:r(z,function(G){return G===C})},a.invoke=function(z,H){var G=R.call(arguments,2),C=a.isFunction(H);return a.map(z,function(J){return(C?H:J[H]).apply(J,G)})},a.pluck=function(z,C){return a.map(z,function(G){return G[C]})},a.where=function(z,G,C){return a.isEmpty(G)?C?null:[]:a[C?"find":"filter"](z,function(H){for(var J in G){if(G[J]!==H[J]){return !1}}return !0})},a.findWhere=function(z,C){return a.where(z,C,!0)},a.max=function(z,H,G){if(!H&&a.isArray(z)&&z[0]===+z[0]&&65535>z.length){return Math.max.apply(Math,z)}if(!H&&a.isEmpty(z)){return -1/0}var C={computed:-1/0,value:-1/0};return j(z,function(J,L,K){var P=H?H.call(G,J,L,K):J;P>=C.computed&&(C={value:J,computed:P})}),C.value},a.min=function(z,H,G){if(!H&&a.isArray(z)&&z[0]===+z[0]&&65535>z.length){return Math.min.apply(Math,z)}if(!H&&a.isEmpty(z)){return 1/0}var C={computed:1/0,value:1/0};return j(z,function(J,L,K){var P=H?H.call(G,J,L,K):J;C.computed>P&&(C={value:J,computed:P})}),C.value},a.shuffle=function(z){var H,G=0,C=[];return j(z,function(J){H=a.random(G++),C[G-1]=C[H],C[H]=J}),C};var D=function(z){return a.isFunction(z)?z:function(C){return C[z]}};a.sortBy=function(z,H,G){var C=D(H);return a.pluck(a.map(z,function(J,K,L){return{value:J,index:K,criteria:C.call(G,J,K,L)}}).sort(function(J,P){var L=J.criteria,K=P.criteria;if(L!==K){if(L>K||L===void 0){return 1}if(K>L||K===void 0){return -1}}return J.index<P.index?-1:1}),"value")};var t=function(z,H,G,C){var K={},J=D(H||a.identity);return j(z,function(L,P){var Q=J.call(G,L,P,z);C(K,Q,L)}),K};a.groupBy=function(z,G,C){return t(z,G,C,function(H,K,J){(a.has(H,K)?H[K]:H[K]=[]).push(J)})},a.countBy=function(z,G,C){return t(z,G,C,function(H,J){a.has(H,J)||(H[J]=0),H[J]++})},a.sortedIndex=function(L,H,G,C){G=null==G?a.identity:D(G);for(var K=G.call(C,H),J=0,P=L.length;P>J;){var z=J+P>>>1;K>G.call(C,L[z])?J=z+1:P=z}return J},a.toArray=function(z){return z?a.isArray(z)?R.call(z):z.length===+z.length?a.map(z,a.identity):a.values(z):[]},a.size=function(z){return null==z?0:z.length===+z.length?z.length:a.keys(z).length},a.first=a.head=a.take=function(z,G,C){return null==z?void 0:null==G||C?z[0]:R.call(z,0,G)},a.initial=function(z,G,C){return R.call(z,0,z.length-(null==G||C?1:G))},a.last=function(z,G,C){return null==z?void 0:null==G||C?z[z.length-1]:R.call(z,Math.max(z.length-G,0))},a.rest=a.tail=a.drop=function(z,G,C){return R.call(z,null==G||C?1:G)},a.compact=function(z){return a.filter(z,a.identity)};var S=function(z,G,C){return j(z,function(H){a.isArray(H)?G?l.apply(C,H):S(H,G,C):C.push(H)}),C};a.flatten=function(z,C){return S(z,C,[])},a.without=function(z){return a.difference(z,R.call(arguments,1))},a.uniq=a.unique=function(z,H,G,C){a.isFunction(H)&&(C=G,G=H,H=!1);var K=G?a.map(z,G,C):z,J=[],L=[];return j(K,function(P,Q){(H?Q&&L[L.length-1]===P:a.contains(L,P))||(L.push(P),J.push(z[Q]))}),J},a.union=function(){return a.uniq(o.apply(q,arguments))},a.intersection=function(z){var C=R.call(arguments,1);return a.filter(a.uniq(z),function(G){return a.every(C,function(H){return a.indexOf(H,G)>=0})})},a.difference=function(z){var C=o.apply(q,R.call(arguments,1));return a.filter(z,function(G){return !a.contains(C,G)})},a.zip=function(){for(var z=R.call(arguments),H=a.max(a.pluck(z,"length")),G=Array(H),C=0;H>C;C++){G[C]=a.pluck(z,""+C)}return G},a.object=function(z,H){if(null==z){return{}}for(var G={},C=0,J=z.length;J>C;C++){H?G[z[C]]=H[C]:G[z[C][0]]=z[C][1]}return G},a.indexOf=function(z,H,G){if(null==z){return -1}var C=0,J=z.length;if(G){if("number"!=typeof G){return C=a.sortedIndex(z,H),z[C]===H?C:-1}C=0>G?Math.max(0,J+G):G}if(c&&z.indexOf===c){return z.indexOf(H,G)}for(;J>C;C++){if(z[C]===H){return C}}return -1},a.lastIndexOf=function(z,H,G){if(null==z){return -1}var C=null!=G;if(n&&z.lastIndexOf===n){return C?z.lastIndexOf(H,G):z.lastIndexOf(H)}for(var J=C?G:z.length;J--;){if(z[J]===H){return J}}return -1},a.range=function(z,H,G){1>=arguments.length&&(H=z||0,z=0),G=arguments[2]||1;for(var C=Math.max(Math.ceil((H-z)/G),0),K=0,J=Array(C);C>K;){J[K++]=z,z+=G}return J},a.bind=function(z,G){if(z.bind===A&&A){return A.apply(z,R.call(arguments,1))}var C=R.call(arguments,2);return function(){return z.apply(G,C.concat(R.call(arguments)))}},a.partial=function(z){var C=R.call(arguments,1);return function(){return z.apply(this,C.concat(R.call(arguments)))}},a.bindAll=function(z){var C=R.call(arguments,1);return 0===C.length&&(C=a.functions(z)),j(C,function(G){z[G]=a.bind(z[G],z)}),z},a.memoize=function(z,G){var C={};return G||(G=a.identity),function(){var H=G.apply(this,arguments);return a.has(C,H)?C[H]:C[H]=z.apply(this,arguments)}},a.delay=function(z,G){var C=R.call(arguments,2);return setTimeout(function(){return z.apply(null,C)},G)},a.defer=function(z){return a.delay.apply(a,[z,1].concat(R.call(arguments,1)))},a.throttle=function(L,H){var G,C,K,J,P=0,z=function(){P=new Date,K=null,J=L.apply(G,C)};return function(){var U=new Date,Q=H-(U-P);return G=this,C=arguments,0>=Q?(clearTimeout(K),K=null,P=U,J=L.apply(G,C)):K||(K=setTimeout(z,Q)),J}},a.debounce=function(z,H,G){var C,J;return function(){var L=this,P=arguments,K=function(){C=null,G||(J=z.apply(L,P))},Q=G&&!C;return clearTimeout(C),C=setTimeout(K,H),Q&&(J=z.apply(L,P)),J}},a.once=function(z){var G,C=!1;return function(){return C?G:(C=!0,G=z.apply(this,arguments),z=null,G)}},a.wrap=function(z,C){return function(){var G=[z];return l.apply(G,arguments),C.apply(this,G)}},a.compose=function(){var z=arguments;return function(){for(var G=arguments,C=z.length-1;C>=0;C--){G=[z[C].apply(this,G)]}return G[0]}},a.after=function(z,C){return 0>=z?C():function(){return 1>--z?C.apply(this,arguments):void 0}},a.keys=i||function(z){if(z!==Object(z)){throw new TypeError("Invalid object")}var G=[];for(var C in z){a.has(z,C)&&(G[G.length]=C)}return G},a.values=function(z){var G=[];for(var C in z){a.has(z,C)&&G.push(z[C])}return G},a.pairs=function(z){var G=[];for(var C in z){a.has(z,C)&&G.push([C,z[C]])}return G},a.invert=function(z){var G={};for(var C in z){a.has(z,C)&&(G[z[C]]=C)}return G},a.functions=a.methods=function(z){var G=[];for(var C in z){a.isFunction(z[C])&&G.push(C)}return G.sort()},a.extend=function(z){return j(R.call(arguments,1),function(G){if(G){for(var C in G){z[C]=G[C]}}}),z},a.pick=function(z){var G={},C=o.apply(q,R.call(arguments,1));return j(C,function(H){H in z&&(G[H]=z[H])}),G},a.omit=function(z){var G={},C=o.apply(q,R.call(arguments,1));for(var H in z){a.contains(C,H)||(G[H]=z[H])}return G},a.defaults=function(z){return j(R.call(arguments,1),function(G){if(G){for(var C in G){null==z[C]&&(z[C]=G[C])}}}),z},a.clone=function(z){return a.isObject(z)?a.isArray(z)?z.slice():a.extend({},z):z},a.tap=function(z,C){return C(z),z};var B=function(L,U,Q,H){if(L===U){return 0!==L||1/L==1/U}if(null==L||null==U){return L===U}L instanceof a&&(L=L._wrapped),U instanceof a&&(U=U._wrapped);var V=F.call(L);if(V!=F.call(U)){return !1}switch(V){case"[object String]":return L==U+"";case"[object Number]":return L!=+L?U!=+U:0==L?1/L==1/U:L==+U;case"[object Date]":case"[object Boolean]":return +L==+U;case"[object RegExp]":return L.source==U.source&&L.global==U.global&&L.multiline==U.multiline&&L.ignoreCase==U.ignoreCase}if("object"!=typeof L||"object"!=typeof U){return !1}for(var K=Q.length;K--;){if(Q[K]==L){return H[K]==U}}Q.push(L),H.push(U);var z=0,P=!0;if("[object Array]"==V){if(z=L.length,P=z==U.length){for(;z--&&(P=B(L[z],U[z],Q,H));){}}}else{var C=L.constructor,J=U.constructor;if(C!==J&&!(a.isFunction(C)&&C instanceof C&&a.isFunction(J)&&J instanceof J)){return !1}for(var G in L){if(a.has(L,G)&&(z++,!(P=a.has(U,G)&&B(L[G],U[G],Q,H)))){break}}if(P){for(G in U){if(a.has(U,G)&&!z--){break}}P=!z}}return Q.pop(),H.pop(),P};a.isEqual=function(z,C){return B(z,C,[],[])},a.isEmpty=function(z){if(null==z){return !0}if(a.isArray(z)||a.isString(z)){return 0===z.length}for(var C in z){if(a.has(z,C)){return !1}}return !0},a.isElement=function(z){return !(!z||1!==z.nodeType)},a.isArray=b||function(z){return"[object Array]"==F.call(z)},a.isObject=function(z){return z===Object(z)},j(["Arguments","Function","String","Number","Date","RegExp"],function(z){a["is"+z]=function(C){return F.call(C)=="[object "+z+"]"}}),a.isArguments(arguments)||(a.isArguments=function(z){return !(!z||!a.has(z,"callee"))}),"function"!=typeof/./&&(a.isFunction=function(z){return"function"==typeof z}),a.isFinite=function(z){return isFinite(z)&&!isNaN(parseFloat(z))},a.isNaN=function(z){return a.isNumber(z)&&z!=+z},a.isBoolean=function(z){return z===!0||z===!1||"[object Boolean]"==F.call(z)},a.isNull=function(z){return null===z},a.isUndefined=function(z){return z===void 0},a.has=function(z,C){return s.call(z,C)},a.noConflict=function(){return N._=ak,this},a.identity=function(z){return z},a.times=function(z,H,G){for(var C=Array(z),J=0;z>J;J++){C[J]=H.call(G,J)}return C},a.random=function(z,C){return null==C&&(C=z,z=0),z+Math.floor(Math.random()*(C-z+1))};var E={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};E.unescape=a.invert(E.escape);var aj={escape:RegExp("["+a.keys(E.escape).join("")+"]","g"),unescape:RegExp("("+a.keys(E.unescape).join("|")+")","g")};a.each(["escape","unescape"],function(z){a[z]=function(C){return null==C?"":(""+C).replace(aj[z],function(G){return E[z][G]})}}),a.result=function(z,G){if(null==z){return null}var C=z[G];return a.isFunction(C)?C.call(z):C},a.mixin=function(z){j(a.functions(z),function(G){var C=a[G]=z[G];a.prototype[G]=function(){var H=[this._wrapped];return l.apply(H,arguments),m.call(this,C.apply(a,H))}})};var I=0;a.uniqueId=function(z){var C=++I+"";return z?z+C:C},a.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var an=/(.)^/,ag={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},k=/\\|'|\r|\n|\t|\u2028|\u2029/g;a.template=function(L,z,Q){var J;Q=a.defaults({},Q,a.templateSettings);var C=RegExp([(Q.escape||an).source,(Q.interpolate||an).source,(Q.evaluate||an).source].join("|")+"|$","g"),K=0,G="__p+='";L.replace(C,function(Y,X,V,W,U){return G+=L.slice(K,U).replace(k,function(Z){return"\\"+ag[Z]}),X&&(G+="'+\n((__t=("+X+"))==null?'':_.escape(__t))+\n'"),V&&(G+="'+\n((__t=("+V+"))==null?'':__t)+\n'"),W&&(G+="';\n"+W+"\n__p+='"),K=U+Y.length,Y}),G+="';\n",Q.variable||(G="with(obj||{}){\n"+G+"}\n"),G="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+G+"return __p;\n";try{J=Function(Q.variable||"obj","_",G)}catch(P){throw P.source=G,P}if(z){return J(z,a)}var H=function(U){return J.call(this,U,a)};return H.source="function("+(Q.variable||"obj")+"){\n"+G+"}",H},a.chain=function(z){return a(z).chain()};var m=function(z){return this._chain?a(z).chain():z};a.mixin(a),j(["pop","push","reverse","shift","sort","splice","unshift"],function(z){var C=q[z];a.prototype[z]=function(){var G=this._wrapped;return C.apply(G,arguments),"shift"!=z&&"splice"!=z||0!==G.length||delete G[0],m.call(this,G)}}),j(["concat","join","slice"],function(z){var C=q[z];a.prototype[z]=function(){return m.call(this,C.apply(this._wrapped,arguments))}}),a.extend(a.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)},{}],55:[function(m,l,i){var n=m("../fluid.model");var k=m("./customWidgets");var j=m("../../class-dbStorage");(function(){fluid.models.Account=fluid.Model.extend({_type:"accountModel",attrBlackList:["accountId"],idAttribute:"accountId",separateParams:["hint","tutorialLevel","billingCompany","billingCountry","billingAddress","billingVAT","gridStatus","gridSpacing","snapToWidget","receiptEmails","emailReceiptEnabled","lastOpenProject","everCreatedPage","everZoomedIntoPage","everAddedWidget","everMadeLink","everUsedPreview","everClosedPreview","upgradePromptCount","everUpgraded","pageLimitPromptClicks","projectLimitPromptClicks","screensExportPromptClicks","screenflowExportPromptClicks","htmlExportPromptClicks","reachedUpgradeSecondSection","proceedBillingButtonClicked","failedUpgradeSecondSection","reachedUpgradeThirdSection","upgradeFrameLoadingTime","editorLoadCountBeforeUpgrade","zoomMode","zoomTo","zoomScroll"],defaults:{email:"New",accType:"New",name:"",recurrance:"never",libraryWidth:423,loggedIn:"no",maxActiveProjects:1,maxPages:10,projectIds:[],uploads:[],lastOpenProject:"",createDate:new Date().getTime(),zoomTo:"100",zoomMode:"Smart",zoomScroll:"ScrollOn"},initialize:function(b,a){this.on("all",this.onChange,this);if(!this.customwidgets){this.customwidgets=new fluid.CustomWidgets(null,{accountModel:this})}},onChange:function(a,b){if(!this.debouncedSave){this.debouncedSave=_.debounce(this.save,50)}if(!this.debouncedSyncUpParams){this.debouncedSyncUpParams=_.debounce(this.syncUpParams,5000)}this.debouncedSave.apply(this,arguments);if(_.keys(_.pick(b.changedAttributes(),b.separateParams)).length!==0){this.debouncedSyncUpParams.apply(this,arguments)}},isForever:function(){if((this.get("loggedIn")==="yes")&&(this.get("accType")==="premium1")){return true}return false},isFree:function(){return this.get("accType")==="Free"},isStandard:function(){return !/^Free$|lite|lite_2$/.test(this.get("accType"))},isPro:function(){return !/^Free$|lite|lite_2|silver$/.test(this.get("accType"))},parse:function(f,c){if(!f){return{}}var a=["a","r","sessionId","settings","objects","intercomUserHash","lastProjectId","upgradeDate","lastPaymentDate","nextPaymentDate","lastPaymentResult"],d=["maxActiveProjects","maxPages"],h,b;h=_.omit(f,a);for(b=0;b<d.length;b++){if(h[d[b]]!==undefined){h[d[b]]=~~h[d[b]]}}return h},bundle:function(){return this.pick(this.separateParams)},save:function(){var a=this.allToJSON();var b={id:this.get("accountId"),data:a};j.set("accounts",b)},syncUpParams:function(){fluid.main.fire("accountParamsChanged")},findUpload:function(a){var b;var d=this.get("uploads");for(var c=0;c<d.length;c++){if(a==d[c].id){b={index:c,upload:d[c]};break}}return b}})})()},{"../../class-dbStorage":8,"../fluid.model":49,"./customWidgets":56}],56:[function(j,i,h){var f=j("../fluid.model");if(!fluid.models){fluid.models={}}fluid.models.CustomWidgets=fluid.Model.extend({attrBlackList:[],initialize:function(b,a){}});fluid.CustomWidgets=fluid.Collection.extend({model:fluid.models.CustomWidgets,initialize:function(a,b){this.accountModel=b.accountModel}});i.exports=fluid.CustomWidgets},{"../fluid.model":49}],57:[function(d,h,f){if(!fluid.models){fluid.models={}}fluid.models.Link=fluid.Model.extend({idAttribute:"linkCanvId",initialize:function(b,a){},parse:function(a,b){return a}});fluid.Links=fluid.Collection.extend({model:fluid.models.Link,linkProps:["linkCanvId","linkDest","linkOrigin","linkType","transType","triggerType"],initialize:function(a,b){},toJSON:function(b){var i={};for(var a=0,c=this.linkProps.length;a<c;a++){i[this.linkProps[a]]=[]}this.forEach(function(j){for(var o=0,l=this.linkProps.length;o<l;o++){i[this.linkProps[o]].push(j.attributes[this.linkProps[o]])}},this);return i},deserialize:function(a){var l=(typeof a==="string")?JSON.parse(a):a;var b=[],i,c,r,s,j,t;for(r=0,t=l.linkCanvId.length;r<t;r++){i={};for(s=0,j=this.linkProps.length;s<j;s++){i[this.linkProps[s]]=l[this.linkProps[s]][r]}b.push(i)}this.set(b,{merge:true})}})},{}],58:[function(d,h,f){if(!fluid.models){fluid.models={}}(function(){fluid.models.Page=fluid.Model.extend({attrBlackList:["id","box","imgData"],omitedRedrawAttrs:["x","y","imgData"],initialize:function(b,a){this.on("change:x change:y change:width change:height",function(){this.clearBox()},this);this.on("change",function(l,m){var n=this.changedAttributes(),c;n=_.keys(n);c=_.difference(n,this.omitedRedrawAttrs);if(c.length>0){this.clearImgData()}},this);fluid.main.on("resolutionChanged",function(){if(!fluid.main.project.widgets.get(this.get("id"))){return}this.clearBox();this.clearImgData();var c=this.get("widgets");fluid.main.project.widgets.each(function(j){if(c.indexOf(j.get("id"))!==-1){j.clearBox()}})},this)},clearImgData:function(){this.set({imgData:null})},clearBox:function(){this.set({box:null},{silent:true})},getBox:function(){var a=this.get("box");if(a){return a}else{a=[this.get("x"),this.get("y"),this.get("width"),this.get("height")];this.set({box:a},{silent:true});return a}}});fluid.Pages=fluid.Collection.extend({model:fluid.models.Page,initialize:function(a,b){this.projectModel=b.projectModel}})})()},{}],59:[function(t,u,s){var r=t("../fluid.model");var q=t("../fluid.collection");var o=t("./page");var p=t("./widget");var v=t("./widgetGroup");var n=t("./link");var m=t("../../class-dbStorage");if(!fluid.models){fluid.models={}}fluid.models.project=fluid.Model.extend({attrBlackList:["visiblePages","uniqueUploads"],silentSyncAttrs:["updated","saved","preview","canvasPosX","canvasPosY","currentZoom","visiblePages","uniqueUploads"],silentSaveAttrs:["updated","saved","currentZoom"],initialize:function(a,b){if(!this.get("id")){if(b.projectId){this.set("id",b.projectId);this.id=b.projectId}}if(!this.pages){this.pages=new fluid.Pages(null,{projectModel:this})}if(!this.widgets){this.widgets=new fluid.Widgets(null,{projectModel:this})}if(!this.links){this.links=new fluid.Links(null,{projectModel:this})}if(!this.wdgGroups){this.wdgGroups=new fluid.WidgetGroups(null,{projectModel:this})}if(b&&b.syncOnChange!==false){this.pages.on("all",this.onChange,this);this.widgets.on("all",this.onChange,this);this.widgets.on("add",this.addUniqueUpload,this);this.widgets.on("remove",this.removeUniqueUpload,this);this.links.on("all",this.onChange,this);this.on("all",this.onChange,this);this.on("change:uniqueUploads",this.updateLibrary,this);this.on("change:name",this.updateLibraryTab,this);this.save();fluid.api.on("apicallsuccess",function(c,d){if(d.type==="projectSync"&&d.objectId===this.get("id")){this.synced=true}})}this.synced=false;fluid.main.on("thumbnailReady",function(d,c){if(c===this.id){this.modifiedSinceThumb=false}},this)},defaults:{uniqueUploads:[]},isSynced:function(){return this.synced},setModified:function(a){if(a===true||a===false){this.synced=!a}},onChange:function(b,f){if(!f.changedAttributes){return}var a=f.changedAttributes(),c,d;if(a){a=_.keys(a);c=_.difference(a,this.silentSyncAttrs);d=_.difference(a,this.silentSaveAttrs);if(c.length){this.setModified(true);this.synced=false;this.modifiedSinceThumb=true;fluid.main.fire("api:projectModelChanged")}if(d.length){if(!this.debouncedSave){this.debouncedSave=_.debounce(this.save,50)}this.debouncedSave.apply(this,arguments)}}},addUniqueUpload:function(c,a){var b=a.attributes.data;if(b){var d=_.clone(this.get("uniqueUploads"));if(d.indexOf(b)===-1){d.push(b);this.set({uniqueUploads:d})}}},removeUniqueUpload:function(h,a){var b=a.attributes.data;if(b){var c=a.id;var d=this.widgets.find(function(i){return(i.id!==c&&i.attributes.data&&i.attributes.data===b)});if(!d){var f=this.get("uniqueUploads");f=_.without(f,b);this.set({uniqueUploads:f})}}},updateLibrary:function(c){var d=c.previousAttributes().uniqueUploads;var a=c.attributes.uniqueUploads;var b;if(d.length<a.length){b=_.difference(a,d);b.forEach(function(f){fluid.main.trigger("projectTab.uploadAdded",{projectId:c.id,uploadId:f})})}else{if(d.length>a.length){b=_.difference(d,a);b.forEach(function(f){fluid.main.trigger("projectTab.uploadRemoved",{projectId:c.id,uploadId:f})})}}fluid.main.trigger("projectTab.setCounter",{projectId:c.id,count:a.length})},updateLibraryTab:function(a){fluid.main.trigger("projectTab.changeNameOfActiveTab",{id:a.attributes.id,name:a.attributes.name})},save:function(b){var a=this.bundle({getAll:true});m.set("projects",{id:this.id,data:a},function(){if(b&&b.call){b()}})},parse:function(b,P){var L;if(typeof b==="string"){b=JSON.parse(b)}if(P.projectId&&b[P.projectId]){L=b[P.projectId];L.id=P.projectId}else{var K=this.findProjectInBundle(b)[1];L=K[1];L.id=K[0]}var O=L.pages,k,h=[],a=[],j,H,l,f,d,c,M,N;if(O&&O.length){for(j=0,H=O.length;j<H;j++){d=O[j];if(!d){continue}if(b[d]){M=_.clone(b[d]);M.id=d;h.push(M);k=M.widgets;if(k.length){for(l=0,f=k.length;l<f;l++){c=k[l];if(b[c]&&b[c].lockTo&&!b[b[c].lockTo]){b[c]=null}if(b[c]&&b[c].of&&!b[b[c].of]){b[c]=null}if(fluid.main.uploads&&b[c]&&b[c].data&&!(b.uploads[b[c].data]&&fluid.main.uploads.get(b[c].data))){b[c]=null}if(b[c]){N=_.clone(b[c]);N.id=c;N.pageId=d;a.push(N)}else{k.splice(l,1);l--;f--}}}}else{O.splice(j,1);j--}}L.pages=O}else{L.pages=[]}if(L.homepage&&!b[L.homepage]){if(h.length){L.homepage=h[0].id}else{L.homepage=false}}this.pages=new fluid.Pages(h,{comparator:false,projectModel:this});this.widgets=new fluid.Widgets(a,{comparator:false,projectModel:this});var I=[],J,i;for(i in L.widgetGroups){if(L.widgetGroups.hasOwnProperty(i)){J={id:i,widgets:L.widgetGroups[i]}}I.push(J)}this.wdgGroups=new fluid.WidgetGroups(I,{comparator:false});this.links=new fluid.Links(null,{comparator:false});if(L.links){this.links.deserialize(L.links)}return L},get:function(i,c){var b=i.substr(0,1),h=c&&c.returnModel?true:false;if(i.substr(1,1)!=="_"&&this.attributes[i]!==undefined){return this.attributes[i]}else{if(b==="x"){var a=this.pages.get(i);if(!a){return false}return h?a:a.toJSON(c)}else{if(b==="w"){var d=this.widgets.get(i);if(!d){return false}return h?d:d.toJSON(c)}else{if(b==="l"){var f=this.links.get(i);if(!f){return false}return h?f:f.toJSON(c)}else{if(b==="p"){return h?this:this.toJSON(c)}}}}}},setChild:function(b,d){var a=b.substr(0,1);var j,f;if(a==="x"){f=this.pages;d.id=b;j=this.pages.get(b)}else{if(a=="w"){f=this.widgets;d.id=b;j=this.widgets.get(b)}else{if(a=="l"){f=this.links;j=this.links.get(b)}}}if(j){var h=_.clone(j.attributes);for(var c in h){if(typeof d[c]==="undefined"&&h.hasOwnProperty(c)){var i=["id","pageId","box","imgData"];if(i.indexOf(c)!==-1){j.unset(c,{silent:true})}}}j.set(d)}else{f.add(d)}},isEmpty:function(){return this.pages.length===0},isReadOnly:function(){return this.get("active")===false?true:false},isMultiOrientation:function(){var c=this.pages&&this.pages.models;var b=this.get("orientation");var a=false;_.each(c,function(d){if(d.attributes.orientation!==b){a=true}});return a},hasLinks:function(){return(this.links&&this.links.length)?true:false},findProjectInBundle:function(a){for(var b in a){if(a.hasOwnProperty(b)&&b.substr(0,2)==="p_"){return[b,a[b]]}}return false},bundle:function(b){var a={};a[this.attributes.id]=this.toJSON(b);if(this.links){_.extend(a[this.attributes.id],{links:this.links.toJSON(b)})}_.extend(a,this.pages?this.pages.toJSON(b):{});_.extend(a,this.widgets?this.widgets.toJSON(b):{});a.uploads={};if(this.widgets){this.widgets.each(function(h,i,c){if(!h.attributes.upload){return}var d=h.toJSON(),f;f=fluid.main.uploads.get(d.data).toJSON();a.uploads[d.data]=_.pick(f,"type","wh","title")},this)}return a}});fluid.Projects=fluid.Collection.extend({model:fluid.models.project,initialize:function(b,a){},getLatestActiveProject:function(){var a=this.map(function(b){if(b.get("active")||b.get("unloaded")){return b}else{return false}});if(a.length){return a[a.length-1].get("id")}else{return false}},activeProjectCount:function(){var a=this.filter(function(c,d,b){if(c.get("active")===false||c.get("removed")===true){return false}return true});return a.length}})},{"../../class-dbStorage":8,"../fluid.collection":44,"../fluid.model":49,"./link":57,"./page":58,"./widget":61,"./widgetGroup":62}],60:[function(j,i,f){var h=j("../../class-dbStorage");if(!fluid.models){fluid.models={}}(function(){fluid.models.Upload=fluid.Model.extend({attrBlackList:["imgData"],initialize:function(b,a){this.on("change",function(){var c=_.keys(this.changedAttributes());if(c.indexOf("imgData")!==-1){h.set("uploads",{id:this.id,data:this.get("imgData")})}},this);this.projects=new fluid.Projects(null)},parse:function(a,b){return a}});fluid.Uploads=fluid.Collection.extend({model:fluid.models.Upload,_type:"upload",initialize:function(a,b){this.on("all",this.onChange,this)},afterInit:function(a,b){if(b&&b.saveAfterInit){this.save()}},onChange:function(){if(!this.debouncedSave){this.debouncedSave=_.debounce(this.save,300)}this.debouncedSave.apply(this)},save:function(){h.set("uploadHeaders",{id:fluid.main.account.id,data:this.toJSON()})}})})()},{"../../class-dbStorage":8}],61:[function(d,h,f){if(!fluid.models){fluid.models={}}(function(){fluid.models.Widget=fluid.Model.extend({attrBlackList:["id","pageId","box","imgData"],initialize:function(b,a){this.on("change:tlwh",function(){this.clearBox()});this.collection.projectModel.on("change:pageWH",function(){if(!this.collection){return}this.clearBox()},this);this.on("change",function(){if(!this.collection){return}this.getPage().clearImgData()},this)},clearBox:function(){var a=this.getChildren();this.set({box:null},{silent:true});a.forEach(function(j,b,c){j.clearBox()})},calculateBox:function(c){var p=[],q=this.get("tlwh"),o=this.get("ca");if(!q&&this.get("st")==="b"){q=[0,0,"a","a"]}function t(D){var C=this.get("segments"),i=0;if(C){var k=this.get("sp"),A=k?k[D-1]:0,j=k?k[D==2?3:2]:0;for(var n=0,B=C.length;n<B;n++){var m=fluid.main.project.widgets.get(C[n].id);var l;if(!m){m=fluid.main.project.widgets.get(C[n].widget)}if(!m){return i}l=m.toJSON();if(!l){return i}i+=l.tlwh?l.tlwh[D]:l.wh[D-2]}i+=A+j}else{return c[D]}return i}var s=q[2]==null?0:q[2];if(s&&typeof(s)==="number"){p[2]=s}else{if(s&&s.indexOf("%")!==-1){p[2]=(parseFloat(s)/100)*c[2]}else{if(s=="a"){p[2]=t.call(this,2)}else{p[2]=c[2]}}}var a=q[3]==null?0:q[3];if(a&&typeof(a)==="number"){p[3]=a}else{if(a&&a.indexOf("%")!==-1){p[3]=(parseFloat(a)/100)*c[3]}else{if(a=="a"){p[3]=t.call(this,3)}else{p[3]=c[3]}}}var b=q[0]==null?0:q[0];if(!o||o[0]=="t"){if(typeof(b)==="number"){p[1]=b+c[1]}else{if(b.indexOf("%")!==-1){p[1]=((parseFloat(b)/100)*c[3])+c[1]}else{p[1]=parseInt(b,10)+c[1]}}}else{if(o[0]=="c"){if(typeof(b)==="number"){p[1]=b+c[1]+c[3]/2-p[3]/2}else{if(b.indexOf("%")!==-1){p[1]=((parseFloat(b)/100)*c[3])+c[1]+c[3]/2-p[3]/2}else{p[1]=parseInt(b,10)+c[1]+c[3]/2-p[3]/2}}}else{if(o[0]=="b"){if(typeof(b)==="number"){p[1]=c[1]+c[3]-b-p[3]}else{if(b.indexOf("%")!==-1){p[1]=c[1]+c[3]-((parseFloat(b)/100)*c[3])-p[3]}else{p[1]=c[1]+c[3]-parseInt(b,10)}}}}}var r=q[1]==null?0:q[1];if(!o||o[1]=="l"){if(typeof(r)==="number"||r.indexOf("%")===-1){p[0]=r+c[0]}else{if(r.indexOf("%")!==-1){p[0]=((parseFloat(r)/100)*c[2])+c[0]}else{p[0]=parseInt(r,10)+c[0]}}}else{if(o[1]=="c"){if(typeof(r)==="number"){p[0]=r+c[0]+c[2]/2-p[2]/2}else{if(r.indexOf("%")!==-1){p[0]=((parseFloat(r)/100)*c[2])+c[0]+c[2]/2-p[2]/2}else{p[0]=parseInt(r,10)+c[0]+c[2]/2}}}else{if(o[1]=="r"){if(typeof(r)==="number"){p[0]=c[0]+c[2]-r-p[2]}else{if(r.indexOf("%")!==-1){p[0]=c[0]+c[2]-((parseFloat(r)/100)*c[2])-p[2]}else{p[0]=c[0]+c[0]-parseInt(r,10)}}}}}p[0]=~~p[0];p[1]=~~p[1];p[2]=~~p[2];p[3]=~~p[3];this.set({box:p});return p},getBox:function(){var c,b,l,n,m,a;n=this.get("box");if(n){return n}if(!this.get("of")){m=this.get("st");b=this.getPage();if(m&&(m==="f"||m==="fb")){a=this.getProject().get("pageWH");if(b.get("orientation")==="Landscape"){a=[a[1],a[0]]}c=[0,0,a[0],a[1]]}else{c=[0,0,b.get("width"),b.get("height")]}}else{l=this.getParent();c=l.getBox()}n=this.calculateBox(c);return n},getRoot:function(){if(this.get("of")&&this.getParent()){return this.getParent().getRoot()}else{return this}},getSegmentRoot:function(){if(this.get("segmentRoot")){return this.collection.get(this.get("segmentRoot"))}else{return this.getRoot()}},getDependents:function(){var a=this.collection.where({lockTo:this.id,of:this.id});return a},getOfs:function(){var a=new fluid.Widgets();a.add(this.collection.where({of:this.id}));return a},getLockTos:function(){var b=this.getRoot();var a=this.collection.where({lockTo:b.id});return a},getChildren:function(){var a=this.collection.where({of:this.id});return a},getParent:function(){return this.collection.get(this.get("of"))},getPage:function(){var a=this.getProject().pages.get(this.get("pageId"));if(this.get("pageId")&&a.get("widgets").indexOf(this.id)!==-1){return a}else{a=false;this.getProject().pages.every(function(b,c,j){if(b.get("widgets").indexOf(this.id)!==-1){a=b;this.set({pageId:b.id},{silent:true});return false}return true},this);return a}},getProject:function(){return this.collection.projectModel},containsText:function(){var a=false;if(this.get("tc")){a=true}else{if(this.attributes.ad&&this.attributes.ad.length){this.attributes.ad.forEach(function(j){if(j&&j[0]){var b=j[0];var c=widgets.summary[b];if(c&&c.tc){a=true}}})}}return a},getSubTextElements:function(){var a=[],b=this.getOfs();b.forEach(function(c){a=a.concat(c.getSubTextElements())});if(this.get("tc")){a.push(this)}return a},getGroup:function(){var b=this.getProject().wdgGroups;var c=this.id;var a=b.find(function(j){if(j.get("widgets").indexOf(c)!==-1){return true}else{return false}});return a},getAllFromGroup:function(){var a=this.getGroup();var b=[];if(a){var c=a.get("widgets");b=fluid.main.project.widgets.filter(function(j){if(c.indexOf(j.id)!==-1){return true}return false})}return b}});fluid.Widgets=fluid.Collection.extend({model:fluid.models.Widget,initialize:function(a,b){if(b&&b.projectModel){this.projectModel=b.projectModel}},getIds:function(){return this.map(function(a){return a.id})},getElements:function(){return $("#"+this.getIds().join(", #"))},getRootsCollection:function(){var a=new fluid.Widgets();this.each(function(c,j,b){a.add(c.getRoot())});return a},getLockTos:function(){var a=this.getRoots();var c=new fluid.Widgets();var b;a.each(function(j){b=fluid.main.project.widgets.where({lockTo:j.get("lockTo")});c.add(b)});return c},getShapeWidgets:function(){var b=new fluid.Widgets(),a,c;this.models.forEach(function(j){if(!j.get("tc")&&j.get("upload")!=="y"){b.add(j);if(j.get("seg")||j.get("segment")){a=j.getOfs();if(a.length){c=a.getShapeWidgets();if(c.length){b.add(c.models)}}}}});return b},getTextWidgets:function(){var a=new fluid.Widgets();this.each(function(b){if(b.get("tc")!=undefined&&b.get("ts")!=undefined){a.add(b)}else{a.add(b.getSubTextElements())}});return a},getUploadWidgets:function(){var a=new fluid.Widgets();this.each(function(b){if(b.get("upload")==="y"){a.add(b)}});return a},getRoots:function(r,c){if(!c){c={}}if(!r){return this.getRootsCollection()}if(r.jquery){r=$.map(r,function(j){return j.id});c.returnEls=true}var a=[],i,p,o,b,q;for(var b=0;b<r.length;b++){i=fluid.main.project.widgets.get(r[b]);p=i.getRoot();if(p){a.push(i.getRoot().id)}else{o=i.collection.where({lockTo:i.get("lockTo")});o=_.reject(o,function(j){return !j.getParent()});for(b=0;q=o.length,b<q;b++){a.push(o[b].id)}}}if(c&&c.returnEls){a=$("#"+a.join(", #"))}return a},containsText:function(a){if(!a){return false}if(a.jQuery){a=$.map(a,function(){return this.id})}var c;for(var b=0;b<a.length;b++){c=this.get(a[b],{returnModel:true}).containsText();if(c){return true}}return false}})})()},{}],62:[function(d,h,f){if(!fluid.models){fluid.models={}}fluid.models.WidgetGroup=fluid.Model.extend({initialize:function(b,a){},parse:function(a,b){return a}});fluid.WidgetGroups=fluid.Collection.extend({model:fluid.models.WidgetGroup,initialize:function(a,b){}})},{}],63:[function(o,m,j){var n=o("../fluid.module");var p=o("../lib/underscore");var l=o("../../class-storage");var k=o("../../class-dbStorage");n.define("fluid.upload",function(h){h.priority={};h.priority.lib=7;h.priority.defaultVal=5;h.priority.pageZoomedOut=3;h.priority.pageZoomedIn=1;var b=6;var d=[];var f=[];var a=document.createElement("canvas"),c=a.getContext("2d");h.get=function(A){if(!A||!A.id){if(!A.callback){return false}else{A.callback({success:false})}}if(!A.priority){A.priority=h.priority.defaultVal}if(A.priority===h.priority.lib){k.get("uploadThumbs",A.id,function(q,r){if(r.fetched.length){h.onIndexedDBLoad(q,r)}else{k.get("uploads",q.id,h.onIndexedDBLoad.bind(this,q))}}.bind(this,A))}else{var D=l.get(A.id,{returnModel:true});if(D&&D.get("imgData")){if(A.image){var w=atob(D.get("imgData").split(";base64,")[1]);var i=new Array(w.length);for(var z=0;z<w.length;z++){i[z]=w.charCodeAt(z)}var C=new Uint8Array(i);var B=new Blob([C],{type:"image/png"});A.image.src=URL.createObjectURL(B)}else{A.callback({success:true,id:A.id,priority:A.priority,imgData:D.get("imgData")})}}else{k.get("uploads",A.id,h.onIndexedDBLoad.bind(this,A))}}};h.onIndexedDBLoad=function(v,u){if(u.fetched.length){if(!v.image){v.callback({success:true,id:v.id,priority:v.priority,imgData:u.resultsObj[v.id].data})}else{v.image.onload=function(){v.callback({success:true,id:v.id,priority:v.priority,imgData:u.resultsObj[v.id].data,image:this})};v.image.src=u.resultsObj[v.id].data}}else{var t=p.findWhere(d,{id:v.id}),i=p.findWhere(f,{id:v.id});if(i){i.callback.push(v.callback)}else{if(t){t.callback.push(v.callback);t.priority=Math.min(t.priority,v.priority)}else{d.push({id:v.id,callback:[v.callback],priority:v.priority,image:v.image||null})}}h.startQueue()}};h.startQueue=function(){if(f.length<b&&d.length){d=p.sortBy(d,"priority");var s;var t;var i;while(f.length<b&&d.length){i=d.shift();f.push(i);s=f[f.length-1].image||(new Image());t=l.get(i.id);if(t){s.onload=h.onImageLoad.bind(s,i.id);s.onerror=h.onImageError.bind(s,i.id);if(t.storage==="db"){s.src="data/img/"+i.id;f[f.length-1].image=s}else{if(widgets.summary[i.id]){s.crossOrigin="Anonymous";s.src=imgCloudUrl+(widgets.summary[i.id].data||i.id)+".png";f[f.length-1].image=s}else{f[f.length-1].image=s;h.onImageError.call(s,i.id)}}}}}};h.removeLoadingItem=function(i){f=p.filter(f,function(r){if(r.id===i){return false}else{return true}})};h.onImageLoad=function(i,z){var u=p.findWhere(f,{id:i});if(u.priority===h.priority.lib){a.height=50;a.width=50;c.fillStyle="#cccccc";c.fillRect(0,0,50,50);if(this.width===0&&this.height===0){c.drawImage(this,0,0)}else{if(this.width<=50&&this.height<=50){c.drawImage(this,25-this.width/2,25-this.height/2-Math.max((34-this.height)/2,0))}else{if(this.width<this.height){c.drawImage(this,0,0,50*this.width/this.height,50)}else{c.drawImage(this,0,0,50,50*this.height/this.width)}}}}else{a.height=this.naturalHeight;a.width=this.naturalWidth;c.clearRect(0,0,this.naturalWidth,this.naturalHeight);c.drawImage(this,0,0)}var v=a.toDataURL("image/png");if(u.callback.length){for(var w=0;w<u.callback.length;w++){u.callback[w]({success:true,image:this,imgData:v,id:u.id})}}if(u.priority===h.priority.lib){k.set("uploadThumbs",{id:u.id,data:v},function(q){h.removeLoadingItem(i);h.startQueue()})}else{k.set("uploads",{id:u.id,data:v},function(q){h.removeLoadingItem(i);h.startQueue()})}};h.onImageError=function(i,v){var t=p.findWhere(f,{id:i});h.removeLoadingItem(i);if(t.callback.length){for(var u=0;u<t.callback.length;u++){t.callback[u]({success:false,image:this,id:t.id})}}};fluid.event.mixinTo(h)})},{"../../class-dbStorage":8,"../../class-storage":33,"../fluid.module":50,"../lib/underscore":54}],64:[function(I,R,B){var D=I("./class-dbStorage");var F=I("./class-storage");var N=I("./class-widget");var P=I("./class-account");var T=I("./class-notification");var O=I("./class-project");var G=I("./class-preview");var Q=I("./class-canvas");var E=I("./utils");var J=I("./class-page");var K=I("./class-tracker");var A=I("./class-contextMenu");var z=I("./class-propertyInspector");var S=I("./class-userSettings");I("./jquery.bounce");R.exports.updateTLWH=function(b){var a=(b)?b:E.getBoundingAreaRelative($("#canvasPages .ui-selected").not(".backgroundWidget"));$("#TLindicatorX").text(parseInt(a.left));$("#TLindicatorY").text(parseInt(a.top));$("#WHindicatorX").text(parseInt(a.right-a.left));$("#WHindicatorY").text(parseInt(a.bottom-a.top));N._selectionTLWH={width:a.right-a.left,height:a.bottom-a.top,top:a.top,left:a.left};N._selectionBoxCoord={top:a.top,left:a.left}};R.exports.getSelectionTLWH=function(){return E.getBoundingAreaRelative($("#canvasPages .ui-selected").not(".backgroundWidget"))};R.exports.showPostLoadMessage=function(){if(!localStorage){return}var a=localStorage.getItem("postloadMessage");var b={tab:"Project updated. Please close other tabs or windows where the project may be open.",serverRefresh:"A newer version of a project has been found. Updated.",serverLogout:"This account appears to be open elsewhere and has been logged out to protect your changes.",loginAgain:'Something went wrong. Please <span class="inlineLink open-fluid-menu close">sign in</span> again.',panicRefresh:"Something went wrong. Application has been reloaded.",updateLogout:"Welcome back. We've made some changes since you've last been here &ndash; please <span class=\"inlineLink open-fluid-menu close\">sign in</span> again to get the latest version.",loginSyncFailed:'Application failed to sign in and sync all user data properly. Try to <span class="inlineLink open-fluid-menu close">sign in</span> again.'};if(b[a]){if(a==="serverLogout"){T.add("alert",b[a])}else{T.add("alert",b[a],{permanent:true})}}localStorage.removeItem("postloadMessage")};R.exports.cmLink2Helper=function(a){var b=$(this).data("clickDragHelper");return b||$("#tmplDragHelper").tmpl()};R.exports.setFocus=function(a){a.bounce().focus()};R.exports.keyD=function(f){if($("#offline-lock-overlay").is(":visible")){return}if(f.ctrlKey&&f.altKey&&f.shiftKey&&f.keyCode==48){$("#console").toggle();f.preventDefault();f.stopImmediatePropagation();return}if(/^(input|textarea)$/i.test(f.target.nodeName)&&!((f.metaKey||f.ctrlKey)&&f.keyCode===68)){return}if((f.metaKey||f.ctrlKey)&&f.keyCode==65){E.selectText("control+a");if(fluid.zoom.getCtx()!=="project"){var d=$(".screen.active").attr("id");fluid.selection.select(F.get(d).widgets)}return true}if((f.metaKey||f.ctrlKey)&&f.keyCode==71&&!f.shiftKey){f.preventDefault();if(!$("#canvas").hasClass("zoomedOut")){var c=$("#canvasPages .ui-selected");var d=E.getActivePageId();if(c&&c.length>=2&&d){fluid.command.create("groupWidgets",{sel:c,pageId:d}).dispatchTo("fluid.controllers.widget")}}return true}if((f.metaKey||f.ctrlKey)&&f.keyCode==71&&f.shiftKey){f.preventDefault();if(!$("#canvas").hasClass("zoomedOut")){var c=$("#canvasPages .ui-selected");var d=E.getActivePageId();if(c&&c.length>=2&&d){fluid.command.create("ungroupWidgets",{sel:c,pageId:d}).dispatchTo("fluid.controllers.widget")}}return true}if(f.keyCode===27){fluid.main.fire("escpressed",f)}if(f.keyCode==13){if(S.isOpen){projectSettings.navigateWithKeys(f)}}if(f.keyCode>=37&&f.keyCode<=40){N.nudge(f);A.place();return false}else{if(f.keyCode==46||f.keyCode==8){if(f.keyCode==8){$(".userSettingsDone:visible").click()}L(f.keyCode);return false}else{if(f.metaKey||f.ctrlKey){var h=$("#multiSelBox");if(h.is(":visible")){$("#canvasPages .backgroundWidget").css("z-index",-2);h.css("z-index",-1)}var a,b=true;switch(f.keyCode){case 67:a="copy";b=false;break;case 68:a="clone";break;case 86:a="paste";break;case 88:a="cut";break;case 89:fluid.command.history.redo();break;case 90:if(f.shiftKey){fluid.command.history.redo()}else{fluid.command.history.undo()}break;default:return true}if(a){fluid.command.create(a,{}).dispatchTo("fluid.controllers.widget",b);if(a==="paste"){fluid.main.fire("uiWidgetAdded")}}f.preventDefault()}}}};R.exports.keyU=function(a){if($("#offline-lock-overlay").is(":visible")){return}if(/^(input|textarea)$/i.test(a.target.nodeName)){return}if(a.keyCode>=37&&a.keyCode<=40){if(a){var b=a.target.nodeName.toLowerCase();if((b=="input")||(b=="textarea")||(b=="select")){return false}}if(Q.isEditorVisible()){A.place();J.navigateWithKeys(a)}else{fluid.main.fire("keyup",a)}return false}$("#canvasPages .backgroundWidget").css("z-index","");$("#multiSelBox").css("z-index","")};R.exports.load=function(){var a=window.open("terms.html","","scrollbars=no,menubar=no,height=600,width=800,resizable=yes,toolbar=no,location=no,status=yes")};R.exports.tidyUp=function(a){if(N._resizeEl){return}var b=$(a.target);if(b.attr("id")==="previewHolder"||b.parents("#previewHolder").length||b.parent(".share-toggle").length){fluid.main.fire("closeallpopups",a)}if(b.attr("id")==="previewHolder2"||b.parents("#previewHolder2").length){fluid.main.fire("closeallpopups",a)}if(a.target.type=="textarea"||a.target.type=="input"||a.target.id=="tsandcsLabel"||a.target.id=="tsandcs1"||b.hasClass("projectOptionsFrame")||b.hasClass("modalWindowContentFrame")||b.closest(".modalWindowContentFrame").length>0||b.parents("#viewport").length===0&&b.parents("#startMenu").length===0){return true}if($(a.target).hasClass("createAccount")||($(a.target).hasClass("libraryWidget"))||($(a.target).hasClass("libraryWidgetDisabled"))){return true}fluid.main.fire("closeallpopups",a);if(window.g_window_print&&!window.g_window_print.closed&&!$(a.target).hasClass("shareLinkPrint")){window.g_window_print.close();window.g_window_print=null}};R.exports.setValid=function(a){var b=a.next("aside");if(!b.hasClass("formCorrect")){b.fadeTo(0,1).addClass("formCorrect").bounce()}};R.exports.validateInput=function(d,b){var f=$(b);if(b==null||b==undefined){b=this;f=$(this)}if(!b.validity){return}$form=f.parents(".form").eq(0);if($form.hasClass("shareSendMail")){return}if($form.hasClass("shareToUser")){return}if(((b.validity.valid&&f.is(":checkbox")==false)||(f.attr("type")=="checkbox"&&f.prop("checked"))==true)&&f.attr("type")!="submit"){R.exports.setValid(f)}else{f.next("aside").fadeTo(200,0).removeClass("formCorrect")}if(!$form.hasClass("createForm")){var a=$form.find("input").not("[type=hidden], [type=submit]").length;var c=$form.find(".formCorrect").length;setSubmitStyle($form,a==c)}};var M=R.exports.intersectTrash=function(f,i){if($("#trash").css("display")!="none"){f=$(f);var b=f[0].dataset.lockto;if(b&&b!==f[0].id){f=$("#"+b)}var a=E.getTLWH(f);if(f.hasClass("screen")){var j=fluid.zoom.getCurrentScale(),h=$(".page",f);if(fluid.zoom.isEditMode()){return false}if(h.size()>0){a=E.getTLWH(h)}a.width=a.width*j;a.height=a.height*j}var d=$("#libraryWidgetDragging");if(d.size()>0){if(d.hasClass("upload")){a.width=24;a.height=24}else{a=E.getTLWH(d.find(".pageWidget"))}}var c=E.getTLWH("#trash");if(i&&(a.width>200||a.height>200)){a.top=i.pageY;a.left=i.pageX;a.width=0;a.height=0}if((a.top+a.height>=c.top)&&(a.left+a.width>=c.left)){$("#trash").addClass("droppableStyle");return true}}$("#trash").removeClass("droppableStyle");return false};R.exports.dropInViewport=function(m,k){if(fluid.zoom.isZoomingNow()){return false}if(m.isPropagationStopped()||(m.originalEvent&&m.originalEvent.isPropagationStopped())){return}var j=$(k.draggable);var d=j.attr("id")||j.attr("data-id");if(j.hasClass("pageWidget")){return true}if($(k.draggable).hasClass("project")){O.open(d);return}if($("#trash").hasClass("droppableStyle")){var a=j.attr("data-id");if(a.indexOf("scaled-")!==-1){a=a.split("-")[1]}fluid.command.create("drop",{id:a,title:F.get(a).title}).dispatchTo("fluid.controllers.bin");return}if(d=="canvas"){return true}if(j.hasClass("libraryWidget")&&m.pageX<fluid.main.account.get("libraryWidth")){return false}if(d=="cmLink2"){E.prevent(m);$("#dragCanvas").fadeOut(200);var q=$("#addPage").offset();var h=$("#addPage").outerHeight();if(m.pageX>q.left&&m.pageY>q.top&&m.pageY<q.top+h){fluid.command.create("create",{offset:{x:m.offsetX,y:m.offsetY},pageCoords:{x:m.pageX,y:m.pageY},targetId:m.target.id,mode:"link"}).dispatchTo("fluid.controllers.page");N.resetSelection();return false}var l=null;if(j.hasClass("templateLink")){var l=j.parents(".page")}else{var l=$(".screen.activeZoomedOut")}J.enableSelectableWidgetHolder(false)}var n=k.draggable.add(k.helper).add($("#dragCanvas")).add(".pageWidget.ui-selected");var o=false;var p=H(m);var i=p.pageId?p.pageId:false;var c=k.draggable.attr("id")||k.draggable.attr("data-id");if(i){var f=$("#"+i);if(d=="cmLink2"){var l=f;var b=fluid.zoom.getselectedBeforeZoomOut();fluid.command.create("create",{originId:b,destinationId:l.attr("id")}).dispatchTo("fluid.controllers.link");o=true}}if($(k.draggable).attr("id")==="cmLink2"){if(o){N.resetSelection()}}};R.exports.setSubmitStyle=function(d,a){var c=d.find(":submit");if(a===undefined){a=!c.hasClass("inactive")}if(a||d.attr("id")=="upgradeForm"){var b=d.data("existing")?"accept-existing":"accept";c.removeClass("inactive accept accept-existing").addClass(b).bounce()}else{c.removeClass("accept accept-existing").addClass("inactive")}};R.exports.deleteObject=L;function L(f,h){function d(){var i=$(".ui-selected");if(i.length==0){return false}var j=[],k=[];$(i).each(function(){var l=$(this).attr("id");if(l==$(this).attr("data-segment")){k.push(l)}else{j.push(l);var m=fluid.main.project.widgets.get(l);var n=m.get("insertAfterId")?fluid.main.project.widgets.get(m.get("insertAfterId")):false;if(n===false){n=m.get("of")?fluid.main.project.widgets.get(m.get("of")):false}if(n&&n.get("blur")&&_.difference(n.getBox(),m.getBox()).length===0){j.push(n.get("id"))}}});if(j.length>0){fluid.command.create("delete",{id:j}).dispatchTo("fluid.controllers.widget")}if(k.length>0){fluid.command.create("deleteSegment",{id:k}).dispatchTo("fluid.controllers.widget")}A.hide();z.resetPropInspector()}if((f==46||f==8||f=="delete")&&N.editing==false){return d()}if(!h||!h.draggable){return false}var b=$(h.helper);if(M(b)==true){if(b.hasClass("pageWidget")){d();N._dragSelection=null}else{if(b.hasClass("userWidget")){var c=b.data("widget-id");fluid.command.create("drop",{id:c,thumb:$("#"+c+" img").attr("src")}).dispatchTo("fluid.controllers.bin")}else{if(b.hasClass("screen")){fluid.command.create("delete",{id:b.attr("id")}).dispatchTo("fluid.controllers.page")}else{if(b.hasClass("scaled-screen")){fluid.command.create("delete",{id:b.attr("id").split("-")[1]}).dispatchTo("fluid.controllers.page")}else{if(b.hasClass("project")){var a=fluid.main.account.get("projectIds");if(a.length>1){fluid.command.create("drop",{id:$(h.draggable).attr("id")}).dispatchTo("fluid.controllers.bin")}else{T.add("info","Sorry, the currently open project cannot be deleted. Please create another project before deleting this one.")}}}}}}$("#trash").removeClass("droppableStyle");return true}return false}R.exports.redraw=function(a){G.multiOrientations=fluid.main.project.isMultiOrientation();if(G.isOpen){G.setAvailableRect();G.scaleFrame()}$("#canvas").draggable("option","containment",Q.setContainment());var b=E.getActivePage();if(b.size()>0&&b.hasClass("screen")&&!$(a.target).hasClass("pageWidget")){fluid.zoom.zoomToPage($("#canvasPages .screen.active"))}else{if(fluid.zoom.getCtx()==="project"){fluid.zoom.zoomToAllDebounced2()}}};function C(b,a){this.ms=b;this.callback=a;this.start()}R.exports.Timeout=C;var H=R.exports.getHoverPageParams=function(f){var b=document.getElementById("viewport");if(fluid.zoom.getCtx()!=="project"&&f.pageX<=fluid.zoom.getLibWidth()){return false}var c=(b.scrollLeft+f.pageX)/fluid.zoom.getCurrentScale();var i=(b.scrollTop+f.pageY)/fluid.zoom.getCurrentScale();var h=fluid.main.project.pages.filter(function(k){if(c>=k.get("x")&&c<=k.get("x")+k.get("width")&&i>=k.get("y")&&i<=k.get("y")+k.get("height")){return true}else{return false}});if(fluid.zoom.getCtx()==="project"){h=h[h.length-1]}else{var j=_.map(h,function(k){return k.get("id")});var a=$("#"+j.join(", #"));var d=a.filter(".active");if(d.length){h=fluid.main.project.pages.get(d.attr("id"))}else{h=fluid.main.project.pages.get(a.last().attr("id"))}}if(h&&h.get("id")){return{pageId:h.get("id"),offsetX:c-h.get("x"),offsetY:i-h.get("y")}}else{return false}};C.prototype={start:function(){if(!this.timeout){this.msRemaining=this.ms;this.startTime=new Date().valueOf();this.isPaused=false;this.isComplete=false;this._setTimeout(this.ms)}},started:function(){return Boolean(this.timeout)},stop:function(){if(this.timeout){window.clearTimeout(this.timeout);this.timeout=null;this.isPaused=false}},pause:function(){if(this.timeout){window.clearTimeout(this.timeout);this.timeout=null;this.msRemaining-=new Date().valueOf()-this.startTime;this.isPaused=true}},paused:function(){return Boolean(this.isPaused)},resume:function(){if(this.isPaused&&!this.timeout){this.startTime=new Date().valueOf();this._setTimeout(this.msRemaining);this.isPaused=false}},timeRemaining:function(){if(this.isPaused){return this.msRemaining}else{return this.msRemaining-new Date().valueOf()+this.startTime}},exec:function(){this.stop();this.callback.call();this.isComplete=true},complete:function(){return Boolean(this.isComplete)},_setTimeout:function(a){this.timeout=window.setTimeout((function(b){return function(){if($.isFunction(b.callback)){b.isComplete=true;b.callback.call();b.timeout=null}}})(this),a)}};R.exports.rgb2hex=function(b){b=b.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function a(c){return("0"+parseInt(c).toString(16)).slice(-2)}return"#"+a(b[1])+a(b[2])+a(b[3])};R.exports.fetchSvgIcons=function(){var a=new XMLHttpRequest();a.open("GET","img/all_icons.svg",true);a.onload=function(d){var b=new XMLSerializer();var c=b.serializeToString(d.target.responseXML.documentElement);document.head.appendChild(d.target.responseXML.documentElement);D.onReady(function(){D.set("uiIcons",{id:"svgIcons",data:c})})};a.send(null)};R.exports.preventDeleteBack=function(a){if(a.keyCode==8&&a.target.nodeName=="BODY"){return false}}},{"./class-account":3,"./class-canvas":6,"./class-contextMenu":7,"./class-dbStorage":8,"./class-notification":17,"./class-page":18,"./class-preview":21,"./class-project":23,"./class-propertyInspector":25,"./class-storage":33,"./class-tracker":34,"./class-userSettings":35,"./class-widget":37,"./jquery.bounce":66,"./utils":69}],65:[function(f,j,h){var i=f("./browserdetect");window.preview=f("./class-preview");$(function(){$(window).resize(function(){preview.setAvailableRect();preview.scaleFrame(true,true)});i.init();if(i.browser=="Explorer"||/Trident/.test(navigator.userAgent)||i.browser=="Opera"){$("#previewPage").show().css({display:"block",visibility:"visible",margin:"20px 0",left:100})}preview.initExported()})},{"./browserdetect":2,"./class-preview":21}],66:[function(j,i,f){var h=j("./utils");(function(a){a.fn.extend({bounce:function(c){var b={size:[0.33,1.33,1,1.12,1,1.05,1],delay:[0,100,80,80,80,80,50],step:function(p){var d=p.data("bounce");if(d&&d.nextStep<d.size.length){var q=0;if(d.nextStep!=0){q=d.delay[d.nextStep]}var r=d.nextStep>0?d.size[d.nextStep-1]:0;var o=d.size[d.nextStep]-r;h.animateRaf(function(k){p.css({"-webkit-transform":"scale("+(r+o*k)+")","-moz-transform":"scale("+(r+o*k)+")"})},d.delay[d.nextStep],function(){c.step(p)});d.nextStep++}else{p.css({"-webkit-transform":"none","-moz-transform":"none"})}}};var c=a.extend(b,c);return this.each(function(){var d=a(this).data("bounce",{size:c.size,delay:c.delay,nextStep:0}).css({"-webkit-transform":"scale(0.01)","-moz-transform":"scale(0.01)"});c.step(d)})}})})(jQuery)},{"./utils":69}],67:[function(o,n,p){var j=o("./utils");var m=o("./class-widget");var l=o("./class-propertyInspectorController");var k={getWidgetForCP:function(){var a={};function b(){var h=$(this);var f=h.attr("id");var d=fluid.main.project.widgets.get(f).toJSON();if(d.bgc){$.extend(true,a,d);return false}}var c=fluid.selection.getSelectionModel().getShapeWidgets().getElements();c.each(b);return a},getTextWidgetCP:function(){var a=fluid.selection.getSelectionModel().getLockTos().getTextWidgets().getElements().last();var b=m.get(a.attr("id"));return b},segmentRootId:false,getSelectedOnly:function(a){function c(){var h=$(this);var f=h.attr("id");var i=fluid.main.project.widgets.get(f).toJSON();if(i.seg){if(i.bgc){d=d.add(h);k.segmentRootId=f}}else{if(i.segment&&(i.of==k.segmentRootId)){if(h.hasClass("ui-selected")){d=d.add(h)}else{d=d.not(h)}}else{d=d.add(h)}}}var d=$([]);var b=a||fluid.selection.getSelectionModel().getShapeWidgets().getElements();b.each(c);return d},clickOnSelectorEdge:function(a){var d=k.pickerWidth/2;var b=Math.abs(a.offsetX-d);var c=Math.abs(a.offsetY-d);var f=Math.sqrt((b*b)+(c*c));if(f>d){if(a.originalEvent.target.id=="hslSelector"){k.hslClick(a)}else{if(a.originalEvent.target.id=="rgbSelector"){k.rgbClick(a)}}}else{return}},tempFontColor:false,getTextColor:function(){var c=k.getTextWidgetCP();var a=k.getFontColorFromCSS(c.ts);k.tempFontColor=a;var b=j.toHSL(a);k.updateDisplay(b);k.updateBackupColor(a);$("#textColor").css("background-color",a)},extractTextColor:function(b){var a=$(b).attr("id");var d=m.get(a);var c=k.getFontColorFromCSS(d.ts);return c},getFontColorFromCSS:function(a){var f=a.split(/;/);for(var b=0;b<f.length;b++){if(f[b].match("color")){var d=b}}var c=f[d];var h=c?c.replace(/"/g,"").replace(/color:/,""):"rgb(0,0,0)";return h},rgbClick:function(c){var d=c.target.id;k.setActivePickerBorder(d);var b=$("#rainbowColorPicker").offset();var a=k.getRGBAngle(c.pageX,c.pageY,b.top,b.left);$("#rgbSelector").css({top:a.top,left:a.left});k.rgbSet(a);k.applyToWidget(null)},hslClick:function(c){var d=c.target.id;k.setActivePickerBorder(d);var b=$("#rainbowColorPicker").offset();var a=k.getHSLAngle(c.pageX,c.pageY,b.top,b.left);$("#hslSelector").css({top:a.top,left:a.left});k.hslSet(a);k.applyToWidget(null)},setActivePickerBorder:function(a){$("#rgbSelector, #hslSelector").removeClass("inactiveSelector");if(a=="hslSelector"||a=="hslArea"){$("#rgbSelector").addClass("inactiveSelector")}else{if(a=="rgbSelector"||a=="rgbArea"){$("#hslSelector").addClass("inactiveSelector")}else{if(a=="return"){return}}}},setColorStops:function(f){var d=k.getWidgetForCP();var a=(k.colorStopNumber)?k.colorStopNumber:0;var b=d.bgc[a];var c=j.toHSL(b);k.updateDisplay(c);k.updateBackupColor(b);return false},changeColorStopSlider:function(b){var a=$(b.target);var d=a.attr("data-colorStop");var c=Math.round(a.attr("value"));$("#gradientStop .colorStopIndicator").eq(d).text(c);k.applyToWidget(b)},getColorBackground:function(){var c=k.getWidgetForCP();var a=(c.bgc)?c.bgc[0]:"#000000";var b=j.toHSL(a);k.updateDisplay(b);k.updateBackupColor(a)},getBorderColor:function(){var c=k.getWidgetForCP();var a=(c.b)?c.b[1]:"#000000";var b=j.toHSL(a);k.updateDisplay(b);k.updateBackupColor(a)},inputHex:function(i){var b=i.target,d=b.selectionStart,f=b.value.match(/[^0-9a-f]*/gi).filter(function(r){return r!==""}),h=b.value.replace(/[^0-9a-f]*/gi,""),a=h.length===3?[h[0],h[0],h[1],h[1],h[2],h[2]].join(""):h;b.value=h;d-=f.length;b.setSelectionRange(d,d);if(!(h.length===3||h.length===6)){return false}var c=j.toHSL("#"+a);k.updateDisplay(c,h);k.applyToWidget(null)},colorWheelRadius:79,hslWheelRadius:56,grayWheelRadius:81,colorPickerWidth:93,flatColorArc:20,numDegrees:360,numColors:6,hslLimit:100,currentHSL:{h:false,s:false,l:false},updateDisplay:function(L,M){function E(u){var t=k.numDegrees/k.numColors;var r=t-k.flatColorArc;var s=Math.floor(u.h/t);var q=s*t;if(u.h>q){var q=(u.h*(r/t))+((k.flatColorArc*s)+(k.flatColorArc/2))}return q}function G(D){function z(){var V=t/(t-r);var W=(u-r)*V;var X=k.hslLimit/t;var Q=k.hslLimit-(X*W);return Q}function w(){var W=k.hslLimit/t;var X=(k.hslLimit-L.s)/W;var V=t/(t-r);var Q=(X/V)+r;return Q}var r=k.pickerWidth/2;var u=k.pickerWidth;var t=k.hslWheelRadius-(k.pickerWidth/5);var z=z();if(L.s==0){if(D==0){var A=k.flatColorArc/2}else{if(D>0&&D<k.numDegrees){var C=(k.numDegrees+(2*k.flatColorArc))/k.numDegrees;var A=k.flatColorArc+D/C}else{if(D==k.numDegrees){var A=k.numDegrees-(k.flatColorArc/2)}}}}else{if(L.s>0&&L.s<=z){var A=D}else{if(L.s>z&&L.s<k.hslLimit){var q=u-r;var s=k.hslLimit/2;var R=w();var v=(L.l-s)/(R-r);var B=v*q+s;var A=(B*k.numDegrees)/k.hslLimit}else{if(L.s==k.hslLimit){var A=0}}}}return A}function a(){var s=k.pickerWidth/2;var t=k.hslWheelRadius-(k.pickerWidth/5);if(L.s==0){var q=k.hslWheelRadius}else{if(L.s>0&&L.s<k.hslLimit){var u=k.hslLimit/t;var v=(k.hslLimit-L.s)/u;var r=t/(t-s);var q=(v/r)+s}else{if(L.s==k.hslLimit){var q=0}}}return q}var N=0;var K=0;k.currentHSL.h=(L.h!==false)?L.h:k.currentHSL.h;k.currentHSL.s=(L.s!==false)?L.s:k.currentHSL.s;k.currentHSL.l=(L.l!==false)?L.l:k.currentHSL.l;L=k.currentHSL;var h={top:0,left:0};var c=parseInt($("#rgbSelector").css("width"));var i=parseInt($("#rgbSelector").css("height"));var O=E(L)*2*Math.PI/k.numDegrees;var F=-(k.colorWheelRadius*Math.cos(O));var P=k.colorWheelRadius*Math.sin(O);F=k.colorPickerWidth+N-(i/2)+F;P=k.colorPickerWidth+K-(c/2)+P;var H=L.l*k.numDegrees/k.hslLimit;var d=G(H);var f=(d*(Math.PI*2))/k.numDegrees;var J=a();var b=-(J*Math.cos(f));var I=J*Math.sin(f);b=k.colorPickerWidth+N-(i/2)+b;I=k.colorPickerWidth+K-(c/2)+I;$("#rgbSelector").css({top:F,left:P});$("#hslSelector").css({top:b,left:I});$("#colorHexValue").val(M||j.hslToHex(L));$("#bgColorDisplay").css("background-color","hsl("+L.h+","+L.s+"%,"+L.l+"%)");$("#hueSaturationBase").css("background-image","-webkit-radial-gradient(center center, hsl("+L.h+", 100%, 50%),hsl(0,0%,50%) 80%, hsl(0,0%,50%) 100%)").css("background-image","-moz-radial-gradient(center center, hsl("+L.h+", 100%, 50%),hsl("+L.h+", 100%, 50%) 20%, hsl(0,0%,50%) 80%, hsl(0,0%,50%) 100%)")},updateBackupColor:function(a){$("#bgColorOriginal").css("background-color",a)},dragEl:false,pickerWidth:false,pickerRadius:false,cpCenter:false,activeWidget:false,rainbowColorDivPosition:false,dragStart:function(a){k.cpCenter=k.cpCenter||$("#rainbowColorPicker").offset();k.dragEl=k.dragEl||$(this);var b=a.target.id;k.setActivePickerBorder(b)},getRGBAngle:function(w,z,c,b){var v=w-b-(k.pickerWidth/2)-k.colorWheelRadius;var A=z-c-(k.pickerWidth/2)-k.colorWheelRadius;var i=Math.sqrt(v*v+A*A);var a=k.colorWheelRadius/i;var f=k.pickerRadius+(v*a)-(k.pickerWidth/2);var d=k.pickerRadius+(A*a)+k.rainbowColorDivPosition.top-(k.pickerWidth/2);var B=Math.asin(v/i);var h=(180/Math.PI)*B;if(z>c+k.colorWheelRadius+(k.pickerWidth/2)){h=180-h}else{if(w<b+k.colorWheelRadius+(k.pickerWidth/2)){h=360+h}}if(h>360){var h=h-k.numDegrees}return{top:d,left:f,angle:h}},rgbDrag:function(b){var a=k.getRGBAngle(b.pageX,b.pageY,k.cpCenter.top,k.cpCenter.left);k.dragEl.data().draggable.position.top=a.top;k.dragEl.data().draggable.position.left=a.left;k.rgbSet(a);$("#colorPickerElement, #lightDarkOverlay").css("cursor","none")},rgbSet:function(a){var c=d(a.angle);function d(f){var w=k.numDegrees/k.numColors;var h=w-k.flatColorArc;var v=Math.floor(f/w)*w;var B=v+w-(k.flatColorArc/2);var i=v+(k.flatColorArc/2);if(f>B&&f<(v+w)){var z=v+w}else{if(f>v&&f<i){var z=v}else{var A=((w/h)*(k.flatColorArc/2))+(v/2);var z=(w/h)*f-A}}return z}var b=lValue=false;if(k.currentHSL.s===0){b=k.hslLimit;lValue=50}k.updateDisplay({h:c,s:b,l:lValue})},rgbDragStop:function(a){k.rgbDrag(a);k.dragEl=false;k.cpCenter=false;k.applyToWidget(null);$("#colorPickerElement, #lightDarkOverlay").css("cursor","default")},hslDrag:function(b){var a=k.getHSLAngle(b.pageX,b.pageY,k.cpCenter.top,k.cpCenter.left);k.dragEl.data().draggable.position.top=a.top;k.dragEl.data().draggable.position.left=a.left;k.hslSet(a);$("#colorPickerElement, #lightDarkOverlay").css("cursor","none")},getHSLAngle:function(w,z,c,b){var v=w-b-k.hslWheelRadius-(3*k.pickerWidth/2)+0.01;var A=z-c-k.hslWheelRadius-(3*k.pickerWidth/2)+0.01;var i=Math.sqrt(v*v+A*A);var a=k.hslWheelRadius/i;var B=Math.asin(v/i);var h=Math.round((180/Math.PI)*B);var f=k.pickerRadius+(v*a)+$("#rainbowColorPicker").position().left-(k.pickerWidth/2);var d=k.pickerRadius+(A*a)+$("#rainbowColorPicker").position().top-(k.pickerWidth/2);if(i<k.hslWheelRadius){var d=k.pickerRadius+A-(k.pickerWidth/2);var f=k.pickerRadius+v-(k.pickerWidth/2)}if(z>(c+k.hslWheelRadius+(3/2*k.pickerWidth))){h=(k.numDegrees/2)-h}else{if(w<(b+k.hslWheelRadius+(3/2*k.pickerWidth))){h=k.numDegrees+h}}if(h>360){var h=h-k.numDegrees}var h=Math.abs(h);return{top:d,left:f,angle:h,hypot:i}},hslSet:function(f){function d(){if(f.hypot<b){var z=k.hslLimit/2}else{if(f.hypot>=b&&f.hypot<h){var A=k.hslLimit/2;var C=f.angle*k.hslLimit/k.numDegrees;var D=(C-A)/(h-b);var z=(D*(f.hypot-b))+A}else{if(f.hypot>=h&&f.hypot<c){var z=f.angle*k.hslLimit/k.numDegrees}else{if(f.hypot>=c){if(f.angle<k.flatColorArc){var z=0}else{if(f.angle>=k.flatColorArc&&f.angle<=(k.numDegrees-k.flatColorArc)){var q=(k.numDegrees+(2*k.flatColorArc))/k.numDegrees;var B=(f.angle-k.flatColorArc)*q;var z=k.hslLimit*B/k.numDegrees}else{if(f.angle>(k.numDegrees-k.flatColorArc)){var z=k.hslLimit}}}}}}}return z}function r(){q=k.hslLimit;if(f.hypot>=b&&f.hypot<c){var v=c/(c-b);var w=(f.hypot-b)*v;var z=k.hslLimit/c;var q=k.hslLimit-(z*w)}if(f.hypot>=c){var q=0}return q}var b=k.pickerWidth/2;var h=k.pickerWidth;var c=k.hslWheelRadius-(k.pickerWidth/5);var a=d();var i=r();k.updateDisplay({h:false,s:i,l:a})},hslDragStop:function(a){k.hslDrag(a);k.dragEl=false;k.cpCenter=false;k.applyToWidget(null);$("#colorPickerElement, #lightDarkOverlay").css("cursor","default")},populateAdvancedGradient:function(){var b=k.getWidgetForCP();if(b.bg=="s"){k.colorStopNumber=1;return false}else{if(b.bgc[0]==="rgba(0,0,0,0.0)"&&b.bgc[1]=="rgba(0,0,0,0.0)"){k.colorStopNumber=1;return false}else{var c=(b.bgd)?$.merge([],b.bgd):[1];var a=(b.bgc)?$.merge([],b.bgc):["#fff"]}}$("#gradientTypeSelector").val(b.bg);k.removeColorStop(null,"all",true);k.addColorStops(null,a,c,true);return false},redraw:function(a){var d=fluid.main.project.widgets.get(a).toJSON();var b=$("#"+a);if(b.length){var c=m._setTMPLVars(a,d,false,false);c.absTLWH=[parseInt(b.css("top")),parseInt(b.css("left")),b.outerWidth(),b.outerHeight()];m._drawCanvasOrImage(b,c)}},sortApplyColors:function(a){var b=$(a.target).css("background-color");k.applyToWidget(null,false,b)},getCurrentColor:"rgb(0,0,0)",applyToWidget:function(d,b,c){function u(){i=fluid.command.create("setBackgroundColor",{id:a(k.getSelectedOnly(v)),color:h,event:$.extend({},d)})}var v=k.getSelectedOnly();var h=(c)?c:$("#bgColorDisplay").css("background-color");var i;function a(q){return q.map(function(){return $(this).attr("id")}).get()}if(k.lastAction=="showTextColor"){var v=fluid.selection.getSelectionModel().getTextWidgets().getElements();i=fluid.command.create("setColor",{id:a(v),color:h})}else{if(k.lastAction=="showFlatColor"||k.lastAction=="showGradientGallery"||k.lastAction=="showColorStopEditor"){u()}else{if(k.lastAction=="showAdvancedGradientEditor"){var w=v.first().attr("id");var f=m.get(w);if(f.bgc){if(f.bgc.length>0){k.getCurrentColor=f.bgc[0]}}h=k.getCurrentColor;if(d){var z=$(d.target);if(z.hasClass("gradientStopSlider")){if(d.type=="mouseup"){u()}else{k.applyToBackground(d,h,v,h)}}else{u()}}else{u()}}else{if(k.lastAction=="showBorder"){i=fluid.command.create("setBorderColor",{id:a(k.getSelectedOnly(v)),color:h})}}}}if(i){i.dispatchTo("fluid.controllers.widget",!b)}},applyToBackground:function(f,h,b,i){function c(){var Q=$(this).attr("id");var I=$.extend(true,{},m.get(Q));if($(this).hasClass("rootWidget")&&!I.bg&&I.seg){return true}if(!I.bg&&I.tc){return}if(k.lastAction=="showFlatColor"){var V=(I.bgc)?I.bgc[0]:"rgba(0,0,0,0.50)";var T=k.addAlpha(V,d,a);var X=T.split();delete I.bgd;m.set({bg:"c",bgc:X},Q)}else{if(k.lastAction=="showAdvancedGradientEditor"){var R=$("#gradientTypeSelector").val();var J=new Array(k.colorStopAmount);var S=new Array(k.colorStopAmount);var V=i;for(var O=0;O<k.colorStopAmount;O++){var L=$("#gradientStop .colorPickerTrigger").eq(O).css("background-color");J[O]=k.addAlpha(V,L,a);S[O]=$("#gradientStop .gradientStopSlider").eq(O).attr("value")/100}m.set({bg:R,bgc:J,bgd:S},Q)}else{if(k.lastAction=="showGradientGallery"){var W=$.parseJSON($(f.originalEvent.target).attr("data-color"));var N=$.extend(true,{},W);var V=(I.bgc)?I.bgc[0]:"rgb(0,0,0)";if(W.bgc[0]=="rgba(0,0,0,0.0)"){N=N}else{for(var P=0;P<W.bgc.length;P++){var M=W.bgc[P];var K=j.hex2rgba(M);N.bgc[P]=k.addAlpha(V,K,a)}}m.set(N,Q);var U=m.get(Q)}else{if(k.lastAction=="showColorStopEditor"){var X=$.merge([],I.bgc);var V=X[k.colorStopNumber];var T=k.addAlpha(V,d);X[k.colorStopNumber]=T;m.set({bgc:X},Q)}}}}k.redraw(Q)}b=b||k.getSelectedOnly();var d=h||$("#bgColorDisplay").css("background-color");var a=true;b.each(c);fluid.main.fire("colorpickercolorapplied","background");return false},applyToBorder:function(f,a){function b(w,z,h){var u=w[1];var i=k.addAlpha(u,d);w[1]=i;var v={};v[h]=w;fluid.main.project.widgets.get(z).set(v);return i}function c(){var z=$(this).attr("id");var A=fluid.main.project.widgets.get(z).toJSON();if($(this).hasClass("rootWidget")&&!A.b){return true}var v=$.extend(true,{},A);if(v.b||v.bbs||v.bts||v.bms||v.bls||v.brs||v.bs){var w=["b","bs","bts","bls","bms","bbs","brs"];for(var h=0;h<w.length;h++){if(v[w[h]]){var B=v[w[h]];var i=b(B,z,w[h])}}}else{var B=[0,"#000",0];var i=b(B,z)}k.redraw(z)}var d=f||$("#bgColorDisplay").css("background-color");a=a||k.getSelectedOnly();a.each(c);fluid.main.fire("colorpickercolorapplied","border");return false},addAlpha:function(c,h,s){var c=(c)?c:"rgba(0,0,0,1.0)";var t=c.match(/rgba/gi);if(t==null){var i=h}else{var a=h.match(/\d+/g);var b=c.match(/\d+/g);var d=b.length;var f=1;if(d==4){f=b[3]}else{if(d==5){f=b[3]+"."+b[4]}}if(s){f=(parseFloat(f)==0)?1:f}var i="rgba("+a[0]+","+a[1]+","+a[2]+","+f+")"}return i},tempTextId:false,applyToText:function(c,h){function a(A,B,w){var v=A.ts;var z=f(v);m.set({ts:z},B);$(w).find(".widgetText").attr("style",z);b.css("background-color",i)}function f(B){var C=B.split(/;/);for(var E=0;E<C.length-1;E++){if(C[E].match("color")){var H=E;C[H]="color:"+i}}var F=new Array();for(var D=0;D<C.length-1;D++){F[D]=C[D]+";"}var G=F.toString();var A=G.replace(/;,/gi,";");return A}function d(){var s=$(this).attr("id");var t=m.get(s);if("ts" in t){a(t,s,this)}}var b=$("#textColor");var i=c||$("#bgColorDisplay").css("background-color");h.each(d);var h=h||fluid.selection.getSelectionModel().getTextWidgets().getElements();b.css("background-color",i);return false},removeColorStop:function(b,c,a){if(c=="all"){c=$("#gradientStop .colorStopOption")}c.remove();k.setColorStopProperties(b,a)},addColorStops:function(a,d,f,h){if(!d){d=["#000"]}if(!f){f=[1]}for(var c=0;c<d.length;c++){var b=Math.round(f[c]*100);$("#tmplGradientColorStop").tmpl({bgColor:d[c],bgIndex:f[c],val:b}).appendTo("#gradientStop")}k.setColorStopProperties(a,h)},colorStopAmount:1,setColorStopProperties:function(a,z){var h=$("#gradientStop .colorStopOption");var w=h.index();var b=w+1;k.colorStopAmount=b;var f=$("#gradientStop .colorStopButton");var v=$("#gradientStop .gradientStopSlider");var A=$("#gradientStop .colorStopDelete");if(!z&&(b==2)){var i=parseInt(v.eq(0).val());if(i==100){var d=50;v.eq(0).val(d);$("#gradientStop .colorStopIndicator").eq(0).text(d)}}for(var c=0;c<b;c++){h.eq(c).attr("data-colorStop",c);f.eq(c).attr("data-colorStop",c);v.eq(c).attr("data-colorStop",c);A.eq(c).attr("data-colorStop",c)}k.applyToWidget(null,z)},extractBorderColor:function(a){var c=fluid.main.project.widgets.get(a).toJSON();var b=c.b[1]||"#333";return b}};n.exports=k},{"./class-propertyInspectorController":26,"./class-widget":37,"./utils":69}],68:[function(j,i,f){var h={checkVATNumber:function(a,z){var d=new Array();var c="GB";if(z){z=z.replace(/\s*/gi,"").toUpperCase()}a=a.replace(/\s*/gi,"");d.push(/^(AT)U(\d{8})$/);d.push(/^(BE)(0?\d{9})$/);d.push(/^(BG)(\d{9,10})$/);d.push(/^(CH)E(\d{9})((MWST)|(IVA)|(TVA))/);d.push(/^(CY)([0-5|9]\d{7}[A-Z])$/);d.push(/^(CZ)(\d{8,10})(\d{3})?$/);d.push(/^(DE)([1-9]\d{8})$/);d.push(/^(DK)((\d{8}))$/);d.push(/^(EE)(10\d{7})$/);d.push(/^(EL)(\d{9})$/);d.push(/^(ES)([A-Z]\d{8})$/);d.push(/^(ES)([A-H|N-S|W]\d{7}[A-J])$/);d.push(/^(ES)([0-9|Y|Z]\d{7}[A-Z])$/);d.push(/^(ES)([K|L|M|X]\d{7}[A-Z])$/);d.push(/^(EU)(\d{9})$/);d.push(/^(FI)(\d{8})$/);d.push(/^(FR)(\d{11})$/);d.push(/^(FR)[(A-H)|(J-N)|(P-Z)]\d{10}$/);d.push(/^(FR)\d[(A-H)|(J-N)|(P-Z)]\d{9}$/);d.push(/^(FR)[(A-H)|(J-N)|(P-Z)]{2}\d{9}$/);d.push(/^(GB)?(\d{9})$/);d.push(/^(GB)?(\d{12})$/);d.push(/^(GB)?(GD\d{3})$/);d.push(/^(GB)?(HA\d{3})$/);d.push(/^(GR)(\d{8,9})$/);d.push(/^(HR)(\d{11})$/);d.push(/^(HU)(\d{8})$/);d.push(/^(IE)(\d{7}[A-W]{1,2})$/);d.push(/^(IE)([7-9][A-Z\*\+)]\d{5}[A-W])$/);d.push(/^(IT)(\d{11})$/);d.push(/^(LV)(\d{11})$/);d.push(/^(LT)(\d{9}|\d{12})$/);d.push(/^(LU)(\d{8})$/);d.push(/^(MT)([1-9]\d{7})$/);d.push(/^(NL)(\d{9})B\d{2}$/);d.push(/^(PL)(\d{10})$/);d.push(/^(PT)(\d{9})$/);d.push(/^(RO)([1-9]\d{1,9})$/);d.push(/^(SI)([1-9]\d{7})$/);d.push(/^(SK)([1-9]\d[(2-4)|(6-9)]\d{7})$/);d.push(/^(SE)(\d{10}01)$/);var s=a.toUpperCase();var t=[" ","-",",","."];for(var v=0;v<t.length;v++){while(s.indexOf(t[v])!=-1){s=s.slice(0,s.indexOf(t[v]))+s.slice(s.indexOf(t[v])+1)}}var A=false;var u=false;if(z){switch(z){case"AT":if(z=="AT"){u=true}break;case"BE":if(z=="BE"){u=true}break;case"BG":if(z=="BG"){u=true}break;case"CH":if(z=="CH"){u=true}case"CY":if(z=="CY"){u=true}break;case"CZ":if(z=="CZ"){u=true}break;case"DE":if(z=="DE"){u=true}break;case"DK":if(z=="DK"){u=true}break;case"EE":if(z=="EE"){u=true}break;case"EL":if(z=="GR"){u=true}break;case"ES":if(z=="ES"){u=true}break;case"EU":if(z=="EU"){u=true}break;case"FI":if(z=="FI"){u=true}break;case"FR":if(z=="FR"||z=="GF"||z=="PF"||z=="TF"){u=true}break;case"GB":if(z=="GB"){u=true}break;case"GR":if(z=="GR"){u=true}break;case"HR":if(z=="HR"){u=true}break;case"HU":if(z=="HU"){u=true}break;case"IE":if(z=="IE"){u=true}break;case"IT":if(z=="IT"){u=true}break;case"LT":if(z=="LT"){u=true}break;case"LU":if(z=="LU"){u=true}break;case"LV":if(z=="LV"){u=true}break;case"MT":if(z=="MT"){u=true}break;case"NL":if(z=="NL"){u=true}break;case"PL":if(z=="PL"){u=true}break;case"PT":if(z=="PT"){u=true}break;case"RO":if(z=="RO"){u=true}break;case"SE":if(z=="SE"){u=true}break;case"SI":if(z=="SI"){u=true}break;case"SK":if(z=="SK"){u=true}break;default:u=false}}for(v=0;v<d.length;v++){if(d[v].test(s)){var b=RegExp.$1;var w=RegExp.$2;if(b.length==0){b=c}switch(b){case"AT":A=h.ATVATCheckDigit(w);u=(!z||z=="AT");break;case"BE":A=h.BEVATCheckDigit(w);u=(!z||z=="BE");break;case"BG":A=h.BGVATCheckDigit(w);u=(!z||z=="BG");break;case"CH":A=h.CHVATCheckDigit(w);u=(!z||z=="CH");break;case"CY":A=h.CYVATCheckDigit(w);u=(!z||z=="CY");break;case"CZ":A=h.CZVATCheckDigit(w);u=(!z||z=="CZ");break;case"DE":A=h.DEVATCheckDigit(w);u=(!z||z=="DE");break;case"DK":A=h.DKVATCheckDigit(w);u=(!z||z=="DK");break;case"EE":A=h.EEVATCheckDigit(w);u=(!z||z=="EE");break;case"EL":A=h.ELVATCheckDigit(w);u=(!z||z=="GR");break;case"ES":A=h.ESVATCheckDigit(w);u=(!z||z=="ES");break;case"EU":A=h.EUVATCheckDigit(w);u=(!z||z=="EU");break;case"FI":A=h.FIVATCheckDigit(w);u=(!z||z=="FI");break;case"FR":A=h.FRVATCheckDigit(w);u=(!z||z=="FR"||z=="GF"||z=="PF"||z=="TF");break;case"GB":A=h.UKVATCheckDigit(w);u=(!z||z=="GB");break;case"GR":A=h.ELVATCheckDigit(w);u=(!z||z=="GR");break;case"HR":A=h.HRVATCheckDigit(w);u=(!z||z=="HR");break;case"HU":A=h.HUVATCheckDigit(w);u=(!z||z=="HU");break;case"IE":A=h.IEVATCheckDigit(w);u=(!z||z=="IE");break;case"IT":A=h.ITVATCheckDigit(w);u=(!z||z=="IT");break;case"LT":A=h.LTVATCheckDigit(w);u=(!z||z=="LT");break;case"LU":A=h.LUVATCheckDigit(w);u=(!z||z=="LU");break;case"LV":A=h.LVVATCheckDigit(w);u=(!z||z=="LV");break;case"MT":A=h.MTVATCheckDigit(w);u=(!z||z=="MT");break;case"NL":A=h.NLVATCheckDigit(w);u=(!z||z=="NL");break;case"PL":A=h.PLVATCheckDigit(w);u=(!z||z=="PL");break;case"PT":A=h.PTVATCheckDigit(w);u=(!z||z=="PT");break;case"RO":A=h.ROVATCheckDigit(w);u=(!z||z=="RO");break;case"SE":A=h.SEVATCheckDigit(w);u=(!z||z=="SE");break;case"SI":A=h.SIVATCheckDigit(w);u=(!z||z=="SI");break;case"SK":A=h.SKVATCheckDigit(w);u=(!z||z=="SK");break;default:if(z){A=false}else{A=true}break}break}}return{valid_country:u,valid_vat:A,number:s}},ATVATChackDigit:function(b){var c=0;var a=[1,2,1,2,1,2,1];var m=0;for(var d=0;d<7;d++){m=Number(b.charAt(d))*a[d];if(m>9){c=c+Math.floor(m/10)+m%10}else{c=c+m}}c=10-(c+4)%10;if(c==10){c=0}if(c==b.slice(7,8)){return true}else{return false}},BEVATCheckDigit:function(a){if(a.length==9){a="0"+a}if(a.slice(1,2)==0){return false}if(97-a.slice(0,8)%97==a.slice(8,10)){return true}else{return false}},BGVATCheckDigit:function(c){if(c.length==9){var d=0;var o=0;for(var n=0;n<8;n++){o=o+Number(c.charAt(n))*(n+1)}d=o%11;if(d!=10){if(d==c.slice(8)){return true}else{return false}}var o=0;for(var n=0;n<8;n++){o=o+Number(c.charAt(n))*(n+3)}d=o%11;if(d==10){d=0}if(d==c.slice(8)){return true}else{return false}}if((/^\d\d[0-5]\d[0-3]\d\d{4}$/).test(c)){var a=Number(c.slice(2,4));if((a>0&&a<13)||(a>20&a<33)){var b=[2,4,8,5,10,9,7,3,6];var d=0;for(var n=0;n<9;n++){d=d+Number(c.charAt(n))*b[n]}d=d%11;if(d==10){d=0}if(d==c.substr(9,1)){return true}}}var b=[21,19,17,13,11,9,7,3,1];var d=0;for(var n=0;n<9;n++){d=d+Number(c.charAt(n))*b[n]}if(d%10==c.substr(9,1)){return true}var b=[4,3,2,7,6,5,4,3,2];var d=0;for(var n=0;n<9;n++){d=d+Number(c.charAt(n))*b[n]}d=11-d%11;if(d==10){return false}if(d==11){d=0}if(d==c.substr(9,1)){return true}else{return false}},CHVATCheckDigit:function(b){var c=0;var a=[5,4,3,2,7,6,5,4];for(var d=0;d<8;d++){c=c+Number(b.charAt(d))*a[d]}c=(11-(c%11))%11;if(c==b.slice(8,9)){return true}else{return false}},CYVATCheckDigit:function(a){if(Number(a.slice(0,2)==12)){return false}var b=0;for(var c=0;c<8;c++){var d=Number(a.charAt(c));if(c%2==0){switch(d){case 0:d=1;break;case 1:d=0;break;case 2:d=5;break;case 3:d=7;break;case 4:d=9;break;default:d=d*2+3}}b=b+d}b=b%26;b=String.fromCharCode(b+65);if(b==a.substr(8,1)){return true}else{return false}},CZVATCheckDigit:function(b){var c=0;var q=[8,7,6,5,4,3,2];var d=new Array();d[0]=(/^\d{8}$/);d[1]=(/^[0-5][0-9][0|1|5|6]\d[0-3]\d\d{3}$/);d[2]=(/^6\d{8}$/);d[3]=(/^\d{2}[0-3|5-8]\d[0-3]\d\d{4}$/);var o=0;if(d[0].test(b)){for(var o=0;o<7;o++){c=c+Number(b.charAt(o))*q[o]}c=11-c%11;if(c==10){c=0}if(c==11){c=1}if(c==b.slice(7,8)){return true}else{return false}}else{if(d[1].test(b)){if(p=Number(b.slice(0,2))>53){return false}return true}else{if(d[2].test(b)){for(var o=0;o<7;o++){c=c+Number(b.charAt(o+1))*q[o]}c=11-c%11;if(c==10){c=0}if(c==11){c=1}var a=[8,7,6,5,4,3,2,1,0,9,10];if(a[c-1]==b.slice(8,9)){return true}else{return false}}else{if(d[3].test(b)){var p=Number(b.slice(0,2))+Number(b.slice(2,4))+Number(b.slice(4,6))+Number(b.slice(6,8))+Number(b.slice(8));if(p%11==0&&Number(b)%11==0){return true}else{return false}}}}}return false},DEVATCheckDigit:function(a){var b=10;var c=0;var m=0;for(var d=0;d<8;d++){c=(Number(a.charAt(d))+b)%10;if(c==0){c=10}b=(2*c)%11}if(11-b==10){m=0}else{m=11-b}if(m==a.slice(8,9)){return true}else{return false}},DKVATCheckDigit:function(b){var c=0;var a=[2,7,6,5,4,3,2,1];for(var d=0;d<8;d++){c=c+Number(b.charAt(d))*a[d]}c=c%11;if(c==0){return true}else{return false}},EEVATCheckDigit:function(b){var c=0;var a=[3,7,1,3,7,1,3,7];for(var d=0;d<8;d++){c=c+Number(b.charAt(d))*a[d]}c=10-c%10;if(c==10){c=0}if(c==b.slice(8,9)){return true}else{return false}},ELVATCheckDigit:function(b){var c=0;var a=[256,128,64,32,16,8,4,2];if(b.length==8){b="0"+b}for(var d=0;d<8;d++){c=c+Number(b.charAt(d))*a[d]}c=c%11;if(c>9){c=0}if(c==b.slice(8,9)){return true}else{return false}},ESVATCheckDigit:function(b){var c=0;var p=0;var a=[2,1,2,1,2,1,2];var d=new Array();d[0]=(/^[A-H|J|U|V]\d{8}$/);d[1]=(/^[A-H|N-S|W]\d{7}[A-J]$/);d[2]=(/^[0-9|Y|Z]\d{7}[A-Z]$/);d[3]=(/^[K|L|M|X]\d{7}[A-Z]$/);var o=0;if(d[0].test(b)){for(o=0;o<7;o++){p=Number(b.charAt(o+1))*a[o];if(p>9){c=c+Math.floor(p/10)+p%10}else{c=c+p}}c=10-c%10;if(c==10){c=0}if(c==b.slice(8,9)){return true}else{return false}}else{if(d[1].test(b)){for(o=0;o<7;o++){p=Number(b.charAt(o+1))*a[o];if(p>9){c=c+Math.floor(p/10)+p%10}else{c=c+p}}c=10-c%10;c=String.fromCharCode(c+64);if(c==b.slice(8,9)){return true}else{return false}}else{if(d[2].test(b)){var q=b;if(q.substring(0,1)=="Y"){q=q.replace(/Y/,"1")}if(q.substring(0,1)=="Z"){q=q.replace(/Z/,"2")}return q.charAt(8)=="TRWAGMYFPDXBNJZSQVHLCKE".charAt(Number(q.substring(0,8))%23)}else{if(d[3].test(b)){return b.charAt(8)=="TRWAGMYFPDXBNJZSQVHLCKE".charAt(Number(b.substring(1,8))%23)}else{return false}}}}},EUVATCheckDigit:function(a){return true},FIVATCheckDigit:function(b){var c=0;var a=[7,9,10,5,8,4,2];for(var d=0;d<7;d++){c=c+Number(b.charAt(d))*a[d]}c=11-c%11;if(c>9){c=0}if(c==b.slice(7,8)){return true}else{return false}},FRVATCheckDigit:function(a){if(!(/^\d{11}$/).test(a)){return false}var b=a.substring(2);b=(b*100+12)%97;if(b==a.slice(0,2)){return true}else{return false}},HRVATCheckDigit:function(a){var b=10;var c=0;var m=0;for(var d=0;d<10;d++){c=(Number(a.charAt(d))+b)%10;if(c==0){c=10}b=(2*c)%11}if((b+a.slice(10,11)*1)%10==1){return true}else{return false}},HUVATCheckDigit:function(b){var c=0;var a=[9,7,3,1,9,7,3];for(var d=0;d<7;d++){c=c+Number(b.charAt(d))*a[d]}c=10-c%10;if(c==10){c=0}if(c==b.slice(7,8)){return true}else{return false}},IEVATCheckDigit:function(b){if(b.length===9){return true}var c=0;var a=[8,7,6,5,4,3,2];if(/^\d[A-Z\*\+]/.test(b)){b="0"+b.substring(2,7)+b.substring(0,1)+b.substring(7,8)}for(var d=0;d<7;d++){c=c+Number(b.charAt(d))*a[d]}c=c%23;if(c==0){c="W"}else{c=String.fromCharCode(c+64)}if(c==b.slice(7,8)){return true}else{return false}},ITVATCheckDigit:function(b){var c=0;var a=[1,2,1,2,1,2,1,2,1,2];var m;if(Number(b.slice(0,7))==0){return false}m=Number(b.slice(7,10));if((m<1)||(m>201)&&m!=999&&m!=888){return false}for(var d=0;d<10;d++){m=Number(b.charAt(d))*a[d];if(m>9){c=c+Math.floor(m/10)+m%10}else{c=c+m}}c=10-c%10;if(c>9){c=0}if(c==b.slice(10,11)){return true}else{return false}},LTVATCheckDigit:function(b){if(b.length==9){if(!(/^\d{7}1/).test(b)){return false}var c=0;for(var d=0;d<8;d++){c=c+Number(b.charAt(d))*(d+1)}if(c%11==10){var a=[3,4,5,6,7,8,9,1];c=0;for(d=0;d<8;d++){c=c+Number(b.charAt(d))*a[d]}}c=c%11;if(c==10){c=0}if(c==b.slice(8,9)){return true}else{return false}}else{if(!(/^\d{10}1/).test(b)){return false}var c=0;var a=[1,2,3,4,5,6,7,8,9,1,2];for(var d=0;d<11;d++){c=c+Number(b.charAt(d))*a[d]}if(c%11==10){var a=[3,4,5,6,7,8,9,1,2,3,4];c=0;for(d=0;d<11;d++){c=c+Number(b.charAt(d))*a[d]}}c=c%11;if(c==10){c=0}if(c==b.slice(11,12)){return true}else{return false}}},LUVATCheckDigit:function(a){if(a.slice(0,6)%89==a.slice(6,8)){return true}else{return false}},LVVATCheckDigit:function(b){if((/^[0-3]/).test(b)){if((/^[0-3][0-9][0-1][0-9]/).test(b)){return true}else{return false}}else{var c=0;var a=[9,1,4,8,3,10,2,5,7,6];for(var d=0;d<10;d++){c=c+Number(b.charAt(d))*a[d]}if(c%11==4&&b[0]==9){c=c-45}if(c%11==4){c=4-c%11}else{if(c%11>4){c=14-c%11}else{if(c%11<4){c=3-c%11}}}if(c==b.slice(10,11)){return true}else{return false}}},MTVATCheckDigit:function(b){var c=0;var a=[3,4,6,7,8,9];for(var d=0;d<6;d++){c=c+Number(b.charAt(d))*a[d]}c=37-c%37;if(c==b.slice(6,8)*1){return true}else{return false}},NLVATCheckDigit:function(b){var c=0;var a=[9,8,7,6,5,4,3,2];for(var d=0;d<8;d++){c=c+Number(b.charAt(d))*a[d]}c=c%11;if(c>9){c=0}if(c==b.slice(8,9)){return true}else{return false}},PLVATCheckDigit:function(b){var c=0;var a=[6,5,7,2,3,4,5,6,7];for(var d=0;d<9;d++){c=c+Number(b.charAt(d))*a[d]}c=c%11;if(c>9){c=0}if(c==b.slice(9,10)){return true}else{return false}},PTVATCheckDigit:function(b){var c=0;var a=[9,8,7,6,5,4,3,2];for(var d=0;d<8;d++){c=c+Number(b.charAt(d))*a[d]}c=11-c%11;if(c>9){c=0}if(c==b.slice(8,9)){return true}else{return false}},ROVATCheckDigit:function(c){var b=[7,5,3,2,1,7,5,3,2];var a=c.length;b=b.slice(10-a);var d=0;for(var m=0;m<c.length-1;m++){d=d+Number(c.charAt(m))*b[m]}d=(10*d)%11;if(d==10){d=0}if(d==c.slice(c.length-1,c.length)){return true}else{return false}},SEVATCheckDigit:function(c){var d=0;var a;for(var n=0;n<9;n=n+2){a=Number(c.charAt(n));d=d+Math.floor(a/5)+((a*2)%10)}var o=0;for(var n=1;n<9;n=n+2){o=o+Number(c.charAt(n))}var b=(10-(d+o)%10)%10;if(b==c.slice(9,10)){return true}else{return false}},SIVATCheckDigit:function(b){var c=0;var a=[8,7,6,5,4,3,2];for(var d=0;d<7;d++){c=c+Number(b.charAt(d))*a[d]}c=11-c%11;if(c==10){c=0}if(c!=11&&c==b.slice(7,8)){return true}else{return false}},SKVATCheckDigit:function(a){if(Number(a%11)==0){return true}else{return false}},UKVATCheckDigit:function(d){var c=[8,7,6,5,4,3,2];if(d.substr(0,2)=="GD"){if(d.substr(2,3)<500){return true}else{return false}}if(d.substr(0,2)=="HA"){if(d.substr(2,3)>499){return true}else{return false}}var n=0;if(Number(d.slice(0))==0){return false}var a=Number(d.slice(0,7));for(var o=0;o<7;o++){n=n+Number(d.charAt(o))*c[o]}var b=n;while(b>0){b=b-97}b=Math.abs(b);if(b==d.slice(7,9)&&a<9990001&&(a<100000||a>999999)&&(a<9490001||a>9700000)){return true}if(b>=55){b=b-55}else{b=b+42}if(b==d.slice(7,9)&&a>1000000){return true}else{return false}}};i.exports=h},{}],69:[function(l,k,h){var j=l("./class-storage");(function(){var b=0;var a=["ms","moz","webkit","o"];for(var c=0;c<a.length&&!window.requestAnimationFrame;++c){window.requestAnimationFrame=window[a[c]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[a[c]+"CancelAnimationFrame"]||window[a[c]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame){window.requestAnimationFrame=function(q,f){var p=new Date().getTime();var d=Math.max(0,16-(p-b));var r=window.setTimeout(function(){q(p+d)},d);b=p+d;return r}}if(!window.cancelAnimationFrame){window.cancelAnimationFrame=function(d){clearTimeout(d)}}}());var i={ensureInstanceId:function(){var a=localStorage.getItem("instanceId");if(typeof g_instanceId=="undefined"||!g_instanceId||!a||g_instanceId!=a){g_instanceId=1+parseInt(Math.random()*99999999);localStorage.setItem("instanceId",g_instanceId)}},selectText:function(a){var b=(a=="control+a")?$(".ui-selected").find("textarea"):$(this);b.focus();b.select();return false},getTLWH:function(c){var a=$(c);if(a.length==0){return{top:0,left:0,width:0,height:0}}var d=a.offset();var b=a.outerWidth();var f=a.outerHeight();return{top:d.top,left:d.left,width:b,height:f}},getCenterPoint:function(d){var b=i.getTLWH(d);var a=Math.floor(b.top+(b.height/2));var c=Math.floor(b.left+(b.width/2));return{top:a,left:c}},getTranslateDistanceToCenter:function(E,a){var F=$(E).outerWidth();var I=$(E).outerHeight();var M=parseFloat($(E).css("top"));var H=parseFloat($(E).css("left"));var K=i.getCenterPoint(a);var G=i.getTLWH(a);var f=F-G.width;var D=I-G.height;var R=Math.max(0,f,D);var O=R==f?false:true;var Q=R==D?false:true;var N=-parseFloat($("#viewport").get(0).scrollTop);var L=-parseFloat($("#viewport").get(0).scrollLeft);var J=Q?M+I/2:M;var P=O?H+F/2:H;var b=K.top-J-N;var c=K.left-P-L;if(D>0){var d=0.5*G.height-95;b=b-d}return{top:b,left:c}},getBoundingAreaRelative:function(b){var a=$(b);if(a.length==0){return{top:0,left:0,bottom:0,right:0}}var c={top:null,left:null,right:null,bottom:null};$(a).each(function(){var d=$(this);var n={top:parseFloat(d.css("top")),left:parseFloat(d.css("left")),width:parseFloat(d.css("width")),height:parseFloat(d.css("height"))};if(d.hasClass("screen")){var f=$(".page",d);n={top:parseFloat(d.css("top")),left:parseFloat(d.css("left")),width:parseFloat(f.css("width")),height:parseFloat(f.css("height"))}}if((c.left>n.left)||c.left==null){c.left=~~n.left}if((c.top>n.top)||c.top==null){c.top=~~n.top}if((c.right<n.left+n.width)||c.right==null){c.right=~~(n.left+n.width)}if((c.bottom<n.top+n.height)||c.bottom==null){c.bottom=~~(n.top+n.height)}});return c},getBoundingArea:function(c){i.boundingLeft=null;i.boundingTop=null;i.boundingRight=null;i.boundingBottom=null;var a=$(c);if(a.length==0){return{top:0,left:0,bottom:0,right:0}}a.each(function(){var d=i.getTLWH(this);if((i.boundingLeft>d.left)||i.boundingLeft==null){i.boundingLeft=d.left}if((i.boundingTop>d.top)||i.boundingTop==null){i.boundingTop=d.top}if((i.boundingRight<d.left+d.width)||i.boundingRight==null){i.boundingRight=d.left+d.width}if((i.boundingBottom<d.top+d.height)||i.boundingBottom==null){i.boundingBottom=d.top+d.height}});var b={top:i.boundingTop,left:i.boundingLeft,bottom:i.boundingBottom,right:i.boundingRight};return b},guid:function(d){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz";var o=32;var b="";for(var c=0;c<o;c++){var f=Math.floor(Math.random()*a.length);b+=a.substring(f,f+1)}return d+"_"+b},prevent:function(a){a.stopPropagation();a.preventDefault();return false},arraysEqual:function(b,c){var a=b.length==c.length;if(a){for(var d=0,f=b.length;d<f;d++){a=b[d]===c[d];if(!a){break}}}return a},hslToHex:function(b){function c(o,m,n){if(n<0){n+=1}else{if(n>1){n-=1}}if(n*6<1){return o+(m-o)*n*6}if(n*2<1){return m}if(n*3<2){return o+(m-o)*(2/3-n)*6}return o}var r=b.h/360,w=b.s/100,s=b.l/100;var z,a;if(s<=0.5){a=s*(1+w)}else{a=s+w-(s*w)}z=s*2-a;var v=c(z,a,r+1/3);var f=c(z,a,r);var d=c(z,a,r-1/3);v=Math.round(v*255);f=Math.round(f*255);d=Math.round(d*255);v=parseInt(v).toString(16);f=parseInt(f).toString(16);d=parseInt(d).toString(16);if(v.length<2){v="0"+v}if(f.length<2){f="0"+f}if(d.length<2){d="0"+d}return v+f+d},hex2rgba:function(a,c){if(!a[0]=="#"){return false}if(a.indexOf("rgba(")===0){return a}if(a.indexOf("rgb(")===0){var b;a=a.replace("rgb(","rgba(");b=a.split(",");b[b.length-1]=parseInt(b[b.length-1]);b.push("1)");a=b.join(",");return a}if(a.length=="4"){a="#"+a[1]+a[1]+a[2]+a[2]+a[3]+a[3]}return"rgba("+(parseInt(a.substr(1,2),16))+","+(parseInt(a.substr(3,2),16))+","+(parseInt(a.substr(5,2),16))+","+(c||1)+")"},rgb2hex:function(b){b=b.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function a(c){return("0"+parseInt(c).toString(16)).slice(-2)}return"#"+a(b[1])+a(b[2])+a(b[3])},toHSL:function(z){var z=(z)?z:"rgb(0, 0, 0)";z=z.replace(/ /g,"");if(z.match(/hsla/gi)){return{h:z.match(/[0-9]*/g)[5],s:z.match(/[0-9]*/g)[7],l:z.match(/[0-9]*/g)[10]}}if(z.match(/hsl/gi)){return{h:z.match(/[0-9]*/g)[4],s:z.match(/[0-9]*/g)[6],l:z.match(/[0-9]*/g)[9]}}if(z.match(/#/gi)){if(z.length==4){z="#"+z[1]+z[1]+z[2]+z[2]+z[3]+z[3]}else{if(z.length!=7){z="#000000"}}var v=parseInt(z.substring(1,3),16);var c=parseInt(z.substring(3,5),16);var a=parseInt(z.substring(5,7),16)}else{if(z.match(/rgba/gi)){var v=z.match(/[0-9]*/g)[5];var c=z.match(/[0-9]*/g)[7];var a=z.match(/[0-9]*/g)[9]}else{if(z.match(/rgb/gi)){var v=z.match(/[0-9]*/g)[4];var c=z.match(/[0-9]*/g)[6];var a=z.match(/[0-9]*/g)[8]}}}v/=255,c/=255,a/=255;var s=Math.max(v,c,a);var f=Math.min(v,c,a);var d=0;var w=0;var r=(s+f)/2;if(s!=f){var b=s-f;w=(r<0.5)?b/(s+f):b/(2-s-f);switch(s){case v:d=(c-a)/b;break;case c:d=(a-v)/b+2;break;case a:d=(v-c)/b+4;break}d/=6;if(d<0){d+=1}}d=d*360;r=r*100;w=w*100;return{h:d,s:w,l:r}},replaceRgbaAlpha:function(b,c){var a=b.match(/rgba/i);if(a){ret=b.split(",");ret[ret.length-1]=c+")";ret=ret.join(",");return ret}return b},getRgbaAlpha:function(a){if(a[0]=="#"||a.indexOf("rgb(")!=-1){return 1}var b=a.split(",");b=b[b.length-1];b=parseFloat(b);return b},getAlphaFromColor:function(a){if(a[0]=="#"){return 1}else{if(a.indexOf("rgba(")===0){a=a.split(",");a=a[a.length-1].replace(")","");return a}}return 1},isMobileDevice:function(){var a=false;if(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i)){a=true}return a},hideBrowserBar:function(){var a=false;if(navigator.userAgent.match(/Android/i)){a=true}return a},isMouseOver:function(b,c){var a=c.offset();return b.pageX>=a.left&&b.pageX<(a.left+c.outerWidth())&&b.pageY>=a.top&&b.pageY<(a.top+c.outerHeight())},relativeMousePos:function(b,c){var a=c.offset();return{top:b.pageY-a.top,left:b.pageX-a.left}},animateRaf:function(z,t,c,u,a){if($.isFunction(c)){u=c;c=undefined}var w,f,s,b=false;var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(m){window.setTimeout(function(){m(new Date().valueOf())},16.667)};function v(m){if(!b&&m<946684800000){if(s){w=startTimeHiResClock;f=endTimeHiResClock;b=true}else{m=new Date().valueOf()}}var o=m-w;var n=f!=w?o/t:1;if(n<1){if(c){n=c(n,o,0,1,t)}z(n,a);d(v)}else{z(1,a);if(u&&$.isFunction(u)){window.setTimeout(u,10)}}}if(t===undefined){t=300}s=window.hasOwnProperty("performance")&&window.performance.hasOwnProperty("now");w=new Date().valueOf();startTimeHiResClock=s?window.performance.now():w;f=w+t;endTimeHiResClock=startTimeHiResClock+t;if(c){c=$.easing[c]}d(v)},toPercent:function(d,a,c){if(typeof d=="string"){var b=i.parsePercentString(d);d=b&&!isNaN(b)?b*a/100:parseFloat(d)}var n=d*100/a;var f=Math.pow(10,c);return(Math.round(n*f))/f},parsePercentString:function(a){var b=NaN;if(typeof a=="string"){var c=a.match(/^\s*(\d+(?:\.\d*)?|\.\d+)\s*\%\s*$/);if(c){b=parseFloat(c[1])}}return b},isPercentString:function(a){var b=i.parsePercentString(a);return Boolean(b)&&!isNaN(b)},fromPercentString:function(a,b){var c=i.parsePercentString(a);if(c&&!isNaN(c)){c*=b/100}return c},getNavigationKeyDirection:function(a){var b="";switch(a){case 37:b="left";break;case 38:b="top";break;case 39:b="right";break;case 40:b="bottom";break}return b},replaceTooltip:function(a){},Vector:(function(){function a(d,b,c){if(!(this instanceof a)){return new a(d,b,c)}if(d instanceof Object){b=d.y;c=d.z;d=d.x}c=c||0;if(typeof d!=="number"||typeof b!=="number"){d=b=c=0}this.x=d;this.y=b;this.z=c;a.created++}a.created=0;a.prototype={set:function(d,b,c){if(d instanceof Object){b=d.y;d=d.x;c=d.z}c=c||0;if(typeof d==="number"&&typeof b==="number"&&typeof c==="number"){this.x=d;this.y=b;this.z=c}return this},distanceTo:function(d){var f=this.x-d.x,b=this.y-d.y,c=this.z-d.z;return Math.sqrt(f*f+b*b+c*c)},distanceSqTo:function(d){var f=this.x-d.x,b=this.y-d.y,c=this.z-d.z;return f*f+b*b},plus:function(b){return new a(this.x+b.x,this.y+b.y,this.z+b.z)},minus:function(b){return new a(this.x-b.x,this.y-b.y,this.z-b.z)},scale:function(b){return new a(this.x*b,this.y*b,this.z*b)},dot:function(b){return this.x*b.x+this.y*b.y+this.z*b.z},magnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},angle:function(b){if(!b){b=a.I}else{return this.angle()-b.angle()}if(this.y<0){return 2*Math.PI-(new a(this.x,-this.y,this.y)).angle(b)}return Math.acos(this.dot(b)/(this.magnitude()*b.magnitude()))},rotateBy:function(b){if(b>Math.PI){return this.rotateBy(-(2*Math.PI-b))}else{if(b<-Math.PI){return this.rotateBy(2*Math.PI+b)}}return new a(this.x*Math.cos(b)-this.y*Math.sin(b),this.x*Math.sin(b)+this.y*Math.cos(b))},rotateTo:function(b){var c=b-this.angle();return this.rotateBy(c)},unitVector:function(){return this.scale(1/this.magnitude())},add:function(b){this.x+=b.x;this.y+=b.y;return this},sub:function(b){this.x-=b.x;this.y-=b.y;return this},mul:function(b){this.x*=b;this.y*=b;return this},rotBy:function(b){this.x=this.x*Math.cos(b)-this.y*Math.sin(b);this.y=this.x*Math.sin(b)+this.y*Math.cos(b);return this},rotTo:function(b){var c=b-this.angle();return this.rotBy(c)},copy:function(){return new a(this.x,this.y)}};a.I=Object.freeze(new a(1,0,0));a.J=Object.freeze(new a(0,1,0));a.K=Object.freeze(new a(0,0,1));return a}()),drawVectors:function(a,C,B){var f=[],z=[],d=B[0],u=[],c=C.length;for(var A=c-1,v=0;v<c;v++){z[A]=C[v].distanceTo(C[A]);A=v}for(var v=0,A=c-1;v<c;v++){u[v]=Math.min(d,z[A]/2,z[v]/2)}for(var A=c-1,v=0;v<c;v++){f[A]=C[v].minus(C[A]).unitVector().scale(u[A]);A=v}var b=C[0].plus(f[0]);a.moveTo(b.x,b.y);for(v=0;v<c;v++){var w=v<c-1?v+1:0;b=C[w].minus(f[v]);a.lineTo(b.x,b.y);b=C[w].plus(f[w]);a.quadraticCurveTo(C[w].x,C[w].y,b.x,b.y)}},getFitSize:function(c){var b,a,d=c.object.width>c.frame.width||c.object.height>c.frame.height,o=c.frame.width/c.frame.height,p=c.object.width/c.object.height;if(!d&&!c.expand){return c.object}var f={};if(o>p){b="height";a="width";f.top=0}else{b="width";a="height";f.left=0}f[b]=c.frame[b];f[a]=(c.frame[b]/c.object[b])*c.object[a];return f},isTaintedCanvas:function(a){a=a instanceof HTMLCanvasElement?a.getContext("2d"):a;try{return !a.getImageData(0,0,1,1)}catch(b){return b.code===18}}};i.getParentWindow=function(){var c;var a;try{c=window.frameElement.ownerDocument;a=c.defaultView}catch(b){a=null}return a};i.getTrueHeight=function(){return(window.hasOwnProperty("innerHeight")?window.innerHeight:$(window).height())||480};i.isPageInViewport=function(s,a){var r=a&&a.mode?a.mode:false;var t=a&&a.withPageFrame?a.withPageFrame:false;var b=fluid.zoom.getCurrentScale();var q=document.getElementById("viewport");var c={left:r==="init"?-fluid.main.project.get("canvasPosX")/b:q.scrollLeft/b,top:r==="init"?-fluid.main.project.get("canvasPosY")/b:q.scrollTop/b,width:window.innerWidth/b,height:window.innerHeight/b};if(r!=="init"&&fluid.zoom.getCtx()!=="project"&&fluid.zoom.getLibWidth()){c.left=c.left+fluid.zoom.getLibWidth()/b;c.width=c.width-fluid.zoom.getLibWidth()/b}c.right=c.left+c.width;c.bottom=c.top+c.height;var d=$("#pageFrame");if(t&&d.length&&d.parents("#"+s).length){c.left=c.left+50/b;c.right=c.right-50/b;c.bottom=c.bottom-50/b;c.top=c.top+85/b;c.height=c.bottom-c.top;c.width=c.right-c.left}var f=fluid.main.project.pages.get(s).toJSON();if(r!=="strict"&&((f.x<=c.right)&&(c.left<=f.x+f.width)&&(f.y<=c.bottom)&&(c.top<=f.y+f.height))){return true}else{if(r==="strict"&&((f.x+f.width<=c.right)&&(c.left<=f.x)&&(f.y+f.height<=c.bottom)&&(c.top<=f.y))){return true}}return false};i.getActivePage=function(){return $("#canvasPages > .screen.active").first()};i.getActivePageId=function(){return i.getActivePage().attr("id")};i.getLatestActiveProject=function(){var a;var b=fluid.main.account.get("projectIds");for(var c=b.length-1;c>=0;c--){if(fluid.main.projects.get(b[c]).get("active")!==false){a=b[c];break}}return a};i.findPositionOnScreen=function(c,B,t){function f(F,n,r){n=$.extend(true,[],n);var p=fluid.main.project.widgets.get(F).toJSON();var o=20;var s=p.tlwh[2];var H=p.tlwh[3];var m=(n[0]<n[1])?"Portrait":"Landscape";var q=n[0]+o;var G=n[1]+o;if(r!==m){q=n[1]+o;G=n[0]+o}d=((p.tlwh[0]>(G-o-5))||(p.tlwh[1]>(q-o-5)))?false:true}var d=false;if(t==true){var v=$(".page").attr("id");var u=fluid.main.project?fluid.main.project.toJSON():window.top.fluid.main.project.toJSON();var b=u.pageWH;var w=fluid.main.project?fluid.main.project.pages.get(v).toJSON():window.top.fluid.main.project.pages.get(v).toJSON();if(b){var z=B;var A=w.orientation;f(z,b,A)}}else{var v=i.getActivePageId();var a=fluid.main.project.widgets.getRoots(c);a.each(function(){var m=$(this).attr("id");var o=fluid.main.project.get("pageWH");var n=fluid.main.project.pages.get(v).get("orientation");f(m,o,n)})}return d};i.loadjscssfile=function(c,b){if(b=="js"){var a=document.createElement("script");a.setAttribute("type","text/javascript");a.setAttribute("src",c)}else{if(b=="css"){var a=document.createElement("link");a.setAttribute("rel","stylesheet");a.setAttribute("type","text/css");a.setAttribute("href",c)}}if(typeof a!="undefined"){document.getElementsByTagName("head")[0].appendChild(a)}};k.exports=i},{"./class-storage":33}]},{},[65]);